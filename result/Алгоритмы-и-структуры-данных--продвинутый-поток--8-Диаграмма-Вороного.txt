Ну вот, а вот теперь можно поговорить и о диаграмме Воронова. Да, причем, да, редкий случай. Ну, такие редкие случаи, там были. Раньше, конечно, самый...
Тут вот очень интересно, конечно. Раньше самый ранний алгоритм, который мы изучали в курсе, датируется, как вы помните, в 26-м году. Это был алгоритм Барувки.
Ну, скажем так, структура, которую мы сейчас будем изучать, она на самом деле датируется 1908 годом. Нет, об алгоритмах, конечно, речь не идет в данном случае, потому что это была чисто какая-то геометрическая структура со свойствами, которую можно полезно рассматривать.
Вот, которая, на самом деле, тоже совершенно в внезапных местах появляется. В чем структура, на самом деле, такая? Ну, можно сформулировать задачу, например, так.
Например, что... Давайте, у нас есть город. И в городе есть, ну, допустим, почтовых отделений. Ну, она известна, то есть там известна как пост-офис-пробла.
Вот, допустим, эти N-почтовых офисов, раз положенные, вот где-то в городе.
Ну, естественно, там каждый житель города, ну, допустим, город заселён там равномерно по плоскости, очень хочет, наверное, получать почту на ближайший к своему дому почтовый офис, правда?
И нам в том или ином виде интересно понимать, где этот офис находится. Ну, в каком виде? Ну, например, один из вариантов, скажем, отвечать на запросы в духе.
Дана точка, скажите, пожалуйста, в каком офис, в какой офис ей ходить. Ну, например, так, если формулировать в олимпиадном стиле.
Точки на плоскости?
Да, мы живём на плоскости, да. У нас святое, да, мы живём на плоскости. Вот.
У нас прямо почтовый офис, и каждый житель хочет включать.
Ну, вот. Ну, типа-то, ну, вот.
Задача отлайны.
А, может, ну, как всегда, как бы, персистентный СЭП в том случае, чего сделал это онлайн. Ну, вот. Потому что, смотрите, как на самом деле это делается.
Потому что, в случае зрения диаметрической структуры, пока мы не думаем о структурах данных, мы хотим понять, как это геометрически вообще может выглядеть.
Ну, значит, формулировать.
Ну, вот. Вот, давайте, ну, а как мы срубли? Ну...
Я сказал, что не очень хорошо.
Ну, с точки зрения математики можно сказать так. Давайте, хочется для каждой точки, например, найти множество точек, множество таких зелёных точек, что конкретно эта точка ближе для них, чем все остальные.
То есть, формально это звучит так. Пусть у нас есть множество, пусть эти точки так и называются. П1, П2 и так далее. Вот так и называется.
И мы введём понятие зечейка Воронова.
Да.
Зечейка Воронова. Соответственно, она, ну, будет так обозначаться, там, вор с индексом, вот это вот, покрасивое.
Вот. То есть, допустим, от И, ну, можно от И, можно от Фейнисова, неважно.
Это множество таких точек Q, что для любого Ж не равно И. Верно, что Дист.
Значит, между Q и ПИ там будет, по-любому, меньше, ну, надо, либо равно, допустим, чем Дист. От Q до ПЖ.
Вот такая вот неожиданность. Вот так вся неожиданность.
Вот давайте это множество, вот это множество назовём и этой ячейкой Воронова.
Так, покрасивое у вор, оно внизу, да? А И уже ко всему.
Да, это индекс, конечно. Ну, потому что ячейка Воронова зависит от всего этого множества, разумеется.
То есть, если я докину туда точку, то эта ячейка может буквально чуть-чуть поменяться очень сильно.
Вот. Ну вот. Ну и, собственно, заметим, что кроме границ, на самом деле, уже легко понять из определения, что плоскость там, видимо, разбивается на N ячейк Воронова. Правда?
Ну вот. Ну кроме границ.
Ну и, на самом деле, диаграмма Воронова, это, по сути, действительно, какое-то удобное представление этих ячеек с тем, чтобы удобно было работать.
Ну, чтобы было удобно работать, давайте для начала ответим на маленький простой вопрос.
А как вообще выглядит ячейка Воронова?
Ну, может, в другом вольне. В любом вольне, на другом вольне.
Кажется, это точно вы буквально множество.
Да, почему?
Переключение полуплоскостей.
Так. Да, больше переключение полуплоскостей.
А почему переключение полуплоскостей?
Ну, потому что что такое? Ну, если сказать, две точки, то они отделяются как раз селиноперпендикулярно между ними.
Ну, поэтому, если ячейк – это переключение полуплоскостей через селиноперпендикулярно.
Да, совершенно верно. Ведь, действительно, где находится геометрическое место точек, который ближе к ИТ-точке, тем, скажем, к ЖИТ.
Да, совершенно верно. Для этого мы рисуем в середину перпендикулярно.
И в сад, ну вот, и нужное множество точек – это просто полуплоскость относительно этого перпендикуляра.
И, соответственно, каждая из ячейка Воронова – это пересечение n-1 полуплоскости, получается.
Да, кайф.
Да, получается, действительно, кайф.
Такое замощение.
Ну, получается, действительно, замощение.
Вот давайте, ну, здесь, конечно, сложно так на точках нарисовать.
Но давайте попробуем себе представить, действительно, что это такое.
Значит, сделаем мы это вот.
Ну, вот, например, самый простой какой-нибудь пример – это вот можно нарисовать вот что-нибудь вот в таком душе.
Вот там, допустим, пять точек.
Вот давайте попробуем нарисовать диаграмму Воронова для вот этой точки.
Тогда вот мы рисуем, значит, середину перпендикулярно вот где-то вот здесь, да?
Вот, какая-то горница.
Ну, с другой стороны, также мы рисуем какой-то середину перпендикулярно здесь, здесь и, соответственно, здесь.
Что?
Что же?
Вот этот, да.
Ниже?
Да, да, да.
И четвертый, да.
Четвертый.
А, да, это я типа просто смотрю.
Так, да, ну, это правда.
Ну, я действительно просто смотрю.
Так, ну, вот, ну, тут, например, можно сказать, вот, что-то подобное.
Вот, в принципе, ячейка Воронова может выглядеть примерно вот таким вот способом.
Вот.
Ну вот.
Если смотреть ячейку для вот этой штуки, то что здесь получается?
Здесь получается середина перминикуляр.
И на самом деле легко убедиться, что он на самом деле вот в эту вершину должен быть.
В эту точку должен быть.
Ну потому что что это за точка?
Она равна удалена от этой точки и от этой точки, а также равна удалена от этой и от этой.
Следовательно, она равна для этой и от этой,
значит она тоже на середине перминикуляр, лежа.
Вот.
Вот. Да.
Получается вот такая вот красота.
Ну и в общем-то здесь тоже, вот обратите внимание, consistent.
У нас на картинке уже получилась интересная вот фарка.
Да, вот смотрите, вот это вот тоже середина перминикуляр.
Но обратите внимание, середина этого...
...то есть так сказать, середина отрезка между этими двумя точками
вполне может попасть в другую ячейку диаграмового Воронова.
в данном случае как видим все достаточно просто
то есть тут в общем-то действительно красота
но дальше конечно все может зависеть от того в каком виде мы хотим конечно это все хранить
ну тут действительно есть на самом деле всякие нетривиальные моменты
мы говорим пересечения полуплоскостей да но ведь мы помним что пересечения
полуплоскостей вообще бывает чем он чем бывает вообще пересечения полуплоскостей
ну бывает еще говорят таким называется бесконечным
вот такие страны кстати в науке это реально так называют как я с удивлением узнал
то есть это было забавно на самом деле потому что у меня в собственно диссертации возникало понятие
бесконечным много вершин не будет потому что каждая ячейка воронова это точно понятно
бесконечным нет потому что мы рассматриваем ну пока мы обычно рассматривается конечная переченье
конечного числа полуплоскостей вот что у нас тогда еще но бывают там всякие подряд то есть на
самом деле сразу говорим самый неприятный случай диаграммы воронова это случай когда у вас все
точки лежат на одной прямой вот такая красота то есть как всегда то есть когда то есть тогда
это единственный случай когда вот ячейка этой полосочки окажется то есть полоска то есть фигура
с не связанной внутри себя границы и это конечно неприятно ну так вот как минимум потому что
приходится это и хватит вот но с другой стороны конечно можно заметить что действительно но
с другой стороны можно заметить что это единственный проблемный случай но в том плане что в любом
ином случае диаграмма воронова это конечно множество то есть это штука связанная ну в
каком смысле связанная связанная в том плане что множество граничных точек образует связанное
множество но можно это но начнем даже попробуем это утверждение доказать то есть знаете
даже теорема это тема есть теорема то есть пункта если действительно все точки лежат на одной прямой
то диаграмма воронова но вот такая короче и пункт b да это был только пункта а вот пункт
b самое интересное как говорится в противном случае диаграмма воронова связана то есть и каждое
ее ребро на самом деле вот этого это либо отрезок либо лучше ну то есть это означает что границы то
есть множество точек которые являются границами каких-нибудь дичей к диаграмму воронова образуют
связанное множество вот ну во первых да можно в принципе сразу заметить что действительно что
означает вообще что точка граничная ну понятно что будем говорить что точка граничная если она
лежит но если она лежит хотя бы на двух там на двух ячейках диаграмма там двух ячейках уронова
ну тогда очевидно что это точка ну то есть точка граничная это означает что если ближайших
точек у нее как минимум две правда то есть есть вот минимальное расстояние две точки
хотя бы две точки его достигают вот здесь на самом деле вообще то есть поле то есть на самом
деле можно тут очень полезно сразу на самом деле вести такое понятие есть это давайте просто
тестировать вот если взять какую-нибудь рандомную зеленую точку спрашивается где это точка лежит
внутри чейки или на границе так ну она это другая плоскость у нас есть две плоскости они
вот через граница где справа что-нибудь чего где справа что-нибудь справа что-нибудь
но представь себе что на этой плоскости где-то есть диаграмма уронова да ну как по мысль
то есть один компьютер он нам дает точка нам надо понять так вот но это не компьютер просто смотрите
идея вообще такая то есть можно всегда ввести для какой-нибудь точке ку смотрите такое понятие
с индексом вот давайте сразу это введем п прям вот окружность видом что это такое да что это за
окружность это действительно это минимально вот это вот это окружность минимального радиуса
минимального это важно радиуса содержащие
но вот ну скажем на себе поддержащие вы себе тут неважно
точке из множества
наверное с центром нет сейчас кузись причем а конечно центра фуда
ну и радиус это максимальные застойания
ну но это не максимально то есть ее радиус равен конечно расстоянию от вырубленной
точке это ближайшие ну да сейчас минимального радиуса слижающие себе все точки сп ну ладно
давай уточним какие по точке хорошо хотя бы ну хорошо давайте хотя бы или может
ну давайте ладно если это вызывает действительно не точность то хорошо давайте уточним хотя бы одну точку
ну и как бы ее радиус просто минимум из дистанции вот ну можно да ну вот можно так просто удобно
и можно и вообще на самом деле тут тут интересный вопрос то есть куб то есть интересно понимать
сколько вообще этих точек окружить содержит ну по большому счету и на самом деле то есть на самом
деле в данном случае различных ответов 3 1 2 много то есть это либо внутри либо на границе либо
ну потому что да тут можно прямо вообще сформулировать утверждение мистическое если
цеплят цепь вот этого п отку содержит одну точку одну точку сп с его с его
но вот то называется ку строго внутри
собственно воль от этой точки содержит ровно да да
вот дальше но это первое такое ну действительно ну это логично если у нее эта точка строго ближе
чем все остальные то как минимум понимаем что у нее степсилонокрестность точек с тем же
свойством а это значит а это уже просто формально означает что у нас строго внутри
так вот далее что нас еще можно сказать еще можно сказать что если цп отку содержит ровно две
точки ровно две точки
но из ров
то тогда ку лежит на ребре
ну действительно тут интуитивно уже так как-то понятно что интерпретировать эту диаграмму
воронова можно как граф обратите внимание планарный глаз с вершинами и ребрами правда
некоторые ребра идут в каком-то направлении на бесконечность вот вот ну соответственно
получается лежит на ребре ну действительно почему это именно ребро да потому что допустим у
нас вот оказались две точки допустим мы тут вот провели вот эту окружность это понижение
и неожиданно выяснилось что тут оказалось вот какие-то вот две точки и других соответственно
нету да вот тогда заметим что то есть понятно что эта точка явно лежит на середином перпендикуляре
и тогда получается до мы можем двигаться по этой по этому серединому перпендикуляру и
некоторое время эти две точки будут оставаться ближайшими правда вот но при этом это будет именно
ребро ну постук поскольку но то есть пока мере вот пока мере вот множество точек для которых
то есть вот если рассматривать границу как минимум в эпсилон окрестности то действительно то есть
там ну пока мере вот в окрестности этой прямой там видимо ближе точек чем при прежитой видимо не
будет но если мы так будем двигать эту границу то в какой-то момент вот будем двигать двигать
и натремся на какую-то точку когда выяснится что тут оказывается такой же расстоянии кроме
и прыжи еще такой точке там пока но тогда заметим что здесь мы тогда уже может быть в небольшом тупике
но тогда получается потому что это при движении дальше оказывается что точка пока точка пока
кажется уже ближе чем вот эти две точки поэтому получается то есть получается что тут эта граница
где-то здесь заканчивается вот мы сейчас мы это увидим то есть получается что где-то она
вот на каком-то вот небрез но там она может быть правда она может такого и не быть может
этот лучший на бесконечность уходит мы не знаем мы ее тоже докажем да но здесь не
нет мы ну мы на ней как бы не базируем ни на чем она верно даже когда диаграмма не связана
так что в общем то есть это как бы просто то есть такой утверждение который позволяет так это не
я просто не говорю на ребре я сказал границу но вот да но просто понимаете что это просто это
граница каждая граница является набором рюкзак потому что мы знаем что в каждой
диаграмма ворону остается при этом пересечением полуплоскостей правда поэтому можно это называть
поэтому это можно называть любой пересечение полуплоскостей нет вот тут конечно да есть
есть некий некоторое связуха с красивой картинкой на тему того почему не будет вот почему
вот не может быть также для этой точки вот это вот ребро а для этой точки вот это не ребро
например ну тут вот да такое вот аккуратно но вот сейчас будем смотреть но на самом деле тоже
еще можно заметить что если рассматривать свойства граничных точек то получается что если
с эстендексом род ху содержит 3 или более точек
3 или более точек
точек из ну конечно не просто точек а из так та трудность наверное содержит больше
то току вершина диаграмма ворону это определение или же
ну можно считать его и определение потому что ну как сказать это такое утверждение одновременно
определение можно сказать то есть знаете что тут так потому что происходит здесь примерно следующее
что на самом деле но на самом деле давайте возьмем только уку и нарисуем вокруг нее вот эту
окружность и неожиданно выяснилось что у нас тут случайно три точки на границу попали да тогда
что мы можем сказать как выглядит гранили диаграмма ворону в окрестности этой точки
ну по факту можно заметить следующее что вот да есть треугольник есть и есть соответственно
середины но вот есть там какие-то середины перпендикулярно да они конечно же пересекаются
в одной то есть и соответственно да можно заметить что в эстен на крестности пока там
претендовать на ближайшие не начинает какая-нибудь еще четвертая точка то есть действительно от этой
точки у нас границы расходят расходятся в эти вот три стороны то есть поэтому получается что это
вот утверждение по сути там говорит нам о том что как выглядит граница ну понятно что что если
там всего две точки то это граница движется там по какому-то ребро потом какому-то середину
перпендикулярно вот если действительно но и движется движется до тех пор пока ближайших
не станет и как только и стало 3 значит из этой точки уже идет тройная развилка причем обрати
но а если их было 456 то развилка соответственно еще больше причем более того обратите внимание но
тут да тут как бы заветим что пока у нас есть три точки на самом деле у нас не может быть так но
не может быть так чтобы действительно какие-то два луча были под углом 180 раз ну то есть конечно
теоретически может быть там на четырех точках конечно пожалуйста если вот ситуация будет
какая-то вот такая то тогда тут конечно в диаграмме воронова будет вот такая вот приятная ситуация
по крайней мере не может быть так обречите мне что приятно да то есть не может быть так что вот
у одной ячейки граница выглядит как-то вот так да а у другой ячейки неожиданно вот ровно в
этом месте неожиданно идет оцепление это то есть это ребро неожиданно расщепляется понимаете да то
есть по сути можно заметить что если мы построили ячейку диаграмма воронова и совершенно случайно
оказалось что и оказалось что в деле есть вот это ребро то это ребро возникнет у какой-то
другой ячейки диаграмма воронова как-то строго доказать ну строго можно доказать так ну давайте
так ну давайте порисуем вот жала была точечка и мы для нее давайте руки марки устроили ее ячейку
воронова конечную бесконечную неважно самое главное для нас вот что откуда мы взяли это это ребро
дочечка была из по красивым да обратите внимание мы это ребро конкретно это ребро да точечка
испор красивая это какое-то поимное значит для этого ребра мы брали какое-то вот где бы мы нарисовать
но очевидно по по по по по прежитая да ну на всякий случай да нет гарантии что они именно пересекутся я
просто перпендикулярно его рисовал да то есть этот отрезок вполне может агнаться где-нибудь здесь
вот вот ну теперь можно тогда что заметить значит когда мы рисовал то есть мы сказали что
вот там допустим в этой полуплоскости но то есть вот у нас есть полуплоскость где вот есть
действительно пи но то что с этой стороны ближе точка пи чем пж с этой наоборот
вот может сказать что вся внутренняя часть ребра у нее все как бы точки кроме пи и пж строго дальше
чем пи и пж чтобы дальше чем пи и пж дальше от чего ну смысл для любой точки внутри ребра
пи и пж две ближайшие точки и только они ближайшие да вот действительно можно действительно заметить что
если мы возьмем какую-нибудь точку внутри этого ребра то не найдется какая-нибудь точка пк
которая допустим да которая станет такой же потому что тогда был бы еще один цель через нее и это
не было бы цельной ребра вот может что может существует пк такое что там это ребро тут целиком
лежит но конечно это не да то есть действительно если у нас окажется что случайно тут еще какая-то
точка то есть еще какой-то пк да то значит тут еще один серпер через это который не параллелен
поэтому он пересечет как бы внутренних нашей грани что невозможно вот вот мы и доказали
ну да ну почему он не параллелен это кстати ну потому что это эти три точки не на одной
прямой иначе такой вообще невозможно пока ты не совпадать не с пытой не пожито значит
эти три точки должны быть не на той прямой ну и все но вообще говоря да не но вроде понятно но вроде да
не ну как сказать да нет ну теоретически да пк может оказаться здесь тогда и тогда не равенства ну
в смысле тогда не может быть три точки на одной прямой равно длину я то теоретически
каши а что может быть а не параллельность еще может быть когда пк где-нибудь нет не может быть
трех точек на одной прямой ровно удаленных от одной ну вообще не на на примане пересекать
да пока да пока не лежит значит да да да да точек на одной прямой не лежит которые лежат
на одной кружности так что да тут получается пересечение и хорошо да хорошо ну и значит
пусть что вся внури часть ребера принадлежит яче типа жито и для любой из этих точек да другой
ближайшие точки нет так но нет нет теоретически это называется да нет теоретически это называется
они может сейчас они может ли быть так что хорошо мы доказали что не может быть так что да какой-то
из этих точек кроме вот этих двух точек ближайшие еще какая-то да может оказывается что просто на
самом деле это пока находится строго ближе ну это бред потому что тогда эта точка не будет лежать
ну да тогда а ну да тогда если пк ближе то тогда да эти пересечения бы не лежала ну и вообще ну что
вся граница она тоже плиток не тоже ближайшие но то есть это граница это означает что плиток не
точно ближайшая в общем вроде получили но и аналогично там еще в границе как бы конечную точку
и бара они будут вершинами для пожитая то есть ребро не может быть ли не это не ну или
можно в обратную сторону то же самое что у пожитая не может быть ребро как бы быть ну
длиннее вот как бы то есть что ребро вот это у пыта и оно часть ребра такого же от пыта
такого тоже невозможно сейчас нет ну нет ну как-то это а типа что для упыжитого потому что в обратную
сторону либо симметрично либо просто заметить что откуда взялись эти точки это пересечение
значит это точка у этой точки на окружности он три штуки
но аналогичное рассуждение конечно еще правда что бывает ребро не только конечную бесконечную но
забавный факт что если мы знаем что нигде четыре точки не лежат на одной окружности из данных то
мы можем например почитать количество таких и количество все можем но можно это более того это
нам даже придется сделать что доказать какие приятные свойства да какие у нас тут свойства
вообще есть да ну как минимум да если уж к этому переходить туда первое что хочется сказать хорошо
вот мы хотим нарисовать эту диаграмму правда нет правда то сразу выскакивает на первое выскакивает
конечно вопрос да потому что хочется изобразить ну хотя бы этот граф да а теперь возникает вопрос
не ну ладно гавты изобразить можно вопрос только а сколько решить так ну для начала давайте
поймем да мы да я задолжал теорему про связь я еще посвящал с поводу введения
вот этого да а что в плане подмаржевого доказательства после хотя бы первого
пункта то есть по какому утверждению вот ну да ну можно ну что совсем строго
пока нет нет ну если она на границе да мы знаем что границы из сейсер перах ну все
и все вот то есть такое это утверждение такое конечно тут все просто формального понятия
вершина конечно ну с другой стороны просто на самом деле то есть это утверждение то есть на
самом деле тут как бы утверждение то есть главное рассмотрим что да что происходит в
крестности точки если у нее значит если у меня на этой окружности лежит 1 2 или больше или
много точек получается либо это одна точка и тогда не граничная либо две точки тогда на как бы
часть какого-то отрезка ну там отрезка луча плоскости мы не знаем но явно часть какого-то
отрезка ну и все либо оказывается что либо три тогда как то что там то есть это такая
фиксирует так но теперь это просто да почему эта штука связанная но это не всегда связанная то
есть она будет связанной только в том случае если если существует 3 не вложили п есть 3 не
лежащие на одной прямой точке понятно да вот 3 не лежащие на прямой точке ну на самом
деле доказательство может базироваться уже на следующем заметим что в этом случае любая
ячейка диаграмма воронова имеет связанную границу но я утверждаю такое потому что заметим что
тогда когда вы будете искать пересечение полуплоскости у вас там выбрали бой то есть
вы будете пересекать как минимум две две непараллельные полуплоскости правда
но дальше мысль проста давайте пообразим себе что когда вы пересекаете две у вас уже получается
вот такое пересечение на уголочек а дальше если вы к этому добавляете какой-нибудь там новую
полуплоска то ну соответственно там можно рассмотреть там все случаи но связанность остается
связанностью если это пересечение не выражается вот поэтому тут то есть это означает но нет
само в свете не означает связанность диаграмма воронова это означает лишь связанность каждой
ячейки граница каждый ну то есть каждая ячейка но граница конкретно каждой ячейки связанная
revenue
а точки до точки и velocity
да вот vimos это точка там являются на границе вот этой
ячейки допустим диаграмма воронова а это допустим вот этом давайте соединием вот эти две точки
И скажем вот что, смотрите, это точка, пока мы идем по этому отрезку, мы пересекаем какие-то границы диаграммы Варанова, правда?
Где-то вот пересекаем. Сначала мы выходим на... То есть смотрите, что происходит.
Мы сначала выходим на границу вот этой ячейки, собственно, этой точки.
Ну и до этой точки, кстати, отсюда мы вполне можем по границе дойти.
Но заметим, что теперь, между вот этой точкой, например, вот этой точкой, мы находимся внутри одной ячейки диаграммы Варанова, правда?
И эти точки две, эта точка является тоже на границе этой ячейки лежит.
Поэтому здесь тоже можно как-то вот так обойти.
Потому что у каждой ячейки есть связность.
Ну и все. Ну и повторяем так несколько операций.
То есть там дальше могут быть технические детали там на тему того, что, ой, а если у нас тут таких точек бесконечное количество?
Ну потому что там мало, и вдруг этот отрезок через ребро какой-нибудь ячейки пройдет, мало ли.
Ну вот. Ну, давайте, думаю, вы уже сами догадываетесь, что это мелкие технические детали, которые сути не меняют.
Наоборот. Есть три точки, не лежащие на одной прямой.
Потому что если все точки лежат на одной прямой, тогда?
Нет. Нет. Три точки, лежащие на одной прямой, вполне могут быть.
Самое главное, что были три точки, не лежащие.
Не все на одной прямой.
Да, обратите внимание. То есть, например, если у нас ситуация какая-нибудь, все лежат на одной прямой, кроме вот одной.
То там как бы да. А что будет? Вот давайте попробуем дальше.
Тут какой-то серпер вот такой, тут серпер такой, и тут вот такие вот...
Дискретная пара.
Да, дискретная пара, а чья-чего-чего...
Помните там директриксы эти всякие?
О, это у нас сейчас будет.
Надо, что делать. Но алгоритм так устроен, что...
Только директриса, да, это не будет вот эта крыса, которая там...
Да, это не та директриса.
Так, ладно, мне уже просто интересно, как это вообще будет выглядеть.
Тут они вот так, тут они вот...
Тут они понятно, что вот так будут выглядеть.
Это прямые, а там до парабола доходите все.
До параболы.
Какая парабола-то?
Что, разве не парабола?
Ну, прямовольная немножечко, в смысле прямоволинейная.
А, ну здесь все просто, да, заметим. Сначала вот так будет.
А, видимо потом вот так вот, потом вот так вот, потом вот так вот.
Что это такое?
Ну, потом наконец когда-нибудь...
Нет, это я пытаюсь Диараму Воронову для этой красоты нарисовать.
Видимо вот эти вот такие полосочки будут, но как бы отсечены такой вот...
Параболой.
А, хотя да, это будет парабола, потому что да, есть вот такое, потом вот такое, вот такое, вот такое. Ну да, согласен, да.
А, почему парабола?
А знаете, давайте об этом поговорим.
Ну, потому что все вот это касательно, в суть параболи, где...
Нет, смотри, да, давайте честно скажем.
Я вот хочется об этом поговорить, потому что эффективный алгоритм, который будем сегодня изучать, на этих параболах будет основан.
Поэтому давайте, видимо раз зашла речь, давайте об этом поговорим.
Ну, так.
Нет, сначала я просто сформулирую.
Сначала давайте...
Ну, так, пока была задача, как бы, дано множество точек, где все точки лежат на одной прямой, кроме одной.
Задача построить диаграмму Воронова.
Как она будет выглядеть?
Почему-то упоминается слово парабола.
Теперь возникает вопрос.
Что такое...
Так, вот давайте сразу, да, вопрос по линалу.
В некоторых вариациях программы.
Что такое парабола?
Парабола.
Совершенно нет.
Нет, кривая второго порядка, это как бы неопределение, к сожалению.
То есть, мало ли, знаете...
То есть, как это называется?
Что такое область?
Область, это как говорить, как область, это такой очень красивый объект математики, который решает огромное количество вопросов.
То есть, это, конечно, правильно, но это неопределение.
То есть, область, вы знаете, что такое область?
Ну, область, это...
Голос Драгипарта, связано открытое множество.
Ну, верно, да.
Так вот, значит, определение.
Пусть у нас на плоскости...
Пусть есть на плоскости точка Q.
Которую будем называть фокусом.
Точка...
А L...
Это под множество, это прямая.
И она называется директриса.
Ну вот.
Тогда...
Параболой...
Ну, не просто параболой.
А параболой, ну, допустим, там это вот...
Я не знаю, как это параболой обозначается.
Параболой от Q и L...
Назовем...
Диаметрическое место точек равноудаленных...
Диаметрическое место точек равноудаленных...
Равно...
Удаленных...
От Q и L.
То есть, по сути, параболой, диаметрическое место точек,
равноудаленных от какой-то заданной точки,
заданной приводь.
И вот, давайте посмотрим.
Как...
Что это вообще такое?
Что это за множество точек равноудаленных?
Ну, самое простое, что можно делать,
просто чтобы изобрести...
Чтобы вообще понять это себе, да?
Допустим, у нас прямая, просто,
Y равно нулю.
И точка, ну, допустим,
с координатами 0,2.
Ну так, вдруг там пополам какой-то сейчас придет.
Тогда нас интересуют
такие точки X, Y, да?
То есть, ну, что?
Каково у нас расстояние до Y?
То есть, каково у нас расстояние до этой прямой?
Чего?
Нет, это от этой точки, а от рандомной точки
X, Y?
Ну, по сути,
на данном случае модуль Y.
Да, модуль Y
Y
равен корню из
X квадрат плюс Y минус
2 в квадрате.
Или что то же самое можно написать, что
там Y в квадрате...
Что-то бред какой-то получается.
Y в квадрате
равен X квадрат плюс
Y минус 2 в квадрате.
Или квадрат уйдет.
Или да, если раскрыть скобки, да,
и Y квадрат уйдет, то еще страшно у нас X квадрат живет.
Это получается X квадрат
минус 4 Y
плюс 4.
Ну, по сути, да, ладно,
в общем, отделения не ушли, или вот в данном
случае получается то же самое, Y
равно X квадрат поделить так 4
плюс 1.
Ну, дальше включаем это
заклинание из залки пред девятого класса, да?
Или десятого.
Графика в этой функции является
парабола ветви, которой
направленный вверх.
Ну, у кого-то в школе там
у нас в Несенке такое
заклинание было, по-моему.
Вот.
Отписать седьмой, по-моему, как-то обошлись.
Вот.
Ну, не важно.
Ну, а знаем, что вот это вот такая вот красивая
парабол. Ну, вообще, как бы, если
будет такое парабол, вот определение.
Ну, да, то есть по факту, да,
можно, ну, можно
на самом деле заметить, что
да, то есть это, то есть
можно это записать в терминах, что если
мы прямую задаем в виде точек P1, P2,
да,
и там, и вот это вот, допустим,
точка, а ладно, это не так
вот, вот это точка Q, а это
произвольная точка X.
Вот.
То, соответственно, можно там,
на самом деле, что-нибудь векторная тема нарисовать.
И, возможно, нам в какой-то момент придется это
сделать, так что давайте на всякий случай это сделаем.
Потому что нам придется рисовать
не только произвольные.
Например, нам, ладно, нам придется рисовать прямые,
где вот Y будет равно не нулю, а какой-то
другой константе.
Там, я не знаю, Y
равно T, например, нам придется делать.
Ну, вот.
А точки Q будут абсолютно
произвольными.
Поэтому давайте, ну, попробуем.
Точка Q у нас, это
X0, Y0.
А Y у нас будет равно, ну,
я не знаю, T.
Вот.
Нам потребуется вот это.
Тогда давайте посмотрим, что у нас тогда получается.
Если мы берем произвольную точку,
там, какую-нибудь произвольную
точку, ну, я не знаю, Z
с координатами X.
То, что получается.
То там получается скаллярное
произведение Z-Q на Z-Q.
Должно быть равно чему?
Должно быть равно
квадрату расстояния
от Z вот этой прямой.
А чему у нас равно расстояние?
Вообще, чему у нас равно расстояние от Z
до этой прямой?
Дигляр надо
считать.
Монель Z минус квадрат.
Можно ось, пожалуйста?
Чего?
Так, какая разница?
Ответ.
Так, давайте, привыкайте
мыслить векторно.
Так, а мы с векторами?
Допустим, у нас, допустим, ладно, тут-то...
секунду, у нас сейчас векторат.
Что у нас там?
Ну, хотя да,
хочется сказать, что прямая P1 P2,
но ладно, у нас прямая Y равно T.
Ну, хорошо, вектор P2 минус P1.
Ну, хотя да, P1 P2.
Да ладно.
Ладно, давайте так, Z, да, скаллярное
произведение Z-Q равно чему у нас?
Оно будет равно...
Ладно, вот так напишем, Y
у точки Z-T
в квадрате.
Мы хотим посчитать расстояние
от точки Z до T.
У нас X, Y,
это что такое, это точка на параболе?
X, Y это
произвольная, пусть это да, точка на параболе.
А Z произвольная?
Нет, Z это и есть точка на параболе,
а X, Y это ее координат.
А там что?
И это тоже точка Z.
Это просто мы...
Мы хотим посчитать просто
расстояние до прямой.
Ну да, вот есть расстояние до прямой,
которое в данном случае равно Y, Y, Z,
квадрат расстояния Y, Y, Z,
так Z-Q, у нас Z-Q,
но здесь можно прям честно написать, да?
X-X0 в квадрате
плюс Y в квадрате,
ну вот,
минус Y0 в квадрате.
Это равно...
Да, мы решили не париться все-таки координат,
но это можно.
А, ну да, тут в смысле Y, Z, конечно.
И тут это равно Y, Z,
минус Y в квадрате.
И получается...
И получается очередной нот.
То есть здесь тоже можно пораскрывать скобочки,
и там получится что-то типа
X, Z-X0...
Нераскрываемая нота.
...в квадрате.
Нет, тут X мы раскрывать и не будем,
это ладно.
А вот с игрками интереснее,
потому что когда мы тут...
Если мы тут разность квадратов запабахаем,
то получается что-то типа
Y0-T
умножить на
2Y, Z
минус Y0-T.
Ну да, то есть...
Единственное...
Действительно, конкретная парабола,
конечно, тут зависит от T явно.
Ну да.
Да.
Ну вот.
Ну да, тут правда...
Ну тут странно, конечно.
Сейчас.
Ну хотя ладно, может это пока не особо принципиально,
но как бы...
Ну и здесь просто интересно, можно ли представить в виде
я не знаю, игроков, но там
не знаю, это что-то адекватное в квадрате?
Проблема в том, что диектрисы
и фокусом задается не только параболы.
Это все электрические трубы.
Ну не важно.
Ну не все.
Не, диетрисы и фокусы задаются так параболы,
что ставят задаться двумя фокусами.
Так, ну да.
Ну есть половинку.
Половинку, не первую, по-моему.
Ну тут да, ну вот.
Ну разное всякое есть хотя-то.
А, мы жрались.
Ну ладно, да.
Ну от T, конечно, зависит.
Ну ладно, не важно.
Не, ну да.
Ну понятно, что мы можем написать, что T
откровенно должно быть ниже, чем
ноль.
А, хотя нет, ну вот.
Единственная проблема, что T движется,
но это, впрочем, не важно.
Ладно, чуть-чуть посписали, ладно.
Теперь давайте нот.
То есть это мы вот себе вообразили.
Теперь, на самом деле, давайте
себе вообразим.
Ну вот, теперь
если мы заказали себе диаграммы
и решили мы с вами
рассмотреть такой пример,
то получается следующее.
Вот, сейчас я
скалываю.
Получается,
то есть если вы тут...
Так ладно, я тоже уберу.
Давайте.
Да.
Ну вот, допустим, у нас вот есть какая-то
прямая,
на которой лежат вот эти точки.
Тогда заметьте между этой прямой,
тогда как выглядит диаграмма
Воронова. Ну, во-первых, да,
можно заметить, что, то есть можно нарисовать
директрису. Вот с этим фокусом
и вот, точнее, вот, можно рисовать параболю
с вот этим фокусом и вот этой директрисой.
Вот так вот,
и вот так.
Тогда, действительно,
вот, что
тут тогда можно сказать?
Вот.
То есть можно сказать
вообще интересную вещь. Вот, как минимум,
можно сказать,
что вот эти вот, как минимум, если я
нарисую вот такие точки,
то вот эти точки заведомо
лежат на границе диаграммы Воронова,
потому что они равнодлины
отсюда, да?
Но при этом,
при этом можно, на самом деле, заметить
такой пример, ну вот,
что, конечно же...
да. Скажем так. Они лежат на диаграмме
но это не вершины.
Я бы сказал уже это не обязательно да.
Да. Нет, они на границе
диаграммы Воронова они точно лежат, но это
не вершины. Почему? Потому что...
Они уже участвуют в строении
и могут оказаться внутри уже.
Нет. Внутри ячейки они заведомо не...
Вот эта точка, опять, внутри ячейки
Воронова заведомо не лежит. Почему?
Потому что у нее ближе, чем вот
эта точка и вот эта точка нету.
Потому что все остальные вот эти точки их попадают
То есть правильно сказать так. Вообще, на самом деле, заметим, что все, что тут внутри параболки лежит, это заведомо лежит внутри ячейки диаграммы Воронова этой вершины.
Другой вопрос, что это не все. Ну, как минимум, потому что понятно, что не может парабола быть в границе диаграммы Воронова, ячейки Воронова, конечно, да?
То есть на самом деле будут получаться, на самом деле будут вот такие касательные получаться.
Ну, то есть там какие-то прямые, эти прямые, понятно, внутрь не могут заходить, поэтому получается, что придется рисовать касательные и пересекать их между собой.
Просто так должно быть больше.
Приклижаем параболку.
Ну да, вот тут тоже.
Так, вот потом вот так, ну и так далее.
То есть вот, на самом деле, вот так примерно будет это выглядеть.
Ну, точнее, вот ячейка вот эта.
То есть на самом деле остальные ячейки будут, как они выглядят?
А, ну так и будут, смотрите.
Они вот выглядят, на самом деле, вот это рисовать не надо, а сами ячейки будут получается вот так выглядеть.
То есть тут можно даже предсказать, где будут пересечения по Иксу.
То есть вот получается вот примерно такая красота.
Вот.
Да, это вот в качестве примера.
Вот так возникла парабола.
Вот так она объемка.
Да.
Вот.
Ну вот.
Ну теперь мы, ну хочется начать, ну хочется думать, да, что мы вообще хотим от диаграммы Воронова, да?
Не понятно.
Ну была задача.
Да. Ну была задача, да.
Но не только найти, но вообще понятно, что если она продиктована откуда-то из какой-то жизни,
то, наверное, в этой жизни надо с этой диаграммой как-то работать.
А что значит работать?
Ну, если мы хотим, например, работать с диаграммой Воронова, то нам придется, скажем, говорить про какие-нибудь...
То хочется, например, там для каждой ячейки говорить, какие у него ребра, в каком порядке они идут, правда?
А еще желательно заметить, что каждое ребро на самом деле принадлежит ровно двух ячейкам, правда?
И тогда, наверное, неплохо было бы для каждого ребра там понимать, что это за две ячейки.
И желательно, что если вы там ходите по одной ячейке и говорите, так, вот у меня в этой ячейке есть ребро, спрашивается,
а кто со степенью ячейки, скажите мне, пожалуйста.
Вот, понятная идея, да?
Вот, то есть вот какие-то такие вещи хотелось бы хранить.
Чего нас это приводит?
Ну и приводит, ну, приводит это на самом деле еще к одному объекту,
такой на самом деле классическому объекту в геометрии, используемый для хранения красивых планарных графов.
Можно еще сказать, что мы хотим? Мы хотим работать с диаграммой?
Ну да, в том плане, ну, хочется, например, что уметь, например, брать ячейку и там обходить у нее ребра.
Хотим там между, у каждого ребра находить, что каким ячейкам оно принадлежит.
Мы сначала будем учиться хранить и потом строить?
Что?
Мы сначала будем учиться хранить и потом строить?
Нет, мы хотим понять, в каком виде мы хотим это хранить, чтобы потом понимать, как строить.
Ну вот, как это вообще можно делать.
Ну, в принципе, то есть классическая структура, когда это очень хочется делать, да?
Ну вот, то есть на самом деле тоже есть просто полезная такая вещь.
Ну вот, вот так.
Ну вот, по-английски она называется...
Не соврайте.
По-русски еще страшнее, конечно.
Ну, давайте, если вы сейчас выговорите, можете меня поправить.
Ну вот, по-английски она называется вроде как...
Ну вот, по-английски там есть просто русская абревиатура, по-моему, что-то типа...
То ли РСДС, то ли РДСД, вот что-то такое.
Я знаю как-то РДС.
Ну вот, то есть там какая-то вот... То есть такое вот дважды связанное.
Ну вот, хочется хранить вот именно планарный граф.
Ну, да, заметите, в математике есть мистический факт, что если у вас есть планарный граф,
но на этот раз без бесконечных ребер.
А просто представьте себе, что у вас есть планарный граф.
Там планарный граф, просто какие-то точки, там, точки соединены какими-то ребрами.
Ну теоретически планарный граф может, конечно, и вот так вот и выглядеть.
Вот как-то вот так.
Или... вот так. Так оно не может выглядеть, да. Согласен.
А вот так вот вполне может.
Ну, в математике, да, мы не будем доказывать, но есть тоже мистический факт о том, что на самом деле можно эти вершины расположить так, что ребра можно провести как прямые отрезки.
В нем топология.
Чего?
В нем топология.
Ну, можно и так сказать. А, у вас еще и топология есть.
У нас нет.
У нас нет.
На моей математике должна быть, но у нас в нашей группе вообще по математикам не осталось.
Да?
Ну, они у нас появились на обычном.
Пробежали?
В смысле, да, в математике не...
Математики сбежали из продвинутого потока или откуда их сбежали?
Нет, они перевелись на обычный коммунист.
Рабра сбежала из математики.
Ну, странно.
Потому что, не знаю, обычно тут, как бы, значительная часть тех, кто, как бы, хорошо, примерно, производит, как раз в математике, на самом деле.
Ну, как бы, ну сами видите, у нас математический курс.
Да, я понимаю, что он, конечно, там, на первом курсе уравновешивался там чисто кодекским курсом C++, но...
Ну, это ведь только математический курс и акост.
Чего?
В этом семеце у нас есть только один в предмести курс, это акост.
Ага.
Ну, понятно.
Такое типа.
Еще формалки, если практику.
Ну, все равно математический курс.
Ну, это есть...
Нет, ну, пока на текущий момент формалки это кашечная математика.
Ну, да.
Ну, и че?
Ну, вот так.
Да, так мы думали, как бы, гуманитарно будет.
Построение НК, ДК, подсказание.
Так, ладно.
Так, ладно.
Ребята, давайте не зависеть.
Значит, смотрите.
Так вот.
Значит, есть у нас, действительно, любой планарный граф, который нас интересует,
мы можем рисовать вот, действительно, таким красивым образом.
Да, что он вот как-то вот так выглядит.
Так, так, вот так.
Это кактус.
Ну, кстати, да.
Это кактус.
Да, заметим, что планарный граф это кактус, да.
В скобках нет.
Нет, ну, ни черта это не кактус.
В других смыслах кактус.
Не, ну, я не знаю, в каком смысле, но это не кактус.
Потому что формальное определение.
Кактус это граф, у которого был неориентированный граф,
у которого ребро лежит не более чем на одном цикле.
А еще связный.
Вообще, формальное определение кактуса так.
Более связный?
Ну, обычно рассматриваем связный, хотя планарный граф связным быть, конечно, не обязан.
А там что там написано?
Это, по-моему, русская бревиатура.
Что-то, например, такое, я вот не знаю, английская что-то помню, а русскую не знаю.
Ну, то есть объект, в общем-то, достаточно интуитивный.
Потому что возникает вопрос, как же этот граф хранить?
Ну, эффект первой идея такая, что давайте ребра сделаем в некотором смысле ориентированными.
Ну, в том плане, что как мы храним неориентированный граф, если мы, например, забабахиваем список смежности, да?
А мы забабахиваем список смежности.
То есть тогда, как бы у каждого ребра получались две половинки.
Одно смотрит в одну сторону, другое в другую, правда?
Так вот, тогда идея возникает такая.
А давайте, значит, у каждого вершины храним половинки, которые из него торчат.
И, соответственно, храним их в порядке, в общем, отсортированном по полярному углу, например.
Ну, или по полярному углу и циклический сдвинутый.
Идут вот так по кругу, начиная с какого-то там, не сильно принципиально спокойного момента.
А, в плане, для каждой вершины диаграмма воронного.
Да.
Храним ровно, как мы просто поняли.
Ровно, которые из нее выходят.
Причем храним так, что когда у нас увеличивается индекс, мы делаем по часовой стрелке.
Да, совершенно верно.
Причем по циклу тоже, соответственно.
Вот.
Но нам придется еще одну добавку сделать.
Как мы знаем, это мы уже в поток рассадили, что у каждого ребра есть напарник, да?
Так вот, на самом деле, там еще нужно дополнительно у каждого ребра сохранить ссылку на своего напарника вот в этой вершине.
Какой?
Ну, если вот это ребро идет из этой вершины в это.
Тогда в этой вершине хранится напарник этого ребра.
Вот нам очень хочется знать, где он там находится.
А, хотим прямо сразу номер получить быстро.
Ну, типа да.
Ну, номер или там указатель, если вы там в какой-нибудь реально списке храните.
Ну, указатель дорого.
Ну, почему?
Нет, вы знаете...
8 байт вместо 4.
А, ну, с одной стороны, да, с другой стороны вы можете сначала создать как бы два ребра,
связать их сразу между собой, а потом внутри там этого листа переставлять их как угодно.
Хотя, ну...
Если память много, то...
Ну, хотя ладно, это неважно, в общем.
То есть это деталь.
Ну вот, самое главное, что нам это дает?
Вообще говоря, это нам дает возможность, в принципе, обойти любую грань.
Вот, вы можете на самом деле обойти, получить любую грань за О от ее количества, за О от количества ребров в ней.
Обратите внимание, почему.
Потому что вот, если мы решили обойти грань, которая находится слева от этого ребра,
то как нам найти следующее ребро от этой грани?
Да очень просто.
Берем, ну, следующее, чтобы повернуть налево.
Берем напарника и смотрим в этом списке предыдущее ребро.
Бум-бум-бум-бум, вот оно.
И у этого тоже теперь смотрим напарника вот этого.
Поворачиваем как бы.
И вот так проходим-проходим.
Ну и когда вот вернемся прямо вот в это ребро, то, соответственно, будет радость.
В чем желательно, чтобы мы вернулись именно в это ребро, а не в его напарника.
Потому что оговоримся, что есть, потому что бывают, конечно, планарные графы вот с такой красивой подлянкой.
И тогда тут, конечно, этот обход, будем обходить-обходить-обходить-обходить,
и пройдем по этому ребру, а потом по нему уже назад и пойдем.
Потому что из этой вершины, в общем, по принципе, одно ребро торчит.
Ну и все, хорошо.
Ну вот, да.
Ну здесь раз в договорке, то есть, конечно, совсем вот именно грань.
Ну понятно, что если мы выберем неправильное ребро, например, вот это, то мы обойдем, так сказать, внешнюю грань.
Но тогда понятие внешняя грань тоже актуально будет только в том случае, если мы занимаемся связным графом.
Потому что если у вас там граф устроен как-нибудь вот так, то мы можем обойти вот эту грань, можем обойти вот эту грань.
Поэтому тут всякие балансы будут.
Вот.
Мы научились обходить грань, да?
Да.
Ну мы умеем обходить грань, то есть, умеем теперь, если мы находимся на каком-то репре, то мы как бы можем быстро понять, в каких двух ячейках оно находится, ну и так далее.
Если ячейки много, то и нет.
Ну, если, конечно, желательно, если граф связан.
Но в нашем случае граф связан.
Я пока не понял, как мы это научились делать.
Чего научились?
Нет, строить этот граф быстро мы там еще не научились, конечно.
Не, не строить.
А, типа мы, чтобы обойти, мы идем в вершинку, смотрим ее, где наш напарник, и берем ребро одного напарника.
Ну да, предыдущего.
А, все.
А, чтобы помнить какие, ну, типа грани, мы просто будем в каждой грани хранить, ну, типа список.
Ну, как бы, для каждого ребра хранить, например, какими оно гранями лежит или как?
Ну, ну, зачем?
Можно просто для каждого ребра хранить, какой грань, для каждого полуребра хранить, какой грань оно принадлежит.
Ну т.е. какая грань слева от него?
Можно, да, прямо.
СНМ
Да какое СНМ?
У нас же ничего не меняется.
Нет, просто аккуратный список.
То есть, у нас как бы такой большой объект, что есть с одной стороны грани, которые ссылаются на последовательность полуребра, да, в другой степени есть полуребра, которые ссылаются друг на друга.
И там, вот правильно отсектированы.
Так, грань, это же вот эта вот вся область, да?
Да.
Я бы сказал, где эта область?
Да, да, да, да, да.
Аааа, да.
Планет грань ссылается как по какому-нибудь?
Ну, как бы грань ограничивается вот с набором, последовательностью ребер, циклической такой, да?
Да.
Ну вот, вот и говорили, поэтому я говорю, грань на них ссылается.
Как мы определяем то, что, между какими номерами, между какими гранями мы лежим?
Ну, например, после того, как вы построили все ребра и отсортировали их, да?
То есть вы просто аккуратно обошли все эти грань.
То есть, берем первое попавшее серебро, обходим его, грань помечаем.
Берем следующее первое попавшее серебро.
Ну, берем следующее первое попавшее серебро.
Ну и так далее.
Не, ну вот, идея есть еще тогда, что давайте заведем СНН для вершинок.
Да, да, да, да, да, да.
Зачем?
А дальше мы просто обойдем всю фигуру.
И, ну, мы же можем пройти чисто по грани, то есть по ее области, ну, давайте объединить, что...
Ааа, проблем будет.
Конечно, СНН не нужен, лучше честно помечать, тем более, что нам эти пометки тоже будут полезны.
Так что лучше массив юзит, там, фактически вам массив юзит, вам вот так хватит.
Вот.
Вот.
Так что вот примерно такую красоту, на самом деле, хочется в качестве диаграммы Вороновой вести.
Но это нам сразу накладывает.
Лучи.
И в то же время обят.
Нет, дело даже не в самих лучах, да.
Да, да, в случае диаграммы Воронова, конечно, часть ребер, откровенно, будет лучами.
А иногда даже и прямыми.
В моих горных загрузках?
Минус плюс бесконечность?
Ну да, но придется помечать, что некоторые ребра бывают лучами.
Причем, как бы, они бесконечные вперед или бесконечно назад.
Бесконечность один, бесконечная...
Потому что у нас бывают два типа лучей, такой луч, который идет из бесконечности, заканчивается где-то.
Есть луч, который, наоборот, начинается где-то и заканчивается бесконечно.
Где мы его храним, который начинается в бесконечность?
Ну, мы будем его сам же хранить.
У нас будет вершинка соответствующая в бесконечности?
Не, не будет.
А где?
А вообще больше?
Нет, ну, просто для ребра будем помечать, допустим, есть ли у него начало и конец.
Ну, например, там вы видите такое обобщенный отрезок.
Он задается двумя точками, но и двумя буревыми переменами.
Типа, есть ли реально начало и есть ли реально конец.
А почему, кстати, не сделать эффективную вершину бесконечность?
Как раз, которая, ну, понятно, в которую входят все лучи.
Нет, ну, нет, такое вершина имеет смысл.
Ну, наверное, имеет смысл.
Именно одну такую, потому что тогда это как бы все еще будет оставаться плоским графом.
Сейчас, ну, как плоским?
Ну, такой граф все еще плоский.
Ну, как сказать, нет, если эти лучи вместо бесконечности сводят и там в итоге заворачивают свою такую точку, то еще не очевидно.
То есть, да, там можно как-то красиво настроить.
И, да, пока сказать, что этот граф еще планарный, да, то это уже немножко другое.
Да, сейчас мы этим будем, потому что пока лучше не надо.
Нет, ну, тут, да, тут вообще не надо.
Да, сейчас мы этим будем, потому что пока лучше не надо.
Нет, ну, тут, да, тут вообще в идеале, конечно, грань тогда просто хранить.
Если граф, грань правда вот действительно такая, то в идеале тогда, наверное,
то в идеале тогда лучше тогда, чтоб грань прям честно начиналась вот этим ребром.
Или там вот таким ребром, точнее наоборот.
Начиналась вот таким ребром и заканчивалась вот таким.
Но это, в принципе, тоже лечится, потому что вы просто, когда будете обходить грань,
вы будете тупо начинать, допустим, с бесконечных ребров.
Да, отдельная песня.
Кстати, интересный вопрос.
Может ли в вершину диаграммы Воронова входить два бесконечных ребра?
Нет, именно входить.
Одно входить, одно выходить, конечно, без проблем.
А как такое?
Да, элементально, три точки.
То есть, я не понимаю вопроса в чем.
А, хотя...
Отходить два ребра.
А, ну да.
Понял.
У нас они...
Мы сами же...
Мы сами за направлением сказали, что у нас есть обстановка.
А, ну да, да, да, да.
Да, да, да, да.
Согласен.
Кстати, забавный факт.
Если мы все-таки сделаем бесконечную вершинку и ребра как бы из нее посетируем
по полярному углу.
Ну, вершина совершен бесконечности.
И ребра из нее как раз посетируем тоже по полярному углу.
У нас вот обход такого многугольника тоже будет работать.
Прекрасно бесконечную вершину.
Ну, сексировать, да, это еще по полярному углу.
Я думаю, как-то желаю это сексировать, если они параллельны,
потому что такое тоже бывает.
Ну вот, да, да, да.
Это правда не очень классно.
Да.
Не сомнитесь.
Не начинается.
То есть...
Поэтому я бы этого бесконечную точку не хренил.
Для данных целей.
Не надо.
Вот, не надо.
Вот.
Ну, тут, как говорили, как всегда, на вкус и в свет.
По мастере разные.
Так известно.
Вот.
Поэтому...
Ну, мы можем бесконечно сделать любое измерение.
Ой.
Слушай, нам пока двух измерений...
Подспокойно.
Ну, типа...
Вот у нас планарный граф, как обычно,
а все лучи в одну точку схлопнем, типа, в пространство.
Ну да, да.
В пространстве.
Да.
Дипа плоско, на ней планарный граф,
а все лучи в пространство.
Добавили же мы плоскость.
Так вот.
Не, погодите, тут просто еще пришли.
Так вот, смотрите.
Вот предположим, что мы все в каком-то вот таком виде
хотим хранить диаграмму ворона.
Да, иногда помним, что у нас лучи, вообще-то,
иногда и прямыми бывают, да?
Да.
Да.
Так вот.
Так вот, утверждение.
Утверждение.
Тогда диаграмму ворона быстрее,
чем ZN log N построить нельзя.
У-у-у.
Если что, если у нас...
Если мы хотим построить диаграмму ворона
вот в таком, хотя бы, красиво адекватном виде.
Так, давайте начали.
Проблемы решим.
Ну, вообще решили.
Связанные с лучами.
И с тем, что с параллельными появляются.
Так.
Вот.
Вот.
Вот.
Вот.
Вот.
Вот.
Вот.
Нет.
В смысле, решили.
Чтобы хранить все это.
Нет.
Мы сказали, что...
Нет.
Ну, давайте там...
Давайте будем считать,
что некоторые ребра бывают бесконечными.
Ну, что делать?
И каждый...
И обходы граней будем начинать
с входящих...
То есть, сначала будем обходить граней,
в которых есть входящие бесконечные ребра.
Понятно, что если грань начинается
с входящего бесконечного ребра,
то как бы рано или поздно
мы наткнемся на исходящее бесконечное ребро,
на чем грань и закончится.
То есть, сначала такие грани обойдем
и так их и запишем,
что начинаем с этого ребра,
заканчиваем в том.
Вот.
А после этого,
если останутся какие-то еще ребра,
значит, из этих ребров
будут состоять конечные грань.
Это нас устроит.
Но, оказывается...
Ну, почему я утверждаю, что...
Ну, действительно, почему я утверждаю,
что теперь диаграмму Урадова
быстрее, чем Займ Логан,
вы не построите?
Ну...
Ну, у нас...
Ну, у нас...
Да.
А как мы доказываем,
что быстрее, чем Займ Логан
построить нельзя?
Можно, конечно, все отсортировать.
Да.
Ну да.
Либо сравнение,
либо, обычно, стандартный метод,
как доказать,
что что-то нельзя сделать
быстрее, чем Займ Логан.
Свести задачу сортировки
по строению...
решению задачи.
Вот.
Потому что тут доказательства
быстрее, чем Займ Логан
не получится.
Потому что,
если у вас есть задача
отсортировать энд-чисел,
то я утверждаю,
что с помощью
диаграммы Варанова
это прекрасно можно сделать
за время построения
диаграммы Варанова
плюс ОАТ.
Ну да.
Просто располагаем их...
Ну, как бы, читаем,
что...
Если числа это Х-координат,
добавляем точку сверху
и вот левый корцин нам дает.
Ну, например.
Например.
Не, можно и не заморачиваться,
а просто сказать.
Ну, просто смотрите.
То есть, задача такая.
Вот мы, допустим,
решили отсортировать числа
Х1, Х2 и так далее, Х.
Пум-пум-пум-пум-пум-пум-пум-пум-пум.
Да?
Да.
Вот.
Тогда, как бы...
Ну, можно...
Можно, если хочется раз...
То есть, тогда, в идее,
давайте просто поставим
все эти точки, действительно,
на одну горизонталь
с соответствующими Х-координатами,
да, Y равную нулю.
Ну, и там, если кому-то
очень не нравятся полоски,
давайте еще одну точку добавим,
если прям очень хочется.
И построим диаграмму...
Вот, это мы за ОАТ это делаем.
Строим диаграмму Варанова.
Вот.
Вот.
Вот.
Вот.
Вот.
Вот.
Вот.
Вот.
Вот.
Диаграмму Варанова.
Вот, например.
И тогда заметим, что,
если у нас, у каждой вершины,
как бы, у каждой ячейки есть соседи,
то мы можем построить цепочку,
то есть, вот такую вот красивую цепочку
такую выстроенную,
этих ячеек,
а это, по сути, есть сортировка.
То есть, таким образом,
сортировку N чисел
вы имеете право,
то есть, можете отсортировать
за O от N,
плюс построение диаграммы Варанова.
Поэтому, получается,
если вы умеете бы
в диаграмму Варанова
строить быстрее, чем со N,
то вы и иксы умеете сортировать
быстрее, чем со N.
Правда, в этом месте
вы меня должны подловить.
А как мы это обойдем?
В смысле, обойдем?
Да обойдем,
цепочку построим.
Просто говорим,
что вот жила была Граль,
первая попавшаяся, да?
У нее есть два соседа.
Вот давайте пойдем,
скажем, вот в этом случае.
Так, у нее есть два соседа.
Одного мы уже знаем,
а второй какой-то мы.
А, мы это пересекаем
всей полуплоскости,
мы находим ближайший,
это будет соседний число.
Нет, просто,
если мы диаграмму Варанова
нашли,
нет, если мы диаграмму Варанова
уже нашли, вот в этом вот,
в этом, в этом, в этом, в этом,
если мы нашли вот в этом,
в этом вот,
называется дважды коннекция
на графе,
то как бы вы соседей ранее
находитесь просто уже
автоматически.
А, значит посидеть не считается?
Да, то есть это уже все сделано
в рамках подсчета
диаграммы Варанова.
Поэтому получается вот это
вот этот, собственно,
упорядоченный список
вы теперь за линию делаете,
просто потому что
ну как бы, знаете,
это фактически задача,
у вас есть вершины,
вы зная, ну вот,
У вас есть заданные вершины двухсвязанного списка
Пока вы не знаете в каком порядке они идут
Но у вершины есть ссылки на предыдущий и на следующий
Восстановите, пожалуйста, связанный список за ОАТ
Внимание, вопрос
На каком семинаре, в основном потоке, это должны быть висточки на семинаре?
По-моему, там такие задачи
Не уверен, что там такие задачи вообще
Хотя задачи интересные
Вот
Так вот
Ну правда, подловить-то вы должны были в другом месте
А кто сказал, что мы не умеем X и S сортировать быстрее, чем за NLogan?
Поиските модель
Компрессор российский
Бейсмодел, да
В компрессор, да
Но это не камешки, обратите внимание
Если это NLogan, то они вообще как минимум за NLogan сортируются
Здесь они вообще маленькие, что-то делают
Но тут в чем подлянка
Проблема, что камешки мы говорили, что мы очень жестко доказывали
То есть это просто камешки, в которых все, что вы можете сделать
Это дать два камешка, сунуть их в черный ящик
И черный ящик скажет вам, что это меньше
Это даже не весы, но вы визуально можете думать, что этот меньше чуть-чуть, а тут меньше глобально
А тут с этими числами можно плюсы, минусы, умножения, деления делать и так далее
Но здесь я, конечно, совсем идеально формально не поручусь
Но тут оказывается следующее
То есть логично, что все это происходит не в целых числах, а в каких-то действиях
Существует такое понятие
Существует такое понятие, как вещественная рам
Вещественная рам-модель
Мы с вами говорили, что рам-модель это что такое
Мы говорили, что рам-модель это когда у нас в каждом регистре может находиться какое-то W-битное целое число
В каком плане вещественное?
Так вот, вещественное в том плане, что будем неожиданно считать, что в каждой такой ячейке находится одно вещественное число
Причем с неограниченной точностью и размером
Может я наврал, но...
Убермашина, я бы сказал
Вот, и эта убермашина умеет там всякие сложения, вычитания, умножения, деления, но там вот без каких-то операций
Там всякие сравнения с нулем, естественно, и так далее
Так вот, утверждение
Так вот, есть мистическая теория о том, что в этой модели n вещественных чисел вы быстрее, чем много n не отсортируете
Да, вот это уже действительно опа
Даже интересно, вот действительно, может какой-нибудь покопать и даже доказать
Потому что да, это вот вещественный рам-мод
Вот это вот действительно очень интересный факт
Прямо уже действительно...
Тут-то да
Тут прям хочется копать
Копать, копать, копать, копать
Копать
Вот, поэтому вот...
Поэтому да, то есть если мы говорим о вещественных числах, то по-видимому у вас будет, конечно, тут буквально чуть-чуть немножко порел очень сильно
Так
Вот
Так что быстрее, чем много n не получится
Но с другой стороны, а за какую симпатику мы на текущий момент умеем это построить?
Вот просто задача есть
Вот точку, вот мы прямо сейчас умеем построить, диаграмма Воронова
Ну, самое тупое
Просто для каждой точки пересесть полуплоскость
Так, ну да
Db это n-x1, n-x2
Ну да, ну почему, за какую точку мы пересекаем полуплоскость?
Да, как мы узнали из программы?
Две недели назад
То ли из лекции походу в халтрипу, то ли за лекцию
Две недели назад
Да, не было продвижения
Значит, ну да, это
За n квадрат лог
Да, получается, в принципе, да, n квадрат лог, то есть уже такой, нанивный алгоритм, правда, требующий такого продвинутого пересечения полуплоскости
Сознативность, конечно, у нас
Ну, как, ну наивно
Не, ну он действительно такой достаточно тупой, правда
Так, ну что, надо пересечь полуплоскость, ну давайте пересечем
Вот, как насчет быстрее?
Ну, понятно, конечно, ладно, то есть, конечно, Георгий Федосеевич Вороной, конечно, не придумал этого алгоритма
Да, по той простой, да, в первую очередь, по той причине, что он умер в 1908 году
Там, до того, как придумывание алгоритма стало реально актуальным
Хотя, конечно, первые намерения
А понять алгоритм, как плюс-минус временно вообще было?
Ну, вы чекотили, что скорее нет
Ну, настолько вполне
Ну, как сказать, то это формально говорят, в 26 году появился алгоритм Барувки
Ну, у него там была прикладная задача
Да, у меня есть Чехословакия, у меня есть стены электрических станций
Я хочу их связать в единую сеть
Вот, как бы мне это сделать?
Ну, вот он придумал как
То есть, из-за проводов минимально
В чем приятен еще алгоритм Барувки, что он и параллелится замечательно
Там, ну и так далее
Вот
То есть, в общем-то, да, сама вся теория алгоритма понятна
Это уже ближе к появлению компьютеров
То есть, там, вот, про 50-е годы какие там думать в эту сторону, там, и так далее
Ну, правда, от 50-е годы вот всякие прямые краскалы тогда и появились
И всякие BFS и СТ-экстрены, конечно
Д-экстрен 59-м годом базируется этого и так далее
Но, впрочем, это тоже, на самом деле, недалеко ушло
То есть, на самом деле, первый алгоритм, который был построен ЗН-логен
Строил диаграмму Воронова ЗН-логен, он датируется вообще 75-м годом
И базируется на технологии разделяя власть
То есть, и по разделям точки какой-нибудь вот этой плоскости на две части
Построим диаграмму Воронова одно и другое, а потом их как-нибудь соединим
Не, ну, как сказать, трубы нет
В общем-то, смотрите, вот, допустим, вот у нас 4 точки, да?
Ладно, 5
И тут вот какая-то подобного рода гадость есть, да?
Хоп-хоп-хоп-хоп
И, с другой стороны, где-то справа есть красивый зеленый мир
В котором находятся точки какие-нибудь вот такие, например, давайте я вот так поскрою
И тут тоже начинается вот какой-нибудь вот такой без...
Ничего интересного
Ну, допустим
Вот так, давайте сделаем
Так
Оп
Ну да, вот где-то вот это должно было быть, да?
Так
К сожалению, проблемы диаграммы, потому что их как-то сложновато создавать
Нормально, так, ничего страшного
Ну, в общем, ладно, что с этой стороны, ладно, что с этой стороны не важно приспать
Главное, что с этой стороны
В смысле, так
Да, да
В смысле, ну, у нас тут это...
Что-то получилось, кстати
Еще тогда
Вот кодовое слово
А, ну еще вот надо вот это вот
А, вот так вот еще, наверное
Нет, в нижнюю, в самую центральную вниз просто
И перейти еще с этими
Нет, не совсем тут тут
Ну, как тебе сказать, не совсем так
Как поделили на две части еще раз
Сейчас, а просто, ну, как в алгоритме препарата
То есть там типа ПХ, скажем вот
Так, вот тут вот так, наверное, надо тут
Главное поделиться
Вот так
Как-то вот, не знаю
Вот, наверное, вот так
Тут, наверное, вот так
И тут еще вот такой
Вот, допустим, вот так вот еще вылезает
Так не может вылезти, да?
А, потому что
Нет, ну, у нас же было такое, что не может быть так
Что у нас тут три точки диаграммы ячейки Воронова на одной прямой подряд лежат
Там, короче, что-нибудь вон точки присекаются
Ничего?
Тут, короче, просто не идеально проведены какие-нибудь прямые
Которые должны пересекаться на точках
Да, скорее всего, да
Ну вот, ну и идея, да
Ну, в любом случае, ладно
Здесь вот с этой стороны где-то правильно
И тут вот идея как-то вот это вот как-то попересекать
Ну и, видимо, там идея как-то заключается в том
Чтоб вот находить какие-то середины
Идти что-то там сверху вниз
Находить какие-то вот середины и перберникуляры
Вот там сначала
Там типа каких-нибудь там точек как-то идти
И тут какую-нибудь
И на какую-нибудь молнию вот так вот идти
Ну потому что фактически нам нужно дойти
Теперь геометрическое место точек
В которых расстояние до этого множества и этого множества одинаково
Правда?
То есть найти геометрическое место точек
Видимо, как ломаную
И, собственно, потом радоваться жизни
После этого
Ну как?
Ну вот, как?
Ну, я, видимо, предполагаю как это быть
Я этого алгоритма не знаю
Рассказывать его как следствие не собираюсь
Почему не собираюсь?
Потому что есть существенно более понятный алгоритм
Изобретенный 89-м году
Это называется алгоритм Форчуна
Да, он, правда, он основан на сканлайне и параллоках
Вот
Так что алгоритм, да, Форчун, да, так и пишется как Фортун, да
Это уже там 89-й год
Ну вот, да, не первый алгоритм, но пока и нотка
Но пока и имя, видимо, крещет
А это фамилия?
Да, это фамилия
Как говорится, нет, да
Это не алгоритм имени великого сошедшегося роддома
Да, нет, то вот фамилия, это такая
Но алгоритм невероятно стоит, совершенно
Да, вероятно, с алгоритмом это другая тема
Да, такой блок у нас тоже будет
Но, соответственно, так
Но, кажется, нам пришло время берега
Но прежде чем строить за Эмлоген, надо задуматься
А у за Эмлоген?
Нет, а можно ли построить за Эмлоген?
Ну как минимум, потому что
А кто сказал, что объект вообще в память за Эмлоген вообще влезает?
В память
Ну хотя бы
Ну смотрите, можно ли построить за Эмлоген объект, в котором вершин будет, скажем, энкарнизент?
А, мы же по этим вершинам
Поэтому, да, для начала надо понять, а какое у нас вообще количество вершин и ребер может быть?
Вот давайте для этого
Разминочку начнем с этого
Ну давайте прям совсем в тупую оценивать
Нет, ну совсем в тупую не получится
Миссический факт из какой-то там теории графов нам придется использовать
Не, ну совсем тупой вариант
Потому что, во-первых, начнем с того, что это, можно сказать, что это планарный граф, да?
Мне кажется, для центра будет удобнее говорить, что это планарный граф, где наши ячейки, эта вершина
Давайте так, ну давайте вот аккуратненько
Потому что основной чем мы хотим воспользоваться, это мистической формулой вида, что для планарного графа, верно, что v-r плюс g равно 2
Вы знали? Согласны?
У нас просто планарные графы сейчас подискованы
А, прямо сейчас идут, да
А, ну тогда вы знаете, да, что эта формула верна не всегда, да?
Ну понятно, только для связи
Нет, что, да, на самом деле, можно либо для связи
Либо, я помню, была ICPC задача, где приходилось прям помнить, что на самом деле v-r плюс g равно 1 плюс количество компонентов связанных
Но это не очень сложно вывести из первой формы, конечно
Да, да, да, на самом деле, да
Но просто, как вы знаете, это просто интересно в том, что когда думаешь о задаче и продумываешь алгоритм, вам придется об этом задуматься
Да, вывести это не сложно
Для связного графа, в общем-то, эту формулу там по индукции не сильно убойно доказывать, на самом деле
Вот, но, соответственно
Но главное, наверное, так же доказывается абсолютно
Ну да, ну на самом деле, да
Да, да, да
Ну почему? Можно по сумме v-r плюс g
Потому что я, кстати, вот так
Первый шрам сделал – это удалил все висячие вершины
Удаление каждой висячей вершины – это минус один отсюда, минус один отсюда, грани те же
Потом, после этого, я бы сказал, что давайте скажем, что если у нас там степень вершины в два, давайте удалим вершину и превратим эти два ребра в одного
Ну и там что-нибудь так далее
Потом там каждое ребро разделяет две грани, удаляем его, грани объединяются
В общем, в общем, какую-то такую индукцию я бы забывал
Вот, ну там
Там, ну я думал, вы там, а вот так
Так, ну а вы этим на семинарах занимаетесь?
Нам доказывали через остовное дерево
Ох ты!
А, ну вот, да
То есть знают, что работают, ну вот помнишь, что работают с програнистами, правильно?
Ну, заведем так, что начнем с того, что для нашей диаграммы Воронова в таком виде это, конечно, неверно
Потому что тут имелся в виду связный планарный врам, без вот этих ваших бесконечных ребр
Ну, в общем-то, на самом деле, можно без труда превратить этот граф в реально планарный
А именно
Завести, ну понятно, что вот, да, у вас тут, да, есть этот точек где-нибудь очень-очень-очень далеко
Вот давайте вот совсем далеко
Там можно очень далеко взять эту точку и эти ребра как-нибудь вот очень аккуратненько сюда привести
Ну, можно и не аккуратненько
Ну, главное, чтобы они не пересекались
Ну, я не знаю, там самое, не знаю, то есть, ну вот
Ну, то есть, я не знаю, у меня в голове обычно возникает красивая конструкция, что из этого можно как-бы типа
То есть, как-бы все эти точки можно поместить типа на сферу такую
Ну, сериографическую проекцию просто сделать
Что?
Сделать сериографическую проекцию, и тогда все эти бесконечные ребра, они сойдутся в точки, с которой вот проецируются
Ну, например, так, да, да, да, можно и так
Ну, да, да, да, да, да
Ну, в общем, суть понятна, тут вот только вот завороты какие-то будут вот такие, но это уже решено
Поэтому в нашем случае, если мы говорим, что это вершина ребра крайне реально диаграммного ранона, то у нас это работает по принципу V плюс 1
Минус R плюс V равно 2
Так, ну или что-то
Это плоский, да
Ну, да
Это плоский, плоский
А вот эти ребра это отрезки?
Нет, это не отрезки, вот вообще в определении планарного графа не требуется, чтобы ребра были реально отрезками
Это могут быть просто кривые любые
Вот
У нас количество грани увеличилось на одну?
У нас количество вершин увеличилось на одну, а количество грани осталось тем же
У нас же...
Сейчас
В большом счёт, вот эта вот грань, то есть наставленная вот эта вот грань, вот эта бесконечная типа, она у нас превратилась вот на самом деле вот в такую грань
Да, вот появилась грань, которая вот снаружи
А, внешне
Она соответствует тому, либо...
Нет, да, да, да, внешняя грань тоже учтена, потому что видите, у нас тут часть идёт вот так, часть вот так, и на самом деле вот эта вот это соответствует внешней гране
Так что тут всё учтено
А, всё там дырки
Кажется, что на атмосфере это наглядно даже
Ну, может быть, да, кстати, тут внешняя грань учитывается, да?
Ну, это как бы все...
Да, должна учитываться, да, конечно
Вот
Ну да, потому что если у нас в графе одно ребро, то и грань одна остается
Да, да, да
Так, итак, значит, для нашей диагаммы Воронова V-R плюс Z равно 1
Ну, само по себе, конечно, оценки на...
То есть мы знаем, что количество вершин у нас равно...
Ну, там, количество вершин у нас равно можем сразу эндорисовать
На самом деле, да?
Нам очень хочется доказать, что рюбер и, соответственно, жраней тоже...
Что мы считаем вершинами?
Только реальные, третивные мы не считаем
Да, ну всё, мы доказываем для диаграммы Воронова
Так мы не знаем, сколько вершин, мы знаем, сколько граней
Мы знаем, что граней N над таковым определением
А, ой, да, да, да
Прав, прав, прав, прав, прав, абсолютно, абсолютно, согласен, согласен, согласен, да
В принципе, можно...
Н граней?
Каждая грань это ячейка диаграмма Воронова
Да
Вот
Ну, тогда, т.к. у нас точек был исход на N, для которых мы строили, то и ячейка, получается, N
А, это было по каждой границе, держа себя духовно на одну точку, которая была в этих...
Ну, да
Хорошо
Да, да
Вот, теперь про вершинные рёбра...
Да, хочется сказать, что их какое-то там ОАТное количество
Ну, просто про вершинные рёбра, про вершинные рёбра, про вершинные рёбра...
ОАТное количество
Ну, просто так это, конечно, неправда
Для произвольного графа, да
Ну, как минимум, потому что там...
Как бы, да, т.е. граней может быть N, но на самом деле, если у вас там планарный граф устроен вот таким вот мерзким способом...
Так, а подождите, а...
Мы же опять сейчас какую-то грань сделаем
Да
Грань не прибавилась
Нет, грань не осталась столько жестоко, как была
Нет, грань не осталась столько жестоко, как была
Вот эта грань, да, превратилась вот просто в многоугольник, вон, с этой точкой
Ну, и одна из граней превратилась в обнежки, но ничего страшного
Нет, может быть, эта точка была добавлена не как точка, еще одна по ИТ
Эта точка была просто добавлена к планарному графу, который...
Правильно, поэтому мы-то вот в этой формуле в F плюс один и писали, да, совершенно верно
Да
Но я говорю...
Нет, я просто говорю о том, что из этого утверждения самого по себе вывести то, что там количество вершин и ревер это О от Н, нельзя
Мы еще можем сказать, что степень кардышника будет 3
Это...
Это самое важное, что с тем, что у нас здесь их уже N
Кого N?
Ну, граней
Ну, граней или N?
Ну как?
У нас...
Мы сказали, что у нас скажут точки по ИТ, соответственно одна грань
А теперь мы добавили до вершин...
Нет, погоди, погоди, ты не путай...
Мы добавили точку в граф диаграммы Воронова
Да
Но не...
Но есть эти точки, а есть точки, по которым диаграмма Воронова строилась
Да
Вот
Я утверждаю, что на каждую ячейку...
Каждый ячей, к сожалению, одну точку из диаграммы...
Правильно
Ну точно всего N
Потому что N точек был из диаграммы
N, но среди которых серые, но они из тех, которые получились...
Н это количество точек по...
Это количество ячей
Ну, а в каждой ячейке лежит одна вершина
Ну так у тебя кое-что не поменялось
Но не вершина
Но не вершина
Вот точки множества P
Ну я имею в виду точки множества P, да
На каждую ячейку приходится одна точка из множества P
И это не поменялось, когда мы дорисовали вот это
А как это поменялось?
Мы дорисовали вершину в граф, а не множество P
Да, мы дорисовали вершину, я понимаю
Так
Ну...
О чем еще проблема?
В том, что граней N
А
Почему?
Еще раз
А какие граней появились?
У вас столько штук поитых было, у вас было их N
Да
Поняла
Ну вот у вас серые граней их N штук
Я утверждаю, потому что поитых точек было N
Ну
А вы бросали еще одну точку после
Количество граней не поменялось
Не поменялось
Так, смотри, просто когда мы там
Когда мы тут, смотри
Важный момент, давай, видимо
Когда мы учитывали граней, мы говорили, что вот это
Вот это тоже было граней
Ну да
Потому что здесь точка находилась
А, все
О
Распасился
Во
Распасился
Да, вот, сошлось
Сошлось, сошлось, сошлось
Вот L минимум 9
Доказатель пояса
121
Да, отлично
Так
Но, как уже сказали
Если мы просто знаем, что у нас V-R плюс N равно 1
В каком-то планарном графе, да
То это еще не значит
То это ничего не значит
Что в общем случае могут быть вот такие подлые графы
В которых
Там ребер может быть
Три
Там
Ну хотя нет, тут конечно
Ребер может быть бесконечное количество
И вершин тоже, да
А граней тем не менее все равно мало
Потому что вот такая безобразие бывает, правда
Поэтому в общем случае, конечно, отсюда не следует
Что V-R это у АТ
Но заметим, что конкретно такого случая у нас не бывает
Потому что у нас есть приятное свойство
Приятное свойство заключается в том, что у вершины
Не бывает степени меньше
Не бывает степени 2 или 1
То есть мы можем обратить внимание на то
Что у каждой вершины степень как минимум 3
У этой, кстати, тоже
Потому что, напоминаю, мы рассматриваем по сути
То есть мы сейчас рассматриваем случаи, конечно
Когда
То есть не рассматриваем сейчас случаи
Когда все точки на одной прямой лежат
Но там все очевидно, да
Ну там понятно, там вершин нет вообще
Зато есть целое N-1 ребро
Да, красивая ситуация
Вот
Вот
В нашем же случае у нас есть какие-то вершины
Но у каждой вершины степень 3
Что это значит?
Это означает, что если мы
Возьмем, просуммируем по всем
Вот если мы по всем вершинам просуммируем в степени этих вершин
То получится ровно 2F, правда?
Получится?
Каждое ребро учили ровно два раза
Но в каждой вершине степень была как минимум 3
Следовательно
Значит мы можем заключить, что 2R
Это была наша домашняя
Так
Нет
Не
Ну как?
Там было про грани
Так
Грани вершины можно взять без сна
Так
Так, так, так
Может это все что угодно про грани
Но теперь пришло время, да
Это как бы связь между R
Так, ребят
Чу-чу-чу-чу
Чу-чу-чу
Тихо
Тихо
Вот
Не, ну хотя в принципе этого уже может быть даже достаточно для нас
Потому что с другой стороны мы с вами уже знаем, что R
Ровно чему?
V плюс N минус 1
Вот отсюда, правда?
Ну так давайте эту R сюда и подставим
Что же у нас получится?
У нас получится 2V плюс 2N минус 2 равно 3V
Под большим равном
И отсюда следует маленькое приятное свойство
2N минус 2 больше либо равно V
Ну то есть вывод простой
Вершин мало
Только 2A больше чем 3 на V плюс 1 все-таки наверное
Ну да
Ну ладно
Ну тогда хорошо, тут будет тогда минус 5
Можно помнить как мы получили 2A больше либо равно чем 3V?
Мы посчитали
Мы перебрали все V плюс 1 вершину
И посчитали сумму степеней этих вершин
Это не менее чем 3 на V плюс 1
Потому что из каждой вершины как минимум 3 ребра доисходят
Ну вот
С другой стороны это равно 2R
Так вот получается что на вершине у нас приятная оценка
2N минус 5
Ну и как вы думаете тогда
Какую оценку мы на ребра можем теперь вывести?
Из верхнего 3 минут 6
Да, совершенно верно
Да, вот такие красивые оценки
Интересно что они достигаются когда
Себе кажется в общем-то на 3
А для этого достаточно чтобы никакие 4 оценки изначально не лежали на одной окружности
А, ну да
Да, правильно
Давайте вот все это вытащим
Да, более того да
Насколько это 4 эти оценки?
Можно заметить маленький приятный факт
Что если вы обнаружите что у вас
Ну предположим что вам повезло
И никакие 4 точки не лежат на одной прямой
А окружности?
Откуда окружности?
Откуда минус 5 делаешь?
Потому что видите тут было не V, а V плюс 1
Потому что у нас вершин-то V плюс 1
Да
Но заметим что
Хотя нет погоди этого недостаточно еще
Потому что вот у этой вершины степень 3 это вообще более нетриоральное свойство
По-моему там еще
Слушай там по-моему потребуется еще что?
Чтобы выпуклая оболочка этих точек была треугольником
А, ну кстати сейчас
Потому что, смотрите, давайте вот о чем задумываемся
Предположим что выпуклая оболочка точек вот такая
Тогда я утверждаю что если взять середины перпендикуляр
То рано или поздно
Какая-то вот начиная с какого-то момента
Лучик явно бойкий человек из диаграммы Воронова
Так что вот этих вот бесконечных лучей будет явно столько же сколько ребер диаграммы Воронова
По выпуклой оболочки
А еще нужно что если вы не хотите чтоб степень была
Заметим чтобы степень была допустим 4 или более
Нужно чтобы соответствующие вот эти точки все тут лежали на единой окружности
Вот этим центром, правда?
Кстати обратите внимание на маленькую приятную вещь, правда?
Да
Вот, но если вы гарантируете
Что у вас там настолько хорошие рандомные точки
Что никакие четыре из них не лежат на одной окружности
То действительно тогда мы вынуждены будем заключить
Что если у вас все лежит внутри вот такого треугольника
И при этом никакие четыре точки на одной окружности не лежат
То тогда на самом деле все эти неравенства так жественно превратятся в точные равенства
То есть
Это не часто такое случается
Я понял что я ничего не понял
Ну вы задумались просто насколько эти оценки точны
Да, мы хотим найти
Такое ощущение такое
Что рассмотрим такой граф
Просто говорим
Рассмотрим, пусть у нас N точек расположены таким вот
Что опять никакие четыре точки на одной окружности не лежат
А во-вторых
Выпукла оболочка этих точек от треугольника
То есть какие-то три точки ограничиваются остальными
Да
Что вот три точки ограничиваются от треугольника
В котором лежит все остальное
Очень интересно, ладно
Так вот я утверждаю
Я утверждаю что в этом случае 2R равно 3 на V плюс 1
Почему я это утверждаю?
Потому что во-первых
Вершин у нас бывает два типа
Те кто были изначально и вот это вот
Вот у каждой из таких внутренних вершин степень будет заведомо 3
Почему?
Потому что если будет 4 или больше
То тогда найдется окружность
Которая содержит 4 или более точек
Мы себе это запретили
Давайте подумаем
А сколько у этой вершины будет степень?
Ну столько сколько у нас тут будет бесконечных лучей
И вот у меня насекает жуткое подозрение
Что бесконечные лучи будут вот в этом направлении
Вот в этом направлении
И вот в этом направлении
А других не будет
Проверить мы его как-то
Ну потому что если мы хотим скачать
Когда мы достаточно далеко от треугольника
То ближайшая точка будет на границе
В каком смысле?
Если мы достаточно далеко уходим на треугольник
То ближайшая точка будет на границе
В некотором смысле
Сейчас
Ну как бы да
Но это называется да
Вот картинка называется как-то доказывать
Так это не очевидно
А если у нас на границе этого треугольника
Где они посередине лежат ищут эту точку
Кажется это вообще верно
И ничего не поломается
Всегда
Не, ну верно всегда
Ну на самом деле понятно
Давайте посмотрим
Давайте посмотрим на вот эту как раз вершинку треугольника
Да?
Тогда какая ей соответствует речейка?
Нет
Это параболы, которые мы рисовали
Там же как раз все в треугольнике лежит
Ну считаем что строго
Ну иногда нужно чтобы строго внутри треугольника лежали
Да, но тут именно строго внутри конечно
Там на выпуклой оболочке лежит все
Это не тот случай
В общем
Ну рассмотрим вершинку как раз треугольника
Тогда ее речейка граничит всеми серперами
Ну серперами как бы между этой точкой
Давайте вот левой вершинкой треугольника
Тогда ее речейка граничит всеми серперами
Из пар точек она и любая другая
Любая
Ну это ограничено всеми этим серперами
Но заметим что они все как бы
По углу лежат между этими крайними серперами
Любой такой серпер
Да, если мы пересекаем полуплоскости этой вершины
Заметим что начнем с вот этого угла
Да
Так
И теперь начнем замечать что далее
А теперь мы говорим что любой серпер по углу лежит как-то между ними
И как следствие будет отсекать какой-то угол
Да
То есть он тогда получается от этого угла
Ну он там будет либо далеко лежать либо отсекать какой-то угол
Но вот как-то вот так потом пройти не может
Да
Ну и аналогично для каждой стрелки
Ну да более того отсюда следует красивое
Можно кажется аналогичное рассуждение на самом деле привести
Для любой выпуклой оболочки
Да
Нет, подожди
Я вошлю в мою рассуждение но кажется все очень просто
В том плане что давайте мы будем ударяться
На бесконечность
Вот возьмем любой перпендикуляр
Образованный двумя точками внутри треугольника
Любыми двумя
На серпе
Ну что, взяли что?
Давайте пойдем по нему на бесконечность
Ну пойдем
Пойдем
Я отвержаю что в каком-то моменту у нас не будет меняться
Ну в лучшем случае не будет меняться на бок точек
Которых мы равно удалим
Ну минимальное расстояние до которых у нас
Если по нему идти
Может мы начиная с какого-то момента просто будем там
Просто мы упремся куда-то и после этого пойдем
Никуда не упремся
Мы просто тупо идем вот вне зависимости от ничего
Мы просто идем дальше по нему
Ну получу то идем
Но он границам диаграмма Вороновенька в отношении может не иметь
Он да, он может не иметь
Это факт
Надо показать что нету тугир
Да
В любом случае можем
Не, ну хорошо
Хорошо
Рассматриваем так
Я отражаю что в каком-то моменте
Ну очевидно
Будет такая ситуация что набор точек до которых расстояние минимально данной на луче
Оно будет неизменно
Ну да
А вот эти точки по этой диаграмме это будут только точки треугольника
Ну которые
А почему?
Почему?
Что?
Вот непонятно вообще
Вот это вообще чуть не очевидно
Там же
А ну?
В целом
Ну да
Ну да
Ну да
Это как бы
В удалении у нас же
У нас же задача пересечения треугольника за окружностью
Как раз в этой окружности стремиться в бесконечные значения
Ну да, да, там лучше так не делать
Да
Ну окей, да
Ну давайте вот я еще тоже упомяну что заметим что то же самое рассуждение можно привести если выпала оболочка не треугольная
Если выпала оболочка вот какая-то вот такая
Может быть даже там какие-то точки лежат на ребре
Эти ручины тоже в этом случае будем читать
Ну ладно, на этом и закончим
То если мы возьмем скажем вот это ребро то я утверждаю что
Да, то утверждается что как бы бесконечные ребра будут разбросываться в точности вот этими вот серпирами
Ну доказывается тут два случая
Потому что во-первых рассмотрим вершину у которой соседи не на одной прямой с ней лежат
И тогда доказательство вот как раньше
То есть если мы пересекаем полуплоскости для того чтобы понять ее ячейку
То обнаружится что мы имеем вот такой уголочек
Ну вот и этот уголочек будет пересекаться какими-то полуплоскостями
Но они всегда действительно будут по углу лежать так что они будут как-то так вот пересекать
Ну либо вообще ни на что не влиять
Ну то есть направление этих серединных перпендикуляров
То есть направление серединных перпендикуляров они получатся в точности где-то вот
Ну как бы вот между вот то есть
Как это сформулировать там
У меня не получается думать где там и куда
Потому что плоскость будет направлена
Вот смотрите вот допустим я вот эти ребра направлю так
И каждый серпир буду направлять скажем против часовой стрелки
Серпир какой?
Ну если у меня есть ориентированное ребро, ориентированный отрезок
Не путай с вектором
То есть середины перпендикуляров к нему я буду направлять влево от него
Влево от него
Да, 95
Тогда вотfor versus
Вот видите есть такое направление тогда вот это
Тогда вот утверждается что все точки которые я могу вот тут взять
Они будут то есть направлением будут между вот этим и вот этим
Правда?
Ага
Ну вот
Ну тогда получacements серпиры будет теперь будет направляться получается вот куда-то
То есть вот по направлению между вот этим направлением и вот этим
То есть это означает, что как бы мы не брали пересечения, то есть это означает, что от каждого луча с бесконечной стороны что-то в любом случае всегда будет оставаться.
Ну вот, поэтому получается, что они останутся. Ну и там альтернативный случай, вот рассмотрим, есть у нас два параллельных ребра есть.
Вот эти вот. Ну не параллельно, в смысле два соседних ребра вот такие.
Ну тогда здесь примерно то же самое. Да, то есть здесь то же самое, но просто тут получается полоса, которые тоже все направления будут, и с этой стороны, и с этой что-то останется.
Вот, поэтому получается, что они, то есть эти ребра останутся, и они будут границами соответствующей качейки. Отсюда же будет следовать, что других лучей нет.
Вот, поэтому можно, то есть можно тут сразу оговорить, действительно это, вот такую ситуацию.
Вот.
А что мы сейчас вообще делали?
Мы поняли, сколько у нас бесконечных ребров.
Мы, мы доказали, мы, мы поняли, мы думали о том, как устроены, потому что ребра бывают конечные в диаграмме РОБ, бесконечные.
Мы показали, что, на самом деле, для этого нужно, что бесконечные ребра, это в точности, там, лучи, лучи, которые лежат на серединах пергаментигуляров, к ребрам выпуклооболочки.
Рыбу к оболочке, эти спая, красивые.
Да.
Вот, это вот, собственно, что мы поняли.
А говорили мы, вот это что, мы говорили, что если выпуклооболочка это треугольник, причем все точки лежат, остальные точки лежат строго внутри этого треугольника, и при, ну вот, то тогда оказывалось, что тогда этих лучей ровно три тоже.
И при этом, оказывалось, тогда просто получалось, что когда мы строили вот этот планарный граф, то вот этой новой бесконечной вершины степень три.
А если мы еще говорили, что никакие четыре точки на окружности не лежат, то тогда оказывалось, что и внутренних вершин степень тоже всегда три.
И тогда, отсюда, и тогда получалось, что вот эти неравенства превращались просто в точные равенства.
То есть получается, то есть, количество вершин не более чем 2n5 и ребр не более чем 3n-6, но как бы очень легко придумать тест, на котором действительно это будет буквально так.
Вот такая неожиданность. Вот. Вот такая красота у нас возникает. Вот такая красота у нас возникает.
И что она нам говорит? Ну говорит нам, ну, в принципе, да, точные минус 5, минус 6, да, они даже достаточно точные, но самое главное для нас то, что вообще говоря, диаграмма Воронова это объект линейного размера.
Линейного пл размера. Потому что в ней O от n вершил и O от n вершил.
И n-град. Ну вот. И n-град. Это приятно.
Почему O от n-град?
Потому что их не более чем приятно. Ну шея.
Своеверивая.
Вот, да.
Вот. Чему это нас приводит? Приводит нас это к следующему.
Ну, то есть тогда это означает, что у нас все-таки есть шанс строить диаграмму Воронова там за n-логом времени и более того еще и потребовать, чтобы у нас было O от n памяти.
Вот такая вот у нас, давай тогда боем oven.
Вот-вот.
Ну как же это сделать?
Да, то есть, как минимум принципиально.
brinc aa
чик
Это 빨리.
Вот так мы посмотрим как этоHDF хорошее сделает.
Вот.
Но как же это сделать?
Да, то есть, конечно, как минимум принципиально...
Объект маленький, но...
Но как бы вы его еще поставите?
Ну, как сутикс на автомат, как сутикс на индика.
Ну...
Да нет, нет, нет.
...запросы.
Какие запросы?
Ну, там какая-то, ну, там на эти гигантские...
Нет, ну, смотрите, если уж...
Ну ладно, если оставить себе только кульминацию,
да, то есть, как всегда, оставляем себе...
То есть, самое сложное оставим на потом,
и просто перед этим опишем себе,
что если там действительно дело выгорит,
то сколько всего он может...
Ну вот.
Нет, на самом деле, тогда...
То есть, например, классическая задача...
Вы знаете, когда-то давным-давно работал такой сайт,
как ECM.mitro.
Вы знаете такой?
Ну, ECM догадывает.
Нет, вот сайты...
Что такое?
Да, даже работает?
Ну, я не знаю.
А сайт вы туда что-нибудь пробовали?
Ну да.
Ну да.
Так вот, нет, просто я...
Просто гарантирую, что вот, как минимум,
на нем я видел действительно интеллектуальную задачу.
Дано там N точек,
множество A.
И M запросов.
Каждый запрос.
Дана точка, найдите ближайшую из множества M.
Вот, время пошло.
Но, слава богу,
все точки даны в офлайне.
Так вот, на самом деле,
если у вас эта штука уже есть...
Что за штука?
Ну, диаграмма Воронова.
Понятно, что по большому счету задача,
чтобы на каждой точке определить,
в какой чеке диаграмма Воронова она лежит, правда?
Ну, допустим, у вас там диаграмма...
там какая-нибудь...
и диаграмма Воронова.
Сейчас я что-нибудь тут от балды накидаю.
Я не знаю.
Ну ладно, пусть вот так.
Вот.
Абсолютно.
Вот так, вот там, я не знаю.
Что там еще бывает?
Вот так вот.
Вот так вот.
Вот так вот.
Вот так вот.
Вот. А, ну и все.
Ну вот.
Ну, такая, перволинейная, конечно.
Вот. И тогда идет такая.
Так, и у нас есть несколько запросов.
Вот этих все, да?
Ну, так идея такая.
Давайте забавляем сканлайн.
Как я видел.
Вот такой красивый сканлайн.
Он будет честно идти
слева направо и хранить, какие
ребра он прямо сейчас пересекает.
И как только появляется там какая-нибудь
точка, вот событие, да?
То как бы, ну ничего, значит, у нас там
какие-то ребра закончились, какие-то начались.
И, в принципе, можно вполне себе поддерживать
каждый момент времени в каком-нибудь там
дикартовом дереве, желательно.
Или там ордер, вот все эти ребра.
А самое главное, все вот эти
все соответственно
ячейки, которые
между этими ребрами находятся.
Понимаете, да?
Вот.
Это если мы уже построим игру. Да, конечно.
Если в офлайне. Да.
Нет, ну в офлайне, ну как-то
в офлайне это теперь будет звучать так.
Помимо событий Вершин, у вас еще
будут события вот эти зеленые точки.
Ну, когда сканлайн отключится на зеленую точку,
вы в этом дикартовом дереве за логовитами
честно нахуете, где вы там нахуете.
Ну, вот видите, это естественный вопрос.
А что делать, если у вас есть
если хочется в онлайне?
Ну, тут вам помогает
персистентное дикартовое дерево.
А очень просто.
Потому что заметим, что
в зеленой точке все, что вы делаете,
это вы ищете.
Но сами эти деревья не меняются.
Правда?
Ну, смотри, когда ты идешь к онлайну,
у тебя есть дикартовое дерево с гранями и ребрами.
Да?
Ну, для чего?
Ну, для того, чтобы хранить
вот эти вот ребра там.
Ну, почему дикартовое дерево?
Ну, потому что какой-то там катую порядку
какую статичку тебе там придется искать, скорее всего.
Это раз, а во-вторых, тебе же там
когда будешь проверять вершину,
тебе нужно проверять это вершина
выше ребра или ниже.
Ну, вот да, поэтому там
скажи, легче думать,
что ты дикартовое дерево пишешь, а лучше
АВЛ, чтобы еще и вероятности не было.
А еще лучше о дереве думать.
Что?
А еще лучше о дереве думать.
Нет, ну тут без деревьев не получится.
Ты, конечно, можешь думать о сете, но сет
думает о дереве из-за тебя.
Ну, к сожалению.
Ордер сет может тебя выкрутить.
На самом деле, если там очень аккуратно
подсунуть компаратор,
там придется немножко
вот.
Так вот.
На самом деле, в принципе, если у тебя, например,
есть, то есть получается у тебя это дерево
меняется о от н раз.
Ну, там не более чем, сколько там?
2 и минус 5 было, да?
О от н раз.
И тогда, если ты, допустим, хранишь
все эти версии дикартовых деревьев,
которые у тебя есть, то тогда ответить
для точки на запрос очень просто.
Ты бинпоиском находишь, в какую
версию дикартового дерева надо
обращаться и в нее за алгорифом лезть.
Ну вот. А это, собственно, по сути,
набор этих от н версии,
это и есть персистентное дикартовое дерево.
Вот и все.
То есть, в общем-то, в данном случае,
в случае сканлайна, да, если вы умеете
что-то решать сканлайном
на каких-то статических объектах
или когда имеют столько запросов, то как бы
оффлайн в онлайн здесь превращается вот таким
классическим образом.
Вот этим классическим персистентным, я бы
сказал.
Вот. То есть, на самом деле, вот так.
Тут разные варианты на самом деле могут быть.
Причем, как уже говорилось, можно еще
так пока, поддержать интригу, как это делать,
как это строить вообще диаграмму.
То есть, потому что там упоминается, что там еще
вообще там очень разные на самом деле
неожиданные применения на самом деле в этой
штуке возникают.
Потому что, как минимум, даже просто, вот, представьте, вы там
пойдете в лес, да?
Ну вот.
А в лесу он деревьев.
И для каждого...
Ну вот. Иногда думаешь, что для каждого дерева
вы там захотели, то есть там понятно,
что каждое дерево на какой-то эксилонокрестности
себя, наверное, там, так сказать,
преминирует, что ли.
Ну то есть, там, дотягивается к огнями
и так далее, но в какой-то момент они сталкиваются.
Вот, хочется понять какую-нибудь там зону влияния каждого
дерева. Ну вот, получится вот это.
Или там...
Или там какой-нибудь кустик начинает разрастаться, например,
вот из энточер, да?
Эн кустиков начинают разрастаться и растутся
с одинаковой скоростью, спрашивается.
Но они разрастаются, пока друг другу не упрутся,
спрашивается. До куда-то растет кустик.
А там какие-нибудь
карты, например, тоже их используют?
Ну вот. Ну и в картах кто?
В картах не совсем так.
Там ближайшего соседа тоже
с персидентным овелем еще.
В море как-то попроще можно,
я не знаю там. Но там иногда
точки меняются, поэтому, видимо, какая-то большая
война. Да, ну там
дальше могут и подхачки уже
начаться такие, чтобы там не требовать тебе
мега синтойтик. Вот.
Ну там самый хит сезона, это
то есть самый хит сезона, что
если вы посмотрите на шею жирафа,
то обнаружите, что там тоже диаграмма
Воронова.
Потому что маленький жирафер
вообще не пятнистый.
Но утверждается, что у него
какие-то просто есть родинки, которые
тоже начинают с одинаковой скоростью
разрастаться.
Поэтому...
Ну вот там вот
что-то...
Диаграмма Воронова подошла оттуда и не ждали.
Да. Не, ну как сказать?
Ну мало ли. А то знаете
просто, да. А то знаете, иногда начинают
паники задавать вопросы, особенно
в служебном клипе. Зачем это надо вообще?
А вот тут, оказывается, оно
имеет...
То есть штука жизненная, да. Ну ладно,
честно скажу, то, что я сказал, тут я
на кирулятки насылаюсь,
это да.
Ну вот.
Так вот. Так что вот действительно
замечательная штука, очень интересная,
не говоря уже о том, что треангуляция была.
Она тоже может быть построена через вот это.
Да, мы не знаем, что это.
Судя по следной витражи, сегодня мы уже не узнаем.
Ну понятно.
Ну вот. Ну ничего страшного. На самом деле так.
Скажем так, никуда
не торопимся, потому что структура
на самом деле достаточно сложная, поэтому лучше
тут вот понимать.
Ну и геометра, в принципе, такая вещь, которую
лучше обсуждать не торопясь, аккуратно
прорисовывая там все случаи.
Вот.
Вот так мы его перестраиваем пока.
Да, вот сейчас давайте к этому,
в принципе, приступим.
Выгибаем потом.
Форкчуна.
Да.
Значит, смотрите.
Ну, на самом деле, в идеале,
в идеале, да?
То есть мы тоже хотим
строить сканлайна. Причем для удобства
на этот раз мы ее хотим строить вот таким
вертикальным сканлайном сверху вниз.
Как мы ее будем строить сканлайном?
Ну, хочется, конечно, ее как-то
строить.
Ну, в идеале, конечно,
было бы неплохо, да, говорить
что-нибудь в духе, что
в каждый момент времени, например, да,
наш сканлайн дошел вот до сюда,
да, и мы вот
до этого момента диаграмму Воронова точно
знаем, да?
Прям вот уже нарисовано, что тут
лучик сюда идет, тут лучик вот ушел сюда,
тут они тут попересекались,
тут еще какой-то там
в безобразии происходит
вот такого вот рода.
Вот, вот уже хорошо, вот уже замели, да?
Но у нас есть одна
маленькая проблема.
Маленькая, маленькая,
смотрите. Дело в том, что
любая появившаяся тут
рядом точка, эту картинку может
буквально чуть-чуть перешаманить
очень сильно.
Поэтому на самом деле,
к сожалению, да, мы не можем
говорить, что, то есть мы не можем сказать,
что все, что выше этой прямой
определяется только теми точками,
которые тут находятся, правда?
Но какую-то информацию
мы определить
можем.
Точнее, в какой-то
области.
Но в какой?
А очень просто.
Там, где
гарантирована... Да, то есть
если мы гарантируем, ну, потому что в чем
у нас может быть проблема? Да, мы говорим, что
ячейка может быть определена неверно, если выяснить,
что для нее ближайшая точка находится
ниже этой прямой, правда?
Отсюда вывод, что если
мы, например, возьмем какую-нибудь точку,
которая расстояние до этой прямой
точно там больше
чем расстояние до какой-то нашей
точки, да, то тогда мы можем
гарантировать, что ее ячейка вороного
уже определена точно.
Ну, то есть, может быть, эта ячейка еще не
дорисована полностью, но, по крайней мере,
то, что это будет ячейка именно, скажем, об этой точке,
это мы уже знаем железно, правда?
Поэтому, когда у нас
есть прямая игрока в ноте, как мы
уже говорили,
мы говорим...
Мы говорим что-нибудь
в духе...
То есть,
мы говорим, что мы уже
можем точно знать, как
устроена диаграмма Воронова,
точно знать, как устроена диаграмма
Воронова
на множестве точек
выше этой прямой,
которые ближе
к этим точкам, чем к этой прямой.
Ну, хотя бы к одной из этих точек.
Ну, а теперь внимание, вопрос.
Что же это за множество точек?
Объединение парабол.
Да. Так что я доверен? Да. Именно
объединение парабол. Да.
Какой?
Это называется...
Вот откуда они честно взялись. Вот они.
То есть, на самом деле, да, вот у нас
один параболка.
Вот.
Так, вот у нас, допустим,
допустим,
какой-нибудь там
другой параболка.
А синяя параболка, на какой точке была основана?
Так.
Сейчас. Ну, давайте...
Давайте-ка временно вот эту диаграмму уберу.
Я тут сейчас вот нарисую эти параболки.
Оп. Вот здесь вот такая параболка.
Вот тут они вот где-то, кстати,
пересекаются даже.
Так. Тут вот эта параболка
как-то вот так вот устроена,
наверное, да?
И вот эта параболка как-то вот,
допустим, вот так.
Тогда вот утверждение такое,
что все, что находится...
То есть, получается,
мы можем сказать...
что все, что находится
выше вот этой мистической линии,
на нем диаграмма Воронова,
в принципе, вполне себе адекватна.
То есть, она честно определяется
именно этими четырьмя точками
и ничем, а кроме. Правда?
Можно еще раз подтвердить?
Ну вот.
Ну, рассмотрим объединение параболок.
Вот это вот.
Рассмотрим границу этого объединения.
То есть, я предпочитаю,
что все, что выше этих параболок,
то есть, там диаграмма Воронова
определяется чисто вот этими четырьмя точками.
То есть, внутри этой части...
Вот давайте я лишние части
вот эти уберу.
Вот, допустим, вот так.
А, вот это я тоже могу убрать.
Вот это я убираю.
То есть, оставляю вот эти
четыре точки.
То есть, вот то, что тут происходит,
то есть, тут уже, как бы, диаграмму Воронова
можно на этих четырех вершинах нарисовать,
и то, что попадет внутрь, вот там она действительно
такой не будет. Понимаете, да?
Доказательство очень простое.
Ну, потому что, например, вот, ну скажем,
это действительно, потому что, например,
для вот этой точки, например, мы знаем,
что она выше этой параболок.
Это означает, что для нее вот эта точка
заведомо ближе, чем даже вот эта
и, как следствие, все, что то, что лежит
ниже ее, правда?
Понимаете, да?
Вот.
И более того, ну вот,
поэтому то, что происходит выше,
значит, нас соответственно и начинает
интересовать.
Вот. Эта штука
сама вообще называется
береговая линия.
Вот, beach line.
Разумеется.
Вот.
Да. Ну, конечно, вы понимаете,
как слово beach пишется, да?
Да.
Разумеется.
Вот.
Вот.
И что теперь можно сказать?
Значит, ну более того, значит,
на самом деле теперь логика будет следующая,
и когда мы будем сдвигать эту прямую дальше,
она прямая будет двигаться.
Что будет происходить?
Ну, очевидно, вот это, эти параболки,
они, конечно, будут как-то
тоже двигаться, правда?
Значит, береговая линия будет двигаться
и замощать всю большую и большую плоскость.
Правда, разрастается она не так
тривиально, да?
Потому что она, получается, не только вниз разрастается,
но она еще и там расширяется.
Ну, потому что, вот мы,
смотрите, вот давайте
я вот попробую продемонстрировать, что происходит
вот в самом-самом-самом начале.
Вот давайте.
Вот попробуем двигаться.
Вот в самом-самом-самом начале. Вот, допустим,
у меня тут сколько-то точек есть, да?
Вот для простоты пока так скажем.
Шел,
то есть шел сконлайн, шел,
и вот он наткнулся на первую точку, да?
Тогда что произошло?
Тогда, действительно,
эти параболка пока превратилась
в вот такой лучик.
Вот такой вот вырожденный параболк.
Понимаете, да?
Вот.
Параболк.
Да, то есть теперь
некоторое время,
пока эта прямая тут вот как-то
движется, пока вот до второй точки,
то у нас как бы, то есть
это вот начинает чуть-чуть вот расширяться.
Обратите внимание, да?
Вот как-то вот так вот.
Вот так.
Да, здесь я вот еще чуть-чуть подвигаю.
Вот.
Ну вот.
Но по большому счету ничего нового
о вершинах и ребрах
мы пока не знаем, потому что
пока у нас есть только одна эта параболка,
мы можем гарантировать только одно.
Все, что находится внутри этой параболы,
лежит в ячейке диаграмма Воронова
этой точки, правда?
Это все, что мы знаем.
Пока.
Только они не касаются этих прямых.
Что-что?
Они же выше должны быть.
Да, не точно нарисовала. Хорошо.
Да-да-да.
Моя ошибочка.
Да.
Вот.
Значит хорошо.
Давайте, если я возьму какую-нибудь вот такую прямую,
то, конечно же, да, параболка на самом деле
вот так будет выглядеть.
Спасибо за уточнение.
Да, вот так.
Еще еще у нас.
А если вот так,
то, ну вот здесь уже
это будет выглядеть примерно вот тут,
что ли, где-то середина между этим, да?
Ну вот.
Ну ладно, вот сюда она попадает.
Вот.
Ну и так далее. То есть на середине
она притонирует. То есть так как
бутончик распускается,
остается бутончиком.
Вот.
То есть это красивый бутончик,
как всегда у нас там в районе.
Да,
в Китайгордорской площади такие у нас
водятся, да. Ну и так далее.
Вот. Значит шло,
все шло.
И вот наконец,
так, давайте бутончику вот так для красоты
куда-нибудь сбьем вот сюда.
И наконец
наступил такжественный момент.
Наступил такжественный момент.
Пришла вторая точка.
Вот.
В принципе, на этот момент у нас вот это
уже параболка доросла.
Вот до какого-то вот такого красивого
состояния, да?
Видите, да?
Вот.
Но внезапно пришла теперь
новая.
Новая параболка.
И упирается она в эту точку.
Я думаю, что это означает, что вообще
эта точка дает нам кое-что
новое.
Это означает,
что эта точка уже точно
лежит
на границе диаграммы Воронова.
Почему она
не лежит?
Ну вот.
Ну да.
Потому что она действительно
она вверх уже, ну вот. То есть она уже
действительно точно будет там лежать
в диаграмме Воронова, там этой точке, этой точке.
И она вот, она в них равно удалена.
Да.
Но что теперь будет происходить дальше
некоторое время? Давайте еще чуть-чуть эту прямую
сдвинем.
Значит, смотрите.
И тогда получится следующее.
Что этот бутончик
начнет тоже распускаться.
Давайте вот
аккуратненько вот распускаться.
Бутончик начнется.
Этот бутончик ну совсем
разойдется.
Ну вот. Ну совсем это вот
на сколько?
Он дойдет вот досюда. Смотрите, они пересекаться
начнут, да?
Вот.
Ну вот. И тут
нет, не настолько. Повыше все-таки.
Потому что
где-то вот здесь, наверное,
это все-таки будет.
И еще вот где-то
совсем вот тут они вот второй раз пересекутся.
Тут вот так.
Да, тут вот.
Вот такая бы.
Вот это вот оно вот упрутся. И вот это вот.
И пойдет вот дальше.
Потому что заметим, что эти две точки
тоже равно удалены от этих двух.
Поэтому по факту получится, что на самом деле
эти три точки на самом деле на одной прямой лежат.
Ну просто смотрите, что это.
Потому что эти точки лежат на границе двух ячеек
диаграммы Воронова.
Ячеек для вот этой точки и для вот этой точки.
То есть на самом деле, смотрите, мы попали на точку
и они тут начинают двигаться вот так вот
по прямой.
Вот так. То есть как бы это они тут
встали спинами друг к другу и
вот.
Вот.
И так жестко так и пошли.
То есть легко заметить, что
если у нас так две точки останутся,
то они так просто на бесконечность так жестко
на друг от друга и улетут.
Более того, мы даже можем примерно
там иногда пробовать посчитать даже
с какой скоростью они будут уходить.
Кстати, это меня действительно
интересует. А они будут уходить действительно со скоростью
или как-то это будет замедляться?
Вот для этого нам и потребуется.
Вот давайте подумаем. Пусть вот эта точка
допустим x1 и gk1.
А вот эта точка
там x2 и gk2.
Ну понятно
и gk1 меньше и gk2.
И вот эта прямая y равно t.
И нам известно, что сейчас t меньше
и gk2 меньше и gk1.
Тогда давайте нарисуем
уравнение вот этой параболки
для x1 и gk1. Как оно устроено?
Ну давайте еще раз
выпишем. Ничего страшного.
Значит давайте
x-x1 в квадрате
плюс y-y1 в квадрате
равно
по факту y
y-t в квадрате.
Вот.
То есть да.
Ну да. Можно тут
что-то попереносить.
Ну вот. Ну теперь давайте предположим, что
они пересеклись.
То есть они тут пересеклись
и то же самое мы пишем про вторую точку.
Плюс y-y2
в квадрате
равно y-t
в квадрате.
Ну во-первых отсюда легко
вывести, что на самом деле
все подходящие нам точки x-y
лежат на одной прямой.
Почему?
Давайте просто я вот из этого уравнения
вычту вот это.
Тут как бы все обнулится.
Понимаете, да?
Тут все
обнулится, а тут x-y
когда мы вычитаем x2
и y2 уничтожится и получится
уравнение вида x-b и y-c
равно 0.
Понимаете, да?
То есть получается мы можем просто прописать,
что все на самом деле лежит на прямой.
То есть эти обе точки действительно лежат на одной прямой,
которая от t вообще никак не зависит.
Ну ничего удивительного, потому что эти точки
разноудавены отсюда и отсюда.
Логично, да?
Так что в общем-то мы умеем сказать
что это за прямая конкретно даже.
Вот.
Нам конечно было бы интересно даже сказать
действительно
Хочется конечно вот эту систему решить
и найти собственно сами x-y,
какие они будут, да?
Но как же нам это сделать?
Вот как там
действительно смотреть, как
действительно эти точки
как эти точки вот x-y
будут меняться?
Прямо даже интересно.
Ну в принципе да,
если что-то вычесть,
если действительно вычесть,
то можно получить, что там
2x на x2
минус x1,
плюс там допустим
x1 квадрат минус
x2 в квадрате,
плюс 2 игрок на игрок 2
минус игрок 1.
Что там дальше получается?
Плюс игрок 1 квадрат минус игрок 2 квадрат.
Это должно быть равно 0.
Но так как у нас
напоминаю игроки
игроки у нас разные,
мы этим пользовались.
Поэтому получается, что игрок равен
чего у нас там получается?
Ну что-то типа
игрок 2 в квадрате
минус игрок 1 в квадрате
минус 2x на x2
минус x1
поделить на шо
на 2 игрок 2 минус
игрок 1. Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
Ура!
