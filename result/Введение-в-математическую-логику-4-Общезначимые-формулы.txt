Я определил уже формально формулы логики первого порядка. Ввел понятие предиката
выразимого в модели. И дальше мы будем изучать выразимость предикатов формулами
первого порядка. Но прежде чем это делать, полезно рассмотреть другой класс формул,
так называемые общезначимые формулы.
Сейчас я напишу.
Общезначимые формулы такие формулы, которые всегда истины. Какую бы вы модель не взяли,
в фигнатуре которой есть соответствующие символы, и какую бы оценку переменных вы не задали,
формула будет истиной. Что это такое? Это как раз и есть формальное отражение в нашем формализме
закона в логике. Вот утверждение истины не потому, что там что-то содержательное выполняется,
а просто потому, что оно так устроено. Поэтому, конечно, для логики этот класс формул
представляет большой интерес. Технически полезно такое еще замечание сделать,
и часто определяют немножко иначе общезначимые формулы. Вот если у нас есть формула с параметрами,
то по ней можно построить то, что называется замыкание. Это формула, которая получается
навешиванием кванторов всеобщности по всем параметрам. То есть есть какая-то формула,
в ней есть переменные со свободными вхождениями параметра, и если мы навесим на все такие
переменные кванторы всеобщности, получится замкнутая формула, в которой уже нет параметров. И как мы
знаем, замкнутая формула в каждой модели или истинно или ложно. И поэтому часто говорят так,
что общезначимые формулы такие формулы, замыкание которых истинно в любой модели.
Все разница в том, что во втором определении мы сразу делаем вначале синтаксическую замену
формулы на замыкание, и дальше уже говорим только о модели без оценки переменных.
Ну, еще важное понятие с этим связанное – равносильные формулы. Формулы равносильные.
Это в сущности означает, что формула, которая получается из них применением
связки эквивалентности, общезначима. Что это означает содержательно? Ну, смотрите,
раз общезначима, значит, истинно всегда. И формулы равносильные, если они… Эта связка истинна,
когда обе части равны. Формулы равносильные, если они принимают одинаковые логические
значения в любой модели на любой оценке перемен. Понятно, что это тоже важная вещь,
какие равносильные замены. Это так вот опыт работы с алгеброй подсказывает, что это удобная вещь,
и хорошо бы понимать, какие формулы равносильные. И общезначимость каких-то формул – это тоже
частный случай общего понятия, общезначимая формула. И, конечно, это важно с точки зрения
каких-то логических рассуждений. Ну, давайте начнем с каких-нибудь примеров. Вот я сейчас напишу
примеры, которые вам должны быть, скорее всего, на содержательном уровне знакомы.
Значит, вот есть две пары общезначимых формул. Формула отрицания формулы для
любого XA равносильна. В формуле существует X такое, что не A. Почему равносильно? Это легко
понять просто из определения… из правил оценки формул. Потому что здесь, смотрите,
когда вот такая формула ложна… Ну, когда отрицание ложное – значит, сама формула истинная.
Значит, при любом X истина-, формула A. Ну а когда такая формула тогда ложна? Когда нет такого
X, что отрицание А истинное. Ну, это тоже самое. Если нет такого X, что отрицание А истинное,
значит а истина для любого x. Ну и в эту сторону аналогично. Тавтология, о которых мы говорили,
это другой пример общезначимых формул. Допустим, возьмем какую-нибудь булливую формулу,
тавтологию от n переменных. Тогда формула, в которую я вместо этих переменных подставлю любые
формулы, любые формы. Она тоже общезначима. И это тоже очень легко понять. Ну действительно,
значит наша формула получается устроена так. Вот в начале дерево вот этой булливой формулы с
какими-то булливыми связками, а потом, начиная с какого-то места, идут уже формулы логики первого
порядка. Там могут быть и булливые связки, и кванторы, они же там могут быть и функциональные
символы. Но когда мы будем оценивать, правила оценки устроены так, что мы оцениваем снизу вверх,
от листьев к корню. Когда мы будем оценивать формулу, мы в начале оценим вот эти вот подформулы,
они приобретут какие-то логические значения. Но формула фитоавтология, какие бы значения
логические эти формулы не приобрели, все равно оценка будет истинной. Поэтому частный случай
закона в логике это вот автология. Ну а в общем случае, логика может что-то говорить о формуле
с переменным. Вот пример. Не единственный, мы сейчас это увидим. И вот хорошо бы с этим разобраться.
Значит сегодня мы сосредоточимся на том, чтобы будем понимать, какие формулы общезначимы,
какие равносильны. Равносильность, конечно, я сразу скажу, это две импликации. То есть если
А равносильно B, это значит, что из А следует B, из B следует А. Ну и давайте разбираться. Значит
с автологиями мы разобрались, но есть переменные. Как, что можно равносильного делать с переменными?
Ну мы привыкли, что в математических рассуждениях выбор переменной скорее диктуется чувством
вкуса, какой-то эстетикой, уместностью, какая разница, какую мы переменную используем. Тем не менее,
у нас сейчас уже зафиксированы определения. Поэтому в этих определениях замена свободных
переменных почти никогда не дает равносильную формулу. Вот я приведу очень простой пример.
Вообще самая простая формула. Унарный предикатный символ А и символ переменной. Так вот, если я возьму
и подставлю переменную X и переменную Y, выглядит все очень похоже, какая разница, казалось бы. Но
тем не менее, вот такая формула, давайте я даже аккуратнее напишу, не общезначена.
Что для этого нужно сделать, чтобы доказать, что она не общезначена? Нужно предъявить какую-то
модель и оценку переменных в этой модели, когда эта формула ложна. Это легко сделать. Вот смотрите,
модель это множество из нуля и единицы. Предикат А, давайте сейчас от X, можно задать тогда таблицы
значений. Ну и давайте как-нибудь, не важно даже как, лишь бы не тождественно. Пусть будет константом.
У нас вот здесь написаны логические значения. Вот эта путаница, которая возникает из-за того,
что все привыкли обозначать логические значения нулем и единицей. А модели тоже удобно строить,
используя два элемента, все, нужно писать их 0 и 1. Возникает коллизия. Нужно понимать, где 0
логическое значение, а где 0 просто какой-то элемент, число или вообще условный символ. Я
постараюсь на это обращать внимание, но вы следите за этим. Я утверждаю, что вот такая формула в этой
модели не всегда истинна. Ну и действительно, давайте возьмем ее оценку при значениях переменных
X равно 0 и Y равно единиц. Когда правая часть единиц, как мы видим, а левая часть 0, значит
эквивалентность ложна. Таким образом, менять имена свободных переменных мы не можем. Наш
формализм, он прибивает имена свободных переменных. То есть, когда мы написали формулу, мы определили
какой-то предикат, но на самом деле мы заодно и зафиксировали, как мы называем параметры этого
предиката. Ну такая особенность формализма, от нее достаточно трудно избавиться и непонятно зачем. Это
имеет и свои достоинства такое. Хорошо, но это свободные переменные. С ними вроде бы вообще все
понятно, но как? Ну действительно, это разные вещи, к чему мы их должны отождествлять. А связанные
переменные? Давайте вспомним, как мы оцениваем переменную с квантором. Допустим, у нас есть
квантор по перемену Xn. Мы в формулу подставляем все возможные значения Xn, и правило оценки
формулы, оно такое, от конкретного значения Xn не зависит. Если все Xn дают истину, то истинна,
если хотя бы одно дает ложь, то ложь. Поэтому, казалось бы, от имени переменной под квантором,
связанной такой переменной, не должно ничего зависеть. Это общее правило в математике,
допустим, когда у нас есть индекс суммирования или переменная интегрирования. Ну какая разница,
как вы назовете переменную интегрирование? Интеграл от этого не изменится. Тем не менее,
определенную бдительность проявлять нужно. Давайте посмотрим, например, чуть более сложная формула.
Бинарный предикатный символ, две переменные X и Y, и на одну я навесил квантор. Переменная Y
ходит свободно, переменная X связана. Про Y мы уже разобрались, но давайте попробуем сделать замену.
Вместо X подставим Y. Какая формула получится? Для любого Y, А, Y, Y. И беда, эти формулы тоже
неравносильны. Ну как в этом убедиться, очень легко. Я даже ничего писать не буду. Представьте,
что бинарный предикат равен множеству, в котором больше одного элемента. Тогда что написано внизу?
Для любого Y, Y равен Y. Ну да, равен. А тут что написано? Для любого X, X равен Y. Это,
во-первых, получается у нас унарный предикат, но он тождественно ложный. Для любого Y,
если там хотя бы два элемента, он будет ложным. Конечно, неверно, что для любого X, X равен Y.
Поэтому с заменами связанных переменных нужно проявлять тоже определенную бдительность. Я,
наверное, сейчас вот это вот сотру, тут я занял много места под определение, но они постоянно
воспроизводятся, поэтому я не думаю, что будет большая путаница. Тем не менее, наша интуиция
подсказывает, что что-то должно получаться и действительно получается. Ну есть более общие,
на самом деле, результаты, когда подстановка связанных переменных безопасна, я сформулирую их
в простейшем случае, которого нам будет достаточно. Идея, на самом деле, такая, что вот эта проблема,
которая здесь возникла, она единственная возможная. В чем проблема? Я подставил вместо X,
вот на X навешен квантор, и я подставил вместо X переменную, у которой есть свободное вхождение
в области действия этого квантора. После этого они перестали быть свободными. Вот смотрите,
вот здесь вхождение свободное, а здесь уже связанное. То есть возникает такой конфликт связанности. Мы
сделали формальную замену и получили формулу, в которой другие соотношения между свободными
и связанными вхождениями переменных. Вот это вот препятствие, оно, по сути дела, единственное. Но
чтобы упростить немножко, я сформулирую. Давайте я чуть позже сформулирую, я забежал вперед. Тут,
на самом деле, еще должен был быть третий пример, и без него, пожалуй, уже даже сейчас я не обойдусь.
Это очень простая вещь, это тоже называется лемма, но она очень простая. Лемма замене.
Нам понадобится буквально через пять минут, может быть, не в доказательстве этой леммы,
а сразу за ней. Что это означает? Пусть у нас есть равносильные формулы. И формула phi,
точнее формула phi-штрих, получается из формулы phi заменой под формулы A, вместо под формулы A,
я вставляю под формулу B. Вот у нас есть phi, вот тут какая-то подформула. Ну да, под формула A.
И я получаю из этого под формулу phi-штрих, вставив просто на то же самое место, вот под формулой
есть корень, и вот я вместо этого корня подставил прям формулу B. Я утверждаю, что эти формулы после
такой подстановки тоже равносильны. То есть это очень естественная вещь, но лучше ее проверить.
Я о ней даже забыл сказать, настолько она естественная, но тем не менее. Давайте поймем,
почему это так. Ну просто из определения. Что значит, что формулы равносильны? Они должны
принимать одинаковые значения в любой модели, на любой оценке переменных. Ну давайте возьмем
какую-нибудь модель, какую-нибудь оценку переменных и начнем оценивать формулы phi и phi-штрих. При
оценке phi мы в какой-то момент должны вычислять значение формулы A. Ну хорошо, а формуле phi-штрих
мы в этот момент должны вычислять значение формулы B. Но эти значения совпадают в любой модели,
на любой оценке переменных. Поэтому совершенно не важно, какую формулу вы оцениваете, у них
результаты всегда одинаковые по условию. Поэтому и в формулах phi и phi-штрих результаты будут
получаться одинаковыми, потому что вот это место, где мы сделали замену, оно никак не
различает. Формулы ни в какой модели. Это важный момент, которым я забыл сказать. Мы его постоянно
используем и он кажется очевидным, но лучше проговаривать, потому что вот пример с этой
заменой показывает, что когда у нас формализм уже зафиксирован, могут возникать неожиданные
проблемы. Теперь, значит, лемма о свежей переменной. Вот пусть у нас есть формула вида для
любого х, я все время пишу для любого. Для кванторов существования верно то же самое,
просто я для экономии времени не повторяю те же самые утверждения про кванторы существования,
но видя вот эти вот формулы ясно, что квантор существования я могу просто заменить на
равносильное выражение с квантором всеобщенности. Поэтому мы ничего не теряем. Пусть у нас есть
такая формула и у не имеет свободных вхождений вам. Ну, это на жаргоне означает, что переменная
свежая. Вот у нас есть формула, у там не является параметром, но такая свежая переменная. Теперь
давайте напишем формулу, я ее как-нибудь сразу обозначу а штрих. Это формула,
которая получается заменой свободных вхождений х на у. Ну, вы видите, я постоянно использую такое
обозначение, оно всегда будет у меня вот тут, только я палку не поставил. Это просто указание на то,
что я вот это меняю вот на это. Здесь я целую под формулу меняю, а здесь только переменную. Это
частный случай. И меняем мы только свободные вхождения, остальные мы не трогаем. Тогда утверждается,
что формула для любого ха равносильна формуле для любого у штрих. То есть вот этой вот проблемы,
которые я здесь обозначил, ее в этом случае нет. Сделали замену, сделали,
получили равносильную формулу. Но это уже надо доказывать, поскольку был кон пример,
ясно, что нельзя просто обойти вопрос о том, почему это верно. И тут, в общем-то,
мы первый раз должны более внимательно порассуждать о правилах оценки формулы,
чтобы доказать эту лему. Что именно нам нужно сделать? Вот смотрите,
давайте пусть у нас есть какая-то оценка переменных кси, и как-нибудь переменная х пусть
оценивается как а при этом. А как оценивается у, неважно, если мы будем оценивать эту формулу,
там ничего не стоит. И давайте я введу еще одну оценку переменных кси штрих, где как а оценивается
переменная у. То есть кси и х штрих остальные одинаково. То есть для остальных переменных у
нас оценки одинаковые. Ну а для х и у тут не существенно как у оценивается, тут не существенно
как х оценивается. Ну пусть тоже одинаково и неважно как. То есть мы переставили местами оценки
х и у. Давайте посмотрим, что это означает. Когда я оцениваю формулу а, х там входит свободно,
у вообще никак не входит. Поэтому оценка формулы а на кси. А во штрих наоборот, там уже нет свободного
вхождения х, мы их все заменили на у. И когда мы делаем оценку, представьте, что в у я подставляю
то же самое значение, что подставлялся в х, вместо свободного вхождения. Свободное вхождение,
напоминаю, никаким квантором сверху не прикрыто. Поэтому все правила, которые мы будем применять к
этой оценке, они не потребуют других значений этой переменной. Если у нас есть свободная переменная,
какая-то переменная свободная. Вот тут кванторов нет, поэтому в каком бы я месте не оценивал,
если я уже сказал, что х это а, то вот на любом этаже моей формулы, на любом уровне нужна будет
только эта оценка ха, потому что это вхождение свободное. Если бы оно было связанным, там правило
другое. Ну и поэтому получается так, что оценка а штрих на кси штрих точно такая же, как а на кси,
потому что теперь у нас все остальные переменные принимают те же самые значения, а х и у мы
поменяли местами. То есть значение то же самое, а подставлено в а штрих у вместо ха, поэтому по
сути дела та же самая формула. Ну хорошо, значит получается, что вот у нас есть такие пары оценок,
соответствующие друг другу. Давайте теперь оценивать формулы с навешенным квантором. Возможные
значения х при оценке этой формулы в точности отвечают возможным значениям у при оценке этой
формулы, и мы знаем вот по этому рассуждению, что они совпадают. Поэтому если есть какой-то х,
при котором формула а ложна, будет ложна левая часть, тогда будет ложна и правая часть,
потому что есть соответствующая оценка, где, например, у принимает это значение. А если такого нет,
ну нет такого и с правой частью. Таким образом мы получаем доказательства этой леммы. Не очень
сложная, как видите, но требует уже вот какого-то такого более детального рассмотрения именно правил
оценки. Это нам будет нужно нечасто. Вот сегодня у нас еще что-то такое будет, а дальше в основном мы
будем использовать те утверждения, которые сейчас появятся уже как блоки в наших рассуждениях.
Иногда придется, конечно, опускаться до низкого уровня, потому что не все прям сегодня будет
рассказано, не все подробности формализма. Хорошо, что это означает? Это означает, на самом деле, вот что.
Что мы можем, используя лему о замене, мы можем проделать следующую процедуру. Вот если у нас
есть в формуле, ну какая-то подформула, которая получается навешиванием квантора, мы можем взять
какую-нибудь свежую переменную. Формула это слово, оно конечной длины, там каких-то переменных точно
нет. Вот взять какую-то переменную, которой нет, и воспользовавшись вот этой леммой о свежей
переменной сделать замену. И у нас тогда вот эта подформула конкретная, в ней уже квантор будет
навешан по переменной, которая точно ни в какие другие места формулы не входит. Давайте я зафиксирую
это важное понятие, формула с разделенными переменными. Это отвечает одному из правил хорошего
математического стиля, которому трудно удовлетворять всегда, потому что алфавиты
конечные, а доказательства длинные. Что когда мы рассуждаем, лучше бы в одном рассуждении не
использовать одну и ту же букву дважды, даже если это не приводит к явному противоречию. Ну типа вы
в одном месте х обозначили что-то одно, в другом что-то другое, х очень удобная буква, очень-очень
трудно избежать его переиспользования. Тем не менее, математики стараются так не делать,
что если началось доказательство, что-то я обозначил х, значит если мне нужно что-то еще,
я обозначу у и так далее. Эта вот на самом деле, возможность этого принципиально гарантируется
как раз существованием равносильной формулы с разделенными переменами. Так что это такое?
Давайте я зафиксирую, что это такое. Во-первых, все переменные в кванторах различны.
Во-вторых, каждая такая переменная
входит только в область действия квантора. Этого квантора. Смотрите, тут я написал,
такая это значит, что это переменная, которая входит в квантор. И вот входит она не просто так,
а входит только в область действия этого квантора. Другими словами, все эти переменные
отличаются от переменных, которые имеют свободное вхождение. Ну и не входят в области действия других
кванторов тоже. Но это, впрочем, понятно, потому что обвхождение было свободным. Из этих двух
условий сразу следует вот этот вот важный вид, что у нас каждая переменная в формуле, мы знаем,
что либо это параметры, она тогда входит только свободно, то есть никаким квантором она не связана,
либо она связана, и тогда мы знаем точно, что есть квантор, который ее накрывает,
и переменная входит только в область действия этого квантора. Более того, значит, теорема
состоит в том, что всякая формула эффективно равносильна. Ну, я напишу коротко. Формула с
разделенными переменами. Что значит слово эффективно? Ну, смотрите, если у нас формула
замкнутая, то в любой модели либо истина, либо ложна. Ну, правда, еще надо суметь подобрать. В общем,
смысл такой, что может так случиться, что есть какая-то формула, которая равносильно нашей,
но она по каким-то неведомым нам причинам существует. Вот здесь ситуация другая. Это
абсолютно преобразование от формулы к равносильной формуле с разделенными переменами, оно может быть
осуществлено алгоритмом. Эффективность у меня сюда будет пониматься именно так, что не просто
существует объект, а его можно построить алгоритмом. То есть есть алгоритм, который берет формулу и
строит формулу с разделенными переменами. Алгоритм уже в сущности понятен. Давайте вернемся к
лему освежей переменной, он ее использует многократно. Смотрите, мы смотрим на формулу.
Значит, прежде всего нам нужно применить алгоритм разбора формулы, потому что нам
нужно дерево разбора. Ну, чтобы говорить о свободных, связанных, вхождениях, это по дереву
разбора формулы очень легко определяется. И вот мы смотрим, есть ли переменная, у которой есть
одновременно свободные и связанные вхождения. Если нашлась такая переменная, мы тогда применяем
лему освежей переменной к ее связанному вхождению. Находим квантор, который ее связывает,
и к соответствующей подформуле применяем вот эту лему. Заменяем на какую-то новую переменную,
которой раньше не было. Что? Ну, мы берем тот квантор, который ее связывает. То есть у нас
вот есть переменная. Может случиться так, может случиться так, что у нас на пути к корню в дереве
разбора квантор по этой переменной встречается несколько раз. Мы доходим до первого снизу и
заменяем вот в этой подформуле. То есть вот здесь вот уже это вхождение в этой подформуле,
это вхождение X уже свободно, и мы применяем вот лему освежей переменной. Поэтому у нас тут
появляется какая-то новая переменная, и этот квантор становится по новой переменной. А тот,
что выше, пока остался. Что дальше происходит? Дальше мы смотрим еще, какие у нас еще могут быть
конфликты. Но если я так буду делать, заметьте, что при этом количество кванторов в формуле не
меняется. То есть если у меня был проблемный квантор, который навешан на переменную,
имеющую свободное вхождение, то он после такой замены, конкретно это вхождение квантора,
перестает быть проблемным. А общее количество кванторов не изменилось. Значит, рано или поздно
мы придем к тому, что такого нет, что свободное вхождение переменных и связанные разделены. Но
может случиться так, что переменная все-таки еще входит в область действия какого-то другого
квантора. То есть на нее навешан квантор. Ну вот смотрите, вот такая картинка. Может
случиться, что переменная X, конечно, связана, и вот она связана. Но на нее навешан квантор
по какой-то еще переменной. Ну что тогда нужно сделать? Сейчас давайте поймем, можем ли мы этого
избежать. А нет, это не противоречие. Нет, нет, подождите, это не противоречие. X входит в область
действия квантора по X. Так что все мы уже сделали. Ну да, все мы сделали. Вот мы на самом деле
выполнение второго условия добивались, но заодно решили проблему с первым условием. А нет, не все.
У нас с самого начала могли быть кванторы по X, скажем. Нет, не все. Вот у нас может быть вот
такая подформула и вот такая подформула в разных вообще частях. Вот эта процедура, которая сказала,
ничего с таким не сделает, потому что оно было и было. Допустим, у X нет свободных вхождений. То есть
нам нужно еще первое условие добиться. Но здесь понятно как, если у нас есть две такие подформулы,
мы опять-таки берем свежую переменную, в одну из них заменяем. То есть опять-таки количество таких
проблемных пар, пар подформул, которые по одной и той же переменной навешаны, оно уменьшается на
единицу, количество пар конечно, поэтому рано или поздно мы остановимся. И остановимся мы на формуле
с разделенными переменами, потому что первый шаг нам гарантирует выполнение того условия,
второй шаг вот этого. Давайте, чтобы было понятнее, это важная вещь, поэтому давайте я пример прям
разберу. Возьмем какую-нибудь форму. Ту, которую я писал, давайте к ней что-нибудь добавим.
Пусть это будет посылка импликации, а здесь добавим, чтобы были все проблемы,
о которых я говорил. Вот формула. Что будет делать алгоритм? Можно начинать с одного или с другого,
давайте в том порядке, в котором я рассказал. Мы смотрим, есть ли у переменной со свободными
вхождениями связанные вхождения. Свободное вхождение здесь одно, я думаю, все видят. Все остальные
вхождения переменных связаны. Первое вхождение у, оно свободно. Мы смотрим, есть ли связанные
вхождения. Есть. Значит, мы должны сделать замену, скажем, на переменную Т в этой формуле. Эта под
формула не изменяется. Пока. Мы так по шагам действуем. Я не обсуждаю реальную эффективность
алгоритма, что он работает быстро, но он более-менее эффективен, потому что дерево разбора построить
легко, а те проверки, которые мы делаем, это тоже легко. Это мы проверяем, на каждом пути есть
что-то или нет. Вот мы получили равносильную формулу. Теперь смотрим на нее. Теперь у нас уже
переменная, имеющая свободные вхождения, связанных вхождений, не имеет. Она одна, но есть препятствие
второго сорта. Смотрите, вот в этой подформуле, в этой подформуле использован X. В реальной жизни
откуда получаются вот такие дубликаты? Представьте, что у вас есть формальная система, которая поддерживает
знания по математике. У меня есть определение обратного элемента в группе, еще чего-то, и там, как
всегда, пишется, что для любого X что-то выполняется. В одном определении для любого X, в другом
определении для любого X. А потом вы делаете утверждение, которое комбинирует эти два
определения. Формально вам нужно эти формулы подставить, и у вас получится в одной части формулы X
и в другой части формулы X. Чтобы потом с такой формулой работать... В конце я докажу некоторую
важную теорему, там это точно нужно, но очень часто бывает нужно разделять. Во всяком случае то,
что мы можем разделить, это часто бывает существенно. Ну, что нужно сделать? Надо опять-таки выбрать
какую-то подформулу. Давайте вот эту. А и В это вообще предикатные символы здесь. То есть это вот
такой простой пример. Это не формулы, это предикатные символы. Потому что если бы там были какие-то
кванторы, нам бы пришлось тогда анализировать. То есть вот это доказательство существенно использует
структуру формулы, поэтому если есть подформула, в ней тоже нужно применять те же самые действия.
А тут просто атомарные формулы, поэтому нет проблем. Ну, давайте там, не знаю, на Z заменим.
Лемма о свежей переменной гарантирует, что эта замена корректна. И вот мы получили уже формулу
с разделенными переменами. То есть видно, что это легко сделать, и руками это легко. Вообще делается
главное проявлять внимательность. Ну и компьютерную программу, которую делать, написать очень легко.
Это абсолютно не проблема. Значит, если нам зачем-то нужно, мы можем считать, что наша формула с
разделенными переменами. Каждый раз, даже если нам нужно говорить о каких-то алгоритмах,
мы можем предполагать, что у нас на вход подана формула, мы ее вначале разделим, переменные,
получим равносильную формулу и будем работать с равносильной формулой. Что если вопросы,
которые относятся к логике, не к структуре формулы, а к логике, ну тогда какая нам разница,
какую мы формулу из пары равносильных используем. Они всегда оцениваются одинаково. Хорошо,
значит, вот это первая важная вещь, которая мне понадобится. Я постараюсь, кстати, ну тут уже
места мало, но пусть будет. Я постараюсь здесь дальше писать. Значит, опс, а что это звонок рано?
Что? Не было звонка? А, значит, меня послышалось. Они плохо слышны, я прислушиваюсь, но начинаются
слуховые галлюцинации. Значит, что теперь хочется обсудить? Формулы можно преобразовать,
получать равносильные и важные типы преобразования – это перестановки кванторов и перестановки
кванторов и связок. В сущности, в формулах больше особо ничего нет. Мы пока не обсуждаем,
что делать с атомарными формулами. Ответ более-менее ничего нельзя делать. Что там написано, то и есть,
потому что если вы иначе напишете, то можно проинтерпретировать по-разному. А вот кванторы
можно переставлять. Давайте я буду продолжать. В частности, одноименные кванторы можно переставлять.
Ну и то же самое с квантором существования. Я сейчас напишу, а потом, наверное, для скорости
писать не буду, но доказывать уж точно буду только одну пару. И я не пишу, что это общезначимый. Вот
смотрите, у меня тут список общезначимых формул. Я считаю, что слово «общезначимый» написано
наверху списка. Ну почему так? Как это доказать? Более-менее ясно из правил оценки формулы,
но тут очень удобно. Я сейчас это напишу и буду использовать сегодня постоянно. Удобно
представлять себе модель в виде такой таблички. У нас тут А. Значит, ясно, что если там есть параметры,
но они будут оцениваться одинаково, поэтому ни на что не влияет. Нас интересует оценка от
переменных х и у. И тогда оценка формулы от переменных х и у при фиксированных остальных
значениях, ее можно представить в виде такой таблицы. Вот значение х, значение у. И что тогда написано
слева? Написано, что для любой строки и для любого столца стоит единица. Ну то есть формула истины,
когда я обсуждаю, когда она истинна. Тогда и только тогда. Но что значит в любой строке и в любом столце
стоит единица? Значит, что все позиции в таблице равны единице. Ну а что написано здесь? А здесь
написано то же самое. Для любого столца и для любой строки стоит единица. Ну какая разница,
в каком порядке мы перечисляем все элементы таблицы? Поэтому здесь достаточно очевидно.
С разноименными кванторами ситуация более сложная. В одну сторону формула общезначимая.
Из того, что существует х такой, что для любого у истина а, следует, что для любого у существует
х такой, что выполнена а. Ну те, кто успевают слушать, уже, в общем-то, наверное, и услышали,
почему это верно, потому что если так это проговорить про себя, то это ясно. Давайте сейчас
прервемся, я буквально 30 секунд займу. Давайте на картинке посмотрим, что означает посылка. Она
означает, что существует такая строка х, в которой стоят одни единицы. Для любого у единицы. А что
означает правая часть? Для любого столца найдется строка, в которой стоит единица. Если есть строка
из одних единиц, ясно, что она для любого столца будет давать нужное значение. Может быть,
еще какие-то, но это точно будет. Вот поэтому эта формула общезначима. Хорошо, сейчас давайте
прервемся и после перерыва продолжим. Смотрите, я перед перерывом очень быстро доказал,
что самый высокий из карликов ниже самого низкого из великанов. На самом деле общезначимость этой
формулы это частный случай некоторого более общего утверждения, что max-min не больше,
чем min-max. Я не буду его доказывать, вы можете сами сформулировать и доказать. Это очень
несложное утверждение, оно на самом деле встречается во многих местах. Но обратное неверно. И я вот
в нашем примере сейчас объясню. Собственно мне эта картинка скорее нужна для обратного примера.
Почему в обратную сторону неверно? Предположим, что истина, что для любого столца найдется
строка, в которой стоит единица. Например, вот какая-нибудь простая модель опять-таки на двух
элементах, к которым я даже не записываю значение. Вот в каждом столце есть строка,
где стоит единица. А теперь посмотрите на то, что написано слева. Это ложно, потому что там утверждается,
что найдется строка, где только единица стоит. Строк у нас всего две, сразу видно, что такой строки
нет. Поэтому если нарисовать стрелку в обратную сторону, это будет неверно. И у нас этому там
прям на первом курсе в анализе, я подозреваю, очень строго учили, что кванторы разноименные
переставлять нельзя, будет ошибка. Но может быть даже при этом не говорили, что в одну сторону можно.
А может и говорили, не знаю. Обычно просто стараются, чтобы люди запомнили, что нельзя,
поэтому говорят, что нельзя, а что можно не говорят. И сейчас я хочу продолжить эту историю,
что можно, а что нельзя. Тут полезно заметить, что квантор всеобщности напоминает конъюнкцию.
Ну для всех x, это берем конъюнкцию по x, можно формально было бы вообще квантор всеобщности
писать бы вот так для любого x, а. Но логики очень не любят обозначений, которые не являются словами,
а тут вот математики используют подстрочное обозначение, поэтому логики такое не используют.
Хотя почему бы нет. А квантор в существовании это понятное дело дизюнкция по x. То есть кванторы
всеобщности и кванторы в существовании, они, понятно, один связан с конъюнкцией, другой с
дизюнкцией. Поэтому в общем-то не удивительно, что вот есть такие равносильности. Ну и с квантором
в существовании то же самое. Давайте я даже не буду переписать. Нет, с квантором в существовании
тут надо переписать, потому что связка-то другая. Прошу прощения. Аналогично, но связка другая.
То есть если у нас... А что это означает формуле? Вот смотрите, когда мы будем читать формулу,
это означает, что у нас есть для любого x и под ним есть связка. А здесь наоборот, здесь связка,
под которой мы поставили квантор. То есть фактически равносильность этих формул объясняет нам,
что в дереве разбора вот можно такие преобразования делать. Менять местами конъюнцию квантор всеобщности,
если они соседние. Ну почему это верно? В общем-то из правил оценки это сразу следует, потому что
если верно истина левая часть, это значит, что при каждой оценке, при каждом значении x,
a должно быть верно и b должно быть верно. Но если a верно, значит вот это верно, если b верно,
то вот это верно. Ну и наоборот, если мы знаем, что a верно для любого x и b верно для любого x,
то их конъюнция тоже для любого x истина. Тут никакой фантазии нет. И с квантором в
сочетании тоже самое. А вот со связками, которые не соответствуют кванторам ситуация, конечно,
хуже. Давайте сейчас убедимся, что там ничего такого нет. Это более-менее понятно, дизюнция
конъюнции не равняется конъюнции дизюнции, но тем не менее. Давайте посмотрим. Возьмем формулу
для любого x, a или b. И формулу для любого x, a или для любого x, b. Я утверждаю, что они
неравносильны. Действительно, смотрите, чтобы вот эта формула была истинна, при каждом x нам
достаточно, чтобы была истинна какая-то одна из формул, а или b. А чтобы эта формула была истинна,
нам нужно больше. Нам нужно, чтобы какая-то формула была одновременно истинна для всех x.
Ну давайте я сейчас напишу модель какую-нибудь несложную. Вот скажем вот так. Смотрите,
для любого x дизюнция истина, потому что при каждом значении x у нас есть хотя бы одна единичка. Но
для любого x, a ложна, потому что вот при этом x, a ложна, а при этом x, b ложна. Значит тут оба
члена дизюнции ложны. Ну и если я возьму квантор существования и наоборот конъюнцию, прямо та же
модель пройдет. Думаю да. Смотрите, в той же самой модели вот эта вот истина, правая формула,
потому что конечно для a существует x, где она истина. И для b существует такой x. Но такого x,
чтобы одновременно были истины и a и b не существует. Поэтому вот это вот ложно
в этой модели, а это истина. Все, достаточно. Одного к вам примера достаточно, что будут ждать,
что у нас нет истинности. Ну и если мы возьмем импликацию тоже, любимая логиками связка,
там будет то же самое. Просто так переставлять нельзя. Ну в общем, по-моему на этой же модели
можно увидеть. Давайте сейчас я чуть-чуть отстаю от графика. Давайте это я пропущу проверку. Но она
точно такая же. Но так же как вот в этом случае, это не вся правда. Значит правда, что просто так
безнаказанно переставлять местами дизюнцию и квантор всеобщенности, а также конъюнцию и
квантор сочетания нельзя. Но есть очень важное исключение. Я его сейчас изложу.
Исключение касается вот чего. Когда в одной из формул в связке нет свободных вхождений x.
Вот пусть b не содержит свободных вхождений x.
Та-дам. Ну а сейчас напишу разные эквивалентности. Для любого x,
тогда общезначимы. Заметьте, что вот это условие не содержит свободных вхождений,
оно синтоксическое. По формуле очень легко проверить, содержит оно свободных вхождений
или нет. Поэтому эти эквивалентности, которые я пишу, их можно эффективно проверить.
Значит, а и b, тогда равносильно для любого x, а и b, существование x. Не знаю, в каком порядке
лучше писать, как получается. Ой, только нет, с конъюнцией-то у нас все хорошо и так. Я уже
записал. Нет, с тезюнцией. А тут как раз конъюнция. Заметьте, что я здесь не пишу квантора всеобщности.
В моем предыдущем примере надо было бы написать квантор всеобщности, но это некоторое общее
наблюдение. Представьте, что у вас переменная не является, ну вот как здесь написано, не содержит
свободных вхождений x. Я утверждаю, что тогда формула для любого x, b, равносильно b. Такое отступление в сторону
достаточно очевидное, но поскольку тут много всяких правил возникает, полезно его обсудить. Почему так?
Ну давайте вспомним, как мы оцениваем эту формулу. Нужно придавать x-ам все возможные значения и
смотреть, что получается. Но раз x не имеет свободных вхождений, мы в прошлый раз доказали, что значение
формулы b не зависит от значения x. Какое бы вы x не подставили, b будет принимать одно и то же значение.
Если это истинно, то формула истинна, если ложна, то ложна, но это и есть значение формулы b. Поэтому я
так сокращаю и не пишу лишнего. Так, значит это у нас конъюнция и дизюнция. Теперь с импликацией.
Ну давайте с импликацией.
Не знаю, кто увидел заминку, которая у меня случилась. Мы ее сейчас обсудим, это очень важная заминка.
Теперь я возвращаюсь к той формуле, с которой начал. Я просто не с нее хотел начать. Вот смотрите,
когда мы выносим квантор из заключения, ну вот вынесли и вынесли. А когда выносим из посылки,
есть коварная особенность, которая на самом деле порождает реальные логические ошибки в рассуждениях.
Не всегда, но порождает. То есть я сталкивался с такими и с личными ошибками, и с тем, у других людей.
Оказывается, нужно квантор поменять в посылке. В заключение не нужно, а в посылке нужно.
Вот такая удивительная вещь, что, казалось бы, B не содержит свободных хождения X, но тем не менее,
когда мы выносим через B, как-то выносим из формулы, переставляем импликацию и квантор,
это может привести квантор сохраниться, но уже может другой квантор случиться. Как это доказать?
Ну это лемма. В принципе, все очень просто. То есть нужно помнить, что если у нас один из членов
конъюнкса или дизюнкса не содержит свободных хождений X, то тогда квантор по дизюнксу или конъюнксу
перестановочен. Неважно, какой квантор. Часть кванторов всегда перестановочена,
которые одноименные со связкой, а часть именно когда B не содержит связок X. С импликацией
чуть сложнее, но это мы сейчас увидим, почему так получается. Давайте докажем. Мне все равно здесь
придется стереть. Давайте я вот перепишу. Мне нужен результат будет потом. Я его наверху оставлю.
А вот этот сотру, чтобы можно было здесь писать доказательства. Идея очень простая. Смотрите,
давайте зафиксируем значение всех переменных кроме X. Тогда что можно утверждать про формулу B?
Она приобретет какое-то конкретное логическое значение, потому что от X там нет свободных
хождений, значит от значения X ничего не зависит. И нам нужно рассмотреть реально два случая. Когда
формула B ложна, ну и соответственно когда она истина. Давайте смотреть. Тут большая часть случаев,
прям ничего не надо писать. Если B ложна на какой-то оценке, смотрите, тогда A или B это A.
Дезюмпс с ложью это высказывание. А здесь B ложна, поэтому вот эта формула это для любого
XA. Тут мы получаем для любого XA и там получаем для любого XA. Это равносильная форма. Здесь то же
самое. Если B ложна, здесь ложь. И это всегда ложь. Если здесь B ложна, то неважно, как оценивается
второй член конъюнции, это ложь. А с импликацией. Давайте посмотрим с импликацией. Если B ложь,
то вот эта вот импликация истина. И эта импликация истина. Теперь здесь. Если B ложь,
это истина и это истина. Очень хорошо. Ну и наконец здесь, допустим, B ложь. Это самый
интересный случай, я его сейчас напишу. У нас тогда получается, что наша формула оценивается так
же, как... Давайте я вместо нуля буду писать вот такой символ, который тоже обозначает ложь.
Такой перпендикуляр. Ну какая-то тождественная ложная формула. Что это означает? Из A следует
ложь, это отрицание A. А теперь вспоминаем, что у нас есть вот такая эквивалентность. То есть это
то же самое, что отрицание квантора существования по A. Ну и что мы делаем дальше? Дальше смотрим,
что у нас здесь, а здесь у нас то же самое. Потому что... Я открою вам секрет,
после которого вы перестанете удивляться этой замене. Вы, наверное, знаете, что импликацию можно
выразить через отрицание и дизьюнцию. И тогда понятно, что происходит. Вот пока мы работаем с
заключением, там стоит B, поэтому у нас работают эти правила буквально, нам ничего не надо менять.
А когда мы работаем с посылкой, это-то правило с дизьюнцией сработает, но у нас стоит отрицание,
и нам нужно поменять квантор, чтобы перейти к отрицанию уже формулы с квантором. Ну вот здесь
вот именно это и происходит. Значит, мы получили здесь отрицание XA, это я сейчас оцениваю левую
часть. Ну а как оценивается правая часть? Тут ложь, то есть тут стоит просто сразу отрицание
существования XA. Ну и здесь аналогично, значит, если B ложь, это отрицание A, то есть это отрицание
того, что для любого XA, и здесь написано то же самое. Ну а если B истинно, это я разобрал в случае,
когда B ложно. Теперь давайте рассмотрим в случае, когда B истинно. Тут все очень похоже. Это истинно,
и это истинно, это A, и это A. Одна и та же формула, поэтому они равносильны. Здесь, если это истинно,
это A, и это для любого XA, то есть вот тут мы подставляем истину, мы получаем под квантором A,
а здесь у нас в посылке истинно, значит, у нас остается заключение, которое есть для любого XA.
Здесь то же самое, а здесь, конечно, по-другому. Если B истинно, это истинно, и это истинно. Ну и
аналогично здесь. Если B истинно, это истинно, и это истинно. Вот разбор на этом закончен. То есть мы
перебрали разные варианты возможных значений B, их всего два, и оказалось, что формулы получаются
равносильны в обоих случаях. Ну, значит, они равносильны всегда. То есть у нас выполняются вот такие
равносильности.
Давайте я вот здесь, в качестве последнего
примера, который я сегодня общезначимых формул буду рассматривать, напишу загадочное сочетание PNF,
сейчас его объясню. Что такое PNF? Это особый вид формул. Ну, я, наверное, прям вот здесь вот напишу.
Тут лучше написать вот так, потому что не все PNF, конечно, общезначимые, но вот всегда есть вот такие
общезначимости. Значит, что такое PNF? Это формула вида. Значит, смотрите, какого вида. В начале идут
кванторы, а потом уже бескванторная формула. То есть на дереве разбора я вот здесь все-таки тоже
использую. У меня получается так, что вот есть какие-то кванторы, а потом уже вот тут кванторов нет.
Все кванторы вверху формула. И теорема. Вот это собственно теорема. Давайте я ее тут так и напишу,
чтобы место сэкономить.
Для любой формулы,
существует опять-таки эффективно-равносильная. Мне удобно объединять утверждения о существовании
равносильной формулы и существовании алгоритма, который находит эту формулу. Потому что реально нам
важно то, что такой алгоритм есть. Чтобы не дублировать два результата, я буду говорить
эффективно-равносильная. То есть берем какую угодно формулу, по ней можно построить равносильную
формулу, предваренной нормальной формы. И это математики часто любят, особенно близкие к
логике, к теории множеств. Они предпочитают любые утверждения делать именно в таком виде. В начале
сказать все кванторы, какие есть, а потом уже условия. Могу сказать, по опыту реальных научных
семинаров это полезно, когда очень сложные утверждения, где кванторов много, они как-то
неочевидным образом чередуются. Если человек пытается сказать как-то более понятно по его
мнению, то половина аудитории не понимает. Он говорит другим способом, тогда перестает понимать
другая половина. И вот чтобы удовлетворить всех, он все равно вынужден написать ПНФ. Тогда все
смотрят и находят в этой ПНФ то, что им близко и, так сказать, понятно. Так что это вещь полезная и
так в математической практике. Ну и для нас она будет очень важна. Это будет некоторый базовый
элемент, правда очень не сразу, но она нам понадобится. Почему эта теорема верна? Ну тут
можно сообразить, вот эта вот написана лемма, можно сообразить, что происходит. ПНФ это формула,
которая имеет вид, вот как вот здесь нарисовано. Вначале идут кванторы, а потом бескванторная формула.
А как абриатура? А, как абриатура? Придворенная нормальная форма, прошу прощения. Значит,
НФ, вот у вас была ДНФ, это логики очень любили одно время говорить о нормальных формах. Ну не
только логики, тогда вообще в математике была популярно и модно строить нормальные формы для
разных объектов, в том числе и для формул, их тоже строили. И это предваренная нормальная форма,
предваренная в понятном смысле, что вот мы кванторы, кванторы предваряют, собственно, какие-то логические
условия. Значит, как это доказать? Вот у нас пусть есть какая-то формула. Мы будем вот эту лему просто
применять много раз. Значит, применение этой леммы, разумеется, конструктивно, потому что что происходит
с деревом разбора, когда мы делаем такую замену. Ну вот я на этом, скажем, примере покажу для любого
х, а дальше дизъюнкция чего-то там, а теперь мы пишем дизъюнкция чего-то там, и в каждом из случая
мы пишем для любого х, но тут вот можно не писать уже для любого х. Тут вот А, а тут просто B. Это из
того, что я объяснял, что если нет свободных хождений, то навешанный квантор можно по переменной,
которая не является параметром, можно смело опускать, это тоже общезначимое преобразование.
Может быть, его надо было в список нести, хорошо это я подумаю. Что думать надо внести? Ну, конечно,
не под тем номером получается, номера условные.
Это почти очевидно, но лучше чтобы списочек у нас был вот так вот написан и хорошо. Ну давайте
смотреть, у нас есть какая-то формула, а есть дерево разбора. И вот предположим, что у нас эта
формула не PNF. Вот сейчас самое, пожалуй, существенное, что нужно понять в доказательстве,
что если формула не PNF, у нас обязательно будет пара, соседняя связка и квантор. Такая или такая.
В общем, квантор какой угодно, связка тоже какая угодно. Ну и если отрицание, ну тогда такое тоже
возможно. Какой-то квантор, неважно какой. Вот если формула не PNF, то вот такое есть. Почему?
Потому что давайте смотреть контрапозицию. Если вот такого нет, мне нужно доказать, что это формула
PNF. Это же я взял контрапозицию этого утверждения, поэтому равносильно. Ну хорошо, вот предположим,
что мы нашли... Ну даже нет, я сейчас слишком сложен с этой контрапозиции. Предположим,
что у нас формула начинается со связки. Это можно и к платформулам применять. Не с квантора,
а со связки. Спускаемся. В какой-то момент, допустим, у нас на какой-то ветве есть квантор. Ну а тогда,
что предыдущие? Я беру просто на этой ветве самое высокое вхождение квантора. Тогда вот здесь
вот написана какая-то связка. Ну вот представьте, что вершины дерева, там они вообще-то помечены
кванторами и связками, а я заменил связки, скажем, на красный цвет, а кванторы на черный. И вот я
говорю, если корень покрашен красный цвет, и вообще есть хотя бы одна черная вершина, то тогда
найдется пара соседняя в дереве черная и красная. В таком виде, наверное, утверждение очевидно. Мы
начали с красной вершины, спускаемся в сторону черной. Мы знаем, что по дереву есть единственный
путь. Ну и цвет должен поменяться в какой-то момент. То есть в этот момент будет соседняя пара. Вот
одна из вот таких. Хорошо, значит, вверху уже обязательно должен быть квантор. Должен быть
черный цвет. Ну теперь применим тоже рассуждение к подформуле. Вот у нас вверху квантор, применяем
к подформуле. Либо, если там есть, если это связка, то значит и есть еще кванторы, то есть соседняя
пара опять-таки где-то. Либо, если это не так, у нас в самом верху сидит квантор. И продолжаем так
со всеми переменными, пока не видим, что вот у нас в какой-то момент окажется так, что формула
начинается с кванторов, а ниже идут только связки. Никаких кванторов нет. Это и есть pnf,
предваренно нормальная форма. То есть вверху дерева кванторы, а внизу связки. То есть сущности,
вот это и есть основной момент доказательства. Мы убедились, что один из вот этих случаев,
если формула не pnf, обязательно выполняется. Ну а дальше рассуждение такое. Мы будем, если мы
нашли в дереве такое вхождение. Это, конечно, делается алгоритмически, потому что, понятно,
есть дерево размеченное. Вам нужно найти, ну там, вспомним про эти цвета, нужно найти пару соседних
красных и черных цветов. Ну нашли. Теперь смотрим. Это на самом деле вот формула, как в правой части,
вот здесь. Вот здесь. Значит, мы можем сделать такую замену. То есть вот эту формулу мы можем
заменить на существует x, а под ней уже импликация того же самого, что было. То есть после такой
замены квантор всплыл, он стал выше, чем вот эта вот связка. То есть вот этот квантор, ну он еще
и поменял имя, но это дело такое. Но существенно, что он всплыл, что он с этой связкой уже никак не
может быть соседей. При этом, при такой замене, остальные вот такие пары соседей новых не
появилось. Ой, извините, может, могло появиться. Тут тоже могла быть связка. Сейчас я скажу аккуратнее.
Ну давайте считать. Мне сейчас нужно вот, я описал некоторый шаг процедуры. Она продолжается,
пока возможно. Значит, мы уже доказали, что если она останавливается, то мы получили PNF. Ну разбором
случаев. Теперь нужно доказать еще один факт, что если, что она всегда останавливается, что невозможно,
чтобы она работала бесконечно. Для этого, как часто бывает в алгоритмах, мне нужен какой-то
полуинвариант, какое-то число, которое не увеличивается, обязательно хотя бы уменьшается.
И здесь полуинвариантом нужно не соседей считать. Вот при работе нам нужны соседи, и соседи есть
есть. Вот смотрите, теперь какой полуинвариант я хочу считать. Я теперь хочу считать пары квантор-связка,
но не обязательно соседние. Вот такая пара, она тоже годится. Только наоборот, связка квантор.
Я хочу считать пары, вершина дерева разбора формулы, которая помечена связкой, и вершина ниже ее,
которая помечена квантором. Вот такие пары хочу считать. Что существенно? Существенно то, что
поскольку мы убедились, что если не pnf есть вот такая соседняя пара, тогда значит вот этот
наш полуинвариант он положительный, есть хотя бы одна пара. Но при такой замене, которую я сейчас
описал, у нас этот полуинвариант обязательно строго уменьшается. Потому что смотрите, что в
сущности изменилось, если смотреть на все возможные пары квантора и связка. Все связки,
которые выше, они по-прежнему выше этого квантора. Как были, так и остались. Никакая связка не
оказывается выше, вот при таком преобразовании, никакая связка не оказывается выше этого квантора.
Она либо должна быть на этом пути, и она была и раньше выше, либо она вне этого пути, тогда она
и после преобразования останется не выше. Значит, у нас вот этот полуинвариант, он обязательно
строго уменьшается. Когда мы сделали замену, вот эта пара исчезла, а новых пар не добавилось.
Поэтому полуинвариант уменьшается, принимает положительные значения, он в какой-то момент
должен стать равным нулю. А когда он станет равным нулю, это и есть pnf. Это значит, что у нас нет таких
пар, и как мы убедились, значит нет и соседних, в частности, пар. А мы убедились, что если нет
соседних пар, то это pnf. Вот такое доказательство, то есть многократное применение, многократное
применение вот этой вот леммы. Ну и давайте, поскольку оно такое не сложное, но, может быть,
можно запутаться, давайте посмотрим на то, как это применяется к какой-то конкретной формуле.
Я специально эту формулу оставил, чтобы показать вот соответствующие замены.
Ну, смотрите, это точно не pnf. Видно, да? Последняя связка, вообще импликация, вот она,
этой формуле. И ниже есть квантор. Давайте выносить. Вот начнем, скажем, вот с того квантора
существовали. Мы знаем, что если мы выносим квантор из, заметьте, что это формула с разделенными
переменами. Я не сказал, по моему, в доказательстве, что мы применяем тот алгоритм, о котором я говорил,
к формуле с разделенными переменными, с тем, чтобы на каждом шаге мы могли применить лемму.
Но у нас уже была теорема, что любая форма эффективна, равносильна к формуле с раздел mm
переменными. Поэтому для общей формулы мы должны вначале привести к формуле с разделенными
переменами, но этот шаг уже сейчас сделан, эта формула с разделенными переменами, потому что
это результат работы предыдущего алгоритма. А теперь нам нужно уже PNF. Значит, когда мы выносим
квантор из заключения, он не меняется. Ну, теперь уже из заключения вынесли,
а из посылки, заметьте, пока вынести невозможно. В посылке самой внешней импликации квантора нет,
а есть еще одна импликация. Но вот из нее вынести можно. Мы применяем лему, а заменена равносильность.
Выносим, ну давайте опять-таки Z вынесем. Вы смотрите внимательно, я могу сейчас запутаться,
потому что запутаться очень легко в этих преобразованиях. Когда вы их выполняете,
нужно очень внимательно следить и лучше не выполнять их. То есть при известном навыке можно
конечно сразу написать PNF, глядя на эту формулу, но и ошибиться можно даже при навыке. Я постоянно
на это забиваюсь. Хорошо, здесь мы выносили из заключения, поэтому квантор не поменялся. А что
здесь случится? А здесь мы конечно можем вот этот квантор вынести, но давайте вынесем вначале вот
этот. Он стоит в посылке и он поэтому должен поменяться. Так, ну еще не закончилась работа,
вот эти кванторы живут под вот этой связкой. Нужно их вынести. Ну выносим, но теперь мы выносим из
посылки импликации, значит кванторы должны поменяться. Получится, существует T для любого
Z, для любого X. И вот наконец бескванторная формула получается. Вот это равносильная формула и вот это
уже PNF, как вы видите. У нас идут кванторы, а потом формула, в которой кванторов нет. Бескванторная
формула. Все преобразования равносильные и все они ссылаются на лему, ну и лему о замене под
формулы на равносильную. То есть мы тут оба используем. И для краткости, повторяю еще раз, я начал
уже с формулы с разделенными переменными. В общем случае, когда у вас какая-то формула, первым шагом
нужно разделить переменные. Потому что если вы попытаетесь применить эту лему к формуле не
с разделенными переменными, может случиться ошибка, мы видели примеры. Значит, что еще стоит сказать? Эта
теорема дает массу странных равносильностей. Ведь смотрите, порядок, в котором мы выносим переменные,
он, ну не сказать, что он однозначно определен. Я мог бы начать с того, что вынести, скажем,
переменную X. Вынести из этого импликацию останет существованием, вынести из этого
останет для любого. И первым стоял бы X. А потом бы там T или Z. То есть вот здесь вообще порядок
можно поменять как угодно кванторов. Причем понятно, что у нас может, ну здесь-то у меня получилось так,
что для любого X существует T переставились в правильную сторону, но они равносильны. То есть на
самом деле вот формула для любого X существует T, для любого Z и вот тут то же самое. Они просто
равносильны. Потому что эту формулу можно получить другим преобразованием. Наша лемма неоднозначно,
мы ее можем применять. Если у нас есть какая-то проблемная пара, соседняя пара связка квантор,
мы к ней применяем лему и получаем, как бы уменьшаем количество проблем. Но применяя в
разных порядках, мы вообще говоря, вот этот кванторный префикс можем получать разный. Поэтому,
хотя в общем случае опять-таки нельзя одноименные кванторы переставлять, но вообще говоря, когда вы
видите две такие формулы, не факт, что они неравносильны. Могут быть неравносильны,
потому что вот здесь для простоты у меня кванторы навешивались, ну по сути дела, в каждой формуле на
одну переменную. Потому что AXY там Y свободно входит. Бывает так, что, у меня немножко времени осталось,
я про это скажу. Вот представьте, что у вас где-то в посылке, не важно там C, вот вы начинаете
приводить к PNF. Вот здесь, ну так-то ладно, кванторы одноименные можно переставить. Если кванторы
разные, то важно все-таки вначале вынести вот этот, а потом вот этот. Вот тут существенно,
потому что у нас нет такой равносильности, что мы эти кванторы можем переставить. Они навешаны
на формулу, куда входят оба параметра. Вот здесь ситуация другая, тут каждый квантор навешан на
формулу ровно с одним параметром, поэтому неважно в каком порядке мы применяем. А вот здесь важно,
здесь будет для любого X, существует Y, я напишу просто SBC, но это не то же, но неверно, что эта
формула равносильна формуле. Ну если переставить, то будет, тогда существует Y для любого X,
это мы попадаем в общую ситуацию, это не всегда равносильная формула. То есть здесь есть вот такая
тонкость, что с одной стороны при преобразованиях PNF у нас довольно много свободы, но при этом есть
жесткость, если мы применяем вот к формуле, если у нас кванторы навешаны вот так вот на какую-то
формулу с большим количеством параметров, нам порядок этих кванторов нужно соблюсти. С остальными
кванторами, которые навешаны где-то в других подформулах, они могут как угодно перемежаться. Так,
это мне уже говорят, что пора заканчивать, но я и успел, впрочем. Все, значит, на сегодня все.
