Я сегодня замещаю Дмитрия Геннадьевича, он в прошлый раз начал
тему новую по рассочетанию, но особо по ней ничего
не успел, так что я, наверное, заново ее веду для тех, кто вдруг не был. С чем мы работаем?
У нас есть два множества, назовем их M и W с будущими некоторыми целями. Мы хотим
найти между ними какое-то хорошее по рассочетанию. По каким принципам мы определяем это
хорошесть? У каждого элемента отсюда есть свои предпочтения, и у каждого элемента отсюда
есть свои предпочтения по тому, с кем он хочет. Предпочтение полный линейный порядок. То есть
можно сразу начать рисовать какой-то пример. Множить M, например, ABCD, и вот у А предпочтение
1, 2, 3, 4. W у нас 1, 2, 3, 4. И какие-то предпочтения у обоих сторон. Я выпишу рандомную задачу,
потом я решу.
Что мы хотим? Мы хотим найти любое по рассочетанию, которое будет устойчивым. Что мы называем
устойчивость? Мы называем по рассочетанию устойчивым, когда нет угроз. Что такое угроза? Угроза
это когда, как обычно все риггер, кто-то хочет что-то изменить. В частности, здесь есть такое
ребро новое, так что оба его участника смотрят на это ребро, думают, что, в принципе, им было бы
так лучше. Давайте обозначим тут у нас M1, M2 и W1, W2. Угроза значит, что по мнению M2, если поменять
с этого на эту пару, то ему станет лучше. То есть это лучше по его мнению, чем это. И наоборот, W1
думает также, что если он поменяет на эту, то ему станет лучше. Такое мы называем угрозой. Вопрос
состоит в том, можем ли мы найти всегда по рассочетанию так, чтобы оно было устойчивым, то есть не было
угроз. И желательно как-то сделать алгоритмически. Ответ на вопрос положительный, оно всегда
существует, и более того, есть алгоритм, причем доказать свое существование будет, по сути, мы
построим алгоритм. Алгоритм будет всегда выдавать что-то, а потом докажем, что то, что выдает алгоритм,
является устойчивым. Собственно, алгоритм называется алгоритм Гейла Шепли.
У него есть какая-то история, я ее не помню. Но прежде чем он был описан явно Гейлом Шепли,
он какое-то время применялся, просто не было доказано, что он работает. Как он выглядит в самой
простой форме? У нас есть мужчины и дамы. Причем не факт, что одинаковое количество.
Мужчины хотят найти себе даму, и они шлют письма. Как они это делают? Они просто смотрят свой номер
1 и шлют письма своим номерам 1. Это первый этап. Алгоритм будет несимметричным, то есть мы выбрали
одну половину и обозвали их мужчинами. Если выбрать половину по другую, то результат может
быть среди тех, кому не слали еще. На самом первом шаге это будет просто. Все пошлют своим номером 1.
Потом у дам у каждой есть сколько-то письм. У кого-то нет письм, а у кого-то может получиться так,
что больше одной письма. Каждая дама, у которой хотя бы два письма,
оставляет наилучшие, а остальные все отвергают.
Мужчины об этом узнают, что их отвергли. После этого алгоритм снова возвращается сюда, если хоть кого-то отвергли.
И повторяется, что в этот раз рассылку уже делают не все, а только тех, кого отвергли.
В конце у нас получили какое-то паросочетание.
Такой довольно интуитивный алгоритм. Давайте попробуем его здесь.
Когда нет угроз. Угроза это когда обоим выгодно поменять на новое ребро.
А обоим это только Эмм?
Только вот этим двум. То есть только тем двоим, которые будут состоять в новом ребре.
Мужчины могут послать письма тем женщинам, которые уже обвинили какое-то письмо на предыдущий шаг?
Да, могут.
Может быть такое, что ты послал письмо, тебя сразу же не отвергли, прошло время, прошло время, а потом где-то на 10 шаге тебя взяли и все-таки отвергнули, потому что дошла очередь и нашла кого-то лучше.
Так, давайте попробуем это здесь.
Возьмем мужчинами этих. Можно в другую сторону.
Выпишем дам и будем трекать сколько у них письма.
Сначала посылают первые приоритеты письма, то есть А посылает первый, Б посылает третий, С посылает первый и Д посылает первый.
Так, у первой дамы три письма, А, С и Д, но она убирает А.
Вообще можно заметить, что у первой УА они друг у друга на первом приоритете, поэтому они вообще 100% будут соединены ребром.
С и Д отвергли. Они снова первый этап, С и Д уже своим первым приоритетом посылали следующий, С посылает второму, Д посылает третьему.
Теперь третий конфликт, Б и Д, третий выбирает Б, Д уходит, Д смотрит третий, третий прилетит туда, это два, Д идет к второму, второй выбирает С, опять Д, Д идет к четвертому.
Больше никаких коллизий нет, всем кто-то достался.
Можно теперь провести, давайте пробуем провести в другую сторону, есть вероятность, что получится другой результат.
Теперь наоборот, эти будут слайд-письма и эти.
Сейчас у нас, давайте обведем какой у нас сейчас получился результат.
A1, B3, C2 и D4.
A3, A4.
Ну ладно, тут можно в ответственном взгляду понять, что на самом деле получится тоже самое, но для этих рассуждений надо еще много всего доказать.
Факт, что не всегда получается одно и то же, если проводить это с разных сторон.
Давайте я напишу какую-то ситуацию, где разно.
A, B, C.
Два, три, один, такая довольно симметричная ситуация будет.
Такая картина.
Давайте снова проведем алгоритм.
Если эти посылают письма, то можно заметить, что на первом же шаге они все пошлют разным и алгоритм сразу же закончится.
У нас получится вот такое решение.
Причем мы можем заметить, что у этих все очень хорошо.
Им попались самые лучшие, а у этих как-то так получилось, что наоборот, им самые худшие достались.
Теперь наоборот, если проведем, что эти отправят письма, у них опять же получится так, что они сразу же отправят все разные письма.
И теперь картина будет наоборот.
У этих всех достался самый лучший вариант, а у этих самые худшие.
A.
Это неспроста.
Давайте доказывать всякие факты про этот алгоритм.
Сначала нужно доказать, что он вообще работает.
Вот.
Отверждается, что алгоритм успешно завершается.
И выдает устойчивое.
Разочетание.
Вот. Для начала, что значит успешно завершается?
Такой случай не рассмотрен был.
Если посылаешь письмо, отвергают.
Отвергают, отвергают.
Если отвергли всех кандидатов, что делать?
То есть у нас есть как бы сюжет неуспешной работы алгоритма.
Но утверждается, что такого не может быть.
Точнее, такое может быть, но просочетание будет максимально среди возможных.
То есть утверждается, что алгоритм всегда возвращает просочетание размера.
Просочетание максимального размера.
То есть минимум из размера множества m и размера множества w.
Размеры минимум из m и w.
Каждая женщина, у которой будет уровень 2x, оставляет наилучшего из тех, кого не заняли?
Нет, просто наилучшего из тех.
Ну и из тех, которые у нее на руках.
Ситуация, когда отвергаются кандидаты.
Возможно только, когда кандидаты из большего множества?
Да.
Такое возможно только, если он из большего множества.
Давайте разберем.
Допустим, m у нас меньше или равен w.
Тогда утверждается, что у всех m найдется своя пара после работы алгоритма.
Почему?
Предположим, у какого-то m не нашлась пара.
То есть его все отвергли.
Но дама отвергает только тогда, когда у нее уже есть кандидат.
И заметим, что у дамы, если у нее появился кандидат, то у него никогда он не исчезнет.
То есть у нее все время будет оставаться хотя бы один кандидат.
Допустим, что есть m, который не нашелся парой.
Но он при этом обратился с письмом к каждой из дам.
И каждая дама его в какой-то момент отвергла.
То есть у каждой дамы после работы алгоритма есть своя пара.
Потому что если дама нашла кого, то она обратно до 0 не спускается.
То есть у каждой дамы будет своя пара.
Ну а у нас w больше, чем m по размеру.
То есть у этого m тоже найдется пара.
Теперь второй случай наоборот.
У нас m строго больше, а вот и ждется, что у каждой дамы найдется пара.
Пусть у нас не полное просочетание, какой-то даме не нашлась пара.
Но тогда точно есть кавалеры, у которых нет дамы.
Что довольно странно, если у них нет дамы, значит их отвергли все дамы.
В частности, это.
Это не могло никого отвернуть, потому что у него сейчас пусто.
То есть тоже просочетание будет полным, максимально большим в таком случае.
То есть алгоритм всегда возвращает максимально большое просочетание.
Теперь нужно проверить устойчивость.
Я алгоритма не понял, но у нас же m должен расслабить наилучший цилиндер.
Кому еще не слали.
Кому он не слал.
Хорошо.
Проблема какая, что у нас может быть ситуация, что две женщины выбрали одного и того же мужчину.
Нет.
Каждый мужчина одновременно только одно письмо шлет.
Он ждет, пока его не отвернут, прежде чем слать следующее.
Ну, предположим, неустойчивость.
У нас есть.
Да, кстати, хороший вопрос был.
Если, допустим, у нас есть условно A, B, C, D, A, B, C, D.
А у первого и второго, ну, в общем, также 1, 2, 3, 1, 2, 3 условно.
То есть они посылают одному и тому же человеку.
А тот человек не может выбрать.
В смысле не может быть.
У человека есть строгий порядок.
Человек всегда может выбрать.
Ну ладно.
Ну да, предположим, что неустойчиво.
Да, у нас есть такая картина.
Вот у нас текущее просочетание.
И в нем где-то есть угроза.
То есть M2 считает, что вот это лучше, чем вот это.
И симметрично W2 тоже считает, что вот так лучше.
Давайте найдем здесь проблему.
Да, можно заметить даже.
Да, давайте.
Можно заметить, что по мнению M2 W1 лучше, чем W2.
Поэтому он сначала вслал письмо сюда.
В первую очередь.
Вот.
Но раз в результате всего алгоритма у нас вот это ребро, значит его артвергли.
Значит первая дама считает, что...
У дамы каждый раз выбор может со временем только улучшаться.
То есть к ней приходят новые кандидаты, она из них выбирает, оставляет лучше.
Приходит новая, она оставляет лучше.
Поэтому тот, что у нее остался в конце, лучше того, кого она отвергла.
То есть по мнению дамы 1 у нас так.
Должно быть тривиально.
Нет, тут по мнению...
А, по мнению 1 дам, все.
Я описался и за это думал.
Да, все.
У нас противоречие.
По мнению 1 дам мы не можем...
А, по мнению 1 дам, все.
Я описался и за это думал.
У нас противоречие.
По мнению 1 дам, какие-то странные вещи.
Все, противоречие.
Кого быть не может.
Мы докажались, что это будет устойчивое.
По рассчитаниям.
Теперь можно доказывать при него интересные факты.
Вот.
Утверждается, что
для каждого
m это будет
наилучшее
рассчитание.
Ну, среди устойчивых, естественно.
А для каждого
для каждого w
это будет наилучшее
среди устойчивой.
Вот я половину стёр, но можно здесь посмотреть.
Это половина дам, из этого факта следует, что они в каком-то другом равновесии, невозможно прям вот такое.
То есть первой даме достанется партнёр не хуже а, ну то есть в точности а, потому что а для неё нолы и лучше.
Для второго не хуже c, для третьего не хуже b, а для четвёртого не хуже d в любом другом просочетании.
То есть не существует, например, просочетание, где четвёртым достанется а.
Ну и симметрично для мужчин, только там не лучше, чем то, что получилось.
То есть алгоритм максимально хорош для тех, кто шлёт письма и максимально плох для тех, кто их получает.
Вот.
Ну, чтобы доказать аптиорему, сам вспомогательная лемма.
Если у нас в ходе алгоритма произошло такое, что какая-то дама отвергла кулера,
то вот эта пара не встречается вообще ни в каком просочетании, ну и ни в каком устойчивом.
Понятно утверждение?
Так, я читаю и напишу.
Так, ну, доказательства.
Ну, опять же, это будет от противного.
Предположим, что у нас в ходе алгоритма произошло...
Ну, во-первых, алгоритм давайте разобьём на мелкие шаги, что у нас отвержение происходит по одному.
Не одновременно все, у кого коллизии, то есть больше одного письма отвергают, ну а просто по одному.
И предположим, что в какой-то момент у нас произошло такое, что отвергли какое-то письмо,
но такая пара, возможно, в каком-то устойчивом паросочетании.
Вот, и найдём такой первый момент.
Ну, то есть, предположим противное и рассмотрим первый момент,
когда w отвергло, при этом так, что эта пара лежит в каком-то устойчивом просочетании phi.
Ну, как выглядит картина, у нас есть w и вот это ребро, оно лежит в каком-то просочетании,
но в этом просочетании оно было отвергнуто, раз оно было отвергнуто, то у w есть кто-то лучше.
Ну, проводим алгоритм по шагам, ну сейчас, у нас же несколько раз, несколько волн происходит отвержение,
внутри волн можно вообще разбить...
Ну, может быть, за время алгоритма несколько раз отвергли разные ребра,
которые каждый из них лежит в каком-то устойчивом просочетении.
Да, то есть, первый момент, когда мы отвергли что-то, причём это что-то...
Получше переписать, ну ты-то понял, может кто-то ещё не понял.
То есть, мы предполагаем, что если у нас отвергло wm, какое-то w, какое-то m,
то вот это ребро не будет лежать ни в каком просочетании вообще, ни в каком устойчивом просочетании.
Мы предполагаем обратное, и для этого смотрим в ходе работы алгоритма первый момент, когда произошло обратное,
когда какое-то ребро отвергли, но это ребро, в принципе, могло бы лежать в каком-то устойчивом просочетании.
Вот, ну вот, отвергли вот это ребро, но оно лежало вот, вот это, это у нас phi, по просочетанию.
Ну раз отвергло это ребро было, значит в этот момент был кто-то лучше, по мнению Д'.
Вот, у этого кого-то phi тоже есть сосед,
назовём его w, то есть так у нас лучше.
Теперь заметим, что phi – это устойчивое просочетание, значит вот это не должно быть угрозой.
А если у нас вот так будет стрелочка, то это окажется угрозой, потому что и этому выгодно поменять на это, и этому выгодно поменять на это.
Значит стрелочка в эту сторону не может быть, значит у нас, по мнению M', значит по мнению M', стрелка должна быть в эту сторону, чтобы не было угроз.
Вот, тогда получается, что W отвергло M из-за M', но раз M' писал W, значит W' по мнению M' лучше, значит это он уже писал, и она его отвергла.
То есть мы получили, что M' уже писал W' и был отвергнут.
Вот, но это ребро M'W' тоже лежит в phi, то есть получается, что это не первый момент, когда у нас отвергается пара, которая лежит в каком-то устойчивом просочетании, то есть мы пришли к противоречию.
Понятного суждения.
Ну да, то есть оно есть phi, то есть у нас есть предполагаемое устойчивое просочетание phi, предполагается, вот у нас отвергается ребро.
И мы предполагаем, что оно лежит в устойчивом просочетании phi, и что это вообще первый момент в ходе алгоритма, когда мы отвергаем ребро, которое лежит в каком-то устойчивом просочетании.
Мне очень понятно следующий вопрос, а почему серверы, которые были у нас до этого образованы алгоритмом, они также лежат в фине рамчериага?
Зачем осмотреть это внутри фина, чтобы произойти алгоритмом, ладно, хорошо.
Какая-то логичная связанность, на каком этапе теряется логика?
Что мы доказываем, понятно?
Непонятно, товарищ, что мы сделали, потому что мы нашли и ребро, и первое, которое мы доказывали.
Хорошо, это первое ребро, что мы можем из этого сказать?
Во-первых, что значит, что дама отвергла? Значит, есть кто-то лучше.
Назовем его m' и подпишем, что он лучше.
Фи у m' тоже есть какая-то своя пара.
То есть это ребро фи, оно никак не связано с алгоритмом?
Да, оно не связано с алгоритмом.
Мы знаем, что фи – это устойчивое просочетание.
Что мы из этого можем извлечь?
Раз оно устойчивое, то вот такое ребро не должно быть угрозой.
А когда оно угроза?
Когда w считает, что вот это лучше, чем вот это, и m' считает, что вот это лучше, чем вот это.
Но одно условие уже выполнено, значит, не может быть такое, что и другое условие выполнено.
То есть стрелочка вниз, по мнению m', не может быть.
А можно добавить, что в точке алгоритма в этом гарантии, что m' точно есть пара.
Что мы некоторые сочи, что мы чем-то уже речи, но m' есть пара.
Так что в общем случае отсутствие пары не запрещено.
Но в данной ситуации, если бы m' не было пары, то m' не было бы устойчивым по той же причине.
Случай, когда m' нет пары в f'
Давайте отдельно рассмотрим случай, когда...
Мы дошли до этого.
А w отвергло m из m'.
Мы так определили m'.
Мы доказали, что, по мнению m', w' лучше, чем w.
Теперь утверждается, что m', раз вот это лучше, по мнению его, чем это, то этому он слал письмо первым.
То есть сначала он послал письмо этому, потом этому.
Этому мы знаем, что он слал письмо, значит, вот это его отвергло.
Почему он в омеге слал письмо?
Потому что ω отвергло m из-за m'.
Значит, m' слал письмо омеге, значит, тот, кому он раньше письмо слал, его отвергло.
Здесь письмо было отвергнуто от m' до w'.
Но это произошло раньше по ходу алгоритма.
Значит, у нас раньше по ходу алгоритм произошло такое, что у нас отвернуто ребро, которое лежит в каком-то парасочетании.
Теперь случай, когда в парасочетании у m' нет соседа.
Возможно ли такое вообще?
Точно так.
И предполагается, что m' нет соседов в парасочетании.
Но все еще можно сказать, что здесь, по мнению w, лучше.
Мы так определяем m'.
m' у нас писал всем.
Нам нужно сейчас прийти к противоречию.
Почему?
Это парасочетание.
Это какое-то парасочетание.
Это не обязательно парасочетание получено алгоритмом, поэтому в нем может быть
не выполняться логика с тем, кто кому первое письмо написал и кого отвергли, по мнению письма.
На красное единственное ограничение то, что оно должно быть устойчивым.
Но здесь нарушается устойчивость.
Если в красном m' нет соседа, то устойчивость нарушается сразу же, потому что w' выгодно поменять вот так,
а m' выгодно поменять с никого на w.
Да, отдельно в случае, когда в парасочетании m' нет соседа,
противоречие так, как у нас m' и w угрозово в парасочетании.
То есть в ФИ такого не может быть тоже.
Мы предположили, что в ФИ у нас m' нет соседа.
Нет, это мы на шаге, когда в первый раз было отвергнуто
ребро, которое лежит в каком-то парасочетании.
ФИ это какое-то устойчивое парасочетание.
Оно не получено никаким алгоритмом, просто устойчивое парасочетание.
Что непонятно?
Сначала утверждение, ясно?
Обратное к нему то, что мы предположили, ясно?
Нет, непонятно.
Это верный момент, когда ω отвергло m,
ведь еще и дополнительно mω является устойчивым парасочетанием.
Вергло m такое, что у нас.
То есть у нас до этого несколько кого-то могли отвергнуть,
но это у нас впервые произошло так, что у нас отвергают,
и при этом эта пара лежит в каком-то устойчивом парасочетании.
М штрих, ω штрих не обязательно лежит в парасочетении.
То есть это в какой-то момент времени работает алгоритм алгоритма?
Да, это в какой-то момент времени алгоритма.
М штрих мы определяем как...
Понятно ли, откуда взялись m штрих и w штрих еще?
Да, это просто логиковой момент работы алгоритма.
Ну да, m штрих это тот, на кого променяли m, w штрих это его сосед phi.
Что, сосед phi?
Phi.
Нет.
Теперь непонятно.
Сейчас сотру это и пишу еще раз.
Правильно ли я понимаю, что это алгоритм, и мы для w штрих найдем m2 штриха,
там возникнет w2 штриха, и мы будем идти, пока не выйдем на вот этот мертвый конец,
который ни с кем не соединен, или не зацепимся?
То есть мы будем продолжать строить парасочетания, которые отвердались?
Нет, ну мы приходим к противоречию гораздо быстрее.
Нам не надо это настолько сильно разворачивать.
Ну да, если бы мы брали не первый момент, когда произошло отвержение ребра,
которое лежит в каком-то парасочетании, то нам пришлось бы так разворачиваться,
пока мы не дошли бы до конца, рассуждение было бы сложнее.
А если мы отвердение отправим на сразу же, говорим, возьмем первый момент,
то рассуждение гораздо проще.
А, какие у нас есть факты?
b отвергла m,
mb лежит в φ,
которое какое-то устойчивое парасочетание.
Вот и до этого момента для любых m' и w' таких,
что w' отвергла m',
у нас было верно, что m' w' не лежали ни в каком устойчивом парасочетании.
Нет, это не индукс.
Наверное, это можно было развернуть как индукс, но кажется проще вот так.
Потому что мы как раз берем первый момент,
когда было отвернуто ребро, которое на самом деле лежит в каком-то устойчивом парасочетании.
Все, у нас вот эти три факта.
Что мы можем из них вывести?
Давайте пронумеруем.
Первое, второе, третье.
Из первого следует, что существует m',
такое, что, по мнению w, m' лучше, чем m.
Причем m' уже написал письмо w.
Первый факт.
Дальше.
Что мы можем сказать?
У нас m' w лежит в фе устойчивом парасочетании.
Второе.
Обозначим w' fi от m'.
Просто обозначим.
Ну и проведем рассуждение, что если fi от m' не существует, то fi у нас в предположении фигурирует это.
Это какое-то парасочетание.
Где штрих этот ученый, которому вместо m' есть?
Ну, тогда он звучит против m'.
Потому что на этот момент m' с m' не могли быть устойчивыми парасочетаниями.
А, мы успеваем, что спреслят вверх.
Да.
Сейчас, я пока с этим утверждением все нормально?
Да.
Отдельный случай, если fi от m' не определено, то сразу у нас неустойчивость, как мы здесь показывали, то fi неустойчиво.
Этот случай можно сразу сбросить.
То есть w' у нас корректно определено.
Третье.
Так как...
А, воспользуемся устойчивостью fi.
fi устойчиво.
Следовательно...
Следовательно, у нас есть вот эта стрелка, и она именно в эту сторону.
Следовательно, v' лучше, по мнению, m' чем w.
Потому что иначе бы fi было бы неустойчиво.
Ну, вот картинка у нас сразу же.
Вот эта становится угрозой.
Ну, strif мог быть связан с кем-то другим.
Нет, мы предлагаем, что он ни с кем не связан.
Нет, мы предлагаем то, что тот, с кем он связан, является устойчивым прибавлем.
Если он либо ни с кем не связан, тогда этот случай мы рассмотрели.
Либо он с кем-то связан, тогда мы его обозначаем v'.
Он может быть с кем-то связан, но эта связь может быть неустойчивой.
Нет, phi устойчивый, phi по определению устойчивый.
Мы наказываем, что их головы не могут опросить.
Поэтому phi устойчивый.
Я не считаю, что мы доказали утверждение скоб.
Потому что может быть ребро, которое не принадлежит phi.
Сейчас.
Phi это паросочетание.
Phi у каждого элемента либо один образ, либо ноль.
Правда?
Либо у кого-то нет пары, либо у кого-то есть пары.
В случае, когда нет пары, мы рассмотрели.
Потому что сразу же проблема сравновесия.
В целом это случай, когда есть пара, одна пара.
Мы обозначаем ее V'.
Никаких утверждений не сделано, поэтому сложно.
Не путай, все нормально.
Это случай очень легко уходит.
У нас сразу проблема сравновесия phi.
Третье, мы пользуемся тем, что phi устойчиво.
По предположению.
Phi устойчиво, следовательно, стрелка должна быть вот так направлена.
Потому что если она направлена вниз, то у нас сразу неустойчивость.
Все.
И четвертое.
Так как у нас m' писал w и w', по мнению, m' лучше,
следовательно, мы получаем, что m' писал w' и его отвергли.
Потому что ты не можешь никому писать, но мы пока тебе не отвергли.
Вот.
А это противоречие.
Почему?
Потому что у нас это противоречие с третьим.
Потому что у нас убеждается, что до этого не было такого,
что мы отвергали ребро, которое лежит в каком-то сочетании.
Все, противоречие.
Так, это все было ляма.
Ну да, у нас был, ну в хэп.
Сейчас, я только что стел утверждение.
Но мы сейчас, эта ляма у нас для доказательства утверждения того,
что этот алгоритм выдается про сочетания, которые наилучшие для мужчины
и наихудшие для девушек.
Ну первую часть на самом деле мы уже доказали.
То есть из-за того, что мужчина все время посылает письма,
а, то есть 2а, полученные про сочетания наилучшие для каждого.
Ну почему? Допустим, есть какое-то про сочетания,
которое для кого-то лучше было бы.
Сейчас, мы напрямую пытаемся воспользоваться лямой.
Что если отвергли, то уже ни в каком про сочетании точно такого нет.
Если, пусть у нас получилось про сочетание кси.
Тогда для любого v' которое по мнению m лучше, чем та, которая ему досталась.
У нас верно, что v' отвергло.
Потому что он писал, начиная с лучшим-худшим и дошел до вот этой.
Противоречие с тем, что это первый момент, когда у нас произошло отвержение ребра,
которое лежит в каком-то про сочетании.
То есть здесь мы поняли, что все дамы, которые выше по рейтингу v' чем та, которая ему досталась,
всем ему он уже писал по ходу алгоритма и все его отвергли.
Следовательно, мы получаем, что для любого v' которое строго лучше того, что ему досталась,
пара v' не лежит ни в каком про сочетании.
Половина доказана.
Вторая половина надо дадам, что у них не может быть того, что в другом про сочетании у них хуже.
Это, кажется, проще напрямую.
Вот у нас ребро.
Это у нас получено алгоритмом про сочетание.
Что-то предположим, что в каком-то другом про сочетании у нас w хуже что-то получилось.
То есть сделка вот так, по мне ее дам.
Вот, ну, нам можем посмотреть с кем m соедино в этом про сочетании.
Ну, тут опять же нужно проверять случай, если оно не с кем не соединено.
Ну да, случай, давайте сразу случай, если оно не с кем не соединено, то это неустойчиво, красное про сочетание неустойчиво,
так как дама захочет поменять ребро, значит оно с кем-то точно соединен.
Вот, снова также смотрим, так как это устойчивое, у нас должно быть вот такое ребро в эту сторону,
по мнению m, потому что если по мнению m ребро будет направлено вниз, то красное про сочетание не будет устойчиво.
Красное это другое про сочетание, ну устойчивое, то есть стрелка должна быть направлена вверх, по мнению m.
Вот, а что? Что получилось? Получилось, что в красном про сочетании у нас у m, у него лучшая дама, чем была в про сочетании полученным алгоритмом.
Вот, но мы уже показали в 2а, что в алгоритме мужчин получаются самые лучшие кандидаты.
Вот, а здесь у нас получилось, что еще более лучший в красном про сочетании.
Значит, красное про сочетание не может быть устойчивым, противоречие.
С 2b, мы доказали, что всем даун попались наихудшие возможные варианты.
Для пустого противоречия, потому что красное про сочетание неустойчивое из-за вот этого ребра.
То есть, у m не надо спрашивать, у него нет партнера, он согласен, а w хочет поменять, потому что вот стрелка.
Да, то есть красное неустойчивое, если у m нету соседа.
Наихудшие для каждого дамы.
Все, мы доказали 2 половины 2 леммы.
Вот, и из этого важный вывод следует.
У нас была проблема, что у нас доли могут быть разные, и кому-то не достается партнер.
Давайте письма будут слать большую долю.
Допустим, алгоритм так, чтобы письма слали большую долю, тогда кому-то не достанется, то есть, кого-то отвернут все дамы.
Значит, если кого-то отвергли все дамы, значит, и в любом другом про сочетании все эти дамы отвернут его,
потому что мы доказали, что в алгоритме произошло отвержение, то и в любом другом про сочетании оно не может лежать.
Мы доказываем, что дамам достанутся наихудшие возможные варианты.
Предполагаем, противные. Вот, что белые – это полученные алгоритмы про сочетания, мелкие, бледные.
А существует другое про сочетание, в котором у дамы w еще хуже, и доходим до противоречия.
Следствие из Леммы. Это даже не из 2a и не 2b, это из Леммы.
На прямую следует, что элементы, попавшие в про сочетания, не меняются.
В устойчивом про сочетании не зависит от выбора этого устойчивого про сочетания.
То есть есть у нас какая-то картина, что вот про сочетание, а вот этим не достался партнер, то в любом устойчивом про сочетании им же не достанется партнер.
Потому что мы запускаем алгоритм так, чтобы слали письма те, кого больше, алгоритм доходит до конца.
Раз этим никто не достался, значит их все отвергли. Раз их все отвергли, значит по Лемме ни с кем пара у них не может лежать в устойчивом про сочетании.
Значит они ни в каком устойчивом про сочетании не образуют пару. Понятно рассуждение?
Можно вопрос? Правда ли, что для любого устойчивого сочетания и для любого m существует phi от m?
В смысле?
Для любого устойчивого phi и для любого m существует phi от m.
А если m больше?
Если их равное вместе.
Если равное, то да.
Правда ли, что это следствие из Леммы?
Лемма нам утверждает только, какие пары сочетаний не могут существовать.
Лемма не утверждает, какие сочетания могут, будут существовать.
Это скорее следствие из 2a.
Мы этим утверждением пользовались при догаданности Леммы.
Иначе мы не разобрались в случае, когда ω' не равно phi от m'.
ω' по определению равно phi от m'.
Мы определили. У нас был пункт 2.
В любом случае мы рассмотрим до конца, потому что не обязательно m' ω будет угрозой.
Потому что может быть такое, что m' хочет быть с ω, несмотря на то, что ω хочет быть с m'.
И угроза будет m' ω 2'.
А вот этот случай у m' нет соседа?
Нет. Это случай, когда phi от m' не определено.
Ну не определено, значит нет соседа.
Да.
Не означает соседа? Нет.
Нет.
У тебя есть или у тебя нет?
Мы не конструктивные логики. У нас есть что-то.
У меня нет устойчивого про сочетания.
А в смысле, если мы рассмотрим устойчивое про сочетание?
Потому что логика наша не верна предоказательству.
Фи очень слабо связана с нашим алгоритмом.
Фи – это какое-то про сочетание. Это не про сочетание получено каким-то алгоритмом.
Сейчас с этим штрихом мы обязательно угрозой.
Мы в доказательстве берем какой-то устойчивое про сочетание и рассматриваем все эти про сочетания.
И мы запускаем наш алгоритм на этих шабельшинах.
Второй раз.
И смотрим, когда в первый раз у нас на него ситуация, что ребро, которое у нас есть в нашем исходном про сочетании,
его отвергали во втором.
Вот.
Все, нет никаких больших случаев.
И поэтому мы смотрим в исходном про сочетании штрих,
в пользу которого отвергали.
Смотрим, с кем он соединен тут.
Если не с кем-то, это внешний случай. Если с кем-то, то вверг.
Если ни с кем в устойчивом про сочетании он не соединен.
Тоже может быть в устойчивом, но мы его просмотрим.
А почему вот здесь вот не может m' быть соединен, допустим, со m2,
а на m' на m2 они будут здесь.
Потому что мы изначально берем устойчивое про сочетание, мы на него смотрим.
Фи, это по плению, закончено уже до конца устойчивое про сочетание.
Что почему?
В случае, когда нет соседа m'.
То есть нет соседа.
Я не верю, что это одно и то же.
Ну смотри.
У человека есть два состояния.
Если бы это было...
Концепция, что мужчина может не оказаться женщиной, была бы, что он свадьба.
Какого-то не бывает.
Как у нас определяется угроза?
Угроза, если у обоих есть партнеры, есть в про сочетании партнеры,
то угроза нужно, чтобы оба были согласны.
Здесь у нас m' нет партнера.
Значит для угрозы достаточно, чтобы одному w' было выгодно это сделать, изменение.
M' все устраивает.
Он хочет хоть кого-то.
Так, по следствию есть вопросы?
Все.
То есть в самом деле мы можем...
Нас потом будут задачи искать не одно равновесие, а они все.
Что мы будем делать?
Мы будем запускать алгоритм, находить тех, кому не достались партнеры
и сразу их выкидывать.
Потому что они точно не лежат ни в каком равновесии.
Про них можно забыть.
Третье утверждение.
Это было третье утверждение.
Теперь больше интересных фактов.
На этих про сочетаниях можно вести некоторые порядок.
Следующим образом, мы говорим, что по мнению...
Ну, угодно.
Следующим образом, мы говорим, что по мнению...
Он обводится по мнению одного из множеств.
Мы говорим, что одно про считание лучше другого по мнению, например, мужчин.
Тогда и тогда, когда для любого М у нас выполнено, что феатм, по мнению М, не хуже, чем псетм.
То есть такой порядок.
Ну и, как мы уже поняли, из 2a и 2b, если мы запускаем алгоритм так, что мужчины шлют письма,
то мы получаем самый большой элемент по этому порядку.
То есть он будет больше любого другого.
Ну, у нас еще есть порядок другой, который, если мы вместо М возьмем множество В.
Вот как они между собой связаны, интересно.
Вот и утверждается, что они связаны напрямую.
То есть, если множество больше по порядку М, то тогда и только тогда, когда по W у нас другую сторону порядка.
То есть, если мы поменяли про сочетание так, что всем из М стало лучше, ну или не хуже, то всем из W, наоборот, станет не лучше.
Так, ну, доказательства.
Опять же, нужно рисовать картинку просто.
Давайте слева направо.
Мы хотим доказать, у нас есть данное это, мы хотим доказать это.
То есть, мы хотим рассмотреть произвольный W.
У него есть phi от W и psi от W.
Ну, они могут совпасть, но этот случай будет совсем не интересен.
Вот, нам нужно доказать, что psi от W будет лучше, чем phi от W, по мнению W.
То есть, нам нужно вот это доказать.
Вот, а что нам дано?
Ну, во-первых, да, тут я так обозначение использую.
Phi это у нас про сочетание обозначает, поэтому у нас всегда phi от phi от х равно х.
В частности, phi от W имеет каких-то соседей в про сочетании phi и в про сочетании psi.
В про сочетании phi это W.
Есть еще сосед в про сочетании.
Давайте их сюда все-таки обозначим.
Это m и это m'.
Здесь будет сосед psi от m, а здесь у нас сосед phi от m'.
Мы хотим доказать вот это ребро.
А что у нас есть? У нас есть вот это.
То есть, что phi лучше psi по мнению m.
То есть, по мнению m у нас такое есть.
И по мнению m' у нас есть вот такое.
Тогда предположим противное, что у нас вот это ребро не вниз направлено, а вверх.
Мы хотим доказать, что оно направлено вниз.
Предположим, что оно направлено вверх.
Да, утверждаем, что вот такая угроза появится вот в этом про сочетании.
Почему?
Потому что у нас появится вот такая угроза.
Это у нас про сочетание psi.
То есть, m psi от m, m' psi от m', которое у нас дабло.
И мы предположили, что ребро вот так направлено.
Тогда у нас про сочетание неустойчиво, потому что вот этот хочет поменять вот так,
вот этот хочет поменять вот так.
То есть, у нас получилась неустойчивость.
Мы пришли к противоречию, значит w должно быть направлено вот так.
И в другую сторону логично.
Я, наверное, это на семинаре разберусь в другой случай.
Все. Есть какие-то вопросы?
Ну, все не факт, но довольно много.
То есть, да, мы по сути при таком действии мы находим верхнюю границу
и нижнюю границу.
А как мы докажем, все остальное будет представлять из всякую-то решетку,
зажатую между этими верхней и нижней границ.
