Так, как говорится, сложно вспомнить, давно это было, если бы развлечетались. Нет, ДФС у нас,
видимо, сегодня явно будет, но для начала мы должны закончить, что начали в прошлый раз,
а что мы начали в прошлый раз? Ну, как сказать, теорию играть я бы сказал, мы даже закончили
в прошлый раз. Ну, давайте вспомним, да, мы рассматриваем такую, самую, там, собственно,
теорию игр, самой простой ее версии, еще говоримся. Почему? Потому что мы рассматриваем там
совсем равноправные игры на графах. Там где-то, нет, пока еще не началась, но вот, пока еще просто
самая равноправная. То есть для нас игра, это что такое? Это у нас есть граф, играют два игрока,
есть фишка на графе, игроки, там каждый игрок двигает вдоль ребра там, собственно, фишку,
проигрывает тот, кто не может сделать ход, нас жутко интересует, кто выиграет при правильной игре.
Вот. Вот. Мы в прошлый раз с вами пошли в две различные веточки. С одной стороны,
мы предположили, что у нас есть один граф, и научились за О от В плюс Е понимать,
какие вершины выигрышные, какие проигрышные, какие нечейные, и заодно еще доказали,
что других не бывает. Вот. Да. Это был алгоритм ретроанализа. Сегодня у нас тоже, забирая вперед,
он возникнет. Но в немножко экзотическом виде. Что еще? Вот. С другой стороны, мы решили смотреть,
а что будет, если мы начнем суммировать игры. С точки зрения суммирования, у нас обнаружила,
что появляется такая вещь, как эквивалентность. Да. То есть, напомню, что у нас по определению,
действительно, игра А эквивалентна Б. Значит, если, соответственно, для любой игры С, верно,
что результат игры А плюс С совпадает с результатом игры Б плюс С. То есть, в переводе говоря,
А эквивалентна Б, если в любой сумме игра можно спокойно заменить на игру Б без изменения глобального
результата. Вот. И стали думать, с точностью до этой эквивалентности, какие игры вообще бывают.
И, собственно, и в чем заключается основной смысл теории ж программе. Вот как бы сформулировали.
Если игра ациклическая, то есть только ним. Ну, можно сказать так. Ну вот. Ну, можно сказать так.
Да. Теория ж программе говорит, что все ациклические игры эквиваленты, на самом деле,
то есть различия только в том, что из скольки камней будет состоять ним. Ну, потому что заметим,
что ним из и камней, конечно, эквивалентен мимо и ж камней тогда и только тогда, когда и равно ж.
Вот. Ну, кстати, давайте в качестве, давайте, кстати, как это доказать? Ну, давайте возьмем тот,
в котором больше камней. Первый чувак сделает. И что это даст? Ну, если и равно ж, то первый
выиграет. Ну, или там второй. Второй выиграет. И что? Ну, вряд ли. Значит, у нас результат игры
изменился. И что? Ну, просто попробуем суммировать. Ну, давайте скажем, что и меньше ж, и просуммируем
ж, например. А, ну да. Действительно. То есть, можно, действительно, сказать просто по
определению. Действительно. Пусть у меня и равно 57, ж равно 179. Вот. Тогда, действительно,
тогда обнаружится следующее. Давайте обе эти игры просуммируем с ним 57. Ну, вот. ним 57
плюс ним 57 это проигрышная игра. Почему? Потому что, потому что это, потому что второй игрок
выигрывает по симметричной стратегии. И важно отметить, что игра ациклическая. Может быть,
если игра ациклическая, то на самом деле, как бы второму игроку такая стратегия гарантирует,
то есть не проигрыш гарантируется, но выигрыш вовсе не обязательно. Вот. Ну, вот. Ну, а в данном
случае игра ациклическая, поэтому получается второй игрок выигрывает, игра проигрышная. Но,
если мы суммируем 179 и 57, то, оказывается, игра становится выигрышной. Почему? Потому что первый
игрок получно уменьшает 179 до 57 и после этого выигрывает как второй игрок. Ну,
да. Ну, пожалуй, да. Но, с другой стороны, мы бесконечные игры не рассматриваем принципиально.
Да, тут важно. Ну, у нас все графы конечные. Вот. Да, в данном случае можно это доказать
действительно непосредственно по определению, а можно, давайте вспомнить, у нас была серия моя,
я забыл, какой номер. Ну, какой там у нас конкретно был номер, который говорит, что игра
а эквивалентна ниму из и-комней тогда и только тогда, когда а плюс ним эквивалентна ниму из
нуля камней. Или что то же самое, это игра проигрышная. Да, надо было красненьким писать. Ну,
ладно. Вот. Ну, мы в прошлый раз доказали такой критерий и, в принципе, активно пользовались.
Вот. Вот такая вот интересная радость. Вот. Ну, вот это нам просто еще пригодится.
Вот. Ну, это значит, не так мы пошли в две ветки. Как исследовать циклическую игру на одну и как
исследовать ациклические игры, но в сумме. Вот сегодня мы попытаемся объединить, собственно,
эти две ветки. То есть сегодня нам будет интересно, что делать, если нам даны два графа. Ну, то есть мы
хотим просуммировать игры на этих двух графах. И вот как нам это сделать, если эти графы циклические.
То есть, если они ациклические, то как бы теория жпрогрэнди дает исчековывающий ответ на этот
вопрос. То есть, мы знаем. То есть, мы там знаем с вами, что, значит, что мы знаем. Вот давайте еще
раз вспомним. То есть, основные результаты там были такие. То есть, была у нас теория. Господи,
какие там номера-то были? Вот. Значит, говорилось, что, во-первых, если у нас, значит, из игры А есть
ходы, я буду кратенько писать, в игры, эквивалентные нимам, то из этого следует, что А эквивалентно ниму
из И камней, где И равно мексу от вот этого мультимножества. Ну, возможно мульти. Вот. Ну, мекс,
это что такое? То есть, минимальное целое неотрицательное число, которое в этом множестве нет. Вот. Это у нас
была такая теория. И еще была, ну, вот. И еще, конечно, важная теория именно для суммирования игр,
что ним из И камней плюс ним из Ж камней эквивалентен ниму из И ксор Ж камней. Вот. Это у нас были вот такие
результаты. В принципе, да, из них уже аккуратненько следует, что любая циклическая игра, на самом деле,
эквивалентна к кому-то ниму, и более того, за линию можно посчитать какому конкретно. Ну, что делать,
если играть циклические? Да. Ну, потому что, ну, основная идея, что мекс к отчител вы можете
найти за О от К. Ну, мы в прошлый раз тоже это. Ну ладно, за О от К плюс 1, если быть точнее. Вот. Не, ну,
если К равно нулю, знаете, как-то подозрительно. Вот. Да, мечта, но увы. Ну, там проблема такая,
что, ну, как-то бесконечность. У вас, может быть, последуетесь 1, 1, 1, 1, 1, 1 до бесконечности,
с ней можно сравнивать, а последуетесь 0, 0, 0, 0, 0, 0, 0, это что-то странное. Ну, там, если вы вспомните
точное определение всем точке, будет подозрительно. То есть, вы там не случайно рассматриваете только
положительные последовательности. Или, точнее, последовательности, которые, начиная с какого-то
момента, заведомо положительные. Вот. Так вот. Ну, а теперь думаем, это у нас циклические игры. Так,
ну вот. А что делать с циклическими играми? Как суммировать циклические? Ну, сразу возникает
такая мечта. А, может быть, и циклические игры все эквивалентны нимом, а? Стоп. Циклические
игры могут давать нечейные результаты, а нимы не могут. Вот. Да. Начнем уже с этого. Да. Ну,
вообще, да. Маленький приятный факт. Эквивалентные игры заведомо являются играми с одинаковым
результатом. Сами по себе. Ну, потому что их можно просуммировать с нимом из нуля камней. То есть,
с игрой, в которой вообще ходов нет. Вот. Да, действительно. То есть, в принципе, любая нечейная
игра никакому ниму не эквивалентна от слова совсем. Правда, может возникнуть сразу интересный вопрос.
А может, ну вот. А может быть, любая проигрышная игра эквалентна какому-то ниму? Да. И тут мы
вспоминаем, что у нас еще была мистическая теорема. Помните это? Теорема Толстого, да? То есть,
все проигрышные игры эквивалентны нулю. Теорема Толстого. Ну да. Ну, нет, ну можно, пожалуйста,
можно теорему имени Анны Корениной, конечно, но там соответственно. Ну, там просто в начало,
Роман, надо смотреть не в конце, но ладно, это мы уже обсуждали. Вот. А, я понял. Ладно. Жесть.
Круто. Вот. Соответственно. Значит, ну это были две, значит, проигрышные. Так вот, а выигрышная?
А может... Почему анти? Ну, проигрышная игра. Ну, так-то анти Толстого. Нормально. Вот. Ладно. А может,
выигрышная игра все эквивалентна нимам? Каким? Каким-нибудь. Ну да, счетная, когда нимов счетное
количество. Нет, ну вроде мы же разбирали, что там могут быть разные результаты. Какие результаты?
Ну, мы помните, если вот эта табличка, что-то плюс что-то равно... Нет, что-то плюс что-то да, но теперь
у меня более продвинутый вопрос. Может быть, он просто эквивалентен какому-то ниму? Нет, ну... Ведь
у нимов тоже же выигрышная плюс выигрышная может быть равна как проигрышной игре, так и выигрышной
игре, да? Да, но только проигрышной или выигрышной. Да. Самовыгрышных вроде. Нет, это среди нимов.
Потому что выигрышная плюс ничейная у нас была равна чему? Ну да. Там и выигрышные и ничейные,
оба варианта в принципе были, да. В любом случае, если у нас две игры эквивалентные, две выигрышные
игры, каждый эквивалент на ниму, вот тогда их сумма это тоже некоторые ним и он либо выигрышный,
либо проигрышный. Ну да, и что? У нас же соответственно сумма двух выигрышных игр в любом случае
выигрышный, либо проигрышный. Ну да, можно в принципе дать все это уже из абстракции говорить,
действительно, что... Да, то есть видимо там есть какие-то более сложные игры. Да, действительно.
Так, ну давайте думать, но тем не менее, вот есть подозрение, что некоторые игры, то есть если
рассматривать какой-то абсолютно произвольный граф, то мы можем понять, что некоторые вершины там явно,
там некоторые вершины эквивалентны нимом, а некоторые нет. Ну, например, там все проигрышные
игры эквивалентны ниму из нуля ко мне. Секунду, вершины эквивалентны ниму, если игра начавшаяся в ней,
эквивалентна не будет. Да, мы это имеем в виду. Да. Ну, то есть как всегда, то есть мы говорим так,
у нас дан граф, то есть дан граф, то есть как бы каждая вершина этого графа задает игру. Ну вот,
собственно, на этом графе. И нам жутко интересно, к чему эта игра эквивалентна. Ну то есть первый
вопрос была она выигрышная и проигрышная, но мы, конечно, уже зададимся более продвинутым вопросом,
для того, чтобы эти игры суммировать. Ну что это за игры? И вообще, как вообще можно определить,
то есть как находить эти нимберы вообще? Нимберы. Ну, в принципе, даже это практически официальный
термин, устоявшийся такой. По крайней мере, это, слышите, слово нимбер вас поймут. Вот. Ну да. Нет,
ну да, да, да. Не, да, я, более того, я там, собственно, в разборе одного контеста просто слово нимбер так
и встречал, прям в таком виде. Писали корейцы. Вот. Итак, значит, ну, действительно, заметим, что у нас
есть, конечно, способ как понять про какую-то игру, что она нимбер. Ну, мы говорим, что игра нимбер,
если все ходы из нее ведут в нимбер. Да. Ну вот, то есть это достаточно. Вот. Но, оказывается, есть более
продвинутая. Значит, сейчас будет такая более мистическая теория. Это мы тут на всякий случай
оставим. Значит, смотрите, сейчас, вот сейчас слушайте внимательно. Сейчас тут вот условия, тут будет
такой достаточно сложной, тут там легко немножко запутаться. Значит, представьте себе. Значит, говорится
так. Пусть у нас есть игра А, из которой есть ходы в игры, которые уже известно, что эквивалентный
нимбом. Вот, допустим, там К таких игр. Вот. И пусть еще нот, а также есть какие-то ходы в какие-то
еще игры, которые можно, но про которые, скажем аккуратно, неизвестно эквивалентно или ничему
не будет. Что значит неизвестно? Ну, неизвестно, то есть неизвестно, но на самом деле может и
известно, но это означает, что мы игнорируем, даже если известно, то мы игнорируем эту информацию. То
есть просто мы разбили ходы на два множества, в тех, в которых игры эквивалентны, точно эквивалентный
нимбом мы знаем каким, и остальные. Вот. То есть теперь смотрим внимательно. То есть, в принципе,
мы спокойно можем взять игру А2 и отправить ее множество В, если нам очень хочется. Так вот,
предположим, что выяснилось следующее. Значит, пусть у нас И равно мексу. Мексу из вот этого всего. И
один, и два, и так далее и К. Вот. Вот. Пусть у нас, например, так получилось. То есть берем,
соответственно, этот мекс. И пусть неожиданно выяснилось, совершенно неожиданно выяснилось,
что из всех игр B оказывается есть ходы в это вот, в ним языком ней. Вот. Вот. То есть пусть
вот так произошло. То есть есть игры, то есть ходы в множество А, в множество Б. Значит, в множестве
А все эквивалентно нимбом и это мекс этих нимбов. И выяснилось, что из любой, из всех вершин множества
Б можно походить в ним языком ней. То есть причем это, причем естественно могут быть и другие какие-то
ходы. Может быть в игре, которая нам совсем неизвестная, но главное, что вот ним языком ней обязательно есть.
Тогда оказывается, из этого следует, что игра А эквивалентна ниму из и камней. То есть вот такая
неожиданная магия. Ну в принципе да. То есть доказательства, то есть доказательства теории
в таком виде действительно очень простое. То есть действительно просто воспользуемся вот этим критерием.
Я вот тут его не случайно написал. То есть докажем, что игра А плюс вот этот нимб проигрышная. Как мы
докажем? Ну докажем, что у второго игрока есть выигрышная стратегия. Как она выглядит? Ну а давайте
подумаем, что можно действительно из этой игры А плюс звездочка И вообще сделать? Ну во-первых,
можно отправиться в какую-нибудь там ним из и ж камней плюс и, а это заведомо выигрышная игра,
потому что эти нимы заведомо неравны. Что еще можно сделать? Можно отправиться в Б, Б житая
плюс звездочка И, но тогда мы можем пойти в игру, там из этой бж есть ход в звездочка И, и мы тоже
выигрываем. И что еще можно сделать? Ну еще можно сделать А плюс звездочка И штрих, можно в штрих
пойти, но тогда второй игрок тоже может пойти вполне себе в И штрих плюс И штрих, потому что это
Мекс, то есть как бы в этом списке как бы И нету, а все меньше есть по определению. То есть получается
пока не очень сложная теря. Вот понятно, да? Ну не по определению, а по критерию, что это
эквивалент на тому, что А плюс звездочка И проигрышная. Докажем, что она проигрышная. Ну вот,
ну и все. И у второго игрока просто вот тут аккуратно доказывать, что у второго игрока тут реально
выигрышная стратегия есть. Собственно не сильно сложно. Собственно условия написаны таким образом,
чтобы действительно у второго игрока была аккуратенькая выигрышная стратегия. Вот,
понятно? А что, вопрос?
Так что вот получилась такая красота.
Вот, но прикольность, это еще малая часть. То есть, да, заметим, что это достаточно условия. Это
конечно более продвинутая версия вот этого условия, правда? То есть, заметим, это такое обобщение,
потому что здесь выражен просто частный случай вот этого условия, заключающийся в том, что
множество Б пустое. Обратите внимание. На самом деле, обратите внимание, да, можно еще рассмотреть
другой крайний случай, когда множество А пустое. Но во что превратится это в условии этой серии,
когда А пустые? Тогда Мекс будет равен чему? Ну да, Мекс пустого множества ноль. Но тогда,
получается, что означает, что если из всех игр из всех ходов из А можно пойти в звездочка ноль,
значит и сама А звездочка ноль. Да, но на самом деле, да, в общем-то, тоже достаточно известный
принцип. Потому что по факту это просто мы говорим о том, что из всех этих игр можно пойти в
проигрышную игру. Значит, все эти игры выигрышные, но тогда если из игры можно пойти только в
выигрышную игру, значит она проигрышная. В общем-то, это уже было. Но, тем не менее,
если и А, и Б существуют, то вот можно. И в принципе, заметим, что можно даже пытаться
применять этот принцип. То есть, обычно у нас есть такой вот метод в теории игр. Давайте,
если у нас появился какой-то принцип, давайте его применять пока можем. В прошлый раз мы уже
применяли эту логику. У нас были принцип выигрышности и принцип проигрышности. Мы
применяли графу «пока можем». Потом говорили, что если в какой-то момент возникла ситуация,
что мы ни к одной вершине не можем применить ни один принцип, то значит все оставшиеся вершины
железно-ничейные. Помните, да? И тут вот высекает такой вопрос. А что будет… Вот давайте,
вот будем пытаться применять вот эту теорему «пока можем». Вот отдельная, кстати, песня.
А как применять эту теорему? Вот такая маленькая проблема. Жила-была какая-то вершина А. Мы можем
перебрать все ходы из нее и выяснить, что в некоторые вершины уже известно, что эквалентны
ниму, про некоторые мы пока такого не знаем. Но маленькая проблема. А нужно ли… Ну можно,
конечно, прямо честно проверить. Взять мекс этих нимов и честно вот вы пройдете из этих вершин,
честно проверить, можно ли в такой ним походить. Ну, по крайней мере, уже разведанный. Но вот
секрет вопрос. Допустим, не получилось. Тогда высекает такая идея. А может надо брать просто
множество «а» не все нимы, а какое-то их правильно подогнанное под множество? Вот как вы думаете.
Понятна проблема?
Вот если у нас там действительно есть ходы в какие-то нимы, какие под множество имеет
смысл рассматривать в качестве под множество «а»? Ну вот потенциальных ходов, которые ведут в нимы.
То есть вот там дана игра «а», в ней какие-то ходы ведут в нимы, нам известные какие-то,
пока неизвестно. Мы хотим проверить, можно ли к игре «а» применить этот принцип.
Нет, можно, да, но это называется просто все ноты, но это называется просто берем все ниты,
которые уже известно, что там равны нимам, берем из них мекс и проверяем. Но это только маленькая
проблема. А кто сказал, что все известные нам нимы нужно отправлять в множество «а»?
Нет, в смысле скорее мы можем сказать так. Вот пусть у нас есть мекс всех нимов,
в которые мы можем из ашки попасть, соответственно мы можем всегда выбрать такое под множество,
чтобы их мекс был меньше либо равен данного. Ну я бы так сказал, ну я так сказал, какое вы
под множество этих нимов не взяли, по-любому мекс будет меньше либо равен этого «и».
Не-не-не, потому что мы можем любой меньше либо равный получить таким образом.
Сейчас зачем? Ну, кстати, можем. Так, и?
Ну вот, соответственно у нас, соответственно хочется посмотреть типа, ну для каждой вершинки
условно понять, какой самый большой ним мы можем... Я не понимаю, что мы хотим сделать.
Избавиться от перебора за два в степени. Это рассмотрение только одного под множество полного.
Вот, вот я и задаю вопрос, а почему нота, почему этого достаточно? Может выяснится,
что вы полное под множество рассмотрели и это принцип не применился, а если рассмотреть какое-то
непонятное под множество, то есть некоторые известные на свете проигнорируют, может быть лучше.
Конечно.
Очевидно, что если у нас какого-то элемента нету, и мы его получили в некомом под множество...
Нам достаточно рассмотреть не два в степени, а «н» как минимум.
Чего, почему очевидно? Не понял.
Ну, если элемент не принадлежит объедению множества, то он не принадлежит ни одному из множества.
Чего?
Как минимум, ну нам не нужно два в степени «н», как минимум нам хватит «н».
Так нет, тут действительно понятно, почему нам хватит просто вот всех гиповалентных,
потому что, ну давайте посмотрим, вот пусть у нас есть ходы, вот есть ходы из «б» в какие-то нивы.
Угу.
Вот. Соответственно, мы хотим, чтобы...
Сейчас, нет, сейчас.
Ну, можно так, смотрите, если мы из «а» какого-то перенесем в «б», то у нас тогда, вот он станет, возможно, мексом.
Теперь, если мы мекс изменим, то значит у нас в «б» будет вот этот мекс, и мы не сможем из него-то уже с его самого перейти.
Сейчас, почему не сможем перейти куда-нибудь?
Не понял.
Если у нас мекс меньший, значит мы исключили кого-то из меньших.
Да.
Значит, из него нет ходов себя, и при этом нам придется его перенести направо, и поэтому у нас не выполнится условие справа, кажется.
Угу.
Ну, можно так сказать.
Да, можно сразу заметить, что если у нас есть ход в какой-то ним, то игра «а» заведомо этому ниму не эквивалентна.
Ну, то есть, не может быть так, что «а» эквивалентна ниму из «и2», начнем с этого.
Почему?
Ну, просто потому что «а» плюс «и2» — это заведомо выигрышная игра, потому что первый игрок ходит в этот ним и выигрывает.
Вот.
Да, почему да?
Как доказать, что игра не является проигрышной?
Доказать, что она является выигрышной.
Да.
Все просто.
Вот.
Так, отлично.
Значит, получается, что если нам уже даны какие-то нимы, то ни одному из них игра эквивалентна быть не может.
Так.
Но тогда, получается, заметим, что какое бы мы подмножество ни взяли, то мекс получится либо вот это «и», то есть мекс всего, либо меньше.
Но меньше, как мы уже поняли, так как все меньше встречаются, то «а» не может быть эквивалентна.
То есть, значит, принцип точно не применится.
Значит, получается, принцип можно применять только таким подмножеством, у которых и мекс совпадает с исходом.
Но заметим, что при фиксированном мексе, то есть при фиксированном «и», чем больше вершин мы отправим множество «а», тем лучше.
Потому что вместо того, чтобы думать, есть ли из нее ход в звездочка «и», лучше ее отправить в множество «а», и в общем-то, суть останется той же.
Да, поэтому действительно оказывается, что, по крайней мере, проверить, пробежаться по графу и проверить, можно ли действительно применить этот принцип,
можно за какое-то полидомиальное время.
А большему нему почему?
Ну, потому что, смотрите, этот принцип может сказать, что «а» эквивалентна нему из какого-то подмножества этих чисел, да?
Ну вот, то есть не…
В плане, она может быть эквивалентна большему нему, но мы не сможем этим принципом это узнать.
Да, потому что конкретно прямо сейчас мы это просто не узнаем, да.
То есть из того, что у нас есть, мы можем либо доказать, что «а» эквивалентна нему из мекса того, что мы знаем, либо ничего не можем доказать.
Либо сказать, что если эквивалент, то побольше.
Ну, типа того, да.
Ну, можно отдельно думать, действительно, как это сделать, но думаю, это мы где-нибудь в конце, на самом деле, этим займемся.
Потому что для начала нам надо доказать, насколько всеобъемлющий этот принцип.
Вот мы применяем этот принцип, применяем, применяем, в какой-то момент застопались.
Ну, как всегда.
Вправивается…
Ну вот.
Что, ну вот, спрашивается, верно ли, что, как говорится, этим принципом можно найти все вершины эквивалентной нимы?
Оказывается, да.
Смотрите.
Значит, мистическая терема.
То есть, терема.
Будем применять к вершинам графа «ж», значит, вот этот вот принцип.
Принцип вот этой вот теремы какой-то там.
Так, ладно. Пусть будет 9.
Вот. А это будет терема 10.
Ну, я помню, в какой-то нумерации у меня это было реально 9 и 10.
Вот. Принцип теремы 9 пока можем.
Да-да!
Тогда…
Ну вот, тогда, ну вот, если для какой-то вершины «в», вершины «в», нимбер не найден…
Это мы делаем цикл по всем вершинам, и если хотя бы одно из делали, то запускаемся заново?
Да.
Ну, то есть, пусть мы, то есть, мы, то есть, говорим так, у нас есть пустой граф, мы начинаем с нуля к нему применить.
Важно, что именно с нуля.
И пусть неожиданно в какой-то момент обнаружено, что некоторые вершины мы уже знали, что эквивалентны ниму, но из того, что мы знаем, больше ни к одной вершине принцип применить нельзя.
Вот.
Тогда, если для какой-то вершины «в» в результате нимбер найден не был, то «в» не эквивалентна никакому ниму.
Прямо вот железобетона. То есть, не нашли, значит, его нет.
Да, значит того письма нет в дому всем, как говорится.
Вот.
Спрашивается.
Вот, действительно, как это доказать?
Так, ну вот.
Так, ну вот.
И сейчас, вот сейчас будет совсем, вот сейчас прям совсем включается.
Потому что сейчас будет такое, может быть, достаточно нетривиальное, по крайней мере, с первого раза рассуждение.
Значит, ну, значит, рассуждение от противного.
Вот.
Как говорят оллбанцы, от абсурда.
Значит, соответственно, пусть такая игра есть.
Пусть у нас есть какая-то игра, да, то есть, действительно, какая-то игра такого вида.
Ну, то есть, она там, понятно, задается графом «ж» и вершиной «в» в нем.
Которая, значит, у которой принцип не нашел у нее нимбер.
Но, тем не менее, он есть.
Ну, вот.
А он есть и равен «и».
А теперь внимание.
Смотрите.
Это эквивалентно тому, что игра «а» плюс ним языком «ней» проигрышна.
Так вот.
Из всех таких игр, выберем такие «а» и «и», что пусть «а» плюс звездочка «и» проигрышна за наименьшее число ходов.
Да.
Абсолютно любую.
Так, чем приятно под множество целых неотрицательных чисел.
То есть, как бы там, максимум, какой бы множество под множество ни было, а минимум у него существует.
Ну, есть, конечно, оно не пустое.
Вот.
Вот, как мы говорим, пусть оно не пустое.
Да.
Тогда, значит, существует игра, которая проигрышна за наименьшее число ходов.
Что значит проигрышно?
Помним, да, что у нас, по идее, бывает, что проигрыш, пусть проигрывающий хочет проиграть за, то есть, оттянуть проигрыш, а выигрышный, наоборот, хочет выигрывать побыстрее.
Тогда, там, в ретроанализе мы еще и могли вычислять, там, как, сколько времени будет игродлиться.
Помните, да?
Вот.
То есть, у нас этот вот наш любимый БФСик этим активно зонемолся.
Так.
Но теперь давайте думать.
Вот это А плюс звездочка И.
Как она вообще?
Ну вот.
Вот теперь давайте думать.
Как она вообще проигрышна?
Как она вообще проигрышна?
Ну да.
Ну потому что нам же как-то из этого противоречия вывести надо, правда?
Вот.
Значит, смотрите.
Значит, идея на самом деле в следующем.
Вот у нас, значит, принцип мы применить не смогли.
Это что означает?
То есть, в принципе, помните, да, что у игры А.
А, ну давайте вот, вот как рассмотрим.
Значит, принцип мы применить не смогли.
Давайте подумаем, почему.
Есть хотя бы обершина, которая может перейти, которая не говлянна, тоже нечем.
Это необходимо, но недостаточно.
То есть пока ты только сказал, что не выполнено вот это условие по факту.
Нет, ну в плане, что вот у нас есть какая-то вершина, для которой них тоже неопределено.
Ну потенциально.
Ну да, ну из нее заведомо можно проходить вершину с непонятным Нибером, да.
По крайней мере непонятным нами Нибером, если он есть.
У нас, кажется, есть цикл где-то таких вершин.
Да, вот это вот как раз вторая вещь, которую я хочу сказать, но я не увижу, что это.
Ну скажем, ну как сказать?
Цикл, как раз цикл.
Ну как сказать? Цикл, конечно, есть.
Ну как всегда, буква П, это да.
Нет, ну сам цикл, к сожалению, про неэквивалентность Нибера еще ничего не говорит.
Правда.
Значит, смотрите.
Ну мы знаем, что на этом цикле есть вершины, которые на самом деле эквивалентны.
Ну мы и будем говорить так.
Нет, погодите, погодите.
А, нет, у нас она может быть на вершине, на вершине, из которой достижим этот цикл, есть вершины.
Нет, тут смотрите.
Давайте рассмотрим игру А, попробуем к ней применить наш принцип.
Ну, когда мы пробовали применить этот принцип, мы говорили, так, смотрим все игры, про которые мы знаем, что они эквивалентны Нибера.
В чем в данном случае?
Ну вот.
И давайте подумаем.
Так.
Давайте я только их не Ишками назову, а Жишками еще.
Вот так.
А, ну вот.
И давайте скажем, что Ж это что такое?
Это мекс этих всех Жишек.
Вот.
Но это не, но это другое.
Да.
Но заметим, что это Ж, в общем-то, с И как-то связано быть не обязано.
Ну, собственно, вот на эту тему мы сейчас, собственно, рассмотрим случай.
Какие случаи мы рассмотрим?
Ну, очевидно, у нас будет три случая.
И меньше Жи, и равно Жи, и больше Жи.
Спрашивается, с какого начнем?
Прямо сразу равно.
Прямо сразу равно?
Ну хорошо.
Давайте предположим, что нам фантастически повезло, и И равно Жи.
Так.
И это вот, то есть мы сказали, что вот игра А все-таки эквивалентна какому-то Ниму из-за камней.
Просто принцип нам этого не сказал.
Вот.
Так.
Но смотрите, как интересно.
И равно, то есть мы хотели применить принцип.
Взяли мекс, он равен этому И.
Но почему-то, он нам заняно, но почему-то мы ничего не смогли сделать.
Вот.
Почему мы ничего не смогли сделать?
Ну, наверное, единственная причина, по которой мы не смогли это сделать,
только потому, что, видимо, существует какая-то игра Б.
То есть из игр А можно пойти в какую-то игру Б, какой-то там.
И с которой нельзя пойти в Ним из-за камней.
Ну или, по крайней мере, нам это не известно.
То есть существует какая-то, так сказать, неопределенность.
Но, на самом деле, будем говорить.
То есть, на самом деле, игры, которые не эквивалентны никому Нимунцеву.
Нет, хотя нет.
Пока еще лучше не надо так говорить.
То есть, нашлась какая-то игра, которую мы не идентифицировали.
То есть, вот какая-то Б, из которой в Ним из-за камней, по крайней мере, известного нам хода нет.
Так, а мы доказывали, что из Нима и камней есть ходы только в Нимы.
Чего еще раз?
В плане, что если игра эквалентна Ниму, то все ходы из него, игры, которые таким образом получаются, тоже эквалентны Ниму.
Нет, по-моему.
Более того, я даже не уверен, что это правда, в принципе.
Потому что игра может быть про...
Ну потому что, допустим, у тебя будет какой-нибудь вот такой пример.
О, тогда вот эта игра откровенно проигрышная, и вот эта игра тоже откровенно проигрышная.
Но вот эта игра никакому Ниму не эквивалентна явно.
Ну да, отлично.
Потому что, чем это израчительская, она такая игра, то есть, с петлей.
То есть, если у вас есть петля, да, обычно, конечно, если есть петля, то это плохо.
Но в данном случае, наоборот, если у вас на шее есть петля, значит, вы не проиграете точно никому.
По крайней мере, Нимбер вас точно не...
Если интересны постановки утверждения...
Ну да, если у вас есть петля, значит, в сумме с Нимом вы не проиграете.
Да, доказательства. Пусть вы проиграете.
Тогда сходим по петле и подсугиваем в соседу проигрышную позицию.
Ой, оказывается, мы выиграем. Ух ты.
В общем, ну как всегда, да.
Главное, когда у тебя петля на шее, не подсовывать в соседу стуль.
Ну да.
Не подсовывать в соседу дострянные вещи.
Сейчас еще раз, у нас алгоритмы готовы.
Мы сначала просто вычеркиваем, вот мы опять же, на графе ищем планетное Ниму,
после чего берем, вычеркиваем все состояния, которые уже известны в ритуале.
Нет, ну не совсем вычеркиваем.
А нам важно знать, что они влияют на Нимбу и какому конкретно.
Ну это понятно. Вычеркиваем из возможностей для нашей вершины.
Ну да, дальше это алгоритм говорит так, что мы просто пробегаемся по всем вершинам,
пытаемся понять, можно ли применить к ним этот принцип.
Вот.
Пусть в какой-то момент мы пробегались, пробегались и выяснили,
что мы пробежались по всем вершинам и ни к одной не смогли применить принцип.
Ну если смогли применить принцип, значит пробегаемся еще раз.
Почему при переходе из А в Б есть вершина, в которой негативно?
Нет, я хочу сказать, что из этой игры существует игра Б,
то есть существует ход в игру Б, из которой не существует хода в разведанной нами Нимы за камней.
Почему?
Потому что в противном случае мы бы к этой игре А принцип успешно применили.
Такое мы применяем непосредственно для тех, которые тоже неопределенные тапши.
Мы это для всех ваших целей примерно делаем.
Нет, зачем?
Как мы через Б применим причину К?
Нет, ну смотрите, принцип говорил следующее.
Пусть у меня есть вот ходы в Нимы, пусть есть мекс этих Нимов.
Пусть выяснилось, что из всех ходов, которые не исследованы, есть ходы случайно в это Нимы за камней.
Ходы длины 1 или еводно?
Длины 1, конечно.
Мы в доказательстве здесь использовали все длины 1.
Вот тогда из этого мы сделали вывод, что эта игра А эквивалентна Ниму за камней.
В этот принцип заключается.
Тогда если оказалось, что Ним этих жишек равен И,
то тогда, получается, мы не смогли к этой игре применить принцип,
только потому, что из какой-то из Б-шек в такой Ним сходить, видимо, нельзя.
Ну или пока мы не знаем, что можно.
Ну теперь давайте думать.
Мы же второй игрок, мы же обязаны и в игре Б плюс звездочка,
вот это вот И, оно же же каким-то мистическим образом выигрывает, правда?
Но как мы это сделаем?
Мы это сделаем каким-то одним из трех, то есть наш этот оптимальный ход будет одним из трех.
Либо мы пойдем в какую-то игру, условно, С плюс звездочка,
либо мы пойдем из Б в какой-то разведанный Нимбер,
там звездочка из штриха плюс звездочка И,
либо мы пойдем в какую-то тоже неразведанность,
B-штрих плюс звездочка И,
либо мы пойдем в Ними из и камней, то есть пойдем B плюс звездочка и штрих.
То есть глобально понятно, что из этой игры можно сделать ход только вот какого-то одного из трех типов.
Но, заметим, что так как и штрих у вас не равен и заведомо,
потому что мы говорим о разведанных Нимах,
то получается, что этот ход невозможен.
Но какой из этих двух возможен?
Потому что это игра, потому что мы как второй игрок должны пойти и подсунуть в противнику проигрышную позицию,
а так как и штрих не равно и эта позиция будет выигрышна.
Вот.
Но какой из этих случаев возможен?
Да в принципе оба.
И это нас прекрасно устраивает по одной простой причине.
Дело в том, что это снова игра вида не исследовательность плюс Ним.
И тут не исследовательность... не исследовательность плюс Ним.
Противоречие, видимо, со sortieка ч eel their в пути?
Да, нет, ну противоречие в том, что это была игра проигрышную за меньшее число ходов.
Мы нашли не исследовательность плюс Ним, которая проигрышна за меньшее число ходов.
Ч.
Ну то есть мы доказали, что бетinteflint на I?
Нет, мы не доказали.
Нет-нет рассуждений, еще раз можно.
раз высказали пусть ну мы вот рассмотрели вот эти вот немы пусть и равно же мы сказали это важно да
тогда заметим что единственная причина по которой мы не смогли применить наш принцип к игре а
заключается в том что из игр а можно пойти в какую-то не исследовательность не исследованность б из
которой нельзя пойти значит соответственно просто вот из этого тб то есть соответственно нельзя
пойти в исследованный ним языком ней вот тогда давай мы говорим рассмотрим
игру а плюс звездочка и мы знаем что она проигрышная да и рассмотр поиграем
со второго игрока пусть первый игрок пошел в этот год б плюс звездочка и мы
вот мы тогда должны сделать какой-то выигрышный ход да причем не просто
выигрышный ход а мы должны сделать выигрышный ход чтобы полученная игра
выигрывал из заменьшее число ходов спрашивается как она вот тогда замечаем
что этот ход он существует он заветом существует но обязательно как мы
выясняем приведет нас в игру вида не исследовательность не исследованность
плюс не и да она и она проигрышная заменьшее число ходов
то есть вот это бэш-трих уже будет и квалифицировать и ну да ну да ну вот
так что вот такая красота
вот такой вот но это заметим только один случай и равно же еще раз вот мы
вот что мы пытаемся показать что это игра проигрышно за на самом деле ну как
бы не самым меньше числом ходов да для этого делаем мы говорим мы сейчас как бы
играем зоо за какого игрока за да хорошо после этого мы говорим что у нас есть
состояние из которого нету чечне с которого нет перехода в нем и ну так и так
из играм можно сделать ход в такое состояние из которого нельзя пойти в
ним и да по камере в исследовании не мы да нет то смысле ну потому что вот у
нас то что вот при мы говорим предположим что первый игрок такой ход
и сделал вот мы ну вот мы второго как второй игрок можем в этом случае выиграть потому
что это игра проигрышная да значит какой же ход мы сделаем но мы можем либо из этой
игры пойти в исследованные ним либо в эту из этой игры бы пойти в какую-то
не исследовательность либо сделать ход в неме языком не но пойти сделать ход из
игры бы вы следованы не мы не можем потому что там нет исследована ним равного и да и мы
просто тупо проиграли следовательно мы сделаем ход ну либо либо в игре б в не исследовательность
либо в ними и но оба раза первому игроку подсунется проигрышная игра вида не исследовательность плюс
ним но от раунда но бета это и тоже не исследовательность это важно а любая не
исследовательность ну какая-то не следовательность плюс какой-то ним да
нет ну в данном случае ну нет ну давайте так если а плюс звездочка и проигрышно за
ноль ходов это означает что ни что из игр а просто ходить нельзя ну так и так в этом доказательстве
мы пользуемся тем что и равно вот этому мексу но там равен эту мексу там 57 179 или 0 нам по
барабану но это а это уже но это значит это был случай когда и равно жи хотя это может хотя
возможно это был самый интересный случай так ну что остались два случая и меньше же и больше
же какой выбирать кто меньше и хорошо значит смотрите убираем значит так еще раз и значит
случай и меньше же что это за случай что что-то происходит так но тут вообще жутко интересно
потому что и оказалось меньше чем мекс этих мекс этих жишек это означает что это ишка там
встречается то есть получается что в этом случае в игре а плюс звездочка и вполне можно сходить
в игру звездочка и плюс звездочка и то это означает что это игра просто выигрышная значит вывод
такого не бывает противоречия сразу противоречия потому что мы предполагаем потому что мы
предположили что это игра проигрышная замедлименчатый ходов мы вывели что она выигрышная ой классно
какой-то вот и наконец да видимо чуть более экзотический случай когда и все-таки больше
этого мекса
если игра не определенно то она непременно проигрышная
есть вот не может быть так вот мы сейчас столкнулись ситуации что мы у нас есть
неопределенность и при этом у нас игра выигрышная почему если игра выигрышная то она на эквиваленте какого-то не
как кто сказал мы не знаем у нас была лемма что тогда ее сумма с нимом проигрышная да
то есть у нас критерии что игра эквивалента нему тартает только тогда когда сумма этой
игры с этим нимом проигрышная да была причем да причем там да да там было достаточно магическое
доказательство такое но там но очень простое но не важно но это мы были в прошлый раз повторяться не
хочется такая мистическая теория мотоф откуда-то есть и вот сейчас пути так и так что же делать когда
и больше чем же и как же нам действительно рассуждать в этом случае
но давайте рассуждать тем же спорно то есть но теперь выскакать такая идея теперь заветим
что в мистической игре а плюс звездочка и теперь можно сделать потрясающий по накалу ход а плюс
звездочка жи и теперь на то что второй игрок намеревается в этой игре выиграть
да
нет нет ну или любым другим способом вывести противоречия
мы еще выводили противоречия и ссыкла что то есть у второго игрока выкреплю звездочка есть выигрышная
стратегия сказали мы так ну поэтому давай продемонстрирует стратегию вот первый игрок
пойдет например вот сюда спрашивать еще но спрашивается что может сделать вторую игру
о боже вспомнили хотя в принципе да да хотя да матбой по матыкам да замечательно да как
говорится я да и я рассказываю стратегию противник чешется и вас обыкровать против этой
стратегии да но начнем с того что да ходить там в какой-нибудь жи там же там же штрих плюс
звездочка жи это заведомый фейл потому что жи там нет значит либо в давайте лучше быть не
исследовательность слово неопределенность у нас будет иметь немножко другой смысл вот хотя
очень похожий на самом так еще можно пойти в а плюс звездочка жи штрих но заметим что если он
пойдет сюда то как бы то есть если наш оптимальный ход окажется вот сюда то как таки тогда просто
найдется не исследовательность плюс ним с проигрышной за меньше число ходов противоречия
но правда если мы сюда пойдем хуже то от этого не станет потому что а то сама тоже является
не исследовательности а уже без разницы нет почему не проигрышная потому что а ну да да
заметим что в этой игре первый рок еще и тупо выигрывает хотя нам хотя в принципе за эти уже не
уже не принципиально знаете как это как это вчера как это вчера было да тут уже тут тут непонятно
какой ход можно сделать чтобы вообще пустить выигрыш вообще можно хоть так можно редак то есть
там выигрывает уже шоу вчера вчера вчера ну да ну да
ну да да да ну шахматы да там веселые шахматы на шести партиях 22 нормально да
если так считать то конечно на шести партиях ничейный результат
может быть только 1 3 3 очевидно да но тут такая мысль очень удобно считать не считать реальный
результат матча не по вот такому принципу что ничего это пол очка и пол очка а давайте просто
ничьи игнорируем считаем только количество побед и тогда просто считаем разницу то есть например
матч там скажем как корякин карлсон закончился с счетом 1 1 ну слушай 6 6 мысли 1 1 там мачи
александр горячкина и дживен джюль закончился 6 6 выстрел 3 3 почувствуйте разницу да ну что
есть там было 12 партий и они закончились да именно причем несколько раз да почему не почему
нет еще несколько только это понятно что в всех матчах был табрэйк естественно да у кого
у кого шесть партий сейчас у янда сейчас у янда по сидит женщин сейчас сырали шесть
партий сейчас еще и счет у них 3 3 в смысле 2 2 8 4 часа сейчас играет доча сыграть сейчас
сейчас 14 играют да вот потому что да что белый черный симметрия так чего какой вопрос подел
а потому что а дело в том что на этот раз мы пользуемся тем что жи это мекс вот эти
рыжишек это означает что мы до из игра плюс звездочка жи там можем перейти только в ним
неравный же пуша равного среди равного среди них нет что на этот раз по определению мекса да вот
но это можно как бы выкинуть можно просто что-то не определенное там не исследовательность плюс
ним можно сказать что это игра еще и выигрышная сразу то есть там как ведь там еще и на пасху
попало так что вот вот это да вот так вот значит и соответственно б плюс звездочка жи еще и тут
вот вот ну вот ну вот ну короче говоря тут любым способом а сути одна но вот мы собственно
три случаи перебрали и действительно доказали что те рэп верна хотя конечно то есть может
не совсем очевидно не совсем тривиально а вот давайте думать значит да вот смотрите
действительно давайте думать за какую асимптотику мы вообще то есть там условно за какую асимптотику
мы действительно можем все эти принципы по применять кстати давайте тогда да какой фортбел
нет ну можно фортбел надо но да можно фортбел мы уже убедились что если мы хотим применить
принцип вершине то мы можем взять все известные и просто ним берет прям взять прям все жадно
выбрать из них нужные и потом для остальных игр проверить а можно ли из них походить в нужную
нам игру правда за какой асимптотику мы будем это делать нет уметь поддерживать легко потому
что скажем так я могу прибежаться заве плюс ей для каждой вершины вот эти мексы посчитать
нет ну а на их нет если глобально но вопрос
нет но на самом деле глобально поддерживает мексы по умному не очень умоляно
не а прикол в том что по тупому работает ну по тупому если мы будем нам надо это сэйт
нет ну смотри не просто у тебя мекс вершинки очевидно не может быть не может привести
ее степень очевидно ну да да да да нет ну можно просто нет может быть прям жадно хранить то есть
действительно заведем массив массив юзет на степень вершины плюс один и там будем честно хранить
указатель на первое что еще не помечено если если кто кто-то пометил ну значит задвигаем
сумасшедшие добавлять вершину и поддерживать мекс до на цвады вот давайте думать да сколько
таких итераций теоретически может быть а главное как это вообще делать но идея на самом деле
оказывается следующее смотрите мы же вот смотрите мы можем запустить это анализ который в принципе
будет применять вот этот принцип но на ноль но он будет искать ну смотрите может значит задача
как найти все игры которые квалентны не мы с нуля камней ответ запустить честный ретро анализ да
нет ну не наверно ретро анализ вообще чем занимался он ищет да но просто заметим что нет ну почему
тупой ретро анализ как раз именно вот по камере вершины эквивалентной нулю камней как раз найдет
в ретро анализ этим занимается вообще нет ретро анализ он вообще даже не в этих терминах мы
следом мыслит терминах найти все проигрышной выигрышные нечейные вершины да вот то есть он
а мы говорим что вершина выигрышная если есть вход в проигрышную да вершина проигрышная если
все ходы ведут в выигрышные вершины из нее да но то есть действительно за нот
то есть заметим что пока мы то есть изначально то у нас нимов кроме нуля нету
поэтому ашек вообще нету то есть по факту как получается просто прицеп
выигрышности в чистом виде проигрышности точнее так вот таки запустили ретро
анализ нашли все не мы с нуля камней теперь у меня идея такая я утверждаю
что на следующем шаге за от в плюсе мы можем найти все вершины эквивалентной
нему из одного камня
значит как мы это сделаем ну будет что-то типа похожее на вот ретро
анализу из выигрышности проигрышность то есть во первых мы посчитано найдем
все вершины у которых мекс значит у которых мекс ашек равен действительно
единицы это мы прям сове плюс е можем пробежаться и честно найти да а дальше
просто запускаем ретро анализ то есть для каждой вершины мы там храним счетчик
сколько существует неопределенность сколько сколько из нее существует так
сказать не не исследованности из которых есть ход в ним из один камне из одного
камня пока это чей наоборот не существует пока нет если нет это все
становится очевидно если вы просто хорошо помните как работает ретро
анализ то есть это анализ говорит так давайте мы посчитаем сколько у нас
существует сколькими способами мы из вершины можем пойти в вершину которая
пока еще не является разведанной проигрышностью как только выяснилось но
нет это чей наоборот сколько там сколько существует ходов из вершины в
вершину из которой существует ход в разведанную проигрышность
еще раз ретро анализе просто храним колечко
не ну не совсем нет мы там должны мы говорим что поиметь принцип проигрышности
мы должны сказать что все ребра у нас ведут в выигрышной вершины что такое
выигрышная вершина выигрышная вершина это вершина из которой есть ход в
разведанную проигрышность правда
нет почему не не определенности тут ни при чем все там все вершины
неопределенные потому что если из этой игры будет ход хоть в одно
определенность там в эту определенную проигрышность значит она сама уже
выигрышной нам она уже не интересно
нет ну да то есть просто идея будет такая что то есть запускаем примерно то
же самое то есть а именно но вот а именно говорим что ну то есть как бы
после того как мы насчитали мексы из нуля да ну там параметру только из нулей
состоят да то получается что из всех но то есть получается что из каждой игры
которая еще не эквалентно там нулевые единицы есть ходы в какие-то условно б
шки да вот нам ну вот нам нужно в какой-то момент либо выяснить что
какая-то из этих там то есть по эти башки надо еще что-то выяснить но то есть
новых нулей мы среди этих бэшек не найдем поэтому нам надо как бы для
каждой из этих бэшек найти ход в разведанную единичку
я в смысле еще что мы поддерживаем для каждой решения кроме ну давайте будем
поддерживать количество бэшек про которые мы в которой мы можем из нее
пойти и в которые из которых мы еще не знаем что можно пойти в разведанную
единичку да да потому что если в какой-то момент выяснится что таких бэшек 0 то
это означает что мы к самой вершине а можем применить принцип
нет зачем худо нет мы их не удаляем мы просто мы пометили что они нули и мы и
более того вот этих мексов мы уже их пометили то есть теперь дальше запускаем
так что если нашлась какая-то вершина у которой мекс равен единице то есть
отличие от ретроанализа в том что мы как бы посчитали мекс и потому что если
мекс оказался не равен единице то принцип на единицу мы применить не не
можем
но я не очень понимаю как одновременно проверять принцип на то что у нас есть
мекс и одновременно поддерживает
бэшки мы как-нибудь в массиве нет а все так же потому что мы нет все так же мы
кладем значит в очередь а значит какие вершины мы кладем в очередь во-первых
мы кладем вершины про то мы разведывали что они оказывается звездочка один нет
не только по мексу мы которым реально принцип потому что оказалось следующее
мы посчитали мексы и обнаружилось что есть вершины не только те у которых мекс
но еще обнаружилось что у этих вершин не только мекс один но и выяснилось что
бэшек нету вот вообще нету выяснилось тогда очевидно что к этим вершинам мы
очевидно просто даже просто потеряем про там вот прошел гранди еще применяем
единицу вот мы все записываем очередь теперь что мы из этой очереди делаем
достаем звездочка 1 и говорим так отлично давайте переберем все ходы
ведущие в эту звездочку 1 и все эти игры но если они не эквивалентно какому-то
нему честно значит честно помечаем что из них есть ход звездочка 1 и мы их тоже
добавляем в очередь но если но если конечно их не было потому что вот
потом когда мы застаем из очереди вершину в которой помещено что из нее
есть ход звездочка 1 то мы значит тогда перебираем всех кто ведет в нее и на
оборот помечаем что там вася у тебя вот тут был ход в вершину так вот из нее
нашелся ход звездочка 1 выкидывать нет мы будем нет естественно мы будем
добавлять только один раз мы будем следить за тем что второй раз мы ничего в
очередь не добавляем в смысле ну и в смысле зачем просто не массив юзит
проблемы но по нету нет смысле в ретро анализе вы тоже там в fs в ретро
анализе поддерживайте что там какие-то в швы там два раза вершину не добавляйте
вот а так значит аккуратно поддерживать
значит тогда и получается что за я утверждаю что за в плюсе мы нашли все
вершины которые эквалентны нему из одного камня
нет ну как за это просто идея да что мы на каждом шаге будем сочепот после
этого за в плюсе мы найдем все двойки потом все тройки потом все четверки и
так далее вот как только очередной ним мы не нашли вот прям за в плюсе
пробежались и нового не мы не нашли значит причем долго на максимальный
гибрик который там графе в общении
берем кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бам
кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу кел бамбу
У нас принцип так говорит. Кстати, он еще и гарантирует, что из любой игры, кстати, эквивалентной нимберу из же камней можно сходить во все возможные нимберы меньшее, как минимум.
Ну вот, тогда замечаем, что да. То есть, если у нас есть нимбер K, то тогда у нас из этой вершины торксит K ребер, значит из нимбера, соответственно, в K-1 торксит K-1,
из нимбера K-2 торксит K-2 и так далее, ну и так далее, короче. Ну вот, и оказывается, что эта сумма меньше либо равна, чем E, ну и получается E больше либо равна, значит, K на K-1 пополам,
ну и отсюда, соответственно, следует, что, значит, K меньше либо равна, там меньше либо равна корень из двух E.
Ну вот такую корню.
Очень грубая оценка.
Не очень.
На самом деле...
Еще раз, секунду. Там могут деревья пересекаться.
А, да, ладно.
Нет, на самом деле, не очень грубая, на самом деле оценка достаточно точна, потому что у вас в явном виде может быть...
А, да, это бамбу, у которого добавили все...
Я бы это назвал полной ациклический граф.
Да, турнир.
Нет, ну...
Ациклический турнир, ну хорошо.
Турнир это блика.
Турнир это же...
Ну ладно, я бы назвал это, конечно, полный ациклический граф, по-моему, это максимально точно.
И замечаем, что это вот точная оценка.
Да.
Ну достаточно точная, да.
Вот.
Ну если деревья пересекаются...
Вот.
Вы знаете, что, в принципе, вы все нимберы можете найти за время E плюс V на корень из E.
E плюс V.
Ну, на самом деле, не самая плохая синтетика.
Ну, честно скажу, лучше у нас не будет.
Ну это примерно от VE.
Ну, как бы...
Где VE?
Мы верим, что G это примерно VE.
Не верим.
Мы олимпиадники.
У нас 100 тысяч вершин, 200 тысяч ребер.
Нет, согласен, что если E порядка V квадрат, то, конечно же, корень из E это V.
Это да.
Если E не порядка V квадрат, то...
Ну я бы сказал так.
Короче, E корень из E прям...
Это точно не VE.
Ну давайте так.
Корень из E во всем точке лучше, чем V.
Почему?
Потому что напоминаю, что у нас еще и кратных ребер нет.
И в этой схеме кратные ребра убиваем, потому что они нам в этой задаче не нужны.
Вот.
В смысле? Выигрышные-проигрышные вершины мы уже имеем всегда находим.
Нет, ну мы только что обсудили алгоритм, как сначала найти все нимберы на ноль, потом все нимберы на один, потом все нимберы на два и так далее.
Да, честно скажу, не могу сказать, что мы прям идеально строго доказали, что мы таким образом все принципы исчерпаем полностью.
Нет, что?
Почему?
Да так.
Ну вот мы говорим, что...
Нет, мы не доказали, что почему.
Вот мы сказали алгоритм.
Вот мы сказали, что сначала ретроанализом найдем все эквивалентное звездочка ноль.
И потом аналогом ретроанализа найдем все, что эквивалентно звездочка один.
Нет, ну там у нас была теория, что все проигрышные игры эквивалентны звездочка ноль и все.
Да, вот.
А вот дальше вопрос, почему на втором шаге вот этим ретроанализом мы вообще найдем все звездочка один?
То есть пока очевидно только одно, что этот алгоритм все, что он найдет, это действительно звездочка один.
Да, потому что это аккуратное применение этого принципа.
Нет, то звездочка два мы еще пока не искали.
Но давайте вот еще раз.
То есть у нас есть аналог ретроанализа.
То есть делаем абсолютно то же самое.
То есть мы в очереди храним, а, те вершины, которые мы идентифицировали как звездочка один.
И б, мы еще храним бэшки, про которые мы нашли, что из них есть ход звездочка один.
Ну вот теперь возникает такой естественный вопрос.
Спрашивается, почему, значит, когда этот алгоритм закончится, других звездочка один в графе не будет?
Ну, потому что когда-то закончится.
Нет, он закончится.
Все вершины, для которых мы еще не определили, звездочка один неравны по нашей лекарственной теореме.
Нет, не совсем.
Нет, потому что теорема говорила, что если нельзя применить принцип, значит никто ничему не кривален.
А кто сказал, что наш алгоритм-то не тупой, он каким-то ретроанализом находил какие-то вершины, которые можно применить принципом.
Спрашивается, почему как бы от того, что он закончился, следует, что больше никому принцип на звездочка один, по крайней мере, сейчас применить нельзя?
Потому что мы его применяем.
Вот подлянка, да?
Нет, ну на самом деле, ну да.
Заметим, что у нас большие нимы не влияют на меньшее, но в плане...
Ну да.
Нет, ну больше и меньше, это немножко не в ту сторону мысль.
Потому что сейчас надо доказать, как бы все упирается в одну теорему.
Надо сейчас доказать, что после того, как мы запустили второй ретроанализ, мы реально дошли все вершины за звездочка один.
Что желательно, что других нет и не будет.
Или по крайней мере, что применить принцип на звездочка один больше никому нельзя.
Ну вот если мы смогли применить, значит мы как-то воспользовались каким-то нимом, который мы получили после этой звездочки один.
Но заметим, что для этой звездочки один он не выносит никакого вклада.
Потому что как бы...
Еще раз, если у нас принцип не применился, это значит, что у нас либо один не существовало, либо у нас была бэшка, в которую что-то не вело.
Ну понятно, что когда мы будем добавлять больше нимы...
Мы какие-то бэшки кастуем к новым нимам.
Вот, но когда мы закончили звездочка один, мы кастуем дальше к нимам два, три и так далее.
Вот, и возникает вопрос, по чьей ноте?
На то является вершина звездочка один.
Но это все равно, пока алгоритм называется...
Пока алгоритм это гарантирует в моем понимании только одно.
Что когда мы пишем, что мы корректно, ко всем вершинам, которые мы написали нимы, мы написали его корректно.
Нет, еще раз, Миша объясняет, почему мы на самом деле...
Каждое следующее...
Ну в смысле, почему мы нашли на самом деле те вершины.
Почему это так?
Ну потому что, еще раз, каждая следующая итерация, нахождение больше нимов, никак не влияет на появление новых вершин, нимов меньше.
Почему не влияет?
Ну потому что у нас такой...
Ну вот, что значит, что у нас ним мог появиться?
Нет.
У нас либо был переход по нексу в множество а, соответствующий вершину, у нас его как бы...
Нибо у нас появлялся переход из каких-то детей в ним соответствующего размера.
Нет, ну я согласен с тем, что будущее не влияет на это, но это ничего не доказывает.
Можно догадаться, что на этом шаге мы все нашли?
Конечно.
А почему на внутри одного шага?
Да, потому что из этого не следует, что...
Из того, что на будущих шагах как бы у нас ничего там не...
Ничего не поменяется, не следует, что мы на этом шаге нашли все.
Ну если мы на этом шаге нашли все, то все нормально.
Да, то есть нам надо...
Что бы доказать?
А как нет?
Этого бы еще не доказали, тут и проблема.
То есть мы как-то...
То есть надо как-то аккуратненько это сформулировать.
Вот почему мы хотя бы на втором шаге действительно найдем все звездочки 1?
Это то, что нам нужно доказать.
По сути да.
Ну потому что понятно, что аналогично будет то, что на третьем шаге мы найдем аналогично...
Там все звездочки 2, потом звездочки 3 и так далее.
Но почему мы хотя бы на втором шаге реально найдем все звездочки 1?
Ну на самом деле да.
Ну, может и примерно тоже, но там мы какой-то проигрышностью, выигрышностью в явном виде пользовались, и нечейностью.
То есть мы там прям вот аккуратно, то есть помните, мы там аккуратно разжевали, что... Хотя нет.
Нет, было не так. Мы поверили... Мы поверили в ретроанализ, да, что после того, как БФС закончился...
Нет, мы поверили, что БФС закончился, что когда БФС закончился, больше ни к одной вершине принцип применить нельзя.
На самом деле мы в это поверили.
То есть потом мы доказали, что если принцип применить нельзя, то значит там действительно все вершины, которым не применяется, они нечейные.
Да, мы это там аккуратно доказали.
Но теперь у нас есть какая-то вопрос. А почему, когда этот БФС закончился, принцип применить больше нельзя?
Вот, но там это работало очень просто, потому что мы там применяли принцип проигрышности и принцип выигрышности.
Да, сначала мы сказали, то есть давайте применим принцип проигрышности пока можем.
То есть пробежимся по всем вершинам и к ним примустить принцип проигрышности иnalпихаем в очередь, да?
Нет, циклу мы никакие не искали вообще.
Нет, зачем? Мы просто сначала пробежались, говорим к кому можно изначально применить принцип проигрышности?
Очередно а ему можно применить ко всем вершинам, из которых ребра не торчат.
БOL2 Nerd изначально вообще больше ничего не сделает.
нет это даже не совсем то это это это это уже вторично потому что там вы были
дважды два момента надо было драться что а после bfs значит принцип выигрышности
проигрышности мы больше никому не применим и б почему из этого сли из того что мы не
можем применить принцип проигрышности выигрышности следует что там все вершины все оставшиеся
вершины ничейные вот про про вот эти поиски циклов это вот вторая часть она в общем и
идентично вот этому вот то есть мы до показа что если принцип никому нельзя применить то
действительно значит игра заведомо не эквалента никакому не но спрашиваю но вот но вопрос у нас
другом вопрос у нас на самом деле но сейчас нам нужно теперь показать что после это там там
после первого ретроанализа значит у нас значит больше никому никогда не удастся применить
принцип на звездочка 0 но вот после второго шага никогда не больше никогда никому не удастся
применить принцип на звездочка 1 ну и так далее по сути вот это надо сказать ну допустим там с
первым шагом разобрались потому что первый шаг уже действительно там все там звездочка 0 найдет
потому что это классический ретро анализ все проигрышности найдет а теперь давайте подумаем
почему второе ретро анализ действительно аккуратно найдет все звездочка 1 вот почему
действительно по окончании этого отрада из они выяснили что существует какая-то на самом деле
вершина который этот принцип применить может потому что на самом деле можно сказать что это
тоже точно то же самое что и обычный ретро анализ ну да нет ну это нет ну да да да нет но не
совсем на самом деле для нас просто если появился звездочка 1 это даже не столько важно что мекс
изменился сколько то что у нас как бы есть вегу тоже давайте будем называть вершину красной если
она оказалась эквивалентно звездочка 1 и будем называть вершину зеленой если у нее обнаружился
ход в звездочка 1 вот и тогда у нас есть при это но вот и тогда у нас есть такой принцип зелености
да если ну понятно если изменить ход в красную вершину значит она зеленая да принцип красности
вершина красная если у нее мекс значит равен единице да то есть изменить ход в 0 условно да и
из всех вершин которые не эквалентны не и все вершины которые не эквалентны ним зеленые то есть
почти то же самое условие что в ретроанализе только еще вот ну да ну во первых есть белые
вершины которые эквалентны не мы с нулей а во вторых еще мы говорим что принцип красности
говорит что все ходы которые не в белый не в белые вершины зеленые и что эти белые вершины в
качестве нима дают нам единицу вообще может может так оказаться что тут всех ходов ваш к нет
вообще тогда мы как бы звездочка один здесь не нарисуем в принципе вот и мы замечаем что то есть
алгоритм у нас устроен так что во первых для каждой вершины ну мы храним во первых она там
является красной зеленой белой или или пока еще непонятно кем и вот это во первых мы храним во
вторых для каждой веро для каждой еще не зеленые вершины мы храним там а сколько у нас ребер ведут
вне белой не зеленые вершины помним да вот и тогда но вот и дальше по сути говоря и дальше у нас
алгоритм гарантирует что есть у нас обнаружилась вершина в которой нету как бы не белых и не
зеленых ребер нет а мекс у нее подходящий а мекс у нее подходящий значит мы ее объявляем красный то
есть это и есть применение принципа вот ну и наоборот там если вершина но вот то есть по сути там
будет действительно суть в том что действительно есть красное но то что то есть поэтому то есть мы
то есть сначала мы говорим давайте применим принцип красности пока можем прибираемся по
всем вершинам если можно применить красный значит кладем очередь да потом пробираемся по всем
вершинам применяется применить принцип зелености пока можем раз уж красность больше не применяется
да а как мы это делаем мы находим все вершины из которых можно пойти в эти ново испекченную
звездочка один можно пойти да и мы их объявляем зелеными то есть послой надо то есть по факту это
просто в том же бфс и происходит просто абсолютно те же самые слои на самом деле то есть сначала
зеленый потом новые красный потом новое зеленый и так далее то есть вот то есть на самом деле вот
из правильного взгляда на самом деле все и следует то есть получается таким образом принцип на
звездочка один и конкретно сейчас применить больше не сможем но заметим что если мы про какую-то
вершину нашли что она равна действительно звездочка-2 но вот то заметим что на ее
принцип это не повлияет чтобы как может повлиять пошла могло теоретически повлиять что может
быть дат мы не могли применить принцип на звездочка 1 потому что тут есть какие-то
нетривиальные бэшки а потом мы одну из этих бэшек перекинули вот сюда ну потому
вот с двоечкой и выяснилось что тут везде ходоведенечку есть а из нее якобы
не было но это невозможно потому что если у нас звездочка бэшка идентифицировать
как звездочка 2 значит ход в звездочка 1 у нее есть у нас так принцип устроен
следовательно в будущем мы принцип на звездочка 1 тоже никогда не применим вот
получается звездочка 2 звездочка 3 и так далее вот но в принципе кстати кодерская
часть в общем-то на этом заканчивается кстати почти потому что а мы нашли все
нимберы но теория конечно на этом не заканчивается потому что нам с вами надо
классифицировать что нам с вами надо лосифицировать надо классифицировать не
нимберовости или неопределенности потому что я почему избегаю слово
определенности что официально постанкевичу как бы неопределенностью мы
будем называть игру которая не эквивалентно никакому ним вот но в
неопределенности в нашем случае не исследованность это получилось одно и
тоже вот но тут вот аккурат так ну что перерыв надо
нету принципе просто сейчас 10 45 время уже явно пришло можем можем устроить
можем продолжить как хотите давайте что ну давай другое значит смотрите и так
хорошо дальше мы поняли как найти все нимберы но теперь давайте будем
разбираться а что есть вообще еще но есть по идее такое ну вот определение
будем говорить что ика неопределенная если а не эквивалентно никакому ним ну
вот то есть это вот то есть это будет уже не исследована ста неопределенность
вот так но ты теперь спрашивается да что будет нам уже умеем складывать ним с
нимом но что будет если мы захотим по складывать всякие неопределенности что
будет но давайте смотреть но первых заметим что ну начнем с того что
неопределенность плюс ним это игра какая как бы вы сказали да именно да
попроще потому что она не проигрышная так но в принципе так ну давайте подумаем
так верно лишь что неопр плюс ним эквивалентно неопределенность так ну
действительно если бы она была эквалентно не мото тогда переносит на ним в правую
часть получается неопр эквалентен ним плюс им то есть им так ну да действительно ну я
все можно в принципе сказать что неопределенная игра она в принципе не проигрышная почему она
не проигрышная потому что ну да потому что ну вот а вот давайте а давайте на самом деле подумаем
если� рос 1949 вот есть не объединил а но не важно нет на самом деле там volt даlegen
завет fibers неопределенность не проигрышной потому что неstream Vai не эквивалентную звездочку 0 но
вот а во-вторых совет gegen что у неопределенности есть такая мощная сила что не определенно notation
не просто неопределенность, это такая непроигрышная игра плюс-плюс, то есть это не просто непроигрышная игра, но и в сумме с произвольным нимом, она тоже проигрышной игрой не является заведом.
Так, ну, кстати, давайте подумаем, хорошо, у нас какие еще игры? Бывают выигрышные игры, бывают ничейные игры.
Так, ну, давайте нот. Ну, вот, как вы думаете, может ли быть неопределенность плюс ним выигрышной, вообще выигрышной игрой?
Думаю, да.
Каким образом?
Это уже...
Так, ну, ход-то да, но чтобы еще игра была непроигрышной.
Так, главное, что вы помните. Я-то помню. А так да.
Да, даже не обязательно. То есть на самом деле вот такая штучка есть.
Да, то есть действительно вот. Заметьте, что вот такая игра с петлей в себя, она заведома неопределенность.
Вот, потому что очевидно, что к ней вы принцип не примените никогда.
Вот. Но тогда оказывается, что если игра устроена, скажем так, то тогда получается, что вот тогда эта игра плюс вот ним звездочка и, соответственно, вполне себе выигрышная.
Но, соответственно, а может ли быть так, что неопределенность плюс ним – это нечейная игра?
Ну, если у нас просто есть... Неопределенность – это просто цикл?
Ну да. Точнее просто луп.
Да.
Но да, луп плюс... Да, помните, у нас есть это... То есть на самом деле у нас есть супернеопределенность, которая вообще... То есть супер нечейная игра.
То есть она не просто нечья, она просто обничает все.
Да.
Да. Ну почему нет, скорее обнулит на самом деле. Почему?
Потому что часто удобно мыслить, что выигрышная игра – это плюс один, проигрышная игра – это минус один, нечья – ноль.
И тогда в этом смысле типа она занулит все.
Ну окей.
Вот, неважно. Вот.
Значит, соответственно, да. То есть выигрышность нечейная бывает вполне.
Так, а ну-ка давайте еще.
А как вы думаете, что можно сказать про игру неопределенность плюс неопределенность?
Вот как вы думаете, что про нее можно сказать?
На тему ее выигрышности, проигрышности, нечейности.
Да.
Вот как и бывает ли она. Вот проигрышность, выигрышность, нечейность. Какие варианты бывают, а какие не бывают.
И что?
Когда мы выиграем? Может быть выигрышной.
Да, ну-ка еще раз каким образом?
Цикл и вершина вниз.
Так.
А вторая – это вершина из нее в цикл, а из него вниз.
То есть цикл и сверху снизу вершины.
А.
И оп.
Нет, из цикла вниз.
А.
Тогда мы первым ходом из левого цикла ходим вниз и дальше в второй игре выиграем.
Так, ну возникает вопрос. Если вы рассматриваете игру в этой вершине, вот в этой вершине.
Да-да-да.
А это точно неопределенность?
Да, вот мелкая подглядка. Неопределенность вот в этом месте.
А вот здесь звездочка доль и здесь звездочка доль.
Подглядочка.
Не все так просто в датском королевстве, да.
А тут тем более.
Ну по интонации значит не может быть выигрышной.
Ну мало ли.
Хорош.
Понятно. Ну интонация вещь такая.
Ну интонация такая, знаете, я же могу. Интонация можно задать вопросом.
То есть вы считаете, что дважды два равно четыре?
Не, осторожно. Смотрите, я так на экзамен не могу спросить.
Я помню, я как-то на одном экзамене какой-то такой вопрос спросил.
Плюс-плюс узнал такой интонации.
То есть мне честно сказалось, что ты так спросил, что я уж усомнился.
Ну вот.
А вопрос был действительно уровень. То есть вы считаете, что дважды два равно четыре?
Или там, то есть да.
Или вы считаете, что приватные поля из наследников недоступны вообще?
Ну, по угадателю доступны.
Что-то надо вводить.
Да.
В смысле, если мы как-то получим указатель на них, то вполне.
А, ну.
Если мы просто взяли указатель.
Рендер предказ.
Рендер предказ нашего предказа.
И оттуда достаем его.
Просто воспользовавшись в тупую издвигом.
А, ну понятно, да.
Нужно просто...
Так, стоп.
Так, стоп, ладно, сейчас мы так.
Сейчас мы так.
Сейчас мы так можем идти до бесконечности не туда.
Ладно, это будет хорошо.
Ладно, значит вернёмся...
Так, неопределённость плюс неопределённость.
Так.
Нет, ну давайте для простого вопроса.
Может ли она быть проигрышной для начала?
Ну давайте.
Какие две такие штуки?
У нас нарисовано такой цикл, который в И в звёздочке не витёт.
И что?
Нет, мы тогда не проиграли.
Ну потому что просто не один...
Просто каждый из игроков будет...
Нет, ну заметим, что петля гарантирует не проигрышность всегда, да?
Тут ещё подляну, что петля гарантирует не проигрышность, потому что...
Как бы...
Предположим, что игра проигрышная.
Так давайте я просто как бы пойду по петле и подсуну эту же позицию противника.
Он типа проиграл, значит я выиграл.
Вот противоречит.
То есть на самом деле это как бы...
То есть гарантия...
То есть таким образом...
То есть по крайней мере с петлёй у вас так пример привести не получится.
А без петли...
Ну как-то выглядит.
Наверное.
Может мы конечно докажем, что все неопределённости экваленны и там петле с бородой, конечно.
Да, с бородой из нимов.
Но пока этого непонятно.
Ну что?
Ну что?
Ну что?
Ну что?
Ну что?
Ну что?
Но пока этого непонятно.
Ну что? Какие варианты?
Ладно, давайте так.
Нечейная она может быть.
Да, но ничейная она действительно может быть, да.
Потому что хотя бы одна из две пределённости может быть луп, конечно, да.
Да, ничейная может быть.
А может ли быть чем-нибудь ещё?
Вот можно даже, даже может быстрее быть так.
А может ли быть так, чтобы геопор плюс геопор будет выигрышно?
Особенно с учётом того, что как мы выяснили, неопределённость плюс ним, это походу не проигрышно, Ира.
Ну что?
Ну что?
Ну что, Ира?
Ну типа у нас после входа хотя бы одна из неопределённостей останется.
Да.
И мы сведёмся либо к ситуации неопор плюс нём, либо к неопор плюс ним.
Да.
И не проигрышное, неопор плюс неопор, ну типа…
Да, типа не факт.
Типа, ну мы возьмём опять какое-нибудь минимальное состояние по количеству ходов.
Ну да, кстати, по-моему, даже, по-моему, там доказательства так и было.
На самом деле всё гораздо проще.
Можно просто докажем, что неопор плюс неопор – это ничейная игра.
Доказательства.
Докажем, что у второго игрока есть непроигрышная стратегия.
Вот, жил был неопор плюс неопор.
Как пойдёт первый игрок?
Первый игрок либо подсунет нам игру неопор плюс ним, и мы заведомо не проиграем,
либо он сделает ход в неопор плюс неопор.
Но заметим, что из любого неопора всегда есть ход в неопор, правда?
Но мы помним, да, что если из вершины есть все ходы, все ходы ведут в ним, и то им и ним.
Да.
Следовательно, мы сделаем ход и подсунем первым игроку всё ещё неопор плюс неопор, и таким образом гарантируем себе неопор.
Да никакой. Почему? Просто стратегия.
Если нам подсунули неопор плюс ним, то мы не проиграли.
Если неопор плюс неопор, значит подсунуем ему неопор плюс неопор.
То есть гарантируем того, что из неопор плюс неопор всегда можно сделать ход в неопор плюс неопор.
Это следует из того, что из любого неопора есть ход в неопор. Всё.
То есть тут даже и варианта нет.
Почему? Мы, по-моему, в прошлый раз активно применяли подобные принципы.
А когда... То есть это так, понятно, так мы доказали, что у второго игрока есть непроигрышная стратегия.
Понятно, теперь надо доказать, что у первого не проигрышная стратегия. Тут всё просто.
С Warrior. Мы доказываем, что неопор плюс неопор не проигрышная позиция.
А, говорим...
Мыísimo их banging на игре...
Мы хотим доказать absent mind, да? Что это значит? Мы хотим доказать…
Ну, мы сходили ещё раз в неопор плюс неопор. Но она, мы же типа ещё не доказали, что.
Нет, почему? Нет... мы сейчас ничего неiendоб redenа.
Вы догадались, что нет, у второго игрока есть непроигрышная стратегия.
Она заключается в том, что если ему подсовывают неопор плюс неопор, он ходит в неопор плюс неопор.
А если ему подсунули в неопор плюс ним, то он начинает пользоваться непроигрышной стратегией, которая была обнаружена ранее.
А, в плане, мы говорим, что любой, либо из игры есть ход?
Сейчас.
Но пока так, аккуратнее, первое утверждение.
Из неопределенной игры всегда есть ход в неопределенную игру.
Если из игры есть ход, то она не проигрывает в один ход.
Ну, в один может и проигрывает.
Мы говорим, что если игра проигрышная, то для любого пути он в конце концов упрется в лист.
Ну, не факт.
Тут же не любой путь обязательно упрется в лист.
Ну, в плане, точнее так, если игра проигрышная, то, соответственно, тот, кто выигрывает, может гарантированно заставить второго прийти в лист.
Ну, нет, если игра проигрышная, то второй игрок может заведомо заставить первого игрока прийти в лист.
Да, за конечное число ходов.
Да.
Нет, мы другое. Мы сейчас доказываем, что первый игрок не может заставить второго.
Но, короче, мы говорим, что если сейчас ходит текущий игрок, то он всегда может сходить не в лист, кто бы это ни был.
Значит, гарантированно игра не является проигрой.
Нет, ну, сходить не в лист – это, наоборот, затянуть игру.
Потому что, наоборот, если он может сходить в лист, то он это с удовольствием делает, потому что он тем самым выигрывает.
Значит, если игрок проиграл, значит, второй игрок может заставить его через конечное число шагов при любой его стратегии попасть в лист.
Ну, можно.
Мы говорим, что раз у нас вот такая игра, то мы гарантированно можем всегда попадать не в лист. Значит, мы не проиграли.
Нет, ну, не обязательно в лист. У нас тут другая логика. Это как бы…
Иначе у нас получается самая рекурсивная доказательств checking.
Да нет? Нет, смотри. У нас есть как бы три понятия – игре... есть понятие – выигрышная… Это означает, что у первого игрока есть выигрышная стратегия, да?
Есть понятие – проигрышная игрока. Это означает, что у второго игрока есть выигрышная стратегия.
Есть понятие – нечейная игрока. Как мы в прошлый раз убедились, это означает, что у каждого из двух игроков есть непроигрышная стратегия.
Да.
да вот то есть тем самым для того чтобы доказать что у нас есть неопыр плюс
неопыр это ничейная игра надо доказать что в этой игре у каждого из игроков есть
непроигрышная стратегия ну я как раз доказываю про то что почему это стратегия непроигрышная
ну вот нет ну она не проигрышна нет она не проигрышна потому что гарантируется
что у него ну гарантируется что ну тут ну просто при этой стратегии ну во
первых то есть ему там либо ему вещь что будут подсовывать неопыр плюс неопыр он
всегда будет делать ход и газа зациклиться до бесконечности а что не так но как бы по идее как
бы и что такое ничейный сход игры это означает что игроки сделают бесконечное число ходов и
нет в чем проблема но проблема в том что вот мы можем ходить из неопыр плюс неопыр
но мы не договаривались что вот это неопыр плюс неопыр в который мы сходим проигрышное
потому что мы ровно не проигрышный потому что мы ровно сейчас потому что мы ровно сейчас это
и пытаемся доказать пока мы просто пытаемся доказать что она не выигрышная потому что
а мы доказываем что у второго игрока есть непроигрышная стратегия это то
что игра не выигрышная на самом деле то есть да то есть у второго игрока есть непроигрышная
стратегии, это еще не означает, что игра нечейная, то есть для того, чтобы довершить доказательство, нам надо еще доказать, что у первого игрока есть, вот, но это как бы будет легко, потому что у нас здесь ключевое утверждение говорит о том, что из неопыр плюс неопыр всегда есть ход в неопыр плюс неопыр, и тогда, если мы докажем, что как бы эта игра непроигрышная, то тогда у первого игрока есть непроигрышная стратегия, вида сходи в неопыр плюс неопыр и тоже не проиграй, тогда опыр и игрока не проиграли, значит ничья.
Ну, короче, игра является проигрышной в той ситуации, когда в какой-то момент какой-то из игроков не может сходить.
Нет, игра является проигрышной, нет, это есть более сильное утверждение.
Игра является проигрышной, если второй игрок может добиться того, что именно первый обязательно попадет в ситуацию, когда он не сможет сделать ход.
Игра является нечейной, если игра не является нечейной.
Нет, игра является нечейной, если оба игрока могут гарантировать, что они никогда не попадут в ситуацию, когда они не могут сделать ход.
В чем каждый независим, причем естественно.
Вот. Я просто, просто интересно, а почему затык в этом месте произошел именно сейчас? Это все вроде две недели назад было.
Две недели назад меня на лекции не было.
Проблема.
Я на сервисе по информатике был.
А, ну да, понятно.
Вопрос, конечно, что ты там делал?
Ну, а как ты думаешь?
Самое смешное, что это, наверное, верное, видимо, верное утверждение, да?
Нет, я агитировал поставать на ФПМАИ.
А, да? А, то есть ты не в жюри ездил?
Нет.
А, ну окей.
Окей.
Ну, то есть все-таки ответ на мой вопрос был не очень очевиден.
Ага.
А, ну да.
Окей.
Просто деревоопределение очень странное.
Нет, тут нет никакого деревоопределения. Тут как бы есть стратегия.
Просто будем говорить, у второго игрока есть стратегия, да. Если мне подсунули неопорь плюс неопорь, я хожу в неопорь плюс неопорь.
То есть получается, тогда у нас два варианта. Либо первый игрок никогда не выйдет за пределы неопорь плюс неопорь, и тогда мы будем вечно ходить.
Либо первый игрок, у первого игрока сдадут нервы, и он в какой-то момент выйдет в неопорь плюс ним.
Но тогда мы тоже, у нас тоже есть непроигрышная стратегия. Все.
То есть на самом деле никакой экокурсии нет.
Вот.
Вот так что вот, то есть второе игрок не проигрывает, первое игрок не проигрывает.
Потому с чего он тоже ходит в неопорь плюс неопорь и тоже не проигрывает.
То есть у них как бы есть вот эта вот зона комфорта, называемая неопорь, назваемая неопорь плюс неопорь.
То есть по этому, неопорь плюс неопорь – это заведомая ничья. Это кстати очень удобно.
удобно вот я вам даже больше скажу раз неопыр плюс неопыр это такая ничья то на самом деле
еще давайте еще подумаем неопыр плюс неопыр плюс еще что-нибудь вот как неопыр плюс неопыр
плюс ним как вы думаете ну есть ассоциативность коммутативность да пожалуйста так а ничейная
игра плюс ничейная игра плюс что-то необязательно нечейная то есть там приятный да кстати
интересный факт неопыр плюс неопыр равно неопыр но просто потому что у нас не мы не бывают ничейными
да но нет тут важно что у нас две неопределенности они одна то есть просто неопыр плюс ним как мы уже
выяснили может быть и выигрышные ничейные вполне а вот как а что будет если я попрошу вас сказать не
опор плюс не опор плюс так ну хорошо тогда ну хорошо допустим у нас получится не опор
плюс не проигрышные не опор плюс не про как-то как будто мы прям название реки пытаемся
написать у нас два раза не получилось вот и чо вот не опор плюс не про
вот так ну и что может ли она быть чем ну понятно что она может быть
ничей потому что это как бы то что не опор может быть лупом а не про чего
ну вот не опор плюс какая-то не проигрышная игра ну правда
а сильно ли нам этого в анализе поможет просто не опор плюс произвольная не проигрышная игра
нет туда то есть на самом деле мы тут только обобщить то есть нет нам все-таки тут важно потому
что важно помнить что тут имя именно есть две неопределенные ну давайте так
ну да получается да но вот тут опять вот та же ситуация нам не выгодно уменьшать количество
неопределенности ну да потому что как бы как только мы это сделали мы гарантируем что мы
прощаемся с надеждами на победу вот значит мы и получается в надежде на победу должны оставлять
не опра но оба да но значит ну в общем короче говоря суть остается тоже то есть на самом
деле тем же методом доказываем что это железобетонная ничья то есть причем не чейными
ничья у нас тут будет по принципу да потому что как второму игроку не проиграть ну просто
если мы подсунули не опор плюс два нима значит он точно не проиграл если мы подсунули хотя там
хотя бы два не опра ну чисто теоретически это может быть не звездочка и это может быть игра
эквивалентная звездочка и истам из которой можно сходить куда не будет ой а может а может вообще
быть такое а может смотрите может ли быть игра эквивалентная нима из которой можно сходить в
неопределенность но да ответ да вот пример да это остается остается неопределенность
такое такое бывает так что чисто теоретически может быть там теоретически бывают еще ходы
когда тут будет три неопределенности то есть ну это если там аккуратно это даже не важно потому
что суть в том что как бы как бы второй рок гарантируй что если мы подсунули как только одну
неопределенность и все нимы это то же самое что неопределенность плюс нима он не проиграл если
мы подсунули хотя бы два не опра то он просто делает ход из одного не опра в неопр и сохраняет
количество неопров то есть и таким образом не проигрывает как мы уже убедились то есть
тогда получается что неопр плюс неопр плюс что угодно по факту то есть на самом деле я даже
могу более мощно сказать неопр плюс неопр плюс что угодно это заведомая ничня ладно давайте
лучше что угодно это не а отце то есть на самом деле утверждение то есть мы только что доказали
мистическое утверждение неопр плюс неопр эквивалентно лупу то есть два неопра это супер ничня
то есть мы просто гарантирую что неопр плюс неопр плюс что угодно это железобетонная ничья
вот
нет если бы нет это мы еще так на самом деле немножко разомнулись перед тем как
собственно сформулировать основную теорию значит так смотрите для этого мы введем
определение мы введем понятие бесконечность с индексом к значит смотрите определение такое
да вот сейчас интересно совпадет или нет значит пусть к это под множество целых не отрицательных
чисел но естественно конечная вот значит пусть к но давайте просто скажем что кара в но это
множество чисел там допустим к 1 к 2 к 3 и так далее там к лт так тогда значит смотрите тогда
бесконечность к я определю как вот такую интеллектуальную игру значит есть ход в себя
либо во всей небе вот это я вот так определяю игру бесконечность к
почему либо это но есть ход есть ход с себя и вот в ним и заданной множеством к
да да ну кстати в частности по этому определению можно заметить что луп это на самом деле просто
бесконечность с индексом пустого множества о так и называется бесконечность к
это уже теория нет это это все теория как бы да и не шмита смита и не смита смитов
хотя смита так вот а теперь ладно хотели дот ладно хотите как говорится хотите кульминацию
пожалуйста и так теория ма 12 ну ладно не знаю почему 12 в одном я там в тетрадке было
ладно в общем называется она теория ма смита френкеля на самом деле
теория ма смита френкель
значит пусть а произвольная игра на графе
произвольная игра на графе ну ну вот ну то что мы рассматриваем да ну хорошо давайте пометим
конечная ну нет то есть у нас есть у нас статья подразумевания подразумевания
сейчас я прошу прощения
так вот ладно вернемся к делу и так пусть у нас игра произвольная конечная игра на графе
так да тогда либо а эквивалентно мимо языка мне для некоторого и
либо а эквивалентно бесконечности к для некоторого соответственно
к под множество з и соответственно там конечную естественно все то есть на
самом деле есть только ни мы и ц и петли с борода и бородатые петли все более того
мы же еще и суммировать хотим игры да значит при этом значит пишем полноту
картины значит а значит ну естественно ним и плюс ним же эквивалентен чему
да нет здесь к сор не путать мекс в другом месте вот значит второе борода плюс ним
эквивалентно а вот тут я пока подержу интригу и борода плюс борода эквивалентно
эквивалентно да борода плюс борода действительно определенно эквивалентно вот ну это просто
ну хотя давайте вот для разминки можем кстати попробовать мы знаем что и что это да борода
пустой а ну да тут в общем-то все написано рядом да как это чтобы решить задачу посмотрите
да на два сантиметра левее опа так а теперь более интересный вопрос если мы поверим в
основное утверждение теорема как вы думаете что будет написано в сумме множество капли звездочка
и так так вот давайте начнем с этого а может ли она быть нимом
я вам даже больше скажу мы не сказали что не опор плюс ним не проигрышная ровно из-за того
что помните у нас же есть прикол что звездочка то есть как бы смотрите то есть пусть у нас не
опор плюс ним вот как вы доказали что не опор плюс ним не проигрышная кстати мы это
проболтали потому что как бы но там потому что посчитали что-то вид там очевидно но давайте
вот а почему это не может быть а вот давайте скажем почему это может быть потому что из
этого на самом деле следует что звездочка g плюс звездочка и эквивалентно если бы не опор
плюс звездочка и плюс звездочка и а звездочка и плюс звездочка и эквивалентно нулю поэтому
на самом деле это эквивалента просто этому не опор ну не опор плюс ноль это звездочка ноль
это просто тот же неопор вот да вот что-то меня подбородок поджимается цикл в себя в смысле
какой-то произвольный или нет именно прямо ребро в себя да именно в том-то и магия а теперь давайте
подумаем бесконечность а симметрическая разность множество чего-чего чего надо как-то учесть
надо кабезе вау в смысле хочется сказать что это будет тоже какая-то какая-то петля с бородой
какая-то петля с бородой так так ну давайте вообще нет на самом деле смотрите отталкиваться
можно так так так так так ну давайте начнем с того что как мы вот это мы для чего писали мы
писали для того чтобы диться что тут какая-то бесконечность точно будет стоять наоборот
нет бесконечность вот это вот ход себя гарантирует не то есть гарантирует не проигрыш то есть да да
а причем тут а что такое определение не мы пошпрага гарантия мы предполагали что
это определение должно быть по-хорошему верно какой именно определение
нет каждой сцене либо эквивалентно либо ниму либо какой-то бесконечности
вот да и почему складываю мимы вот если у меня вопрос адекватный граф почему
почему не мы теперь к сори они так потому что мы в прошлый раз так но но мы доказали что во
первых сумма двух этих мимов эквивалентно как бы миму там мимо из ксора это было доказано в
прошлый раз это просто вот это просто из теории шпараганде еще следует странная логика вот но
теперь давайте думать да то есть мы уже поняли что это игра явно является неопределенностью то
есть какой-то бесконечность конечно но мы конечные игры рассматриваем да так осталось только выяснить
какой бесконечности то есть тут должно стоять какое-то множество но какое
вот давайте подумаем как тут вообще можно рассуждать вот что тут должно вот давайте так как
мы будем вообще доказывать что вот это игра эквивалентно вот этой игре как мы будем доказывать
то есть мы ну помни да то есть на этот раз мы можем просто воспользоваться прям на редкий
случай но мы сейчас будем пользоваться честным определением эквивалентности да то есть давайте
ее складывай то есть давайте обе эти так давайте так вот я назову это множество множеством быть я
правильно понимаю что мы докажем что все игры имеют такой вид после того как докажем вот эти
суммы да потому что мы сейчас вот для просто я думаю сейчас вот мы на этом примере разберем как
к этому подходите после этого думаю теория мы тоже спокойно докажем она буду но значит смотрите
так так какому-то идти нам интересно к чему это идти равно поэтому я тут идти пишу вообще но
давайте думать но первых заметим что звездочка что в вопросе каплю звездочка и значит то есть
заметим плюс не опор если складывать с любой неопределенностью игру то это боевая ничья и
бесконечность с индексом быть какой бы быть не был тоже боевая ничья понимаете да там плюс не
то есть тут вроде то есть тут пока не важно то есть какой будете не был да то есть там если
вы то есть если то самое помните в определении если вот в этом определении ц будет неопределенностью то
все будет в порядке понимаете да следовательно надо теперь теперь надо сложить получается
значит эти игры с соответственно нимом теперь давайте думать значит смотрите звездочки смотрите
что такое значит бесконечность и плюс звездочка жи как бы вы сказали когда то есть эта игра
конечно заведомо не проигрышная но нам теперь надо в точности сказать при каких же это игра
выигрышная а при каких же это игра ничейная вот представьте себе у нас есть такая игра бесконечность
уйть да то есть как бы есть петля есть вот эти ним там ним и чадим ним быть 2 и так далее там ним
там быть какой-нибудь с индексом лягкий знак сейчас нет мы сейчас не эту игру смотрим вот эту
игру да так ну замечательно да очевидно что если в этом уйти содержится жи то игра выигрышная
а если жи там не содержится является ли игра выигрышной нет она точно не проигрышная потому
что у нас есть как бы можем засейлиться до ничьей это хорошо да не да не да мы можем уменьшать жи но
если мы случайно попадем в то что у нас уже есть то мы проиграем но смотрите давайте если мы
можно сказать что если мы уменьшим же этот вот точно выигрышным не является потому что
если мы уменьшим жи то мы оставим ни про второму игроку не проигрышную позицию потому
что неопределенно с плюс шото значит если мы хотим выиграть мы обязательно должны идти значит
если мы хотим именно выиграть ну мы обязательно ходить в бесконечности причем не в сейф а именно
в ним но значит тогда получается либо но тогда этот единственное чтобы мы
выиграли это должен быть ним жи то есть получается что значит эта штука
получается выигрышная если жи лежит в множестве и и проигрышная если жи там
не лежит так неплохо да то есть видите то есть получается если мы уже поверили
но то есть в общем-то мы получили практически карту прям полную да то
есть как такая карта эквивалентности да то есть это типа результаты со всеми
играми видите да в смысле не понял то есть мы говорим что есть у нас весь граф
представляется в виде ну после каждого состояния и валюта либо бесконечности
либо мимо то значит что бесконечности нету ребра бесконечности почему может есть
но просто это игру но как бы знаете из мимо как мы уже выяснили тоже могут
быть ребра в бесконечности вполне вот эти из игры эквалентной нему могут быть
ребра в игре эквалентной бесконечности вполне нет не могут да вот так вот теперь
давайте такую же карту дорисуем здесь бесконечность каплю звездочка и плюс
не опор заведомо ничья да но заметим теперь что если у нас есть бесконечность к плюс
звездочка и плюс звездочка жи да то это игра очевидно эквивалентно чему она
эквалента звездочка к плюс звездочка и сор жи правда и это игра по аналогичным причинам
какая она у нас соответственно выигрышная если и сор жи лежит в множестве к и не чейная если
и сор жи в этом множестве к не лежит теперь внимание вопрос то есть получается то есть
вот вот смотрите видите то есть получается нам нужно то есть у нас как бы тоже здесь есть
какое-то множество жи который дает выигрышность и здесь есть какое-то множество
жи который дает выигрышность да но мы вот то есть в общем-то previouslyTops это то самmo Posslla
ile multiplied что дает выигрышность теперь надо просто вычтить какbung числог по множеству K
ка и числу и вычислить вот это множество быть вот как описать все вот вот мы тут
описали g вот что это за множество таких чисел g что значит xор g лежит в множестве k
что это за числа такие но на самом деле да то есть тот на самом деле в официальном
пишут так что эти-то как сори вот так вот то есть идея в том что так но идея в том что
что-то вы слишком это в ноутер закопались нету просто как бы если вы хотите сидеть
домашнего задания чего сюда пришли это называется просто честно скажу я не
очень люблю когда как бы я вроде общая там общаюсь человеком от человека там
параллельно еще там в каком-то ноуте сидит лично я к этому отношусь не очень я как-то
вот как-то ощущение что передо мной делаю лишь и со мной общаются вот
вот и так значит вот получается такая ситуация значит получается вот действительно вот эти
два три пункта уже становится очевидно остается только финалочка доказать собственно теорему
более того мы но мы и мы можем достаточно легко на самом деле доказать но вот доказать
следующим образом что во первых рассмотрим этот граф и найдем все нимберы мы уже научились это
делать да научились а теперь смотрите какая ситуация возникает сейчас более того то что
сейчас скажу это будет еще и не практике еще и будет практическая идентификация смотрите
то есть представим себе что у нас обнаружилась игра а из которой есть ходы в там ним и 1 не там
ним и 2 и так далее ним и а также есть ходы в какие-то там какие-то неопределенности не
определенности неопределенности вот допустим такое нашлось да при этом сама игра а естественно
оказалась неопределенностью да так вот я утверждаю что в этом случае игра а эквивалентно
чему как вы думаете видимо бесконечности да совершенно верно с ровно с множеством вот этих
ишек да то есть напоминает уже когда когда мы все нимберы уже прям все все все нимберы в графе
нашли то есть ну заметим да что вы вот то есть получается вам дает просто алгоритм как просто
про что про каждую игру то есть про каждую вершину можете сказать она какой она нимбер либо вот какая
бесконечность осталось только ну да теперь давайте осталось это аккуратно доказать но я вот не
случайно начал именно здесь что видите давайте применим тот же метод давайте просто складывать
эту и эту и эту и эту игру со всеми возможными и будем смотреть что получится но что получится
но получится то же самое потому что во первых если мы складываем а плюс неопор то это заведомая
ничья и бесконечность с вот этим индекса плюс неопор это заведомая ничья потому что мы уже
доказали что неопор плюс неопор равно ничья правда все-таки тоталники супер ничья такая да так ну
теперь давайте разбираться теперь но вот ну теперь у нас значит складываем с нимом но у нас есть два
случая а плюс звездочка и то есть действительно пусть значит пусть у нас теперь есть число и
которое но давайте так скажем а плюс звездочка и с индексом какой-нибудь g но просто вот какой
какая-нибудь из этих ишек что про эту игру можно сказать да она тупо выигрышная потому что из
игр а можно пойти в такой же немый но и в этой вот бесконечности очевидно плюс звездочка и же тоже
это автоматически выигрыш потому что стратегия абсолютно та же самая да пойди в звездочка и
а теперь давайте представим что мы идем а плюс звездочка п где там п не лежит в множестве этом и
1 и так далее и и что тогда можно сказать про вот эту игру а плюс звездочка п
так ну давайте для начала поймем а что мы хотим про нее сказать да легче давай так
про вот это да и да ну во первых да но выигрышно но давайте так вот давайте справа начнем вот
с этой бесконечностью выигрышная это игра но как она может быть выgr она не вот она не может
быть выигрышной потому что единственным выигрышным ходом у нее может быть пойди из бесконечности
куда-нибудь, правда, в какой-нибудь ним, но в какой бы мы не пошли, получили выигрышную игру,
потому что неопределенность плюс ним это заведомо непроигрышная позиция, а нам нужно,
если мы хотим выиграть, мы должны пойти в проигрышную позицию, но вот таких шансов у нас нет,
то есть получается, значит это непроигрышная позиция, есть непроигрышная позиция, с которой
нельзя выиграть, это боевая ничья. А что про А плюс звездочка П? Да, в общем-то, сильно сложнее,
по-моему, и не стало, потому что, во-первых, неопределенность плюс ним это заведомо
непроигрышная позиция, но можно ли выиграть? Вот опять у вас какие варианты выигрышного хода?
То есть, ну, заметим, если мы хотим выиграть, мы должны покончить с неопределенностью,
но вот понятно, пойти в эти неопределенности мы не можем, потому что получим непроигрышную
позицию, но там звездочку П уменьшить, значит мы себя оставим неопределенными, значит опять из
А придется сходить в один из этих нимов, но опять фейл. Значит, выиграть не можем, проиграть тоже,
точнее, выиграть не можем, проиграть можем не. Вот так. Значит, ничья. Терема доказана.
В результате вот так, тихо-тихо, такими аккуратными точечными перебежками мы неожиданно,
на самом деле, доказали, что, то есть, неожиданно классифицировали вообще все возможные игры.
Что? Рассмотрели, когда доказали, что неопор плюс неопор эквивалентен лупу.
Ну, давайте напомним. Мы доказали, я могу просто сказать, мы это доказали в виде,
что неопор плюс неопор плюс что угодно, значит, вот это заведомо нечейная игра.
Не обязательно, но смотрите, но так как это любая игра, да, просто смотрите, да, отлично,
то есть, неопор плюс неопор плюс любая игра нечейна, да, но теперь заметим, что луп плюс любая игра это тоже нечейно, да.
Конечно. Ну, тогда это и есть, как бы, просто по определению эквалентности это означает,
что неопределенность плюс неопределенность эквивалентна лупу.
Ну, естественно, да. Ну, то есть, вывод, нет, то есть, вывод на самом деле получается такой, что, да, на самом деле глобально любая игра либо вот такая бесконечная, то есть, бесконечность с каким-то фиксированным множеством, либо звездочка и более того, в каждом графе, в котором есть 100 000 вершин 200 000 ребер,
вы за, как вы уже выяснили, е корней из е, на самом деле можете еще и просто полностью классифицировать все вершины.
Да, а быстрее нельзя, чем е корней из е.
Ну, скажем так, алгоритмы, мне алгоритм неизвестен, вот так скажем. Ну, это может и можно как-то, может и можно, но мне неизвестно, к сожалению.
Ну, тут это отдельная песня, знаете, потому что как бы, как бы я мечтал на самом деле владеть алгоритмами в той мере, чтобы просто гордо говорить, если что,
если я не знаю, значит, науки неизвестны, но там знаете, это на самом деле там уже отдельная песня, потому что, ну, как я уже сказал, мы с вами изучаем алгоритмы,
но там, на самом деле, нам очень повезет, если мы изучаем алгоритмы, придуманные там после 80-х.
Кстати, теория ж парагранди, это вообще 30-е годы, кстати.
Ну, это математически, честно.
Нет, ну, теория М. Смитта Френкеля, кстати, я так и не понял вообще, какой-то, потому что, кстати, оригинальной статьи я что-то на это не наталкивался.
Это все математически?
Потому что где-то там, по-моему, то ли у Конвэ, то ли еще у кого-то, то есть на самом деле есть отсылка на эту теорему.
Ну вот, а так адекватный письменный источник это только станкевичи, и то как бы там теорема предлагаются доказать в качестве упражнения.
Нет, не в смысле прям с нуля.
В смысле, что теорема доказывается в качестве упражнения после того, как доказано все предыдущее.
Все предыдущее там расписано.
На самом деле, если вы поняли все предыдущее, то в общем-то эта теорема действительно там можно как задачу решить уже.
Но таким образом получается, что когда вы так расписываете,
получается, если вы суммируете несколько графов на 100000-200000,
вы теперь это делаете вот без проблем.
То есть, например, будет у вас в домашнем задании
задача, кстати, вам, думаю, будет полезно ее написать,
то есть это позволит вам подготовиться к экзамену
как минимум.
Ну и так, это еще сколько-то баллов зачет еще себе получить.
То есть там будет получается, вы напишете ретроанализ,
напишете бескречь, дальше там присуммирование игр
даже больше, чем ли будет простая, если там есть,
если все нимберы, то вы их Robert News Fabricate Сорите
и радуетесь,ählt там получится 0 значит
значит ничья. Ну а если найдете хотя бы две боевые ничьи, значит это заведомая ничья. Более того, в
принципе, вы на этой сумме можете таким образом, кстати, сгенерировать даже вообще даже оптимальную
стратегию. Логично, да? Ну вот, ну там отдельная песня, ну вот, то есть там прям едва ли не
интерактивная задача, вида с вами играет компьютер, пожалуйста, там как бы там выберите, там выберите
за какого игрока будете играть и гарантируете что-нибудь. Ну как вам сказать там, нет, ну можно
просто проиграть что выигрыш. Нет, там можно знаете как сказать, компьютер там если за миллион,
там, то есть так сформулирован так, если вы говорите ничью, то если вы говорите что ничья,
то как бы компьютер сам выбирает за кого вы будете играть. Если вы говорите проигрышность или выигрышность,
то вы как бы, то значит тогда вы играете за того, кто типа выигрывает. И дальше, если, ну вот, ну и
дальше там гарантия. И дальше соответственно чекер, если чекеру не удается там скажем обузрать вас
за два, там за два миллиона ходов, то значит соответственно все нормально. Ну видимо как-то так это
должно, видимо как-то так может выглядеть идеальная задача, но насколько мне известно, пока ее никто не
сделал. Ой, может вам домашнее задание такое дать? Нет, нет, нет, другая домашняя. Нет, а это будет такое
хитрое домашнее задание. Да, вы подготовите задачу и подготовите тесты. Ну это да. Ну как сказать,
ну вот, ну правда, во-первых, я как бы буду вас прям притязательно допрашивать, что вы не
делали. Нет, нет, ну это идея естественно. Нет, ну почему нет, хорошие домашние задания. Нет,
на самом деле знаете, это как бы знаете, как бы знаете, да, как-то, как-то знаете, потому что
существует как бы три уровня, называется понимание теории, уровень теории light, понять в теории,
уровень medium, законить все это и вот и уровень hard сделать задачу и создать тесты на это.
Какой? Да, но мы им не пользуемся. Витя, когда я пишу не опыль, я именно пишу не опыль,
а не бесконечность, это важно, да, потому что в этих теоремах мы не пользуемся тем,
что это обязательно бесконечность. Это вот в общем получается такая вот красота. Жалко конечно,
что да, несмотря на всеобъемлющность, она конечно не всегда имеет практическую пользу,
ну потому что в тех же шахматах да, то есть шахматы, то есть да, шахматы у нас либо ним, либо вот такая
бесконечность. Вот, так что да, что из этого можно вывести, что наверное если в шахматы скрестите,
скрестите с нимом из 179 камней, то может быть игра будет выигрышная. Хорошая шахма, хотя нет. Хотя,
чтобы шахматы были равноправной игрой, там как бы должны ходить белое, черное, белый, черный,
кто там выигрывает непонятно. Ну потому что как шахматы свести, мы рассматриваем, например,
равноправные игры, то есть если вы находитесь в вершине, то какой бы игрок не ходил, а как бы он
будет делать одни и те же ходы. То есть если вы шахматы... Надо сделать адекватно, сделать как в рейнзе, сделать реверсы.
Ну правда в шахматах сложнее, потому что позиция не определяется долго. Ну да. В рейнзе типа после первой,
ну пора разные регламенты, ну условно после этих ходов можно либо сходить, либо сделать реверс и
отдать противнику твой цвет. Если существует ничья, то гарантированно она будет, и ни у кого
гарантированно нет преимущества. Ну правда, если можно всегда подменить цвет, то каким образом
вообще можно выиграть? Первые пять ходов тоже. Там разные регламенты, но после пятого хода ни в каком нельзя.
А, понятно. Оригинально. Ой, прям совсем этимно. Там тематически одинаковые шансы выиграть, понятно.
Четы-четы-четы. Ну да. Не ты отдал, а соперник тебе отдал. Нет, ты сделал четыре плохих хода, противник
быстро там. А, ну да. Противник понял, что белый цвет плохо и отдал тебе белый цвет. Поэтому тебе
нужно сделать эти ходов правыми. Ну да. Ну это красиво, да. Так, ну ладно. Значит, на треть. Так.
Так. Значит, ну, чем тут еще? Что тут еще тогда можно упомянуть? Так, ну ладно. Значит, ладно. Так,
тихо-тихо. Так, ну ладно. На самом деле ладно. Чтобы это закончить, конечно, следует рассмотреть
еще парочку, хотя бы парочку прикольных игр. Значит, есть тут еще. Вот. Так, ребят, все. Ладно.
Значит, на треть. Какую тут пару игр тут рассмотреть? Ну на самом деле да. Да, то есть конкретно на эту
теорию-то сложно рассматривать, хотя конкретно наш прагогранд есть, конечно, классические задачи.
Но я их на всякий случай расскажу, потому что вдруг кто-то не знает. Как говорится, да. Потому что,
на теорию-прагранде есть как бы просто две задачи там оба раза с эпическим условием.
Циклическим? Эпическим. Ну первое условие, знаете, задача про Штирлица. Ну знаете,
это да. Возможно, знаете. Там. Так, просто уже хорошо. Штирлиц и Мюллер стреляют по очереди.
Была в лошадке. Ну конечно, была, да. Так. Ну как кто знает вторую фразу этого условия?
Штирлиц стреляет первым. Нет. Ну почти. В очереди Н человек. Ну Штирлиц и Мюллер стреляют по
очереди. В очереди Н человек. Ну да, реально Н человек стоят в очереди, по Н стреляют. Они
стреляют без промаха. Но при этом, если один человек живой обнаруживает, что не убили всех
соседей, он пугается и убегает. Проигрывает в этой игре тот, кто не может сделать ход.
Это вообще гроб был. Да ладно. Это галявка была. Не опускать. А в каких ограничениях тебе ее давали?
Ну пять тысяч, по-моему. А, да? Ну на пять тысяч это как бы стандартное упражнение вот на это. Да,
потому что, да, Н пять тысяч, ну типичная немецкая очередь, пять тысяч, да. Ну может быть,
неважно. Так ладно, если мы сейчас это еще обсуждать. Нет, ну это нормально. Пять тысяч,
ладно, после того, как у нас Петя получает на день рождения в подарок две строки до ста тысяч
символов, да, состоящие только из строчных латинских букв без пробелов и запятых. Ну вот,
то есть нормально. Так вот. Ну что сразу? Не, в немецком там не так, там еще это умлауты всякие есть.
Ну неважно. Так вот, ну неважно. Соответственно, очередь на пять тысяч спрашивается проигрывает
тот, кто не может сделать ход, то есть кого людей не осталось. Кто выиграет при правильной игре? Ну
здесь на самом деле игра простая, потому что мы замечаем, потому что, да, потому что замечаем
следующее, что если мы выстрелили куда-то в середину очереди, то очередь распалась практически на
две независимые игры. И на самом деле просто для каждой очереди длины от нуля до пяти тысяч
можно аккуратно насчитать ее нимбер просто. Ну как насчитать? Потому что каждый раз, когда мы ходим,
мы сводимся либо к одной очереди меньшей длины с уже известным нимбером, либо, соответственно,
сводимся к двум очередям, меньшим очередям, для которых нимбер есть, а для их суммы нимбер это
к сор. То есть получается для позиции там, для очереди, скажем, из и человек, соответственно,
вам нужно, значит вы делаете и ходов по факту и пополам, получаете там и нимберов, ну реально
там не больше чем и пополам различных. И, соответственно, ну вот, и находите из них МЕКС. Все,
получается классическое решение за М квадрат. То есть большим гробом это может быть, если очередь
может быть до 100 тысяч. Вот. Нет, я сейчас слету, я не знаю, честно, слету не знаю, решается ли такая
задача в принципе. Хотя может быть там если выписать последователь, какая-то закономерность
найдется. Там половина, часть задач на это все решается по принципу, там действительно, значит,
честно за М квадрат сделаете последовательность, заметьте закономерность и дальше либо там тупо за
accept, либо там аккуратно докажите по индукции, что да, это действительно работает. Ну, в принципе, да.
Ну, возможно. Ну вот, там всякое бывает. Вот, есть такая задача. Но есть еще, конечно, классическая
задача с гордым именем, как сказал Владимир Морозович там, молись и кайся. Да. Ну да. То есть ребенок такой
вот такая задача. Молись и кайся. Да, задача так и звучит. Молись и кайся делят пилок. Вот пилок
испитен в форме прямоугольного пололилипипеда с целочисленными столонами. Каждая столона
не больше, чем пять тысяч. А можно и сто тысяч, наверное. Вот. Ну и соответственно, там, условно, там,
каждый игрок там делит пирог там как-то вот на какие-то две части там какой-то плоскости такой,
такой, такой. Да. Прямоугольный пололилипипед. Причем делим на две части, каждый из которых
является прямоугольным пололилипипедом тоже с целочисленными сторонами. И после этого съедает
большую часть. Как это ни странно, но проигрывает тот, кто не может сделать ход. Да, или тот,
кто не выдержал гонки, да. Да. Вот. То есть как бы, ну вот. Ну по факту ты всегда сводится к тому,
что у вас есть три числа А, Б и С, и вы можете на каждом шаге выбрать одно из этих чисел и уменьшить
его не более, чем в два раза. Но оставить его целым. Там, по-моему, даже и на сто тысяч, по-моему,
решились, потому что там какие-то закономерности делаются. Нет, там даже не закономерности,
а просто, на самом деле, идея будет такая, что... Ну там просто суть в том, что вы вот идете... То есть
у вас есть как бы массивчик, вы его... То есть он съедает меньшую часть. Но если равная, то съедает
любую. Но просто тут фишка в том, что каждый раз, чтобы найти очередную часть, вы как бы берете
мекс из предыдущей половины, да. И получается, ну вот. И там фишка заключается в том, что когда
идете как бы вправо, то у вас этот отрезчик двумя указателями как-то аккуратненько меняется.
Поэтому там тупое решение может быть. Это просто давайте хранить все числа, которые тут не
встречаются. Ну или там, во-первых, храним все числа, которые тут встречаются, и для каждого числа
храним сколько раз оно встречается, во-первых. Ну вот. А во-вторых, там, что во втором сете храним
числа, которые не встречаются ноль раз. Мы это можем аккуратно поддерживать. И после этого тогда
получается, что там за какой-нибудь n лог n-чик вы все посчитаете, и это даже если там ничего не
замечать. А по-моему, там если нарисовать последовательность, там еще и закономерность найдется,
простая какая-то. Вот. То есть есть такая задача, есть такая. Но один из самых красивых результатов,
конечно, даже немножко не этот. На самом деле, конечно, нельзя не упомянуть такую вообще красивую
задачу, как ним вид хоффа. Значит, что такое ним вид хоффа? Это вот что такое. Я бы очень хотел
рассказать уверенное нет, но я боюсь. Но осталось две недели до мая, да. Но эти задачи месяц, по-моему, находились в стадии завтра. Ну да. К сожалению, за мной это уводится.
Но нет. Не, ну надо пораньше, тем более, что там будут на DFS всякие веселые задачи. Теоретически. Теоретически. Ну а что? Ну а что, что хочешь, конечно. Ну вместо них можно...
Ну, как показала практика последнего полуфинала, там дают какие-то задачи, но, оказалось бы, на эту всю теорию, которую он даже чемпионы России решать не умеют. Да, фортануло, что там, видимо, конкурирующая фирма тоже что-то решать не умеет, видимо, или не успевает.
Ну вот. Нет, ну реально, там у них было, по-моему, прилично минут 40-50, а они-то в третьем сидели и не смогли придумать. Да, с какими-то мощниками постараться это научить. Да, с какими-то мощниками. Нет, конкурирующей фирмой была вон. Вот. Нет, нет. Нет, одна конкретная каранда, одна конкретная команда, да. Из одной конкретной школы, да. Ну ладно. Это неважно.
Значит, смотрите. Ним Витхофа. О чем? Так, тихо. Ну ладно. Значит, мы забалтываемся уже. Значит, смотрите. Представьте себе, что у нас есть две кучки. В одной есть N камешков, а в другой N.
Значит, теперь, то есть это практически ним, но теперь есть модификация. Разрешается либо взять произвольное ненулевое количество камней из одной из кучек, либо разрешается взять ненулевое одинаковое количество камешков из обеих кучек.
То есть, короче, NM можно сделать либо N'M, можно сделать N и M', вот. А можно сделать N-L и M-L.
Это вообще-то самая практическая задача.
Да, почему?
Ну, вы понимаете, что это практическое общение, а с виду кажется, что вообще-то не практическое.
Ну да.
Что такое практическое?
Не знаю.
Ну как сказать, это очевидно, это игра эквивалента какому-то NM.
Правда, я не знаю какому.
Но на самом деле, да. То есть, удобно эту задачу рассматривать немножко в другом виде. Обычно эту задачу рассматривают как задачу про ферзя.
Ну потому что, смотрите, там просто идея такая, что такое NM на двух кучках?
Задачу можно сформулировать так.
Значит, дана шахматная доска, ну такая бесконечная, вверх и вправо.
И у вас есть ладья, которая имеет вправо ходить вниз и влево.
Ладья.
Нет, но есть формулировка в виде ладьи.
Да, проигрывает тот, кто не может делать ходь, то есть начнем ходу, ладья окажется здесь.
Это практически два NM, правда?
То есть, как бы три NM, это была бы трехмерная доска.
А вот NM Витхоффа, это когда мы вместо этой ладьи подсовываем ферзя.
То есть, когда можно еще по диагонали ходить.
Ну это просто такая другая формулировка, хотя задача примерно та же.
И там, на самом деле, можно уже было бы, на самом деле, мы там, может быть, даже до того, как мы стали изучать теорию про Гагранди, вообще думать, а как тут искать вообще выигрышность и проигрышность.
Ну можно делать это, ну есть тупое решение за O от NM на N плюс N.
Это прям честную динамику на этом всем считать, правда?
Вот, то есть прям вот предельно честно, вот давайте я даже табличку начну рисовать.
Вот, так, раз, два, три, четыре.
Найти выигрышность и проигрышность или все найти?
Ну, по-хорошему, уметь отвечать на какие-нибудь запросы в духе дано X, Y, скажите, пожалуйста, это выигрышная позиция или проигрышная?
Вот.
То есть, в принципе, можно за, если они все не происходят, там, X не происходит, N, Y не происходит, M, то как бы вот за такую симпатику вы, в принципе, можете насчитать ответы для всех позиций, правда?
Можно ли насчитать быстрее?
Ну, наверняка.
Ну, вот.
Ну, оказывается, можно, потому что можно заметить следующую.
Ну, сразу заметим, что если мы нашли какую-то проигрышную позицию, ну я давайте вот для простоты, вот, минусик, да, то заметим, что мы как бы выкидываем всю горизонталь, всю вертикаль и всю диагональ.
Вот, видите, да?
Ну, вообще, заметим приятный маленький факт, что ни в одной горизонтали, ни в одной вертикали, ни в одной диагонали нет двух проигрышных позиций, правда?
Ну, можно так сказать.
А можно искать следующим образом.
То есть, давайте идти, скажем, по горизонтали, и в каждом моментовении по горизонтали, будем в каждой горизонтали находить первую не выкинутую клетку.
В чём это достаточно легко окажется сделать, потому что там будет, ну, будет просто оказывается следующее, что сначала мы выкинем вот эту клетку и симметричную ей, это важно, да?
Ну, соответственно, понятно, этому выкинули, этому и выкинули.
И ещё тут диагональ выкинули, да?
То есть, можно заметить, можно же ещё и диагональ, то есть, на самом деле, и диагональ тоже выкидывать, да?
То есть, типа перенумерать, что это диагональ номер 0, это диагональ 1, 2, 3, это диагональ.
Ну вот, вот эта диагональ, это будет минус 1, эта диагональ минус 2, эта диагональ минус 3 и так далее.
Почему я пишу диагональ с минусом?
Ну потому, что минус 3, в данном случае это будет удобно.
То есть, давайте скажем, что это будет, скажем, координата x минус координата y, что-то в этом роде, да?
Вот.
Тогда вот, да, вот эта вот диагональ, вот эта диагональ 0, потому что тут x равен y, да, тут 1, потому что x на 1 больше, и так далее, понимаете, да?
И можно, в принципе, в ясном виде эти диагональки хранить, то есть вообще у нас будет получаться, что диагональки как бы...
Это просто с треугольной числой, нет?
Почему?
А, стоп, почему треугольная числа?
Нет, вот очень...
А, это ходы коня, да?
Это просто ходы коня.
Да, да, да.
Так, как говорится, так может показаться.
Но на самом деле, увы, нет.
Так, смотрите, сейчас я вам...
Ну да нет, поначалу так может показаться, что это ходы коня.
Ладно, я вроде...
Ну, то есть поначалу, может быть, некоторое время действительно так будет.
Почему?
Да, а, ну еще я кое-что забыл, я еще тут плюсики забыл.
Лень, я помню эту картину, ты там не всегда...
Нет, там просто прикол в том, что, смотрите, дело в том, что вот это вот минусик, конечно, будет, а вот это уже не минусик, потому что он заблокирован вот этой горизонтали.
Отлично.
Вот.
Нет, но фишка, на самом деле, заключается в том, что можно эту задачу, в принципе, с помощью вот этого решать как минимум за O от NM,
потому что вы можете для каждой горизонтали, вертикали и диагонали помечать, если там уже проигрышность.
И тогда для каждого клиента вы за O от единицы будете получать.
Ну а на самом деле, конечно, ваша цель просто получить все проигрышные, там, возможно, позиции просто,
потому что, если вы знаете все проигрышные позиции DNM, то, в общем-то, там, для каждой горизонтали, вертикали и диагонали вы получите информацию о том, где там проигрышная позиция возникает, если возникает.
Ну вот.
И тогда, кажется, у вас, действительно, может вполне себе оказаться шанс там получить решение за N plus M.
На самом деле хочется за константу какую-нибудь или логарифу.
Ну в идеале, да, но у вас будет напряг, потому что закономерность...
Закономерность.
Ну вот.
Но справляем так.
Закономерность есть.
Так.
Знаешь, сейчас вот сам напишу теорему, а потом перепроверю.
Вообще про Лилия запомнил.
Потому что теорема такая.
На ощущение, что вот такая закономерность, и когда я написал, доказывается чей игрок.
Вообще нет.
Значит, тогда, смотрите, пусть х меньше игр.
Ну вот.
Пусть 0 меньше х меньше игр.
Тогда позиция x, y проигрышная.
Тогда и только тогда, когда существует натуральная N.
Такое, что x, y равно.
Округленное вниз число N умножить на phi.
И округленное N plus 1 на phi.
Да, где phi, это то самое 1 плюс корень из пяти пополам.
Внезапно, да?
Да, вот такой общий вид проигрышных позиций.
Так, вот у меня тут шпаргалка была.
Да, если бы я тут, конечно, дожил.
Возможно, мы бы с вами даже еще и попробовали доказать.
Надо было бы, наверное, доказать.
Ну ладно, не будем этого делать.
Ну да.
Где-то, кстати, даже была задача.
Данные x, y в проекте выигрышная позиция или проигрышная.
Длина x, y до 10 в пятый.
Так что задачу можно было вам в контестную фурию подсунуть.
Отличный план.
Не, а в чем проблема?
Вычислите просто это phi с достаточным количеством знаков и все.
Просто корень из пяти вычислите там и все.
Можете сами вычислить корень из пяти.
Можете там где-нибудь загуглить и в копипасте.
Ну мало ли кто-то.
Что?
Ну не знаю, ну смотря какое.
Ну вам там, конечно, надо, если у вас n, там это все до 100 тысяч, то вам, наверное, там знаков 300.
Там 300 тысяч где-то надо желать.
Ну вообще-то, да.
Сейчас, ну да, сейчас я на всякий случай приду.
Ну да, то есть там отдельно.
Ну как сказать, там доказательства тоже, на самом деле, не всегда отвечают на вопрос, откуда это вообще взялось.
Если по индукции доказывать, что-то с ней неравеным будет следовать.
Нет, конечно, нет, я и говорю не об этом.
Это опять из цикла, откуда это взялось.
То есть может ли это взяться откуда-то, кроме того, что мне ночью пришлась, прислала наше индийское богинье и сказала вот.
Как говорится, докажи вот это, по индукции зайдет.
Если что, корень из 5, это ровно 2 диагонали между ходом коня.
Ну вот.
Стоп, а можно такой вот вопросик?
Давай.
Откуда это взялось?
Какой?
Ну вот у нас есть минусик с координатами 1, 2, 3, 4, 5, 3.
Так.
Сейчас.
И что?
А как он у нас так получился?
Сейчас.
Стоп, только.
А, ну у нас фея это заболел?
Ну вот.
Ну там вот суть какая-то.
Чего фея, где фея?
Вот.
Ну вот.
Так что вот.
Чисто теоретически у меня тут даже какое-то доказательство написано, но я думаю мы сейчас не будем.
То есть, ну наверное, я думаю так.
Может если когда-нибудь останется время, можно будет рассмотреть это доказательство, но думаю сейчас то.
Эта теорема без доказательств сейчас.
Нет, ну сейчас я вам просто даже не буду в экзамене спрашивать.
Просто вот.
Просто такой интересный факт из теории как есть.
Ну не из теории, хотя бы.
Нет, нет, нет.
Ну там нет, там как бы есть отдельное доказательство, что конкретно здесь это именно так.
именно так то есть возможно там придется так ну да нет когда-то когда-то там в
каком-то как в каком-то комбалге даже рассказом нет на самом деле что нам
действительно подоказать что надо ладно чем мы наверно чью игре закончиваем это
все-таки добьем игру в поддавки вот мы прошлый раз хоккинбуша рассмотрели да
вот а в этот раз можем на самом деле добить поддавки никто не пытался думать
но вот себе представьте себе ситуацию вот вы мы гонот ты себе представьте то есть
играем ним поддавки да то есть как бы играем то есть у нас есть н кучек n там
и каких-то кучек нимов да это убираем то есть то есть как всегда там можно
сходить это есть можно брать произвольное не нулевое количество
камешков но только из какой-то одной кучке но на этот раз тот кто кому
камешков не досталось наоборот выигрывает вот так вот но я теперь там
стереом а вот главное что надо записать это вот это или другая
формулировка те ремы более красивая может быть n-фи n-фи квадрат
ну потому что феи так как осколень уравнений а ой я кажется а может я еще и наврал а
слушать наврал это неправда это вранье все-таки доказывать надо все-таки во вот так правда во все
я наврал вот значит смотрите значит так начнем поддавки значит то смотрите давайте
думать значит значит как играть ним поддавки ну понятно что это тоже эквивалент такому-то
не понятно да может быть и не особо надо но на самом деле заметим что кажется что поначалу
что происходит какой-то какая-то инвертация но потому что предположим что у нас все кучки
состоят из одного камешка тогда у нас кто вы предположим что у нас есть как как кучек
по одному камешку спрашивается кто тогда выигрывает ну да только на этот раз если к
четную то выигрывает наоборот первый игрок а если к нечетная второй понимаете да то есть
пока такая произошла такая инвертация а теперь внимание вопрос предположим что у нас есть
несколько некоторое возможно нулевое количество кучек то есть возможно левое количество кучек из
единицы и какое-то число п больше одного то есть одна ровно одна кучка больше 1 да вот как вы
думаете кто в этой ситуации выиграет ну в зависимости от п конечно
всегда есть вариант забрать все как-то мне прийти к предыдущему забирать первые пять и
понять либо светись ну типа ну имеете мысль брать по минус один либо ну да нет ну заметим
следующее что мы эту ситуацию всегда можем свести к ситуации когда у нас есть несколько
единичек причем более того четность и количество единичка мы можем регулировать потому что мы
можем забрать все пэшки а можем забрать все пэшки кроме одной получается неожиданный результат в
прочем верный как ни странно кстати и собственно вот и как ни странно в обычном ими то есть у вас
ровно одна кучка больше единицы то вы заведомо выиграли но вот кстати к сор этого кстати к
сор этой штуке тоже всегда отличен от нуля что если утверждение есть у вас ровно одна кучка
больше единицы то вы и в поддавках и в обычном миме всегда вы первый гоп выигрывает но потому
что на самом деле и в поддавках и в гиме стратегия очень простая вы должны п превратить либо в один
либо 0 в зависимости от того какая счетность единиц вас устраивает то есть тут разница будет
какой в конкретном выигрышном ходе но не в фарте выигрыш мы рассмотрели случаи когда все единицы
и когда все единицы кроме одной пока больше никакие а теперь угадайте но а теперь как вы думаете
что будет происходить если у нас есть сколько-то единиц и сколько-то но больше одной не единицы
не знаю ссор всех кучек больше 1 да да нет
не в плане ссора не ой ну так можно не как это не странно идея на самом деле очень простая то есть
замедлено то есть как это не странно ответ абсолютно такой же как и в обычном миме то есть
прям честно к сорям эти все пешки со всеми единицами и если получится ноль то вы проиграли
если получится не ноль то вы выиграли но потому что суть то в том заметим что вы и вы мимо вот
этой позиции игра заведомо не пройдет правда то есть рано или поздно обязательно как кому-то
из игроков такая позиция достанется правда в чем в чем самый интерес то есть нет смотрите то
получилось и получилось на самом деле так же кажется что игры различные но на самом деле вот у
вас есть какой-то финиш да вот это финишная вершина да есть там какие какие-то там уровни игры уровни
игры но есть вот какая-то вот такая есть такая вот линия мимо которой вы не в неме ни в поддавках
не пройдете и более того и в ниме и поддавках на этой линии все игры выигрышны
То есть в переводе говорят, что если игра у вас из вот
этого мира, выше этой ВТ-линии, то у вас и в НИМИ, и в поддавках
задача не попасть на эту линию.
То есть мимо этой линии пройти нельзя, но кто пошел
в эту линию, тот проиграл.
А, и типа выше НИМИ, и по факту перейдем к НИМИ?
Ну да.
То есть по факту там будет играть, то есть получается,
на самом деле видите, что поменялось, то есть получается
нашлась ВТ-линия, и выше ее игра просто идентично
к обычному НИМУ, потому что выше у вас цель не попасть
на эту линию.
А почему мы обязательно попадем на нее?
Ну потому что смотрите, если у вас изначально количество
кучек больше единицы, значит больше одной, то заметим,
что на каждом шаге количество кучек больше чем с одним
камнем у вас уменьшается не более чем на один, ну
либо уменьшается на один, либо остается тем же.
И при этом еще суммарное количество камешков у вас
всегда уменьшается.
И что?
Нет, ну вы можете, да, единицу заменить на ноль или пэшку
заменить на ноль.
Но если вы единицу замените на ноль, то количество больших
единиц, не отличных единиц, а больших единиц у вас от
этого не поменяется, а если вы убьете эту пэшку,
то количество больших единиц и кучек у вас уменьшится
на один.
Ну хорошо, и вот, то есть это означает, что если у вас
изначально количество больших единиц и кучек было больше
одной, значит как бы игра не шла, а рано или поздно
кто-то из игроков обязательно попадет в позицию, когда
соответственно у вас будет ровно одна кучка больше
единиц.
Да, сколько единиц при этом будет, вот, это все что
я утверждаю.
Вот, то есть вот получается так, что, как бы, тут получается,
что проигрышность, выигрышность, по крайней мере, определяется,
получается, тем же к ссорам и стратегия просто ровно
той же стратегии.
Кроме случая всех единиц?
Ну получается, да.
Только изначально всех кучек надо одни вывлечить,
наверное?
Нет.
Нет, то ты и прикол, что нет.
То есть, как бы, выигрывающий игрок будет выигрывать так.
Он, то есть, выигрывающий, как бы, выигрывающий в подграфках
игрок, то есть, будет следить за тем, чтобы противнику
подсунулся к ссору, равный нулю.
Значит, утверждение, рано или поздно наступит вот эта
позиция.
Утверждение, именно противник подсунет нам эту позицию.
Почему?
Потому что эта позиция с к ссором не равна нулю.
Но тогда просто самое главное для нас, это просто в этом
месте вспомнить, что мы не в ним играем, а в поддавки
и поменять парадигму.
То есть, разница в том, что мы по-другому будем выигрывать,
но как бы, мы все равно будем выигрывать.
Так что оказалась вот такая неожиданная красота, не
упомянуть о которой все-таки было невозможно.
Так, ну ладно, какие там еще, а, ну да, больше никаких
игр у нас вроде нету.
Ладно.
Поэтому, наверное, нам пришло время, по крайней мере, с
играми остановиться.
Так, возможно, сделать тоже еще один перерыв и после
этого перейти к DFS.
Да, да, наконец-то мы узнаем, что такое DFS, да.
Нет, ну, смотри, математика сегодня тоже будет простая,
потому что никаких сильно сложных утверждений я сейчас
формулировать не буду, там сильно сложными доказать.
То есть, там даже не будет там, может быть, особо утверждений
вида, что утверждение очевидное, а доказательства, ой-ой-ой,
повесились.
Хотя, как бы, казалось бы, все живут себе, нет, такого
там форта Белмена не будет.
Но цель, ну вот, тут разная, то есть, сначала я введу
там несколько определений и сформулирую какие-то
леммы, но часть просто, знаете, там, как понятие
лемма белых путев, просто стоит знать, что это такое
вообще.
Потому что, ну, в науке есть такое понятие, да.
То есть, само утверждение, естественно, простое, но
фенот иногда, как бы, просто грамотно знать.
Вот.
Ну, а также, возможно, мы еще быстренько разберемся
с, еще расплетаемся еще с деревьями, потому что
там есть тоже простая тема, но тоже с ней надо расквитаться.
Так, итак, соответственно, польза глубину.
Так, ну, значит, представим себе, что у нас есть дерево,
ну вот, и мы делаем новый обход его вершин.
Ну, как оно у нас, как у нас работает?
Ну, наверное, там понятно, подробно писать о том, что
такое DFS, я думаю, вам точно не надо.
Или кто-то не знает, что такое DFS.
Так это же инордер-обход.
Да, ну, не совсем.
Ну, на самом деле, так, давайте скажем, что обычно
DFS от вершины V, ну, обычно это та штука, которая просто
пишет, что юзит от, ну, вообще, базовая версия говорит
так, юзит от V равно true, то есть были ли мы в этой
вершине, да, и перебираем все ребра, значит, торчащие
из вершины V, если выясняется, что, значит, не юзит от U,
то пишем DFS от U.
Вот, можно, в принципе, то есть базовая версия DFS,
в общем-то, вот такая.
Вот, но хотя тут чаще пишут, конечно, аккуратнее, потому
что вот это вот, это, конечно, просто DFS в вакууме.
Вот, сам по себе он, в общем-то, никому не нужен.
То есть, ну, на самом деле, ну, пора просто.
Никому не нужен?
Ну, в таком страхном виде, да.
Вот, ровно в таком виде он уже в части задачи помогает.
Ну, хотя, да, на самом деле, в неориентированных графах
он, конечно, помогает искать там компоненты связности,
действительно, да, уже в таком виде.
И это важно бывает просто сам по себе.
Да, ну, это, да, бывает, бывает уже это хорошо.
Хотя, ну, там всякое, там всякое, например, может быть.
Потому что, если брать хотя бы задачи на уровне true,
то, ну, на самом деле, бывает такая задача, как найти
полагическую сортировку.
А вот тут я все-таки вопрос такой задам не тривиальный.
Так, ну, поднимите руки, кто знает, что это полагическая сортировка?
Ее можно искать себе, собственно.
А, все-таки все знают, да?
Ретроанализа.
Спасибо.
Мы для каждой вершины смотрим количество...
Да, да, да, да, да, да.
...которые оно отсылает...
Да, да, да, да.
...которые в нее входит...
Да, да, да, запускаем, да, да, да, запускаем BFS
по обратным ребрам всех стоков, да, да, да.
Вот.
Даже не BFS, просто...
Для каждой вершины поддерживаем количество вершин,
из которых идет...
Ну, понятно, да.
Но при этом не оправдаем.
Как это говорят?
Можно.
Но, как всегда, знаешь, это и сыкло, да.
Да, такой метод тоже существует.
Но BFS как-то сильно проще, что ли?
А я ему в 8 классе на Мошу сдал по летам стал.
Вуху!
Да, классно.
Ой, ну, значит, я там...
Я, может, в следующем семестре еще так расскажу
задачу, как я ее там эпически сдал.
То есть задача практически была
дана строка, найдите максимальные длины
под строку, являющиеся полиндромом.
Знаете, я такой красивый разделяй властвы
за НЛОГН написал.
Нет, кстати, он нам пригодится,
потому что, как выяснилось,
поиск тандемного повтора
ровно тем же разделяемый действует.
Нет, у меня было не дерево,
просто разделяй властвы.
Там разделяй властвы с какими-то
префиксами Z функциями,
с использованием задачи носки.
Вот.
Ну вот, а потом выяснилось, что да.
Ну ладно.
Ну ладно, это в следующем семестре лучше.
Так, тихо, тихо!
Так, все, ребят.
Так, давайте, не зависаем, не зависаем.
Вот.
Так, значит, как тогда,
как можно писать топологическую...
Так, ну, начнем с того, что да.
То есть, помните, да,
топологическая сортировка,
то есть это такой порядок вершин,
что все ребра смотрят слева-направо.
Вот.
И есть мистическая теорема о том,
что топологическая сортировка
существует тогда и только тогда,
когда в графе нет цикла.
Естественно, мы говорим об ориентированных графах.
Вот.
Ну как это доказать?
Ну, если цикл есть, то с топсортом,
понятно, проблема,
но если цикл есть,
то там просто легко показать,
что в графе обязательно есть сток,
то есть вершина без исходящих ребр,
и поэтому мы их можем аккуратно выписывать.
Ну, как бы, если бы мы были
чистыми математиками,
нас бы это доказательство удовлетворило.
Ну вот.
Ну вот.
Что называется на этом?
Мы окажемся более хитрыми,
у нас еще и чисто алгоритмический подход,
который нам говорит в этом месте следующее.
Который нам просто предлагает
просто вершины,
то есть просто говорит так,
что мы запускаем DFS
и в топсорт просто запихиваем
эту вершину, причем в начало.
Я вот так напишу.
Push front от V.
Ну, если мы хотим топсорт слева направо,
то как бы мы
для вершины говорим,
что мы сначала обойдем
всех ее потомков,
потом вот push front.
Вот.
И оказывается, если вы там,
ну, как все стандартным методом,
типа for и это там,
приближимся по всем вершинам,
если вершина не помечена,
запускаем из нее DFS.
Окажется, что в конце,
значит, то, что у вас получит,
это реально топсорт.
Доказательство.
Ну, давайте попробуем
сделать первое доказательство.
Что у нас в топсорте?
Доказательство.
Ну, давайте попробуем
сделать первое доказательство.
Что у нас?
Как у нас могло так случайно оказаться,
что жила была вершина,
мы ее добавили в топсорт,
потом добавили какую-то другую вершину,
но между ними было ребро?
Как такое вообще может быть?
Не может.
Ну, заметим следующее.
Вот.
Ну, заметим.
Ну, вот.
Ну, хотя нет, возможно,
как ни странно,
просто так мы сейчас
это не докажем.
Смотрите, вот когда мы закончили
давайте рассматриваем
давайте индукции
под линией минимального пути
между этими,
между двумя вершинами,
которые в обратном порядке.
Так.
Общим обязательно...
И заметим, что
до выхода из вершины вот этой
мы будем в вершине,
которая на единицу ближе к той.
Нет, вот тут кто сказал,
что между ними какой-то путь есть вообще?
В смысле?
То в прямом.
Или я не очень понял,
о чем разговор.
Если между ними нет пути,
то, кажется, их можно в другое порядке ставить.
Можно.
Ну, вот.
Но на самом деле лучше давайте поаккуратнее.
Давайте для того, чтобы доказать,
что это работает,
давайте лучше введем нормально цвета.
Это нам все равно придется.
Потому что давайте считать,
что юзит это на самом деле...
То есть у нас будет такой
е-нум,
е-дфс-калр,
в котором есть
е-дфс-лайт,
е-дфс-грей,
и е-дфс-блэк, соответственно.
Ну, что-то...
Ну, я думаю, что такое...
Что такое...
Что такое е-нум вам рассказывать,
наверное, надеюсь, не надо.
Е-нум?
Е-нум.
Ну, к экзамену выучить.
Так.
Можем даже для удобства сказать,
что тут ноль.
Хотя в принципе какие тут константы,
значение не имеет.
Можно писать 0.1.2,
можете написать 57.179, как всегда.
Вот.
Непринципиально.
Но суть в следующем.
То есть у меня будет идея такая,
что изначально у меня
все вершины белые.
Значит, когда мы входим в вершину,
пишем, что dfs у нас будет серый.
То есть пишем сначала,
что вершина серая.
А потом по окончании dfs мы пишем,
что вершина становится черной.
То есть получается такое
отражение состояний.
То есть как бы белая вершина
dfs в нее не вошел.
Серая, значит, вошел, но еще не вышел.
И черная.
Это означает, что вошел и вышел.
Понятно, да?
В частности, сразу становится очевидно,
что в каждый момент времени
серые вершины
серые вершины образуют такой вот путь.
Ну, тут очевидно.
Ну, в принципе, более этот путь
это, собственно, просто stack dfs.
Понимаете, да?
Ну, здесь это по индукции
это легко оказывается, да?
Ну, не по индукции,
ну, просто вот достаточно понятно.
Ну, теперь вот давайте попробуем
подумать вот о чем.
Так, давайте подумать,
что нам еще не хватает.
Значит, вот вернемся к топ-сорту.
Так, жила была вершина v1
и какая-то вершина v2
была добавлена позже,
но из v1 v2 есть ребро.
Ну, заметим следующее.
Мы вошли в вершину v1,
запустили из нее,
стали с ней работать.
Перебирая ребра из нее,
мы в какой-то момент
обязательно наткнулись
на вершину v2.
Внимание, вопрос.
Чем могла в этот момент
быть вершина v2?
Она была бы белой,
серой или черной.
Начнем с простого случая.
Если она была бы белой,
серой или черной,
начнем с простого случая.
Если она была черной,
то это означает,
что вершина v2
уже была добавлена.
Такого не бывает,
это не могло быть,
потому что мы еще v1
не добавили,
а мы предположили,
что v2 потом.
Значит, хорошо, она не черная.
Чем она еще могла быть?
Да, если она в этот момент серая,
то получается,
что из v2 v1 есть серый путь.
И тогда получается,
что мы идентифицировали цикл.
Да.
Да, более того,
это стандартный алгоритм
поиска циклов в графе.
Кстати, обратите внимание.
Чего?
Не уверен.
Это не очень интересно.
Я думаю, на вашем уровне...
Вы только что-то написали
на подотреске,
вам теперь найдет цикл в графе.
Это после того,
как у вас задача на 3 балла
вы задавали красно-черных деревом.
В дороге?
Ну, и ее тоже.
Она 5 вообще?
Нет, она повыше.
На 2 балла я более простые давал, конечно.
Вот.
Так вот.
Хорошо, серая она быть не может.
Но может ли она быть белой?
Нет.
Да.
Да, а кто и заключает?
Она, ну вот.
Но маленькая проблема.
Как бы, если v2 окажется при этом белой,
то мы запустим из нее DFS,
и когда этот DFS выйдет,
мы ее пометим в черный цвет
и добавим цитка.
Но это будет раньше,
чем мы выйдем из вершины v1,
у нас так рекурсия устроена.
Ну, вот, собственно,
мы аккуратно 3 случая рассмотрели
и обнаружили, что такого не бывает.
Теорема доказана.
То есть вот, в принципе,
примерно так может выглядеть
аккуратное доказательство,
например, того, что
вот топ-сорт так работает.
Вот, понимаете, да?
Или, например,
как может выглядеть
аккуратное доказательство того,
то есть как может выглядеть
алгоритм?
Вот задача.
Надо проверить,
есть ли в ориентированном графе цикл,
если да, то его вывести.
Как это можно сделать?
Ну, основная...
Расставить на ребрах отрицательные...
Ну, да, то есть...
Если нашел цикл...
Господи, да.
Вылить воду из чайника.
Да, замечательно.
Но, как всегда,
мы программисты,
мы помним, что все,
реально, придется делать.
Так, мы пишем функции,
и у нас уже есть функция,
которая это делает,
поэтому мы должны...
А, ну, так-то да, конечно.
Но, единственная
производительность, мало ли, была.
Вот.
И, то есть, тут говорят так.
То есть, по-хорошему,
с цветами надо говорить так.
То есть, часто говорят...
То есть, можно тут даже...
Обычно такой типичный
DFS можно писать,
значит, switch,
use it at...
Switch?
Да.
Ну, обычно.
Если он...
Да, есть такой
оператор Switch.
Господи.
Кошмар.
Мещерину это не скажи.
Или Мещерин это...
Считает, что это
оператор Go2...
Оператор Switch, как оператор
Go2, его не существует.
Примерно так.
Да.
Мечательно.
Примерно.
Только интересно,
а по каким религиозным причинам
вообще отменяется
оператор Switch?
Отменяется,
но он
умалчивается тактически.
Нет, тактически
или тактично?
Тут скорее тактически.
Как вы знаете,
вот есть разница
между...
Я не помню,
еще сделал тактичный ход
и тактический ход.
Вот разные вещи, да?
Сильный ход
и тактичный ход.
Ну да.
Так вот.
Ладно, вот будем пользоваться.
То есть, оператор Switch,
он будет работать так.
Внутри этого Switch
есть просто вот эти метки,
к чему он равен.
У меня эти метки будут
EDFS-White,
EDFS-Ray
и EDFS-Black.
Хресь-хресь.
Ну вот.
Работает он так.
Он пробирается по меткам,
находит метку,
которая равна этой штуке
и начинает с нее
все делать.
То есть, тут будут
какие-то действия,
тут какие-то действия, тут.
Правда, подлянка
заключается в том,
что по умолчанию,
если он дошел,
скажем, до грея,
то он сделает вот эти действия
и дальше продолжит делать
вот эти действия.
Поэтому, если вы хотите,
чтобы он это не делал,
нужно, конечно,
в каждой вот этой позиции
написать Break.
То есть, так Break
это как бы выход из Switch.
Вот.
Ну это просто очень удобно
так писать,
поэтому вот можно.
А, или, например,
есть еще вариант Default.
Это означает,
что если ни одна метка
не сработала,
то Default
это означает,
что он точно сработает
и тогда будет хорошо.
Да, ну это, если вы не знаете,
вот как примерно работает
оператор Default.
Так что мы тут везде
бряки попишем.
Да нет?
Баш в смысле языка
или в смысле
юмористический ресурс.
Окей.
Но не знаю.
Так вот.
Значит, E-DFS white.
Но он говорит просто,
соответственно, понятно.
Обычно мы говорим,
что DFS...
То есть, классически DFS
говорит, что просто в случае белом
пишем DFS.
В остальных случаях
не делаем ни черта.
Да?
А, ну и в конце, конечно,
не забываем написать,
что use от V равно black,
соответственно.
E-DFS black.
Вот.
И что-нибудь тут нет.
Ну в топ сорте
мы бы еще тут что-то написали.
То есть, знаете, можно
теоретически могла быть задача
у вас на C++
написать шаблонный DFS.
В котором параметры шаблона
это типа, что вы будете делать
в каждом из этих мест.
Ну чтобы, как бы,
ну чтобы не копипастить DFS,
то есть, есть великий DFS,
и вы просто там подменяете,
что вы будете...
От трех SDF functions.
Ну вообще, да.
Ну точнее, от трех этих
шаблонных параметров
вы туда и лямбда функцию
можете передавать в принципе.
Нет, это неэффективно.
Понимаете?
Понимаете?
SDF...
Если вы там делаете SDF function,
то как бы он лямбда функцию
будет кастовать к функциону.
То есть, к функциону
это будет как бы обертка.
И это работает дольше,
чем если вы туда
передаете лямбда функцию,
он будет напрямую с ней работать.
Ну вот.
Так что там вот...
Ну скорее да.
То есть там...
Да, но это...
Любой шаблон работает быстрее,
чем какая-то...
Ну вот.
Так что-то...
Так что-то аккуратнее.
Так вот.
Не, ну понятно,
что на реальной практике
конечно скорее лучше
там эффективнее
дописать свой DFS
и не париться.
Вот.
Значит...
Значит...
Ну мы...
Так.
У нас была задача,
как искать цикл.
Ну цикл у нас...
Идея была, конечно,
создать стэк.
Да?
То есть какая у нас была идея?
Сказать, что давайте
добавлять вершину в стэк,
когда мы входим в DFS
и там, соответственно,
доставать ее,
когда мы выходим из DFS.
И тогда оказывалось,
что если у нас
вершина у оказывается
серая, значит,
она есть в стэке.
Ну вот.
Ну и тогда мы говорим.
То есть какой-то там код,
какой-то там вайл,
который говорит,
что цикл это все
в СТ
от у до...
до конца.
Вот.
И в принципе,
это достаточно очевидно,
потому что вот у нас
есть этот стэк,
который у нас сейчас
в стэке что-то хранится.
Вот у нас есть вершина у.
То есть получается,
что означает,
что у нас из вершины...
Мы тут дошли до вершины в
и дошли ребро.
То есть ровно вот в этом случае
получится вот эта ситуация.
И цикл будет реально найден.
Понимаете, да?
Остается только маленький...
Ну вот.
То есть доказать надо
даже не то, что если мы нашли...
То есть вот то,
что мы нашли,
то есть нет достижимого цикла.
Это очевидно.
Самое интересное в этой теореме
это,
а если такого
ни разу не произошло,
верно ли,
что цикла реально нет?
Нет достижимого цикла.
Нет.
Ну по факту...
Ну да,
верно по факту,
что если мы запустили
ДФС только из одной вершины,
значит из этого там теорема
можно доказать только,
что нет достижимого цикла.
Но даже это было бы
неплохо доказать.
Не говоря уже о всяких там
мелочах в духе,
что естественно будем искать
цикл вида, перебираем все вершины,
если вершина белая,
запустим из нее ДФС.
И вернул он там нам
тру-нетру.
Но как же доказать тогда?
Ну доказать на самом деле очень...
Ну вот.
Но для этого вот нам
возможно потребуются
какие-то маленькие теоремки,
и давайте их попробуем
аккуратненько ввести.
Так.
Что я там хочу вообще?
Нам нужно еще проверять,
что вершина диэферен.
Это если не ориентированный граф,
мы его сейчас не рассматриваем.
И то там будет не перрон,
а проверить,
что это не то ребро,
по которому мы сюда пришли.
Ну что там, если кратные ребра убивать?
Ну это, да, это мелочи.
Ну давайте, какие еще
мелочи надо упомянуть?
Да, важный момент.
Связанность графа.
А, ну вот.
Вот этим нужен наш первый ДФС.
Да, да, да.
Мы уже упомянули,
но важный момент.
Граф бывает ориентированный
или не ориентированный?
Так вот, утверждение.
Понятие связанный граф
существует только в неориентированном графе.
Да.
В ориентированном графе
нет понятия связанности.
Есть понятие слабая связанность,
есть понятие сильная связанность.
Почему?
Ну потому, что очевидно,
что в обычном неориентированном графе
понятие связанность,
мы можем говорить,
что две вершины связанные
если они соединены путем.
Тогда в неориентированном графе
это отношение эквивалентности.
Так, помните, что такое отношение эквалентности, да?
Мы уже упоминали это, да?
Ну, отлично, да, помним.
Ну, там рефлексивность есть, симметричность есть, транзитивность есть.
В понятии связность, а если мы говорим о связности в ориентированном графе,
то при существовании пути у нас уже на уровне симметричности фейл.
То есть у нас это не отношение эквалентности не по причине транзитивности,
которая очевидно выполняется, а по причине симметричности.
Если из У в В есть путь, то это не значит, что из В в У путь тоже есть, очевидно.
Поэтому жутко неграмотно говорить, что есть понятие какой-то связности,
компонента связности, если мы говорим об ориентированном графе.
Вот.
Но в ориентированном графе есть понятие слабая связность,
то есть мы говорим, что эти вершины соединены путем,
если у всех ребер отменить ориентацию.
Это называется слабая связность.
Есть понятие сильная связность.
Две вершины сильно связаны, если от У в В есть путь и от В в У есть путь.
Вот это, в таком виде, это уже отношение эквалентности.
И как следствие, есть компоненты сильной связности,
но мы сейчас не будем обсуждать, что это такое.
Ну, не что это такое, а как их искать.
Там это отдельный веселый вопрос.
Я думаю, в следующий раз у нас будет на эту тему хорошее веселье.
Особенно когда мы будем искать это одним ДФСом и не двумя.
А потому что есть единый механизм Тарьяна,
который может быть автором такого актуального ДФСа, является.
В этом смысле тут странность теоретическая,
потому что самое раннее статья...
Ну, потому что сам по себе ДФС, явно там обходы деревьев упоминаются
едва ли не в 19 веке, еще какие-то мысли.
Ну, я не знаю, кто Дмитрий Калатенко.
Но я знаю следующее, что по камере первой разумительная статья на ДФС
есть статья Тарьяна 1975 года.
В этой статье вводится, соответственно, ДФС с цветами
и рассказывается, как искать компоненты сильной связности,
компоненты вершины двухсвязности.
Да, абсолютно единым методом, что интересно.
Вот.
Ну, мы естественно его...
Чего?
Вершинной двухсвязности, да.
Рюберную двухсвязность он почему-то не упоминал,
хотя на самом деле этот ДФС естественно тоже ее прекрасно покрывает.
Метод единый.
Вот.
Это статья 1975 года.
То есть получается, что ДФС это более сложная технология,
чем всякие БФС.
Напоминаю, алгоритм ДЕКСТР датируется 1959 годом.
Там алгоритмы всякие, эти Прима-Краскала, они тоже базируются 1950 годами.
Алгоритм Барувки вообще 1926.
Динец тоже где-то там.
Нет, ну Динец, это там...
Динец чуть-чуть поновее будет.
Ну нет, там надо смотреть.
Ну там 70-е, 80-е, по-моему, но я не помню.
Ладно.
Ну, впрочем, потоки мы в этом семестре явно уже не успеем пообсуждать.
По-моему, Динец был до ДФС.
Ладно.
Да, это очень интересные парни.
Вот.
Ну, смотря какой ДФС...
Хотя вот, ну не знаю, потому что ДФС...
Нет, ну поэтия тут...
Нет, ну подобного рода ДФС это, конечно, скорее фольклор, если честно, да.
То есть это больше смахивать на фольклор, чем что там ДФС, что там Тарьян придумал,
что он, оказывается, граф можно обходить вот так.
Кто-то патентовал колесо?
Ну, кто-то патентовал.
Правда, он часто по приколу патентовал, чтобы продемонстрировать,
что, ребят, вас можно взломать, что текущую систему можно слишком легко взломать.
Вот.
Там, да, там была такая проблема.
Кто-то патентовал ДФС.
Кто-то патентовал ДФС.
Можно запатентовать статью про ДФС.
Можно сам ДФС.
Ну, все в этом мире можно сделать.
Кроме того, что сделать нельзя, да.
Вот.
Так вот.
Значит, хорошо.
Какие тиреммы, значит...
Так, пока, да.
А то у нас...
Нет, пока еще время у нас есть, но как-то оно сейчас стремительно заканчивается.
Так, это я, значит, упомянул.
Значит, что еще надо?
Значит, давайте.
Значит, теперь леммы про ДФС.
Так, сейчас это даже уже тоже пора кому-то строить, потому что вот.
Ну, так.
В качестве разминочки надо же просто охотиться.
То есть, как бы никаких сложных утверждений опять же не будет.
Но тем не менее.
Знаете, полезно, знаете, в фундамент себе это прописать.
Да, базу, да.
Значит, леммы говорят так.
Значит, такая.
Леммы.
Значит, такая.
Значит, первая лемма.
Не существует момента времени,
момента времени.
Ну вот, в процессе ДФС, естественно.
Когда, когда что?
Когда что?
Когда есть ребро
из черной вершины в белую вершину.
Это лемма о белом ребре?
Нет, это просто лемма.
Просто вот не бывает такого момента времени,
когда у нас, когда у нас торчит,
когда у нас, когда у нас из черной вершины что-то торчит.
Ну, доказательств очень простое.
Потому что рассмотрим просто.
Ну, во-первых, заметим, что если вершина перестала быть белой,
то она перестала быть белой навсегда.
Потому что, да, как мы видим,
это ДФС, тут у нас вершины не чистятся, к сожалению.
Вот.
Но в тот момент, но заметим, что в тот момент,
когда вершина становится черной,
мы заметим, что ровно вот этот форик перед этим проследил,
чтобы ни одна вершина доступная,
там ни один сосед этой вершины белым не был.
Потому что если он, мы прям проверяем,
что если он белый,
мы прям вот идем туда и делаем его не белым.
Вот.
Нет, подождите, что такое обратно?
Так.
Да, мы, кстати, не знаем, что такое обратное ребро,
так что аккуратно.
Вот.
Значит, далее.
Что у нас еще?
Так.
О.
Ну, вот это такая еще мелочь.
А тут вот аккуратно,
потому что у нас вот на прошлых экзаменах выяснилось,
что у нас тут проблемы с терминологией.
Вот.
Потому что, ну вот.
Значит, внимание.
Лево.
Лево.
Лево.
Лево о белых путях.
Вот тут, кстати, аккуратно,
потому что там на вики конспектов
будет, возможно, что-то другое сказано
под видом лево о белых путях.
Такое более простое утверждение.
Значит, смотрите.
Значит, она такая гибелошка.
Сейчас будет, конечно, сложно сочиненная немножко.
Конечно, формулировка, но тем не менее.
Значит, рассмотрим моменты.
Значит, моменты времени.
Так.
Времени T1 и T2 в процессе DFS.
В процессе DFS.
Когда?
Когда что?
Когда U была выкрашена в серый и черный цвета.
Что?
Почему суфис?
Как два момента времени могут быть суфиксом?
Выкрашена в плане, когда ее покрасили.
Да.
Так, ладно.
Давайте не выкрашена, а покрашена.
Давайте так точнее.
Вот.
Значит, тогда утверждение A.
Вершины V без U являвшиеся серыми или черными.
Вот серыми дробь черными я так напишу.
Серыми дробь черными в момент времени T1 останутся таковыми и в T2.
Ну, это я так корректирую.
Имеется в виду дробь означает, что если вершина была серой в момент времени T1, то она останется серой в T2.
Если она была черной в момент времени T1, то она останется в T2.
Понимаете, да?
Ну, собственно, в общем-то достаточно очевидно.
Ну, потому что с серыми все понятно, потому что она была в стыке, в стыке останется, тут как бы ничего не поменяется.
Сейчас мы утверждаем о монотонности цвета вершины.
Нет, это слишком просто было бы.
Это и так очевидно, что вершина сначала белая, потом серая, потом черная.
Тут интерес другой.
Вот у нас вершина U когда-то становится серой, когда-то черной.
Так вот, если в этот момент какая-то другая вершина была серой, то мы утверждаем, что в этот момент времени она все еще серая.
И более того, если в этот момент времени эта вершина черная, то в этот момент вот эта вершина черная.
Но она не могла перекрасить.
Да, черная очевидно, серая, ну тоже в общем-то очевидно, потому что она лежит в стыке, мы еще не вылезли из него.
Да.
И второе утверждение может быть даже реально такая лемма.
Эта лемма еще нужно доказывать?
Но мы сейчас это и доказали, в общем-то.
Ну, я не знаю.
Нет, ну мы не будем сейчас давать доказательства так, чтобы она там заходила в какие-то тестирующие системы.
Если, конечно, туда можно запихать подобные вещи, в принципе.
Ну, наверх.
Ну, наверх.
Ну, вот.
Но нет, ну давайте, да.
Так вот.
Так вот.
Значит, теперь утверждение такое.
Значит, теперь, ладно, я напишу так.
Пусть.
Значит, пусть у нас В лежит в В без У.
И пусть эта вершина белая в момент времени Т1.
Тогда в момент времени Т2 В будет, значит В, соответственно, белая.
Если в момент времени Т1 есть путь от, значит, У до В по белым вершинам.
Ну, имеется в виду исключительно по белым.
Ну, кроме У, которая в этот момент серая, естественно.
Это значит, что вообще множество серых вершин между Т1 и Т2 не поменяется.
Ну, в плане, ну, никакие новые тоже не покрасят это в серый.
Ну, я тут более, я пишу более сильное утверждение.
Точно, а, наоборот.
По-моему, наоборот.
Да, да, да, да.
Нет, это более сильное.
Да, потому что отсюда следует, что, да, она как бы серая.
Если она не была серая, то она серой и не станет.
Ну вот, это да.
То есть, если она была белая, то она серая и не станет.
В момент времени Т2.
Она будет либо белой, либо черной.
Но я пишу более сильное утверждение, я еще и точно расписываю, когда она станет черной, а когда не будет.
Да, белая иначе.
Да.
Значит, ну, черная очень просто.
Если в момент времени Т1 можно от УДВ дойти по белым вершинам.
То есть, чисто по белым.
Кроме, за исключением самой вершины У, которая есть и в этот момент серая.
Ну, или можете говорить непосредственно перед перекраской.
Сейчас.
Я не совсем понимаю.
А, я понимаю.
Матильда, я вспоминаю.
Я вспоминаю Север.
Ладно, я понимаю, почему я вспоминаю Север.
Вот. То есть, это называется ледлемы о белых путях.
Так, ну, вот это утверждение, конечно, по-хорошему надо уже нормально доказывать.
Нет.
Давайте так.
Если у нас был белый путь, то понятно, что по нему DFS пройдет за это время.
Ну да.
Ну, здесь действительно заметим, что, да, важное утверждение такое, что если такой белый путь есть, то, значит, вершина В станет черной до того, как мы выйдем из вершины У.
Ну, белый путь будет по белым вершинам.
Да, можно просто рассмотрим этот путь и по индукции по этому УТ докажем, что до каждой из этих вершин DFS дойдет до того, как вылезет из вершины У.
Почему?
В смысле, ну, если у нас, если мы дошли, если у нас вершина поменяла цвет, значит, мы каким-то образом до нее дошли, мы до нее спустились.
В смысле, ну...
Тогда надо...
Тогда придется для этого доказывать, что вершины серой не бывают.
В смысле, ну, почему она не бывает серой?
Предположим, она сейчас...
Если она серая, следовательно, она находится в стеке рекурсивных вызовов DFS раньше, чем мы, то есть она была серой до момента времени.
Ну, в принципе, да.
Да, можно заметить, что внутри обработки вершины У мы зашли в некоторые вершины и из всех из них вышли.
Да, у нас так рекурсии устроено.
Значит, на момент времени это два серых вершин не будет.
Да, согласен.
Хорошо, да. Получается, что до всех вершин, которые мы дошли, белые вершины не поменяли цвет, все остальные не поменяли.
Можно так сформулировать, да.
И теперь заметим, что если мы до какой-то...
Нет, ну там просто тогда и только тогда.
Потому что там так, то есть там просто придется доказать две вещи, что если есть путь, то мы до нее DFS дойдет, и наоборот.
Если DFS дошел, значит есть путь.
И это не одно и то же.
Да, это не одно и то же.
Неужели это необходимо формализировать до такого уровня?
Ну, знаете...
А что еще из части DFS?
Слушай, это формализировать, значит ты саму статью 1975 года почитай, вот там формализация, да.
И объяснение очень простое, потому что это так.
Вот мы сейчас с вами обсуждаем вещи, чтобы понятно, что вы там DFS знаете.
Я могу там устраивать свой вопрос, кто знает, что это такое с 7 класса, а кто с 8.
Ну вот, или кто стал изучать программиру чуть позже, поэтому там со 2 семестра 8.
Вот.
То есть можно так.
А теперь представьте себе 75-й год, где эта концепция не является такой, что как бы ее там все, все дети просто там называется на завтра кушают.
Ну вот, и там поиск компонент DFS это тоже какой-то новый алгоритм.
То есть тогда естественно, когда никто не понимает, вам придется это абсолютно предельно формально прописать.
То есть это сейчас вот, мы с вами можем уже это говорить там на уровне, почти на уровне все понятно.
Ну вот.
Ну вот.
А так как бы да.
Если не пользоваться чем-то на уровне стег-рекурсивных вызовов, то не очень даже понятно, как это будет формализовывать.
Ой, ну там вот, ну как, там придется, ну в одну сторону честно придется доказывать.
Рассмотрим путь и давайте по индукции докажем, что до каждой вершины мы дойдем.
По индукции.
Ну там, даже можно по индукции, а можно так.
Пусть мы до этой, рассмотрим этот путь.
Пусть мы до вот, до финальной вершины не найдем.
Тогда рассмотрим первую вершину на этом пути, до которой мы не дойдем.
Да, тогда до предыдущей мы дошли, но тогда получается до предыдущей вершины дошли, а до этой нет, хотя между ними есть ребро, спрашивается с какого перебуга.
Потому что у нас ребро между ними было, получается что возникла ситуация, когда есть ребро с черной вершины в белую, а мы только что убедились, что так нельзя.
Там вот, вот в эту сторону пример доказательства на самом деле все прописываются.
То есть возможно там совсем искренние математики понятиям стеклокурсивных мызов не мыслят, но как я уже говорил, вот поэтому иногда приходят программисты и решают математические задачи методом запустим ДФС или посчитаем динамику.
Вот.
Вот.
Значит соответственно, так какие у нас еще тут леммы, так есть ли у меня тут еще какие-то леммы, которые вообще интересны, а есть, есть, ну конечно.
Да, у нас такие леммы есть, потому что, потому что надо еще ввести еще один важный понятийный аппарат, вот леммы сформулировали, значит да, что вершины бывают белые, серые, черные, это да?
Вот.
А теперь, значит смотрите, какие относительно ДФС-а бывают ребра?
Ребра, дерево, да.
Значит смотрите, тут мы вводим такое понятие, значит такие понятия.
Значит, когда вы запускаете ДФС, вот давайте начнем с ориентированного графа.
Значит, ну естественно, ребра, по которым у нас ДФС прошел, если мы тут запустились из одной вершины, да, то эти деревья, то эти ребра образуют дерево подвешенное такое.
Ну а если мы запустили, ну а если там из одной вершины мы все не обошли, а такое тоже бывает, то тогда получается лес ДФС.
Вот. Так вот, такие ребра называют, мы будем называть, я вот буду писать так, ребра, дерево, ДФС.
Ну, разные терминологии, но вот мы введем такую.
Какие еще бывают ребра?
Сейчас, секундочку, а ведь если мы говорим про ориентированный граф, у нас же эти ребра, ну понятно, что они между собой не пересекаются, но вершины-то могут пересекаться.
Нет. Ну, как бы, если мы уже в эту вершину ходили, мы второй раз в нее ходить не будем.
Значит, смотрите, сейчас я аккуратно введу.
Значит, какие бывают еще ребра? Бывают, значит, бывают ребра, которые в этих деревьях соединяют предка с потомком, предка с потомком, предка с потомком.
Такие ребра мы называем прямые ребра. Вот я их буду цветами рисовать.
Может быть, ну могут быть такие ребра, ну конечно могут, почему бы и нет.
Бывают ребра наоборот, которые соединяют потомка с предком, потомка с предком.
И взгляд за ладонью. Да, так.
Вот.
В частности, если у нас мультиграф, кстати.
Кстати.
Ну, аккуратно с мультиграфом.
Но если есть кратные ребра, то вполне вероятно, что здесь ребр будет в дереве ДФС, а все остальные прямые.
Вот. А если у нас петля?
Петля?
Ну, на самом деле, петля, конечно, в это определение особо не вписывается.
Но обычно нам петля особо и не нужна.
То есть, с верояностью 99.99999999% петлю можно выкинуть, и она ни на что не повлияет.
Или ее можно как-то отдельно обработать.
Поэтому да.
Ладно, давайте так. В скобочках напишу, что есть еще петли.
Вот.
Но вот ребра, которые соединяют потомка с предком, называются соответственно обратные.
И есть еще все остальные ребра. То есть, ребра, которые соединяют не предка с не потомком и не потомка с предком.
Вот.
Их мы будем называть зеленым.
Их мы будем называть зеленым.
И называть эти ребра будем перекрестные ребра.
Вот. Перекрестные ребра.
Точно говоря, что есть петли, но мы их типа игнорируем.
Вот такой технологией мы будем пользоваться.
Так.
Ну вот, действительно. То есть, эта нам классификация будет в разных задачах помарать.
Поэтому давайте для разминочки попробуем хотя бы научиться, попробуем хоть что-то понимать на тему того.
Давайте про каждое ребро хочется понять. Оно ребро дерево DFS, прямое, обратное или перекрестное?
Так это зависит от того, как DFS работает.
В плане от того, как мы его запустили и как у нас, в каком порядке обходили?
Нет, это какая-то динамика.
Нет, это конечно зависит, да.
То есть, безусловно, каждое ребро в зависимости от того, в каком порядке, от каких вершин вы запускаете DFS и в каком порядке перебираете ребра.
Конечно, ребра могут менять классификацию. Это да.
Но нам бывает полезно. Запустим DFS и тогда относительно этого у нас ребра получится одного из четырех типов.
Но как это понять?
Оказывается очень просто.
Для этого нам придется ввести понятие, наше любимое понятие, time in и time out.
Время входа и время выхода.
То есть, мы введем понятие.
Ну, то есть, понятно, в коде это будет написано понятно, что там.
Будем так писать, смотрите.
Time in от V равно QRT++.
И тут в конце мы будем тоже писать, что time out от V равно QRT++.
Понятно?
Вот.
Итак, значит, ввели понятие time in, time out.
То есть, в принципе, это получается такое, ну, то есть, время входа, время выхода.
Более того, мы введем еще понятие для удобства time seg от V.
Это будет подотрезок времени.
То есть, такой числовой подотрезок от time in от V до time out.
Вот.
Это просто такое официальное понятие.
Ну вот, значит, теперь смотрим.
Значит, как теперь определять классификацию?
Ну, здесь можно тоже математическое утверждение сформулировать, да?
Так, ну, во-первых, как бы сразу, соответственно, лемма.
Что для любых вершин у V, значит, отрезки time seg от U и time seg от V либо не пересекаются.
Всекаются.
Либо вложены один в другой.
Вложены один в другой.
Вот.
Ну, действительно, следует это действительно из простой вещи, да?
То есть, потому что заметим, что, допустим, мы вошли в одну из этих вершин.
Время входа вы меряете.
Ну, в плане, правда ли, что у вас все времена входа и выхода по парам различные?
Да.
Ну, вот помните, у нас лемма была, да?
Какая?
То, между T1 и T2, когда мы поменяли сначала на сервис, а потом поменяли на черный, у нас вершины не поменяли.
А, ну да.
Ну, кстати, можно и так мыслить, да.
Да, можно, кстати, напрямую из этой леммы выводить эту сервису, да.
Ну, это не важно.
Ну, суть доказательства леммы понятна, да, что у вас просто, пусть вы, допустим, вы в какую-то из этих вершин DFS вошел первым, да.
Пусть это вершина У без рейчей общества, да.
Тогда у вас два варианта.
Либо вы сначала вышли из вершины У, а потом вошли в вершину В, тогда они не пересекаются, да.
Либо вы до выхода из У вошли в вершину В, но тогда вы и выйдете из вершины В раньше, и тогда отрезок TimeSegod В вложим в TimeSegod все.
Да, доказательство на этом заканчивается.
Вот.
Ну, те ремы приятные.
Ну, на самом деле можно, конечно, с точки зрения классификации ребер можно сказать и мощнее.
Ну, во-первых, можно просто сказать.
Ну, вот.
Ну, вот.
Ну, во-первых, можно сказать так.
Первое.
Вот эти отрезки не пересекаются.
Можно даже второе сказать.
У предок В в дереве DFS.
Можно еще сказать.
Предок В в дереве DFS.
Вот.
Тогда, итог тогда, когда, ну, как вы уже догадались, когда TimeSegod У содержит в себе TimeSegod В.
Вот, можно так сказать, да.
Вот.
Так.
Так что можно даже так.
Ну, и, конечно, одна из важнейших рем, которую мы захотим на самом деле.
Значит, пусть.
Значит, УВ это ребро.
Тогда.
Значит, первое.
Значит, УВ.
Ребро.
Дерево DFS.
Ну, я так напишу.
Или прямое.
Тогда и только тогда, когда, ну, соответственно, вы уже поняли.
Когда TimeSegod У содержит TimeSegod В.
Второе.
Значит, УВ.
Обратное.
Тогда и только тогда, когда, ну, как вы думаете, что я тут напишу.
Ну да.
Когда наоборот.
Когда TimeSegod У содержится в TimeSegod В.
И, наконец, третье.
Что УВ, естественно, перекрестное.
Тогда и только тогда, когда TimeSegod У, пересеченное с TimeSegod В.
Равно.
Да, как пишется.
Ну, вот таким вот естественным образом.
Ну, логично, как еще.
Ой, а может, тут есть нормальный зеленый.
Ой, flipchart.
А то пыщ-пыщ еще делать.
Вот.
Ну, это вот, то есть, в принципе, видите, можно даже внутри DFS осориентироваться.
Ну, то есть, понятно, что в этом месте вы нашли ребро ВУ, которое ребро дерева DFS.
То есть, значит, тут пишем, то есть, пишем, да, вот тут УВ из ребро дерева DFS.
Вот.
Если нашли красное, то, соответственно, там УВ, что можно?
Вот.
То значит, оно обратное.
Вот.
Если мы воткнулись в черную вершину, то, а там, как повезет, может, перекрестное, может, прямое.
Да.
УВ.
Ну, как сказать, ну, потому что, как бы, что такое прямое ребро?
Когда мы прошлись тут DFS, мы потом прошли, ой, а мы тут были.
Так что тут придется проверять уже перекрестное.
Сатаное.
Или прямое.
Но, на самом деле, отличить прямое ребро от перекрестное ребро очень просто.
Потому что сейчас будет, сейчас я сформулирую такую, может быть, самую нетривиальную, на самом деле, лему из этих всех.
Вы же так и что отличили?
Что?
Нет.
А, ну, в принципе, ну, вот.
Но, но тот вопрос.
Отличить прямое от ребра.
Да.
Не, ну, это, ну, вот.
Не, ну, как сказать, на уровне отрезков их вы, скорее всего, никак не отличите.
Вот.
Тут будет другое.
На самом деле, важная лемма для нас, пусть это нам пригодится.
Лемма.
Пусть УВ перекрестное ребро.
Тогда я неожиданно утверждаю, что тайм-ин.
Значит, внезапно тайм-ин от У больше, чем тайм-ин от В.
Ну, да.
То есть, видите, обратите внимание, да, я не случайно нарисовал все зеленые ребра, так сказать, справа налево.
Потому что обычно очень удобно воображать себе дерево ДФС так, что как будто мы по этому дереву ДФС идем как бы слева направо.
Понимаете, да?
Так вот, и это утверждение говорит нам о том, что, оказывается, все зеленые, то есть, как бы все перекрестные ребра идут строго справа налево.
Да.
Вот, давайте подумаем, как же это доказать?
Ну.
Ну, вот можно посмотреть на эти комментарии, где у нас перекрестное, тогда когда мы встретили черную штуку.
И если мы встретили ее черную, то это значит, что она как раз таки либо была покрашена раньше внутри вызова нашего ДФС, ну, тогда это прямая игра, либо она была покрашена еще до нашего вызова.
Сейчас.
А при чем тут это?
Вот.
Если она была покрашена до вызова нашего ДФС.
Ну да, ну да.
Значит, как раз таки у нее таймлин раньше.
Ну да, ну то есть, действительно, заметим следующее, что, как бы пусть у В перекрестное, мы знаем, что их тайм отрезки не пересекаются.
Тогда возникает вопрос, кто находится левее кого?
У левее В или В левее У?
Ну, в кого мы пришли раньше?
Ну, очевидно, мы тогда раньше должны были прийти в В, почему?
Потому что если бы пришли в У, то мы бы перебирали из У ребра, наткнулись бы на В.
В у нас еще белая, потому что она белая даже на момент, когда мы в У заканчиваем.
Но почему мы тогда в нее не ходили?
Противоречие.
Так что можно даже сказать не просто таймин, а можно даже эту левму усилить и заявить, конечно, что не просто таймин больше, чем таймин от В.
А на самом деле таймин от В больше, чем тайм-аут от В.
Ну, который в свою очередь больше, чем таймин.
Это просто нам будет очень важно понимать, это нам пригодится просто.
Так что такая вот теоремочка есть.
Что нам еще важно будет понимать, пока нас не выгнали?
Ну, может быть, с этого придется, хотя посмотрим, с чем мы в следующий раз начнем.
Там, знаете, много таких простых вещей, которые придется подробно изучить.
Потому что это мы говорим об ориентированном графе.
Ориентированном графе.
А теперь мистический факт.
Да, все то же самое можно сделать и в неориентированном графе.
Но есть маленькая оговорочка.
Тоже, которую можно вынести прям тоже в левму.
В неориентированном графе нет перекрестных ребер.
Вот.
Доказательство здесь очень простое.
Потому что дело в том, что это ребро из УВ можно рассмотреть в обе стороны.
И поэтому получается, что как только мы дошли до одной вершины,
то получается, до первой вершины, то вторая обязана стать ее потомком,
потому что просто это ребро есть.
И это неважно, куда мы дошли.
Понимаете, да?
Вот.
Но получается, значит, перекрестных ребер нету.
Прям вот все перекрестных ребер нету.
Я прям зеленым их перечеркну.
Но что касается прямых и обратных ребер, тут есть маленькая оговорка.
Потому что дело в том, что прямые и обратные ребра – это примерно одно и то же.
Потому что ребро, потомка с предком, и ребро, соединяющие предка с потомком – это в неориентированном графе одно и то же.
Но теперь идея такая.
Нам очень удобно будет говорить так, что каждое ребро ДФС посмотрит два раза.
В одну сторону и в другую.
И нам иногда бывает мысленно удобно рассматривать ребро, как смотрящие в ту сторону, которую ДФС посмотрел первым.
То есть с этой точки зрения получается следующее.
А, ой, это у меня звонит.
Ну ладно, перезвоню.
Значит, идея будет очень проста.
Все, все, две минуты.
Значит, тогда получается ребра дерева ДФС удобно рассматривать как бы от корня к детям.
Но теперь заметим, что каждое вот это ребро, соединяющее потомка с предком, оно очевидно будет рассмотрено сначала потомка к предку, а потомка к предку с потомком.
Ну логично, да?
Потому что если мы уже дошли до сюда, то вот это ребро мы здесь не могли рассматривать, потому что тогда эта вершина уже была бы помечена до того, как мы в нее так шли.
Поэтому с этой оговоркой можно сформулировать так, что в неориентированном графе существуют только ребра дерева ДФС и обратные ребра.
То есть в такой терминологии очень удобно мыслить, это нам будет тоже очень сильно помогать.
Так что вот это, то есть это, пожалуй, вот такая вот база, на которую уже можно там начинать высшивать любыми там, собственно, компонентами вершины ДФС или там, я не знаю, деревом доминаторов еще какие-нибудь.
Вот, я надеюсь, до этого всего мы, собственно, в следующий раз и доживем.
Вот, ну а сейчас мы, пожалуй, на этом остановимся.
