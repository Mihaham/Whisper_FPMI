так коллеги всем доброго дня это небольшая такая лекция 9 и три четверти связаны с тем что нам
необходимо доказать корректность алгоритма р ли мы в прошлый раз с вами доказали уже корректность
в одну сторону и сегодня я решил записать видео для того чтобы мы смогли доказать корректность
в обратную сторону к сожалению которую я не смог довести и на прошлой лекции поэтому будем
считать что это у нас такая лекция 9 3 четверти давайте начнем и вспомним стол факта который мы
хотим собственно доказать итак смотрите у нас в алгоритм р ли было понятие ситуации в которой
мы говорили что у нас возможно следующая позиция мы говорили что у нас есть ситуация в алгоритме
р ли ситуация мы обычно обозначали таким образом что из правила грамматики а у нас выводится
некоторая позиция ситуация а стрелочка б и принадлежит дежитуму причем важно нам
сказать что а стрелочка альфа бета это некоторые правила грамматики которую мы с вами знаем и
мы хотим с вами доказать следующий вариант что если вдруг у нас в алгоритме р ли появилась
такая ситуация появляется такая ситуация тогда и только тогда когда существует такой вывод что
из штрих мы каким-то образом вывели первый префикс до позиции и замечу что у нас с вами вот
это и вот это и совпадают дальше идет не терминал а дальше у нас идет какая-то последность
терминалов и не терминала psi и далее мы говорим что из а мы понятно за один шаг выводим с вами
правила альфа бета потому что а стрелочка альфа бета это у нас правила грамматики и что не наесть
важное что из альфа мы вводим по слову от и того дожитого где джит и позиция у нас совпадает с этим
если мы опять же нарисуем это на картинке то мы будем получать следующий ситуация что из а
штрих мы выводим позицию от нуля до и того а си а из psi мы с вами вводим за один шаг альфа бета давайте
я буду писать внутри дерево за кое количество шагов оно выводил спустя то мы выводили за к шагов
это мы выводили за один шаг а вот это мы с вами допустим выводим за л шагов в и g и на лекции я
к сожалению неправильно сказал по кому параметру мы будем делать индукцию давайте зафиксируем
сейчас по какому параметру мы будем делать индукцию индук мы доказываем факт из нижнего верхнего
на лекции мы с вами доказали что если появляется такая ситуация то у нас существует вывод соответственно
сейчас нам нужно сделать все то же самое только в противоположном месте давайте посмотрим значит
по какому параметру у нас идет индукция индукция у нас идет смотрите внимательно
индукция у нас идет по параметру сначала идет по параметру g что не есть важно второй
параметр индукция это у нас будет l k плюс l а третий параметр индукции у нас с вами уже будет l то
есть сначала мы смотрим позицию внутри слова потом мы смотрим позицию суммы выводов из
штрих в а и из альфа в слово и потом при равенстве этих двух параметрах мы уже с вами будем оценивать
глубину вывода из альфа в w и давайте начнем значит база нашей индукции за индукции g равно нулю
l плюс k равно нулю ну из этого будет естественно следовать что l равно нулю а что это значит давайте
перепишем мы из а штрих за ноль шагов выводим слово с позиции с нулевой до иты а пси потом
за один шаг каким-то образом мы выводим правила альфа бета и потом за ноль шагов мы выводим позицию
слова от итого до житого но давайте поразмыслим если мы что-то выводим с вами за ноль шагов то
это значит что у нас ничего не меняется из этого следует из вот этой картинки у нас будет
следовать что s штрих собственно равняется v 0 и а пси поскольку а штрих точно не а штрих у нас
точно является не терминалом то из этого будет следовать что а равно и штрих потому что только
этот не терминал у нас мог находиться в этой строке из этого дальше будет следовать что у нас
v 0 и равняется нулю равняется пустому слову и из этого следует что и равно нулю это раз а второе
что мы хотим с вами показать что альфа это тоже пустое слово альфа равно пустое слово так как
g равняется нулю можно сказать таким образом а теперь давайте посмотрим внимательно во что же у
нас превращается это дерево вывода у нас в итоге вот это дерево вывода трансформируется не что
следующее что из штрих за ноль шагов у нас выводится штрих за один шаг из этого у нас могло мог
вывести столько альфа бета но у нас мы знаем что и штрих стрелочка с единственное правило
грамматики из этого следует что у нас с вами альфа б равняется с но альфа равняется эпсилон из
этого следует что б равняется с да то есть мы получаем с вами что б равняется с но тогда
давайте подумаем какое правило у нас с вами появилось теперь мы отматываем мы хотим с
вами чтобы у нас появилось правила такого вида давайте перепишем его альфа у нас это эш
а это эш а равно эш альфа равно эпсилон а б бета равно с получаем точку с запятая 0 поскольку
это и у нас с вами принадлежит но что до 0 из этого мы с вами понимаем что это у нас старт
наша алгоритма то есть мы специально эту ситуацию сразу доволяли множество
да ноль чтобы она у нас с вами была поэтому мы можем считать с вами базу индукции доказанной
теперь давайте переход а переход индукции будет состоять следующим давайте давайте
я специально скопирую правила наши которые у нас было то есть мы у нас есть вот такая вот вещь
раз два так сейчас и немножечко поправлю а все из а штрих а и рассмотрим последний символ в альфа
у нас может быть три варианта первый вариант который заключается в следующем что альфа штрих
это точнее что альфа это у нас некоторая альфа штриху нужно на альфу ой на какой-то
обычный терминал на обычную буф второй вариант это альфа равно альфа штрих на а то есть где у
нас последний символ не терминал ну и третий вариант который остается если у нас последняя
буква последний символ не буквой не является не терминал то альфа равно эпсел и давайте
внимательно смотреть я еще раз нарисую по дерево вывода потому что оно нам понадобится за
к раз мы вводим символ от 0 до 1 потом мы вводим апси потом мы за один шаг выводим альфа бета и
потом за л шагов выводим в и gt и так первый случай давайте рассматривать первый случай
смотреть значит у нас мы знаем что с вами альфа равно альфа штриха выводится за l шагов
в и т gt да а что это значит что это означает из этого сразу можно сделать не два года
во первых из альфа штрих за такое же количество шагов мы вводим символ ситова даже минус 1 а второе
что из а мы вводим в и в житая из этого следует что в житая у нас равняется а это важный факт
второй факт который у нас с вами есть что из а штрих мы выводим смотрите из а штрих мы
выводим из в 0 и апси а есть такое а из а мы выводим за один шаг тоже альфа штрих а бета но
но теперь смотрите альфа штрих альфа штрих выводят в и g минус 1 за те же самые л шагов поэтому
здесь мы по параметрам смотрите тройки какие у нас тройка g минус 1 это мы заказчиков выводим
к плюс л потому что сумма количества шагов которая у нас было здесь к плюс
и и третий параметр тоже и здесь как раз играет в переходе индукции то что мы сделали параметра
первого параметра индукции параметр g да и из этого мы можем сказать что по предположению индукции
по предположению индукции мы получаем с вами что у нас ситуация из а стрелочка альфа штрих
а точку точка а бета и лежала в ситуации даже минус 1 это раз но вторая история что у нас
а и значит из этих двух фактов из того что наша операция операция scan мы как раз и получаем
необходимую ситуацию альфа штрих а точка бета и принадлежит джитому но это собственно альфа
мы получили что а альфа точка бета и принадлежит джита все то есть в этом месте мы с вами показали
что если последний символ у нас является терминальным то мы получаем его при помощи операции
ска теперь давайте дальше перейдем к следующему пункту следующий пункт интереснее это второй
шаг это у нас операция должна получиться операция комплит то есть у нас альфа штрих альфа равно а
штрих на б давайте посмотрим у нас с вами мы знаем что из альфа мы за л шагов давайте я
опять же скопирую нашу дерево вывода чтобы было видно его я буду вот смотрите альфа штрих за
альфа за л шагов выводит в и т джитая отлично но давайте подумаем как тогда из альфа штрих
бета мы могли за л шагов вывести б в и т джитая значит а из этого понятно что мы должны сначала
раскрыть альфа не теряем а поскольку у нас вывод левосторонний мы с вами договаривались что в
у нас левосторонний вывод то значит из этого мы можем сказать что существует некоторое
существует такое некоторое м что из альфа давайте я даже скажу что м и т т это количество шагов
и вода будет м это под слово что альфа штрих внимательно выводит слово с и того по м т за
некоторое количество шагов равное т из этого можно сразу сказать что ты меньше чем л отлично
теперь давайте подумаем что у нас происходит с б с б важно сказать что б раскрывается по некоторому
правилу грамматики и у б выводит гамма и то за один шаг он вводит так и только потом за
количество шагов давайте посчитаем сумми х это у нас т в сумме х это этот шаг т это один шаг
такой значит за м минус за л минус т минус один шаг мы с вами выводим в м gт
теперь давайте собирать все в цепочку давайте я сейчас наверное опять же это дерево немножечко
мы сделаем для него вот для вот этого дерева итак смотрите я немножечко его перерисую
значит альфа штрих то есть альфа у нас смотрите теперь становится альфа штрих бета раз теперь
за т шагов мы получаем здесь в и м за один шаг мы получаем с вами гамму и за л минус т минус
один шаг мы получаем в м gт вот такое вот продвинутое дерево появилось и теперь давайте посмотрим
напишем тут два свойства которые нам в итоге позволят сделать операцию комплит смотрите
первый раз значит давайте я покажу вам под деревья под которым мы будем писать это все а первое
под деревья это вот такое вот раз и вот этот вот кусочек два что мы имеем мы имеем что из
штрих за к шагов за к шагов мы выводим в нули апси и за из альфа штрих мы за т шагов выводим
в и м в итоге для пары для тройки м запятая к плюс т и т мы имеем по предположению индукции
что следующая ситуация а стрелочка альфа штрих точка альф б бета и принадлежит dm это раз
дерево которое нас интересует а вот теперь смотрите внимательно второе дерево которое
нас интересует оно интересней это дерево вот такого вот типа давайте я покажу нет плохо обвел
вот оно вот это дерево у нас интересно значит давайте напишем внимательно тут нужно это все
аккуратно проделать значит смотрите и за штрих мы выводим за какое количество шагов сейчас мы
посчитаем в 0 м б бета си дай читать количество шагов здесь количество шагов к здесь 1 т то есть
у нас здесь к плюс т плюс один шаг мы получаем этот вывод и из гаммы мы с вами за л минус т
минус один шаг выводим в м gt да при этом у нас б стрелочка гамма правило нашей грамматики и из
этого предположения из этой штуки по предположении индукции но для параметра смотрите g потом у нас
параметры идет с вами а к так стоп давайте скобочку беру к плюс т плюс один плюс л минус
т секундочку к плюс л плюс а л минус т минус 1 я немножечко замельчил л минус т минус 1
а выводится и и давайте треть параметр который нам важен л минус т минус 1 давайте сравним его
с парой g к и каплю селько то точнее g каплю селье мы замечаем что вот это слагаемо у нас равняется
вот этому слагаемо а вот это слагаемо меньше чем вот этот слагаемо поэтому мы с вами вправе
осуществить индукционный переход и какой же у нас вами получается b стрелочка гамма точка m принадлежит
дожитому я его введу это раз но то есть это давайте я даже помечу что это у нас с вами было
зеленое дерево а вот это у нас вами красный дерево мы разбирали итак вы смотрите что у нас
получается у нас получается что из аст альфа точка бета и предложить дм а здесь тот же самый
индекс но он совпадает и здесь мы правила заканчиваем из этого мы можем сказать что применяя комплит
мы получаем следующую вещь что у нас правила а стрелочка альфа штрих бета точка бета и
принадлежит дожитому но опять же вспоминаем что это у нас с вами альфа покажу значит получаем
альфа и индукционный переход у нас вами доказан в этом случае то есть идея рассмотреть одно
правило вглубь да то есть как посмотрим как бета у нас раскрывалась теперь мы с вами для
разбора третьего случая в котором альфа у нас вами пустое слово сделаем ровно то же самое только
наоборот мы возьмем альфа который раскрывается пустой символ и посмотрим как оно вывелось давайте
это сделаем и так третий случай альфа равно пустому слову так и в итоге смотрите здесь мы
даже не будем с вами раскрывать дерево внутрь нам это не интересно раскроем сразу дерево с
наружу давайте я сначала перепишу оригинальное дерево в нулевой и а си и только после этого
у нас за один шаг раскрывается сразу бета да то есть тут у нас количество шагов равное нулю давайте
поймем как этот правило было получен для этого рассмотрим как получилось а
как мы могли получить а ну давайте напишем что а могло получиться применив какое-то правило
принадлежащие грамматике в итоге значит у нас получается такая цепь и за штрих мы выводим
некоторый контекст который нам важен давайте я напишу что мы должны выводить в 0 м поскольку
у нас вывод левосторонний мы должны были сначала раскрыть какое-то количество правил потом мы
раскрываем правила б и у нас появляется контекст фи си штрих это раз давайте предположим что мы
это сделали за те шагов да то есть вот это вот это и вот это у нас вами предположение
предположение потом за один шаг мы раскрываем с вами правила грамматики то есть мы пишем что
это в 0 м гамма а дельта си штрих да потом нам нужно потратить какое-то количество шагов для
того чтобы раскрыть гамму потому что у нас вывод левосторонний и мы раскрываем с вами гамму то
есть у нас получается в 0 м в м г а дельта си штрих при этом давайте посчитаем за какое количество
шагов мы выводим гамма м г м г если смотрите в сумме нам дается к операции то есть вот эта
операция плюс вот эта операция плюс эта операция дает сумме к действий то вот это действие мы
выполняем за к-т-1 шаг ну теперь давайте смотреть еще раз нарисую дерево то есть вы наверное даже
не надо рисовать давайте все-таки нарисуем чтобы было понятно то есть у нас получается с вами что
с штрих за к-т за т шагов вывел в 0 м б си штрих потом за один шаг мы выводим гамма альфа дельта
потом за камен к-т-1 шаг мы с вами выводим в мг т и теперь смотрите какие правила мы
можем с вами применить для перехода к индукции значит это раз и вот это два то есть вот этот
кусочек что из гаммы мы выводим вот теперь смотрите что мы получаем мы получаем с вами что
давайте еще раз перепишем это все что из штрих за т шагов мы выводим в 0 м б си штрих потом из гаммы
за камен ст-1 шаг мы выводим в мг и теперь смотрите внимательно за как какое предположение индукция
у нас с вами работы для какой тройки здесь тройка g но она собственно у нас не меняется здесь нам
нужно сложить количество 10 которые было здесь и здесь это к плюс так давайте я напишу вот так
т плюс камен ст-1 и здесь у нас количество шагов равное камен ст-1 сравним с тем что мы
хотим получить тем что мы хотим у нас базе g количество шагов здесь внимательно капли с
0 шагов потому что из альфа пустое слово вводится за ноль шагов и здесь у нас количество шагов
и замечаем что вот эту штучку у нас с вами равняется к-1 а вот эта штучка равняется
к поэтому мы можем сделать предположение индукции то есть по предположение индукции у
нас получается что правила b стрелочка гамма точка альфа дельта и давайте посмотрим м принадлежит
раз раз отлично то есть это у нас правила есть а теперь второй факт который нам с
вами нужен это то что а стрелочка бета у нас лежит грамматики из этого получается что у нас с
вами альфа стрелочка точка бета g ой точка смотрите я тут ошибся давайте я немножечко
подправлю здесь у нас везде позиции не джи ты а и ты были но тут у нас везде и равно g поэтому
мы с вами могли бы применять как это и так и g давайте я тут и равная g здесь тоже и равная g то
есть у нас получается с вами альфа стрелочка точка бета g принадлежит джитому да а теперь
смотрите это у нас работает по правил предикт по правил предикт а смотрите что мы хотели с
вами получить мы хотели с вами хотели что из а стрелочка epsilon точка бета и тут важно понять что
на самом деле мы хотели g принадлежит джи так как и равно g ну собственно мы это правила и с вами
и получили таким образом давайте мы с вами еще раз подытожим что у нас получилось у нас с
вами получилось что мы доказываем переход индукционный с смотрим по последнему символу
который у нас получается из альфы они из альфы побывается не терминал терминал тогда это у нас
правила scam а это у нас правила complete а epsilon это правила предикт кем образом рассмотрев три
случая тут надо очень аккуратно где-то просто посмотреть внимательно где-то нужно было посмотреть
как мы раскрываем этот не терминал а где-то посмотреть как мы получаем этот не терминал таким
образом мы теперь с вами можем сказать что индукционный переход в итоге доказ вот теперь
давайте мы с вами немножечко с вами поговорим по тому какая у нас с вами сложность алгоритма
потому что я тоже немножечко замял это этот момент в лекции и хотелось бы его дополнительно
рассказать сложность алгоритма и так смотрите значит мы поняли с вами что нам надо каким-то
образом эффективно хранить ситуации альфа давайте предположим что у нас какой-то символ тут x стоит
причем x у нас может быть трех типов альфа x точка б и т принадлежит дежит значит дежит мы
будем с вами хранить массиве то есть у нас получается д а джит и будем хранить позицию x которая
здесь есть и здесь у нас будет получаться будут лежать все правила вида альфа x точка бета и и то
есть вот такие все-таки ситуации у нас будут лежать допустим тут что могли быть какие-то наборы
ситуации а теперь давайте внимательно оценим чему может быть x район то есть у нас может быть x это
сейчас секунду давайте напишем вот так все-таки на вот так то есть следующий все-таки символ нам
нужно уметь стрекать следующий символ вот так вот у нас может быть три варианта x равно а где
а это символа фавита x равно а где а это некоторые не терминал да тут дублирование понятия но я
думаю понятно что это другие а и третье это x это символ конца слова и в принципе тогда мы
можем достаточно эффективно с вами обращаться для того чтобы делать операции там скан предик
комплит почему смотреть значит тут что мы можем сразу сказать давайте правила будем хранить тоже
таким образом то есть у нас g от а будет хранить все правила начинающиеся
с а то есть это правило вида а стрелочку бета теперь смотреть что получается значит операция
скан как у нас работает нам нужно взять на самом деле если у нас в gt равно а то нам надо просто
взять d получается gt и а и просто передвинуть все символы и пут в д g плюс 1 но надо для каждого
правила уметь эффективно смотреть на следующую на следующий символ я думаю если это реализовать
в классе грамотно в классе в виде массивчика там в виде списка это спокойно можно сделать за вот
и не все время поэтому мы сразу с вами понимаем что эта операция нам с вами обходится за о
мощность количества правил грамматики давайте вот так напишу потому что нам надо просто взять
взять смотрите все все позиции а и эффективно перебирать только не давайте вот так напишу что
это все-таки будет мощность вот такая d gt а т то есть это количество символов которые у
нас с вами находятся потом мы будем детальнее разъяснить а теперь смотрите операция предикт
что мы хотим с вами операции предикт напоминаю что у нас есть а стрелочка альфа точка
b бета и принадлежит дожитое и бета стрелочка гамма принадлежит правил грамматики то есть
нам надо посмотреть с вами в д житое b и g b ну и тогда мы эффективно с вами это достаточно все
опять и комплит что у нас с вами получается здесь а стрелочка альфа точка бета бета
к принадлежащий некоторым дитому здесь б стрелочка гамма точка и принадлежит джитому нам надо
эффективно трекать все такие позиции ну давайте смотреть здесь у нас это множество получается
d и бета d и b а здесь у нас получается с вами d g доллар то есть это символ конца слова то есть
все такие штуки мы можем с вами эффективно трекать а давайте оценим чему равняется чему
у нас асимптотика о джитом мощность джитов равняется утверждение что это g плюс один умножить на модуль
гамма где модуль гамма это сумма всем всех длин всех длин правых частей правил
да действительно почему это так потому что на самом деле в у нас любое правило а стрелочка
альфа точка бета и которая лежит в джитом здесь и меняется от нуля даже а точку можно поставить
любезде в о от g местах вот отлично теперь давайте оценим сверху скан в итоге у скана
асимптотика получается у нас вами о от модуль джит это сверху то есть это о большое а давайте
оценивать достаточно в тупую это модуль модуль вена модуль же я думаю что здесь можно точнее
поставить посмотреть на самом деле те правила в грамматике в которых у нас есть символ а то
есть на самом деле здесь можно даже написать что это будет не давайте не будем оценивать
давайте просто скажем что это вот такая величина тут пока что точнее не хочется
оценивать теперь давайте посмотрим в операцию предикт что у нас вами происходит в операции
предикт значит тут мы можем с вами сказать что у нас добавляется правила б стрелочка
б б стрелочка точка гамма g принадлежит джитом да то есть давайте даже точнее скажу что мы должны
посмотреть еще и правила а стрелочка альфа точка б бета и принадлежащие джит но давайте
подумаем за какое время мы можем с вами осмотреть все такие множество но у нас с
вами тут перебирается во первых и то есть у нас здесь и перебор и вот эти все точки тоже
перебираются мы в итоге мы с вами получаем о большое от модуль джитого ну что сверху мы
тоже можем оценить как у большой от модуль гамма модуль гамма и осталась операция комплит тут
самое интересное смотрите значит здесь нам нужно смотреть значит во-первых нам нужно посмотреть
в джитая доллар это раз здесь у нас каждый джитая доллар указывает на некоторую позицию и и
выплевывает некоторую пару терминал б раз а здесь мы потом смотрим в д и т бета ну давайте
прикидывать а сколько у нас тут получается значит здесь в правиле и джитая я могу с вами
сказать точно что это будет вот так вот такие вот вот эту мощность вот этого множества у нас
состоит с вами о большое от количества правил грамматики да потому что у нас точка всегда
стоит в конце умножить на g ну на модуль g плюс один тут давайте скажу потому что и у нас
может пробегать любые позиции вот а вот здесь у нас вами уже получается интереснее потому что
позиции и позиции б то есть тут вот здесь вот у нас еще с вами может добавиться о большое от модуль
потому что у нас ну по сути это здесь у нас вами идет оценка сверху и тут нужно очень аккуратненько
все по все соответствие поставить причем смотрите внимательно это вот такая важная особенность
что по сути здесь для каждого вот эту вот штуку мы можем избавиться то есть давайте напишу
точнее симптотику это получается от модуль п на мощность д0 потому что если мы указываем и равное
нулю то мы получаем что мы переходим на что д0 нам надо оценить эту штуку плюс количество правил
на модуль д1 плюс и так далее плюс количество правил умножить на мощность множество дежитая
ну и тогда смотрите что у нас получается о большой от мощности количества правил умножить на длину
слова давайте сверху оценим количество g сверху длиной слова умножить на мощность дежитого это
получается длина слова w на количество правил грамматики на количество правил грамматики
ну на суммарном количестве правой части правил как мы обозначили модуль g ну и это получаем мы с
вами о большое от модуль v в квадрате на модуль g в квадрате и так о заметьте что мы это дело для
каждого g поэтому итогов у нас асимптотика алгоритма получается с вами о большое от модуль
v в квадрате модуль v в кубе точнее на модуль g в квадрате вот то есть алгоритм является не очень
эффективным но если точнее посмотреть оценки асимптотик и заметить что на каждой на каждой
стадии мы не делаем мы добавляем не более чем c правил если
то асимптотика будет
будет уже о большое от количества слов в квадрате там на эту константу домножим
вот при этом считаем всегда что количество правил грамматики либо суммарная часть правой
суммарная длина всех правом числе грамматики это константа потому что на самом деле все
этой истории происходит на стадии компиляции если вы посмотрите и дадите какие-то комментарии по
этой части будет отлично вот ссылочку на доску я прикреплю в комментариях всем спасибо
наша лекция 9 и 3 четверти подождать к концу буду ждать вас всех на следующих лекциях
