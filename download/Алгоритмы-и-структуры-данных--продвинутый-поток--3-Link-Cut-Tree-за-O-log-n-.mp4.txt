[00:00.000 --> 00:09.600]  А, отлично. А, стало быть, вы просто прошлую лекцию
[00:09.600 --> 00:18.800]  уже слушали. Окей. Последний час. А что ж там было-то?
[00:18.800 --> 00:26.520]  Да-да-да-да. Вот. Но, впрочем, забавно. Да, более того,
[00:26.520 --> 00:32.520]  может показаться, что мы, на самом деле, начнем сегодня
[00:32.520 --> 00:36.840]  с задачи, которая вот эта вот ХЛД за логарифом радостно
[00:36.840 --> 00:43.720]  сможарирует. Потому что мы сегодня будем заниматься
[00:43.720 --> 00:49.320]  изменяемыми деревьями. А именно. То есть, нашлутка
[00:49.320 --> 00:52.480]  ХЛД. ХЛД – это структура данных, которая говорит,
[00:52.480 --> 00:55.880]  что дерево фиксировано. Там в каждой вершине, ну
[00:55.880 --> 00:58.320]  или там в другой модификации на каждом ребре написаны
[00:58.320 --> 01:01.240]  там какие-то чиселки. И мы хотим делать какие-то
[01:01.240 --> 01:05.960]  операции на путях. Ну, какие операции? Там присмаивание
[01:05.960 --> 01:09.040]  на отрезке, прибавление на отрезке, сумма на отрезке.
[01:09.040 --> 01:13.400]  В общем, все, что умеет деревоотреск. Вот. Мы в прошлый раз научились
[01:13.400 --> 01:17.120]  все эти операции делать за логарифом. Да, ну, точнее,
[01:17.120 --> 01:19.960]  залог, как-то делать залог квадрат. В принципе, это
[01:19.960 --> 01:22.200]  стандартный хавилайд и композицию. Но если правильно
[01:22.200 --> 01:25.280]  допилить, можно и за логарифом. Там нужно ли это реально
[01:25.280 --> 01:28.040]  делать на какой-нибудь практике – это иногда философский
[01:28.040 --> 01:33.280]  вопрос. Но, тем не менее. Вот. Ну, вот. Но сегодня мы
[01:33.280 --> 01:40.360]  себе поставим цель помощнее. Значит, мы будем говорить.
[01:40.360 --> 01:46.680]  Так. Мы будем говорить. Так. Так, отлично. Мы будем
[01:46.760 --> 01:51.880]  говорить со стираемым маркером. Это хорошо. Так. Ну, знаете,
[01:51.880 --> 01:53.960]  это все-таки удобно, когда ты что-нибудь не то сказал,
[01:53.960 --> 01:57.240]  быстро стер и никто ничего не заметил. Вот. Значит,
[01:57.240 --> 02:01.880]  сейчас представим себе, что у нас есть дерево. И даже
[02:01.880 --> 02:06.080]  не одно. Такое тоже бывает. Да-да-да.
[02:06.080 --> 02:12.560]  А целый борщ? Не-не-не. Это не борщ. Нет, это не борщ.
[02:12.560 --> 02:14.880]  Ну, то есть на ребрах могут быть буковки, конечно. Они
[02:14.880 --> 02:19.200]  могут быть даже случайно различаться, но не обязательно.
[02:19.200 --> 02:27.800]  Вот. И мы будем хотеть что-нибудь с этим сделать. В роли чего-нибудь
[02:27.800 --> 02:36.480]  выступают, конечно, все те же операции. Ну, там в каждой
[02:36.480 --> 02:39.160]  вершине, естественно, что-нибудь написано, поэтому все еще
[02:39.160 --> 02:42.840]  будет хотеться выполнять там всякие операции. Сумма
[02:42.840 --> 02:49.160]  на подотрезке, прибавить на подотрезке, ну или там
[02:49.160 --> 02:57.360]  присваивать все что угодно. Вот. Но основная фишка будет
[02:57.360 --> 03:00.440]  заключаться в том, что, конечно же, деревьев будет несколько,
[03:00.440 --> 03:07.960]  и для некоторых вершин надо бы определять, а в одном
[03:07.960 --> 03:15.360]  ли они деревья лежат. Ну, казалось бы, пока элементарно
[03:15.360 --> 03:17.640]  напишите ХЛД на каждой компоненте связанности,
[03:17.640 --> 03:24.120]  его зрадуетесь. Но увы. Называется, да, всю эту
[03:24.120 --> 03:27.680]  идиллию нарушают, собственно, две основные операции,
[03:27.680 --> 03:43.080]  которые нам до жути интересны. Линк от УВ и кат от УВ.
[03:43.080 --> 03:50.320]  Что это за операция? Операция говорит следующее, что
[03:50.320 --> 03:56.480]  жила была вершина В, которая была корнем там своего
[03:56.480 --> 04:11.400]  какого-то дерева, корнем. И жила была вершина У. Да,
[04:11.400 --> 04:13.960]  причем это была не обязательно корень, это была вершина.
[04:13.960 --> 04:19.760]  Это В тоже не обязательно корень? Что? Нет, В, как раз, обязательно
[04:19.840 --> 04:30.160]  корень. Нет, нам сейчас принципиально. Нет, как, конечно, мы узнаем,
[04:30.160 --> 04:33.920]  да, ну, вот там вот какое-то дерево, за что-то там подвешено
[04:33.920 --> 04:41.120]  куда-то там. И что делает операция Линк? Операция
[04:41.120 --> 04:44.080]  Линк объявляет, что В больше не корень, а его родителем
[04:44.080 --> 04:46.880]  является вершина У. В общем, короче, навесили на вершину
[04:46.880 --> 04:58.320]  У новое по дереву. Вот. Это делает вот это новое ребро
[04:58.320 --> 05:10.000]  и добавляет операция Линк. Вот. А операция кат, наоборот,
[05:10.000 --> 05:15.000]  говорит, что жила было ребро УВ. И не просто ребро, а У был
[05:15.040 --> 05:22.040]  родителем В. У был родителем В. И тогда мы это ребро убиваем.
[05:22.360 --> 05:31.360]  А В объявляется корнем своего под дерево. В общем, все,
[05:31.360 --> 05:36.200]  как в хейлайте, только дерево меняется. Ну, и чтоб нам было
[05:36.200 --> 05:41.920]  совсем удобно, мы, конечно, еще и говорим, вводим такую
[05:41.920 --> 05:48.920]  функцию, которую мы почему-то называем Эверт от У. Вот.
[05:50.280 --> 05:53.440]  По мистической причине слайтеры итальян ее называют
[05:53.440 --> 06:00.440]  Эверт. Хотя в реальности, конечно, более точно говорит
[06:00.960 --> 06:07.960]  о том, что она делает такое название как Make Root.
[06:08.640 --> 06:15.640]  Ну, а в статье слайтер итальяна существует. Ну, словосочетание
[06:19.560 --> 06:26.560]  Make Root, да. А, ну. Нет, это название функции, конечно.
[06:26.560 --> 06:30.920]  Ну, не важно. В общем, суть одна. Суть одна. Мы тычем
[06:30.920 --> 06:35.200]  носом вершину говорим ты. Теперь ты корень прерыва.
[06:35.200 --> 06:40.440]  Ну, у меня же там были какие-то родители, теперь они твои
[06:40.440 --> 06:45.440]  потомки. Да, нет. Не то, чтобы для нас это новость,
[06:45.440 --> 06:48.780]  в общем-то. То есть, мы уже в ВВЛ как-то этими поворотами
[06:48.780 --> 06:51.620]  занимались. Помните, у нас там уже дедушка нашим внуком
[06:51.620 --> 06:55.560]  там уже становился. Это нормально. Ну, вот. Ну, а здесь мы просто
[06:55.560 --> 07:01.520]  говорим. Теперь говорит, да, у тебя большая родословная.
[07:01.520 --> 07:07.180]  Ну, теперь ты родоначальник рода. То есть, там просто
[07:07.180 --> 07:13.560]  переворачивается все. Нет, что значит конкретно? Ну,
[07:13.560 --> 07:17.640]  пока не какие. Ну, просто смотрите. Что такое корневое
[07:17.640 --> 07:22.640]  дерево? Это дерево, у которого одна вершина объявлена корнем.
[07:22.640 --> 07:37.880]  Да. Ну, это другое. Ну, структура особо не изменилась. Заметьте,
[07:37.880 --> 07:40.120]  что с точки зрения вот этих операций не поменялась
[07:40.120 --> 07:45.760]  на самом деле вообще ничего. То есть, самому по себе
[07:45.760 --> 07:49.240]  определение этих операций, кто является корнем, вообще
[07:49.240 --> 07:56.160]  хоть бы хлыть. Точно. Да, да, да, да, да. У нас же специально
[07:56.160 --> 08:03.680]  есть, конечно, такая операция, как лцаатовая. Да, действительно.
[08:03.680 --> 08:07.000]  И вот с лца, да, и вот действительно с лца у нас повеселее. Да,
[08:07.000 --> 08:11.360]  как-то. Потому что понятие лца жутко зависит от того,
[08:11.360 --> 08:16.800]  кто у вас в дереве корень. Логично, да? Ну, да. Ну, да.
[08:16.920 --> 08:18.600]  Формально определение, конечно, понятно, что корнем
[08:18.600 --> 08:21.040]  объявляем вот эту вершину. Значит, все ее соседи, это дети
[08:21.040 --> 08:23.720]  корня, соседи-соседи, внуки корня там, ну, собственно,
[08:23.720 --> 08:28.280]  и так далее. Ну, я могу еще там по мелочи накидать
[08:28.280 --> 08:34.440]  там всякие вот эти операции типа ИСПЭРАНТ у ЭТОМ. Хотя,
[08:34.440 --> 08:39.160]  в общем-то, она прекрасно сводится к, например, лца. Ну,
[08:39.160 --> 08:45.640]  как это, да. Как это называется? Как доказать, что это мой предок?
[08:45.640 --> 08:49.120]  Ну, отлично. А давай мы с тобой лца найдем. Да, если это ты, значит,
[08:49.120 --> 08:55.880]  ты мой предок. Если нет, нет. Все логично. А, ну, ну, кстати,
[08:55.880 --> 08:59.640]  это тоже можно. Ладно. Да, ну, важнее, конечно, из Ancestor.
[08:59.640 --> 09:07.800]  Да, спасибо. И из Ancestor. Ancestor.
[09:07.800 --> 09:21.400]  А теперь, ну, вот, значит, шо-шо-шо-шоу. Вот. Ну, вот, примерно такие операции.
[09:21.400 --> 09:26.120]  Ну, там можно накидать еще каких-то. Так. Ну, и спрашивается,
[09:26.120 --> 09:29.000]  за сколько мы хотим такие операции реализовывать?
[09:29.000 --> 09:38.120]  За ОАТН, да? А, типа, чтобы не думать вообще, да? Нет, в принципе, да. Заметим,
[09:38.120 --> 09:43.440]  что мы можем, конечно, все… Если мы говорим, что там время ОАТН на одну операцию для нас
[09:43.440 --> 09:47.120]  приемлемо, то, в общем-то, реализовать эти операции – дело не самой сложной техники.
[09:47.120 --> 09:54.440]  Да даже честно можно за ОАТН. Нет, как бы нормально переповесили корень,
[09:54.520 --> 10:03.000]  давайте все там запускаем ДФС за линию, вычисляем там все, что нужно. ЛЦАВ тупую вычисляем там. Ну,
[10:03.000 --> 10:06.680]  да, потому что поменяю, у нас вообще нет этой мистической штуки, которая вычисляет,
[10:06.680 --> 10:13.240]  которая там берет фиксированное дерево за ОАТН, делает предподсчет, а потом за ОАТН вычисляет
[10:13.240 --> 10:22.120]  ЛЦА везде. Нет, это у нас сегодня все будет, но позже. Но пока… Называется этих четырех мы пока
[10:22.120 --> 10:30.400]  поминать не будем. Ну, попробуем тут. Ну, это если вот, конечно, ОАТН, да, можно не заморачиваться,
[10:30.400 --> 10:39.640]  а побыстрее. Да, как бы это можно побыстрее? Давайте лоб квадрат. Лоб квадрат. Нет, ну,
[10:39.640 --> 10:44.080]  как сказать, первая мазерала чечниш. Ну, как-то даже вот интересно подумать, а можно ли как-то
[10:44.080 --> 10:49.280]  быстро придумать так, чтобы вот не заморачивать, нет, какие там сильные доказательства, придумать
[10:49.280 --> 11:00.440]  структуру, которая делает это все за корень. Поддосранно. Кроневая декомпозиция, да. А как
[11:00.440 --> 11:10.560]  ее сделать, особенно с этими операциями? Ну, а в этом смысле кроневая? Мне кажется, что ей туда
[11:10.560 --> 11:20.400]  особо нет уменьшаться. Ну, мало ли. Можем каждое дерево хранить его, короче, обход, обход,
[11:20.400 --> 11:31.200]  тогда она будет сделать этот… Если мы по идее, можем же как-то преобразование в дереве это
[11:31.200 --> 11:35.760]  адекватно сделать? Если мы хотим. Это делается легко, в смысле, вопрос только как смысл. Да,
[11:35.760 --> 11:40.400]  прикол в том, что окей, если мы делаем обход, мы умеем делать все из этого, кроме запросов на пути.
[11:40.400 --> 11:52.240]  Да. Нет, ну не совсем, смотрите. Заметьте, что напоминаю, запросы на пути, в общем-то,
[11:52.240 --> 11:58.200]  она абсолютно не использует, кто корень. То есть поэтому там напрашиваются читы в духе, давайте у
[11:58.200 --> 12:03.360]  нас будет тот корень, который мы для себя внутри храним, есть тот корень, который мы типа сообщаем
[12:03.360 --> 12:11.520]  пользователю. То есть там такие читы могут быть. Ну нет, ну как сказать, нет, ну это вопрос
[12:11.520 --> 12:23.120]  интерпретации, нет. Ну, как бы, нет, что мы сообщаем пользователю надо, пользователю надо
[12:24.120 --> 12:33.800]  вот эти вот методы. Вот, но это как бы не то, чтобы сильно страшно. Вот, но действительно, что тут
[12:33.800 --> 12:38.680]  можно вообще сделать? Ну, действительно, даже корень не корень, а действительно, конечно, стоит
[12:38.680 --> 12:45.760]  упомянуть, конечно, такой классический метод называется как Эллеров обход. И каю, конечно,
[12:45.760 --> 12:52.720]  от этого названия, потому что на самом деле Эллеров, как бы, на самом деле так, Эллеров там,
[12:52.720 --> 12:56.480]  знаете, на каком-то экзамене я могу спокойно сказать, какой Эллеров обход. Не надо мне
[12:56.480 --> 13:03.680]  впаривать чушь, Эллеровых обходов в деревьях не существует. Точнее так, утверждение, если в
[13:03.680 --> 13:13.320]  дереве есть Эллеров обход, то это дерево называется как? Совершенно верно, это бамбук. Да, да, нет,
[13:14.200 --> 13:18.360]  я знаю, что по идее в этом имеется в виду, но вообще, формально говоря, то есть, давайте,
[13:18.360 --> 13:22.720]  то есть, помните, да, чтобы там вот, как бы, недоразумений не было, чтобы вас там это,
[13:22.720 --> 13:31.160]  это мне не сошли, чем-то там вот очень странными людьми. Значит, да, помните, что официальное
[13:31.160 --> 13:37.640]  определение Эллерового обхода следующее. То есть, дан граф, не дерево, а прям вот граф, там неважно,
[13:37.640 --> 13:44.640]  там можно ориентированным, можно неориентированным, неважно. И Эллеровым обходом в нем, там Эллеровым
[13:44.640 --> 13:51.720]  путем в нем, называется путь, который по каждому ребру проходит ровно один раз.
[13:51.720 --> 14:01.200]  Погоди, тихо, спокойно, да, и вот я, я все это аккуратно проговариваю, понимаю, что там почти все
[14:01.680 --> 14:10.240]  это все прекрасно знают, но я просто, как бы, хочу просто провести границу. Спокойно. Вот, то есть,
[14:10.240 --> 14:14.920]  как Эллеров путь, это путь, который проходит по каждому ребру ровно один раз, но при этом по
[14:14.920 --> 14:25.880]  вершине он может проходить там сколько угодно раз. И там дальше, ну да, ну не совсем там,
[14:25.880 --> 14:31.480]  в неориентированном графе там пополам плюс один, там что-то такое. Вот, но не будем там уже сейчас
[14:31.480 --> 14:36.720]  придираться. Вот, я думаю, что там, думаю, в свое время, когда мы будем изучать такую продвинутую
[14:36.720 --> 14:43.220]  технологию, как ДФС, ну вот, собственно, мы, конечно, об этом поговорим подробнее. А тут, как показывает
[14:43.220 --> 14:48.600]  практика, что-то так простой алгоритм поиска Эллерова пути за линию, как-то почему-то могут знать не все.
[14:48.600 --> 14:58.920]  Ну как сказать, интуитивно, ну как сказать, а дерево отрезков это интуитивно? Ну, не знаю. Ну,
[14:58.920 --> 15:04.200]  скажем так, я не знаю, скажем так, интуитивно в каком плане? Я не уверен, что я там могу прям, думаю,
[15:04.200 --> 15:08.640]  что там дерево отрезков и тоже, а, ну да, это я в детстве в 8 классе сам придумал, там это все понятно,
[15:08.640 --> 15:13.120]  вот мне не знаю. Вот для меня вот что-то подобное может быть интуитивным, например. То есть, в этом
[15:13.120 --> 15:18.560]  смысле алгоритма Эллерова обхода, да, да, не интуитивен, но называется он, по-моему, называется
[15:18.560 --> 15:23.520]  вряд ли сложнее того же дерева отрезков. Вот, но, впрочем, доживем, там в ДФС на самом деле магии
[15:23.520 --> 15:29.040]  много будет, на самом деле, можно будет увидеть, почему это реально продвинутая технология. Вот,
[15:29.040 --> 15:36.040]  значит, вот, значит, поэтому, ну вот, но, действительно, пока вот известен факт, что в таком виде Эллеров
[15:36.040 --> 15:40.080]  обход существует вообще не во всех графах, более того, очевидно, что в дереве он может существовать,
[15:40.080 --> 15:45.960]  только если дерево бамбук. Ну, просто потому, что если у вас тут вот шли-шли-шли, у вас тут
[15:45.960 --> 15:50.640]  развилка. То есть, пойдете в одно под дерево, все, больше не вернетесь, потому что вы по этому ребру
[15:50.640 --> 15:59.720]  ходить не можете. Вот. Вот, но, действительно, но, но, действительно, есть понятие просто на уровне
[15:59.720 --> 16:07.320]  лайфхака. Действительно, как это Эллеров обход применить в дереве? Применяется оно, действительно,
[16:07.320 --> 16:13.080]  простым образом. Давайте просто мысленно себе вообразим, что у нас каждое неориентированное
[16:13.080 --> 16:22.800]  ребро вот это в дереве, это на самом деле такие два ориентированных ребра. Тогда, как легко обнаружить,
[16:22.800 --> 16:33.040]  Эллеров обход, конечно же, существует. Более того, на самом деле, когда мы искали в прошлый раз, вот,
[16:33.040 --> 16:40.640]  сводили задачу Эллцак с задачей РМК. Помните, да, вот, занимались мы этим в прошлый раз, да? Вот. На самом деле,
[16:40.640 --> 16:44.800]  то, что мы, вот, что мы делали, мы запускали ДФС, и каждый раз, когда мы приходим в какую-то вершину,
[16:44.800 --> 16:49.480]  мы ее записываем. В чем не важно, мы проходим сверху или снизу. Ну, еще, вот, корни в начале
[16:49.480 --> 16:53.960]  записываем. На самом деле, то, что мы записывали, это на самом деле и называется Эллеровым обходом.
[16:53.960 --> 17:10.160]  На самом деле. Ну да, мы это называли, ну да, мы это называли инордером обходом. Да, такая вот, да,
[17:10.160 --> 17:16.880]  мы называли инордером обходом. Не преордер, это когда вершина выписывается один раз, причем
[17:16.880 --> 17:23.360]  непосредственно перед своими потомками. Постордер, это когда выписываются все потомки, потом вершина.
[17:23.760 --> 17:29.520]  А мы, нет, а у нас, нет, а вот это такая модификация инордера. Ну, исходно у нас инордер был в двоичном
[17:29.520 --> 17:36.520]  дереве, где мы работали по принципу, сначала левая понтира, потом я, потом правая. Да. Не-не-не,
[17:36.520 --> 17:41.240]  ну я бы сказал так, ну, ну, можно сказать и так, и преордер, и постордер, и везде между инордер,
[17:41.240 --> 17:46.800]  пользуясь тем, что есть тут много детей, значит много раз выписываем, окей, да, да. Вот. Но это был,
[17:46.800 --> 17:52.360]  теперь у нас, ну, теперь есть вот Эллеров, вот это Эллеров обход. Ну, чем приятен это Эллеров обход?
[17:52.360 --> 18:00.560]  Это Эллеров обход приятен. Вот, давайте мысленно себе вообразим, что, допустим, вот этих, что у
[18:00.560 --> 18:08.400]  нас, ну, временно себе вообразим, что всяких вот этих операций типа поменяй мне корень, нету. Вот,
[18:08.400 --> 18:16.440]  можем себе такое вообразить? Ну, можем, чего бы нет. Тогда возникает, тогда вот возникает вопрос,
[18:16.600 --> 18:29.640]  как вот это все делать? Ну, или хотя бы что-то из этого. Так как у нас шоу. Вот. Тогда просто идея
[18:29.640 --> 18:35.640]  такая, вот, например, вот, хочется нам в онлайне делать линк, делать кат и делать, ну, хотя бы
[18:35.640 --> 18:45.400]  Эллса. Ну, хотя ладно, не хотя бы даже, а вот Эллса и вот этих вот наших друзей. Как же это делать?
[18:45.400 --> 18:55.400]  Ну, давайте вспомним. Ну, вот, давайте вспомним. Эллеров обход хранили, помните, в виде вот такой
[18:55.400 --> 19:07.680]  мистической последовательств. А, Б, С, А, Б, С, Б, там, Д, Е, Ф, Е, там, Ж, там, Е, Д, там, Б, там, А, там,
[19:07.680 --> 19:19.280]  что там еще может быть? А, Ж, К, Ж, А, ну и так далее. Ну, мы как бы этот Эллеров подхранили вот в таком виде.
[19:20.280 --> 19:29.280]  Так, буковки напоминаю, это у нас номера, это номера вершин. Мы это ввели, чтобы там цифра. А, прям сразу, да.
[19:29.280 --> 19:45.280]  Пить хочется. Ну, мне тоже, знаешь, как-то терплю. Не смешно. Вот. Я в курсе. Но, тем не менее, знаешь,
[19:45.280 --> 19:52.280]  знаешь, это вот в первом классе, там как-то вот действительно всегда там почему-то читается и обсуждается такой текст,
[19:52.280 --> 19:58.280]  в котором рассказывается, что будет, если мы прямо сейчас все достанем еду и будем кушать? Какие версии?
[19:58.280 --> 20:05.280]  И сразу изолируется. Живая не будет. Будет очень смешно. Чавкой не будет. Отчего не будет?
[20:05.280 --> 20:15.280]  Нет, знаете, через 30 секунд, как-то возникла правильная версия, не будет урока. Вот.
[20:15.280 --> 20:29.280]  Знаете, вот в первом классе так как-то вот. Чего? Чего? Ну, вот. Не знаю. Ну, не то чтобы сразу во всех школах урок не будет, конечно.
[20:29.280 --> 20:39.280]  Так что давайте все-таки без этого. Вот. Значит, смотрите. Значит, что получается дальше?
[20:39.280 --> 20:47.280]  Ну, значит, что здесь можно делать? Делать можно следующее. То есть, теперь, ну, вот.
[20:47.280 --> 20:55.280]  То есть, идея первая такая. Давайте пытаться для каждого дерева, который у нас есть, хранить вот такую мистическую последовательность.
[20:56.280 --> 21:04.280]  Как же это делать? Как это делать? Ну, вот. Ну, вот. Действительно. У нас есть…
[21:04.280 --> 21:10.280]  Ну ладно, мы не знаем, что такое дикартащ... вот. Вот такой юмор мы даже не знаем, что такое дикартащ.
[21:10.280 --> 21:18.280]  Мы знаем, что такое АВЛ. Мы знаем, что такое красночёрное. Мы знаем, что такое Б. Мы знаем, как во всех их делать сплиты, мёрк, шуров, щоподотрезки.
[21:18.280 --> 21:22.280]  Но мы не знаем, что такое дикартащ.
[21:22.280 --> 21:26.920]  мы еще знаем да да кстати это нам сегодня очень важно мы знаем что такое сплей вот
[21:26.920 --> 21:35.520]  ну короче говоря в общем скажем более аккуратно что у нас есть у нас есть не дерево поиска по
[21:35.520 --> 21:41.640]  неявному ключу которая значит умеет брать какие-то массивы буковок и работать с ними там скажем
[21:41.640 --> 21:45.880]  распиливая там выпиливая подотрезок там сконкатинируя строчки и так далее все
[21:46.440 --> 21:51.960]  ну там отдельная песня как мы это делаем но вот даже более того у нас есть даже структура
[21:51.960 --> 21:56.800]  данных которые делают даже за честный логарифм они за там вероятностный как эти ваши дикарть
[21:56.800 --> 22:05.560]  очки вот но это повторяться не будет да все это у нас есть да там даже тремя способами вот
[22:05.560 --> 22:14.960]  поэтому возникает теперь такой вопрос то есть действительно как же сделать например операцию
[22:14.960 --> 22:26.280]  кат вот давайте с чем с этого да то есть идея будет очень простая действительно то есть идея будет
[22:26.280 --> 22:32.760]  простая что у нас есть где-то то есть как бы в отрезке дерева значит где-то у нас есть вершина
[22:32.760 --> 22:38.840]  в первый раз и вершина в последний но еще тут сколько-то раз если у нее три ребенка то это вот
[22:38.840 --> 22:55.000]  как так и еще там слева и справа от нее есть вершина у вот
[22:55.000 --> 23:05.960]  вот и тогда высекает простая идея то есть тогда смотрите то есть чтобы выпилить по
[23:05.960 --> 23:14.600]  дерева давайте вот просто выпилим вот этот вот подотрезок собственно из массива то есть
[23:14.600 --> 23:20.200]  единственная проблема после этого будет ну что да что будет две вер две подряд ушики еще страшно
[23:20.200 --> 23:36.320]  одно из этих ушки кморятся на убьем как говорится да в хорошем смысле этого слова да вот так вот это
[23:36.320 --> 23:45.000]  вот следующий интересный момент что мы реально храним для каждой вершины кажется удобнее хранить
[23:45.000 --> 23:52.320]  вообще не вершины а скорее ребра вот эти вот и хранить вершины ее два ребра ну это вершины не
[23:52.320 --> 24:08.920]  два ребра так ну то есть и да или что то же самое хранить там ну да хранить там первые последние
[24:08.920 --> 24:19.120]  вхождение ушечки в массив по-моему но примерно одно и то же получается нет да правда маленькая
[24:19.120 --> 24:23.920]  оговорка а что да что делать нет ну принципе смотрите в как это прикате будет удобно потому
[24:23.920 --> 24:28.880]  что да что как бы если это ребро было здесь ну значит теперь оно здесь ну как бы просто надо
[24:28.880 --> 24:40.360]  аккуратно рассмотреть случай сейчас сейчас ну с вами нет минус равно пордон для пордон с
[24:40.360 --> 24:46.280]  какой точки зрения если мы храним позицию когда мы вырезали у нас у всех этих машин изменилась
[24:46.280 --> 24:54.880]  позиция но можно но если если позиции хранить то да можешь как бы не хранить позиции а можно
[24:54.880 --> 24:59.160]  вместо этого как было правильно сказано хранить указатель где находится первое вхождение где
[24:59.160 --> 25:03.400]  последнее но конечно будет поджевать что у вас в этом вашем овл еще для каждой вершины родитель
[25:03.400 --> 25:08.480]  хранится но как показывает практика это в общем-то учитывая там все повороты которые надо
[25:08.480 --> 25:19.200]  делать это не самая плохая идея вот вот но проблема дарка значит что тут еще может быть но на самом
[25:19.200 --> 25:24.400]  деле да то есть кат тогда получается сделали достаточно легко если мы хотим хранить первое
[25:24.400 --> 25:30.360]  вхождение последнее но но главное потом надо продумать зачем вообще мы это делаем потому что
[25:30.360 --> 25:36.160]  пока для ката но челу удалили удалили и не паримся оно хотя понятно зачем потому что нам
[25:36.160 --> 25:40.640]  нужно вот это первое вхождение вешечки последнее вхождение в эфире для того чтобы понять что мы
[25:40.640 --> 25:51.440]  собственно выпиливаем а вот значит красота дальше какая у нас красота теперь будет так
[25:51.440 --> 26:04.520]  ну хорошо а ну берем и удаляем не понял вопроса в овл дереве есть такая операция удалить с
[26:04.520 --> 26:23.400]  элемент да ну это для нас технически там простой технический вопрос уровня ну технический
[26:23.400 --> 26:32.280]  вопрос по вершине найти следующую мы тут заглубь это делается за глубину дерева например методом
[26:32.280 --> 26:37.920]  там пройдись по пройдись до корня значит в эльке узнай какой порядковый номер у этой
[26:37.920 --> 26:45.040]  вешки и найди вершину номер этот номер типа вот этот номер плюс один ну например на самом
[26:45.040 --> 26:49.440]  деле конечно там мы всегда видим мы забыли обсудить потому что в подвешенных деревьях есть
[26:49.440 --> 26:53.800]  еще операция с аксессор предиссенсор которые в любом дереве делаются за от высоты дерева но
[26:53.800 --> 26:59.640]  это остается в качестве упражнения с аксессор следующий предиссессор предыдущий
[27:02.760 --> 27:05.320]  так ладно давайте слова и слова вот так пишутся
[27:05.320 --> 27:17.040]  ну видимо будем там обсуждать дерево одним дебосом этими словами будем рубраться только так вот так
[27:17.040 --> 27:31.320]  слова пишутся соответственно вот значит хорошо значит с катом разобрались вот как делать линк ну
[27:31.320 --> 27:37.640]  линк наоборот это значит надо найти какое-нибудь вхождение вершины у например первая до лучше
[27:37.640 --> 27:41.640]  искать первое пш другого вхождения может и не быть принципе кто сказал что как бы когда вы
[27:41.640 --> 27:47.200]  подвешиваете к вершине у она может быть и листом в принципе вот и справа от вершины у значит
[27:47.200 --> 28:00.400]  вставляем массив вот это все и еще вхождение пока лагин вот кажется да можно очень глобально
[28:00.400 --> 28:06.560]  облегчить себе жизнь если сказать что даже если вершина есть у нее есть два входа и между
[28:06.560 --> 28:17.320]  любыми двумя еще дополнительно не но не значит сейчас я может как же почитать что по
[28:17.320 --> 28:28.360]  моему это от разбора случаев вас это не избавит если сделать всегда есть первые и последние
[28:28.360 --> 28:38.480]  а промежуточные да кажется если просто всегда первые последние и забить на промежуточные
[28:38.480 --> 28:48.720]  становится очень удобно так да промежуточные к сожалению вот да вот зачем нужны промежуточные
[28:48.720 --> 28:58.000]  да это не проблема на самом деле немножко по-другому делать кстати кстати почему это не проблема
[28:58.000 --> 29:03.520]  то вообще нет вообще проблема хранить первое последнее а также между любыми двумя под деревьями
[29:03.520 --> 29:11.080]  еще вставлять себя но мы чем мы чем мы сейчас и занимаемся ну короче это для реализации нет
[29:11.080 --> 29:16.120]  но для леонидов листа просто если мы листу как бы мы храним первые последние и это одно и
[29:16.120 --> 29:26.440]  тоже потому что у меня вообще то ощущение что кажется просто потому что вот если вы сейчас
[29:26.440 --> 29:32.160]  выпиливаете подотрезок так вот это надо удалять или не надо и вам придется и хватит ну или мусорить
[29:32.160 --> 29:43.320]  так вот уже и кодовое слово если это означает что ты уже зафал если мы лист тоже храним вот
[29:43.320 --> 29:51.840]  в таком виде то всегда надо удалять но ты что-то было у значит ты вставил туда под дерево а потом
[29:51.840 --> 30:02.080]  удалил в результате вместо у появилось все-таки и в будущем это и придется все-таки и фать да так
[30:02.080 --> 30:09.800]  что-то не не все так просто в датском королевстве а тут тем более соответственно вот так что да
[30:09.800 --> 30:15.720]  давайте сюда давайте допомним как мы вообще делаем лца в принципе да то есть лца то есть мы
[30:15.720 --> 30:21.040]  говорили то то есть лца подразумевал лца когда мы сводили лца к рамку мы подразумевали что мы
[30:21.040 --> 30:28.040]  не просто храним такой список а рядом с каждой вершиной храним ее глубину то есть я вот пишем
[30:28.040 --> 30:42.680]  массив глубин вот примерно так вот вот примерно так он выглядит вот и когда нам надо было найти
[30:42.680 --> 30:53.400]  лца мы говорили так давайте возьмем там надо найти лца между вершиной ну я не знаю е и ну я не знаю
[30:58.040 --> 31:06.440]  не что-то я реально не знаю ну ладно с нет тут просто сложно найти две вершины у которых
[31:06.440 --> 31:13.080]  лца как бы это не никто-то из них вот но это мелкое дерево просто нарисовал вот и говорили что так
[31:13.080 --> 31:18.360]  давайте возьмем первое вхождение найдем отрезок между ними найдем минимум по высоте утверждение
[31:18.360 --> 31:32.120]  эту лца вот мы в прошлом в прошлый раз поверили в эту утверждение было дело было дело да что
[31:32.120 --> 31:40.120]  теперь делать ну вот то есть теперь остается только действительно то есть в этом массиве нам
[31:40.120 --> 31:48.200]  каким-то мистическим образом то есть желательно поддерживать не только соответственно сами эти
[31:48.200 --> 31:52.040]  вершины то есть не только поддерживать там первую последнюю но и конечно обязательно поддерживать
[31:52.040 --> 31:58.920]  эти самые глубины но это не проблема да потому что как бы да с помощью операции плюс равно на
[31:58.920 --> 32:04.040]  подотрезке прекрасно делается как мы как мы в прошлый раз убеждались там на наши любимые
[32:04.040 --> 32:12.160]  авл дерево прекрасно это умеет или не убеждались ну да остается только это сести написать но как бы
[32:12.160 --> 32:24.120]  вот хотя да хорошо хорошо будет да да да да а смотрите вот допустим вот мы делаем кат да и
[32:24.120 --> 32:30.920]  вершины в была глубина 5 а теперь заметим что после того как вы вырезали глубина вершины в
[32:30.920 --> 32:39.640]  становится 0 поэтому придется сделать опера там минус 5 на всем летающий марки к дереве вот спасибо
[32:39.680 --> 32:48.200]  ну и наоборот когда вы будете делать линк вам придется сделать плюс равно на подотрезке
[32:48.200 --> 32:54.160]  вот но слава богу когда вы по что-то подвешиваете то вот ничего не меняя вот и
[32:54.160 --> 33:00.200]  тогда после этого то есть получается если вы умеете делать там плюс равно на подотрезке и
[33:00.200 --> 33:06.960]  минимум на подотрезке помимо того со всеми выпиливанием и запиливанием то получается что
[33:06.960 --> 33:17.640]  что л цавы за логарифом прекрасно поддерживать логично да логично да так более то теперь внимание
[33:17.640 --> 33:26.120]  вопрос да так теперь да следующий вопрос конечно как понять там является ли вершина у родителем
[33:26.120 --> 33:39.400]  вершины в я тогда это решение вот этого вопроса но не этого почувствуйте вы мне сами тыкнули
[33:40.400 --> 33:48.000]  да кто такой родитель это такой преградку второго глубина на один бинт
[33:48.000 --> 34:15.640]  но да потому что предок это предыдущий обхождение от всех предков не запомнишь
[34:15.640 --> 34:20.160]  каждый каждый раз когда под когда ты подвесиваешься какой-то вершине у тебя
[34:20.160 --> 34:26.400]  становится неожиданно огромное количество предков вот да то есть заветишь сам эту больше
[34:26.400 --> 34:30.520]  можно было бы сделать просто в отдельном массиве для каждой вершины хранить своего родителей и все
[34:30.520 --> 34:34.520]  пока нет вот этой операции да
[35:00.520 --> 35:13.360]  ну можно и так да но да можно принципе так да тут как нет потому что мы сгенерили там по
[35:13.360 --> 35:18.880]  моему штук вот что штук восемь идеи и просто это одна из них просто можно сделать так можно
[35:18.880 --> 35:25.640]  сделать эдак там можно и можно все сказать что да это называется да это называется да я твой
[35:25.640 --> 35:33.600]  папа чем докажешь но я твой предок предок моя глубина на один будет меньше на один но логично
[35:33.600 --> 35:47.120]  папа нет это к сожалению здесь вот ну да да где-то в параде да да где-то в параллеле
[35:47.120 --> 35:52.800]  селены в красно-черных деревьях нету папы и дедушки зато есть видимо мама и бабушка да и тетя
[35:52.800 --> 36:01.120]  вот так ладно это кто-то уж совсем не туда
[36:01.120 --> 36:15.280]  о господи спокойствие давайте когда ладно значит смотрите значит это значит хорошо значит
[36:15.880 --> 36:25.960]  что ну хорошо да здесь у нас пока все хорошо так но правда но правда замечаем что все эти
[36:25.960 --> 36:32.680]  мистические операции не сильно так вот как бы не сильно нас дружат с вот этим всем но ладно
[36:32.680 --> 36:38.880]  проверить лежат ли две вершины в одном дереве конечно без проблем ой или с проблемами
[36:38.880 --> 36:56.160]  но такие там даже не функция лца просто ну в принципе да на самом деле да кстати
[36:56.800 --> 37:12.840] 谁 но да но да да да да да да да да да да да да да да да да да да OUT
[37:12.840 --> 37:19.000]  вот начиная чем нас 어머 печ orchestral теперь есть так так что да это не про это ничего не правильно
[37:19.000 --> 37:25.800]  так хорошо ну теперь возникает вопрос как делать всякие прис sleeping здания для Г Alyssa
[37:25.800 --> 37:55.760]  если бы надо было просто искать сумму на подотреске, ничего не менялось, то выкрутиться можно было, но на пути, помните у нас был в прошлый раз такой лайфхак с перенумерации вершин, помните, который позволял нам говорить что-то в дно, но там как искать сумму на пути, да, то есть оказывалось, давайте для каждой вершины хранить сумму на пути от нее до корня, и тогда там оказывалось, что сумму на пути, это там сумма до одной вершины плюс сумма до одной вершины,
[37:55.760 --> 38:19.720]  минус там две суммы ДЛЦА, ну там плюс-минус там какая-то гадость, поэтому да, с конкретной суммой, ну то есть что такое сумма, да, это ассоциативная коммутативная обратимая операция, ну то есть условно говоря, если там вместо суммы вы делаете там, я не знаю, умножение по простому модулю ненулевых остатков, то в принципе тоже можно.
[38:19.720 --> 38:26.680]  Помнишь, там же был какой-то гениальный лайфхак с Юрием Федоровым, вот в этой штуке еще на пути ангелы.
[38:26.680 --> 38:31.680]  Это не Юрий Федоров, а некого Адаманта, если честно, я не понимаю.
[38:31.680 --> 38:35.680]  Да, я не помню.
[38:35.680 --> 38:37.680]  Кого Адаманта?
[38:37.680 --> 38:38.680]  Адаманта.
[38:38.680 --> 38:39.680]  Ну это блок есть.
[38:39.680 --> 38:42.680]  Нет, это я знаю, да-да-да.
[38:43.640 --> 38:50.640]  О господи, да мне нравится, хотя бы я как-то приглядел в блок, у меня вообще нет, что по-моему, если посмотреть этот блок, может там отдельный курс запиливать на самом деле.
[38:50.640 --> 38:53.640]  Впрочем, может мы до этого доживем.
[38:53.640 --> 39:05.640]  Не, ну а что там, там какие-то производящие функции, там всякие там, еще там работа средами, а то знаете, сейчас вот там вот кто-то съездил в Петрозаводск, а там сейчас модно, а там сейчас как бы называется модно там типа решение в духе.
[39:05.640 --> 39:10.640]  Так, ну возьмем степенумие, теперь давайте его экспоненцируем, ну стандартный алгоритм Зен Логен, ну понятно, да.
[39:11.600 --> 39:18.600]  Ну вот и так далее, так что, так что видимо придется этим заняться в какой-то момент.
[39:18.600 --> 39:29.600]  Вот, ну вот, ну хорошо, ну это была, допустим, конкретная сумма, но как бы если мы в этой сумме возьмем, там я не знаю.
[39:32.600 --> 39:39.600]  Не, ну хотя нет, хэш на подстроке, наверное, можно, а, ну да нет, хэш подстроке, конечно, можно, естественно.
[39:40.560 --> 39:55.560]  Ну ладно, нет, ну хотя нет, ну да, а, ну да, потому что хэш на подстроке по модулю некоторых оговорок, типа там, в основной степени это как бы там обратимая операция, это да.
[39:55.560 --> 40:08.560]  Но правда это все работает, пока вы начинаете делать присваивание на пути, пока вы начинаете делать присваивание на пути, как бы хранить, там для каждой вершины теперь хранить там сумму на пути от нее до корня уже не получится.
[40:10.560 --> 40:19.560]  Вот, поэтому выясняется, конечно, что у этого эллерового обхода, конечно, применимость ограничена.
[40:22.560 --> 40:28.560]  Ну там, конечно, да, если вы там, допустим, делаете сумму и изменяете одну вершинку, то, естественно, это все прекрасно делает.
[40:29.520 --> 40:51.520]  Вот, хотя, конечно, если вам не надо, ну вот, ну хотя, да, да, то есть, конечно, теоретически можно, могло даже показаться, что там поменять корень можно просто циклическим двигам эллерового обхода на самом деле, но только маленькая проблема, к сожалению, кто первый, кто последний, после этого вы уже хранить не сможете.
[40:52.480 --> 41:09.480]  В общем, можно по-прежнему жить, короче, или где-то там можно как-то делать, чтобы можно было менять корень.
[41:12.480 --> 41:15.480]  Каким бы был линк, например, написать линкап.
[41:16.440 --> 41:18.440]  Просто типа циклический двиг, что-то такое.
[41:18.440 --> 41:19.440]  Замечательно.
[41:19.440 --> 41:31.440]  Как бы, если его сделать именно по ребрам, то есть для вершинки сделать условно два ребра, которые идут вниз, в нее сверху приходит и который уходит из нее наверх.
[41:31.440 --> 41:32.440]  И что?
[41:32.440 --> 41:36.440]  И записывать в обход именно эти ребра, как вот мы по ним идем.
[41:36.440 --> 41:37.440]  Так.
[41:38.400 --> 41:51.400]  В таких условиях нам достаточно хранить просто указатель на вершинку у дерева, в которой лежит конкретное ребро, и поэтому циклический сдвиг нам в целом ничего не меняет.
[41:52.360 --> 41:53.360]  Как это не меняет?
[41:53.360 --> 41:57.360]  На целом пути от бывшего корня до нового, извините, эти ребра поменялись.
[41:57.360 --> 42:02.360]  И вам для каждого из этих ребр придется это прям в явном виде переподхранивать.
[42:02.360 --> 42:07.360]  Реверс можно бы сделать на отрезке.
[42:07.360 --> 42:09.360]  На каком отрезке?
[42:09.360 --> 42:10.360]  Ну, сейчас.
[42:14.360 --> 42:21.360]  Там как бы не о реверсе речь, там говорит о том, что вот, и было у вершины 57 ребер, и было одно выделенное в родителя.
[42:22.320 --> 42:25.320]  И сказали нам, что вот это оказывается теперь не вот это ребро, а вот то.
[42:25.320 --> 42:28.320]  И сказали нам это во всех 179 вершинах.
[42:28.320 --> 42:33.320]  Хранить ребро у родителя, а просто ребро у родителя это последний из наших ребров из вершины.
[42:33.320 --> 42:34.320]  Отлично.
[42:34.320 --> 42:37.320]  При циклическом сдвиге понятие последний отправляется лесом.
[42:37.320 --> 42:38.320]  Нет.
[42:38.320 --> 42:41.320]  Ну, как раз потому, что оно изменится.
[42:41.320 --> 42:42.320]  Ну.
[42:42.320 --> 42:46.320]  Ну, в плане мы последний ребро не будем хранить, мы его как-то будем находить.
[42:48.320 --> 42:49.320]  А как?
[42:52.320 --> 42:53.320]  Вот.
[42:55.320 --> 42:56.320]  Так что, по ходу, да.
[42:56.320 --> 42:59.320]  Не просто так изобрели линкат, видимо.
[42:59.320 --> 43:00.320]  Вот.
[43:02.320 --> 43:03.320]  Ну, вот, да.
[43:03.320 --> 43:08.320]  Ну, вот, оказывается дерево линкат, значит, если хранить линкат, то оказывается, это все умеется.
[43:08.320 --> 43:09.320]  Правда?
[43:09.320 --> 43:10.320]  Конечно, вот это да.
[43:10.320 --> 43:13.320]  То есть, в общем, утверждается, что все это будет делаться.
[43:13.320 --> 43:16.320]  Причем, естественно, за наш любимый логорифм.
[43:16.320 --> 43:19.320]  Правда, с маленькой оговоркой.
[43:20.280 --> 43:22.280]  Оговорка больше, логорифм будет амортизированный.
[43:23.280 --> 43:28.280]  Поэтому говорить о том, что мы прям победили, прям четко смажировали Хавилайт, можно только с оговоркой.
[43:29.280 --> 43:32.280]  Потому что у Хавилайта логорифм честный.
[43:33.280 --> 43:38.280]  Ну, вот, а мы как бы да, мы умеем чуть больше, но платим за это монетки.
[43:40.280 --> 43:41.280]  Вот.
[43:43.280 --> 43:44.280]  Ну, да.
[43:45.240 --> 43:48.240]  Знаете, мы вводим монетки, начинаем их платить.
[43:49.240 --> 43:51.240]  А пользователь спрашивает, так, я ничего не понимаю в монетках.
[43:51.240 --> 43:55.240]  Скажите, пожалуйста, почему вы обещали, что это работает с логорифм, а оно повисло?
[43:57.240 --> 43:58.240]  Вот, ну, вы понимаете?
[44:01.240 --> 44:02.240]  Да.
[44:02.240 --> 44:03.240]  Ну, вот, ну, там.
[44:04.240 --> 44:05.240]  Нет.
[44:05.240 --> 44:06.240]  Нет, никакой инфляции нету.
[44:07.240 --> 44:09.240]  Ну, как во что его объяснить, понимаете?
[44:09.240 --> 44:11.240]  Дело в том, что первые операции работали очень быстро.
[44:11.240 --> 44:13.240]  Да, я прям поэтому и купил.
[44:14.200 --> 44:15.200]  Ну, понимаете?
[44:15.200 --> 44:18.200]  А это так круто работало, что мы себе от радости заплатили монетки.
[44:19.200 --> 44:20.200]  А теперь да.
[44:20.200 --> 44:21.200]  А теперь вместо того, чтобы...
[44:22.200 --> 44:24.200]  А теперь как бы мы как бы говорим, что...
[44:25.200 --> 44:29.200]  То есть как бы да, мы работаем дольше, но мы как бы теперь эти монетки честно платим обратно.
[44:30.200 --> 44:34.200]  Да, видите, мы же сами теряем как бы монетки, которые сами себе заплатили.
[44:35.200 --> 44:36.200]  Вот.
[44:36.200 --> 44:38.200]  Так что все так, что все честно.
[44:40.200 --> 44:41.200]  Вот.
[44:41.200 --> 44:42.200]  Ну, да, это, конечно, да.
[44:43.160 --> 44:46.160]  То есть это, конечно, тоже из цикла звучит.
[44:46.160 --> 44:51.160]  Приходил заказчик, интересовался, почему стена нашего дома наклонена под углом 40 градусов к поверхности.
[44:52.160 --> 44:54.160]  Объяснили ему про силу Кориолиса.
[44:55.160 --> 44:57.160]  Значит, он так долго...
[44:57.160 --> 45:02.160]  Он так нас выслушал и сказал, что, знаете, я, конечно, в строительном деле ничего не понимаю,
[45:02.160 --> 45:05.160]  но у меня под соседством вот такой же дом, и там стена прямая.
[45:06.160 --> 45:08.160]  Блин, ненавижу умных заказчиков.
[45:09.120 --> 45:10.120]  Да.
[45:11.120 --> 45:13.120]  Это называется, если бы программисты строили дома.
[45:14.120 --> 45:15.120]  Вот.
[45:15.120 --> 45:17.120]  Можете там отдельно гуглануть.
[45:17.120 --> 45:20.120]  Это вообще шедевр, который надо читать целиком.
[45:20.120 --> 45:22.120]  Идем все-таки петь.
[45:22.120 --> 45:23.120]  Нет.
[45:23.120 --> 45:24.120]  Почему петь?
[45:24.120 --> 45:25.120]  Нет.
[45:25.120 --> 45:28.120]  Не путать с песней, если программисты строили дома.
[45:29.120 --> 45:30.120]  Не путать.
[45:30.120 --> 45:31.120]  Да, есть песня.
[45:31.120 --> 45:32.120]  Это Дан.
[45:33.120 --> 45:34.120]  А вот не путать.
[45:34.120 --> 45:36.120]  Потому что есть вот прям вот отдельный рассказ.
[45:37.080 --> 45:38.080]  Просто вот хроника.
[45:38.080 --> 45:40.080]  Прямо называется, если программисты строили дома.
[45:41.080 --> 45:42.080]  Просто там отдельная песня.
[45:43.080 --> 45:44.080]  Ну.
[45:45.080 --> 45:46.080]  А, именно.
[45:47.080 --> 45:48.080]  Именно, именно.
[45:49.080 --> 45:50.080]  Именно, да.
[45:51.080 --> 45:52.080]  Ну да.
[45:52.080 --> 45:56.080]  Или там по принципу, там празднуем 7-й, там празднуем день октябрьской революции.
[45:56.080 --> 45:59.080]  Там коммунистов у нас в фирме нет, поэтому праздник никто не портит.
[46:01.080 --> 46:02.080]  Ну вот.
[46:02.080 --> 46:03.080]  Ну и так далее.
[46:03.080 --> 46:04.080]  Вот.
[46:05.080 --> 46:06.080]  Вот.
[46:07.040 --> 46:08.040]  Так вот линкат.
[46:09.040 --> 46:10.040]  Ладно.
[46:11.040 --> 46:12.040]  Такой.
[46:12.040 --> 46:13.040]  Что зря я это сказал.
[46:13.040 --> 46:14.040]  Сейчас все начнете читать.
[46:15.040 --> 46:16.040]  Нет, пожалуйста, почитайте до перебеги.
[46:17.040 --> 46:18.040]  Или хотите, богу, до перебеги сам.
[46:19.040 --> 46:20.040]  Вам просто вслух это почитать.
[46:21.040 --> 46:22.040]  Ну в общем, не важно.
[46:23.040 --> 46:24.040]  Ладно.
[46:25.040 --> 46:26.040]  Так вот.
[46:26.040 --> 46:27.040]  Значит, поехали.
[46:28.040 --> 46:29.040]  Итак, как же это амортизировано делать?
[46:30.040 --> 46:31.040]  Вот.
[46:32.040 --> 46:36.040]  Но на самом деле, конечно, идея плавно вытекает из Хавилайта.
[46:37.040 --> 46:42.040]  Да, в каком смысле плавно вытекает?
[46:42.040 --> 46:46.040]  Ну, действительно, логично, дерево декомпозировать на пути.
[46:47.040 --> 46:52.040]  Ну, на какие-нибудь хорошие пути.
[46:55.040 --> 46:56.040]  Вот.
[46:57.040 --> 47:04.040]  И соединять между собой эти пути какими-нибудь синенькими рубрами.
[47:05.000 --> 47:10.000]  Тут, на всякий случай, лучше избегать понятия, конечно,
[47:11.000 --> 47:12.000]  тяжелые и легкие.
[47:13.000 --> 47:16.000]  Ну, как минимум, потому что декомпозировать дерево
[47:17.000 --> 47:18.000]  на пути можно огромным количеством способов.
[47:19.000 --> 47:20.000]  Вот мы в прошлый раз несколько изучили.
[47:21.000 --> 47:22.000]  То есть Хавилайт.
[47:23.000 --> 47:24.000]  То есть как то, что мы говорим, что пути состоят из тяжелых
[47:25.000 --> 47:26.000]  ребер.
[47:27.000 --> 47:28.000]  То есть мы помним, говорим, что ребро называется тяжелым,
[47:29.000 --> 47:32.000]  если на нем висит не менее половины всего под дерево.
[47:32.960 --> 47:34.960]  И оказывается, что эти тяжелые ребра прекрасно декомпозируют
[47:35.960 --> 47:36.960]  дерево на пути.
[47:37.960 --> 47:38.960]  Но выяснилось, что можно и по-другому.
[47:39.960 --> 47:40.960]  То есть у нас там было, что у нас там было?
[47:41.960 --> 47:44.960]  Сейчас у нас там была лестничная декомпозиция.
[47:45.960 --> 47:46.960]  Там была и предшественник.
[47:47.960 --> 47:48.960]  Да, да, да.
[47:49.960 --> 47:50.960]  Лонгеспест, декомпозицион.
[47:51.960 --> 47:52.960]  Ледер, декомпозицион.
[47:53.960 --> 47:54.960]  Это даже не совсем декомпозицион, но это уже нот.
[47:55.960 --> 47:56.960]  Там мелочи жизни.
[47:57.960 --> 47:58.960]  Вот, фишка теперь другая.
[47:59.920 --> 48:00.920]  Вот.
[48:01.920 --> 48:02.920]  Вот.
[48:03.920 --> 48:05.920]  Но, значит, как мы теперь будем декомпозировать?
[48:06.920 --> 48:07.920]  Ответ.
[48:08.920 --> 48:09.920]  Как у нас водится в сплой дереве, например?
[48:10.920 --> 48:13.920]  У нас не будет конкретных требований на тему того,
[48:14.920 --> 48:16.920]  как вы конкретно декомпозируете.
[48:17.920 --> 48:20.920]  То есть любое ребро может оказаться в каком-то из
[48:21.920 --> 48:22.920]  путей этой декомпозиции.
[48:23.920 --> 48:24.920]  А может и не оказаться.
[48:25.920 --> 48:27.920]  То есть ограничение только одно.
[48:28.880 --> 48:30.880]  Что в каждый момент времени, конечно, все ребра,
[48:31.880 --> 48:33.880]  все, так сказать, красные ребра образуют набор путей.
[48:34.880 --> 48:35.880]  Все.
[48:36.880 --> 48:38.880]  То есть условно все дерево может оказаться в путях
[48:39.880 --> 48:40.880]  только если дерево бамбук.
[48:41.880 --> 48:43.880]  Но зато он может оказаться в какой-то момент, что у
[48:44.880 --> 48:47.880]  нас дерево декомпозировалось на n путей по одной вершине
[48:48.880 --> 48:49.880]  в каждом.
[48:50.880 --> 48:51.880]  Такое теоретически может быть.
[48:52.880 --> 48:53.880]  Вот.
[48:54.880 --> 48:55.880]  И никаких инвариантов.
[48:56.840 --> 48:57.840]  Никаких инвариантов у нас.
[48:58.840 --> 49:00.840]  Больше никаких инвариантов не будет.
[49:03.840 --> 49:04.840]  Вот.
[49:05.840 --> 49:07.840]  Что будет вместо этого?
[49:08.840 --> 49:10.840]  Ой, все, кто-то уже умер, да?
[49:11.840 --> 49:12.840]  Чуть не рано еще.
[49:13.840 --> 49:14.840]  Еще только вон.
[49:15.840 --> 49:17.840]  Ой, здесь часа еще не прошло.
[49:18.840 --> 49:19.840]  Вот, значит.
[49:20.840 --> 49:21.840]  Ну, теперь значит.
[49:22.840 --> 49:23.840]  Но зато вот теперь идея.
[49:23.840 --> 49:25.840]  Вот кто-то уже говорил, что мечта что-то там разворачивать
[49:26.840 --> 49:27.840]  надо.
[49:28.840 --> 49:29.840]  Ну, вот.
[49:30.840 --> 49:31.840]  Так вот, значит, что мы будем делать?
[49:32.840 --> 49:35.840]  Каждый из этих путей мы будем хранить в дереве.
[49:38.840 --> 49:39.840]  Да.
[49:40.840 --> 49:41.840]  Это может звучит тупо, пока я не уточню в каком.
[49:42.840 --> 49:45.840]  На этот раз имеется в виду двоичное дерево поиска.
[49:48.840 --> 49:49.840]  Да.
[49:50.840 --> 49:51.840]  Отдельный какой-нибудь термин ввести, чтобы там не было.
[49:51.840 --> 49:52.840]  Потому что в прошлый раз мы уже путались.
[49:53.840 --> 49:54.840]  Дерево, дерево, дерево.
[49:55.840 --> 49:57.840]  То есть как бы дерево декомпозируем на пути.
[49:58.840 --> 49:59.840]  Каждый путь храним в дереве.
[50:00.840 --> 50:01.840]  Чего там?
[50:02.840 --> 50:03.840]  И так далее.
[50:04.840 --> 50:05.840]  Вот.
[50:06.840 --> 50:07.840]  Но как вы заметили, что каждый путь, если двигаться особенно от корня к потомкам,
[50:08.840 --> 50:09.840]  это массив.
[50:10.840 --> 50:11.840]  Вот.
[50:12.840 --> 50:13.840]  Соответственно.
[50:14.840 --> 50:16.840]  Поэтому этот массив можно тоже хранить в каком-нибудь дереве.
[50:17.840 --> 50:18.840]  В ВВЛ дереве, например, будем хранить.
[50:19.840 --> 50:20.840]  Для начала.
[50:21.840 --> 50:22.840]  Ну ладно.
[50:23.840 --> 50:24.840]  Если вам не нравится ВВЛ, можете хранить в красночерном.
[50:25.840 --> 50:26.840]  Вот.
[50:27.840 --> 50:28.840]  Ну там, где вам приятнее делать сприт и мерш, это вы уже сами там.
[50:29.840 --> 50:30.840]  Посмотрим.
[50:31.840 --> 50:32.840]  Ну где как так вероятностный.
[50:33.840 --> 50:34.840]  И мы не знаем, что это.
[50:35.840 --> 50:36.840]  Якобы.
[50:37.840 --> 50:38.840]  Вот.
[50:39.840 --> 50:40.840]  Корневая.
[50:41.840 --> 50:42.840]  А корневая, она за корень.
[50:43.840 --> 50:44.840]  Тогда пасом массив.
[50:45.840 --> 50:46.840]  Это вообще за линию.
[50:47.840 --> 50:48.840]  Да.
[50:49.840 --> 50:50.840]  Ну да, да, да.
[50:51.840 --> 50:52.840]  Мечты, мечты.
[50:53.840 --> 50:54.840]  Мечты, мечты.
[50:55.840 --> 50:56.840]  Вот.
[50:57.840 --> 50:58.840]  Значит, соответственно храним.
[50:59.840 --> 51:00.840]  Но что нам это дает?
[51:01.840 --> 51:04.840]  Но, конечно, основная проблема все равно будет в том, что нам нужно делать операции
[51:05.840 --> 51:06.840]  линк и кат.
[51:07.840 --> 51:10.840]  То есть надо что-то подвешивать и что-то отпиливать.
[51:11.840 --> 51:16.840]  Ну, казалось бы, конечно, никаких особенных проблем с этим нет.
[51:17.840 --> 51:19.840]  То есть казалось бы, просто линк.
[51:19.840 --> 51:22.840]  Просто линк, это значит мы добавим ребро и пусть оно будет синее.
[51:23.840 --> 51:27.840]  То есть вообще набор, то есть деревья как наборы путей вообще не поменяются, правда?
[51:28.840 --> 51:30.840]  Ибо дерево, кстати, мы теперь как храним?
[51:31.840 --> 51:32.840]  То есть мы теперь его храним так.
[51:33.840 --> 51:34.840]  У нас есть набор путей.
[51:35.840 --> 51:39.840]  Каждый путь хранится там в массиве, на котором запильно там какой-то там условная вель.
[51:40.840 --> 51:41.840]  Вот.
[51:42.840 --> 51:43.840]  И для каждого дерева еще есть ребро.
[51:44.840 --> 51:47.840]  Ребро говорит, собственно, кто родитель моего пути.
[51:47.840 --> 51:50.840]  Ну или говорит, что если мы корень.
[51:51.840 --> 51:52.840]  Соответственно.
[51:53.840 --> 51:54.840]  Вот.
[51:55.840 --> 51:56.840]  Вот примерно такая радость.
[51:59.840 --> 52:00.840]  Ну, конечно, да.
[52:01.840 --> 52:02.840]  Линк делать легко.
[52:03.840 --> 52:04.840]  Кат.
[52:05.840 --> 52:06.840]  Ну, с катом, конечно, посложнее чуть-чуть.
[52:08.840 --> 52:09.840]  Почему с катом посложнее?
[52:10.840 --> 52:12.840]  Ну, потому что, конечно, если вы удаляете синее ребро, то не проблема.
[52:13.840 --> 52:14.840]  То есть как бы, допустим, синее ребро.
[52:14.840 --> 52:18.840]  То есть как бы мы просто вот для этого пути теперь говорим, что поздравляю.
[52:19.840 --> 52:20.840]  Теперь у тебя нет родителя.
[52:21.840 --> 52:24.840]  Да, не то, чтобы его это сильно обрадует, возможно.
[52:25.840 --> 52:26.840]  Но как бы, пока ими это просто.
[52:27.840 --> 52:28.840]  Вот.
[52:29.840 --> 52:30.840]  Соответственно.
[52:31.840 --> 52:32.840]  Ладно, нет, тут нет родителя.
[52:33.840 --> 52:34.840]  Но если у нас это красное.
[52:35.840 --> 52:36.840]  Если ребро красное.
[52:37.840 --> 52:38.840]  Ну, значит, придется распилить путь на два.
[52:39.840 --> 52:40.840]  Но, как бы, AVL поддерживает конкретинацию.
[52:41.840 --> 52:42.840]  Правда?
[52:42.840 --> 52:43.840]  Ну, больше, в общем-то, ничего делать не надо.
[52:44.840 --> 52:49.840]  Но, если бы жизнь ограничилась только операциями линк и кат.
[52:50.840 --> 52:52.840]  Их, как вы помните, можно было бы реализовать сильно проще.
[52:53.840 --> 52:55.840]  Нашим любимым методом вида.
[52:56.840 --> 52:57.840]  Угу.
[52:58.840 --> 52:59.840]  Ну, пойдет.
[53:00.840 --> 53:01.840]  Ну, этот метод.
[53:02.840 --> 53:03.840]  Угу.
[53:04.840 --> 53:05.840]  Заод единицы.
[53:06.840 --> 53:07.840]  Вызывайте метод.
[53:08.840 --> 53:09.840]  И все.
[53:09.840 --> 53:10.840]  Ну.
[53:11.840 --> 53:12.840]  Ну.
[53:13.840 --> 53:14.840]  Вот.
[53:15.840 --> 53:18.840]  Но это все работает, пока от вас не начинают это.
[53:19.840 --> 53:21.840]  Что-то тогда, что-то проверять.
[53:22.840 --> 53:23.840]  Да.
[53:24.840 --> 53:25.840]  Угу.
[53:26.840 --> 53:30.840]  Да, да, хоть реверс, чтобы на треске.
[53:31.840 --> 53:32.840]  Ну, да.
[53:33.840 --> 53:34.840]  Ну, да.
[53:35.840 --> 53:36.840]  Ну, да.
[53:36.840 --> 53:37.840]  Ну, да.
[53:38.840 --> 53:39.840]  Ну, да.
[53:40.840 --> 53:41.840]  Да, нет.
[53:42.840 --> 53:43.840]  Можно в принципе даже пристрелить себе ногу, на самом деле.
[53:44.840 --> 53:45.840]  Да.
[53:46.840 --> 53:47.840]  В задаче пристрелите ногу.
[53:48.840 --> 53:49.840]  Ну, вот.
[53:50.840 --> 53:52.840]  То есть, пока вас каким-то образом не попытаются это проверить.
[53:53.840 --> 53:59.840]  То есть, там скажут, что, вы знаете, обычно после этой, если операция выполнена корректно, то там шнурки надо перезавязывать.
[54:00.840 --> 54:01.840]  Обычно.
[54:02.840 --> 54:03.840]  Вот.
[54:04.840 --> 54:05.840]  Ну, вот.
[54:06.840 --> 54:08.840]  Мы можем сказать, и развязать шнурки.
[54:09.840 --> 54:10.840]  Ну, ладно.
[54:11.840 --> 54:12.840]  Но, как бы, если это потребует, ну, хотя бы лца.
[54:13.840 --> 54:14.840]  Мы скажем.
[54:15.840 --> 54:16.840]  Ой.
[54:17.840 --> 54:18.840]  Да.
[54:19.840 --> 54:20.840]  Вот.
[54:21.840 --> 54:23.840]  Нужно проверить корректность лца, иначе выдаем любого шина и говорите.
[54:24.840 --> 54:25.840]  Нет, ну, нет.
[54:26.840 --> 54:27.840]  Все по чесноку должно быть все-таки шоком.
[54:28.840 --> 54:35.840]  То есть, как бы, как бы пользователи, как бы, может в данном случае сказать, что так, я знаю, какое там тире у вас хранилось, я там вызвал у вас лца.
[54:36.840 --> 54:37.840]  Называется от двух вершин.
[54:38.840 --> 54:39.840]  Я тут проверил, это все там чушь.
[54:40.840 --> 54:41.840]  То есть, знаете, это из условно.
[54:42.840 --> 54:43.840]  Да.
[54:44.840 --> 54:45.840]  Ну, вот, и он, собственно, запит, что-то мы его обманываем.
[54:46.840 --> 54:47.840]  Там, условно говоря, там это на обертке написано 54 метра.
[54:48.840 --> 54:49.840]  Мы измерили 49, там, ну и так далее.
[54:50.840 --> 54:51.840]  Вот.
[54:52.840 --> 54:53.840]  Соответственно.
[54:54.840 --> 54:55.840]  Да.
[54:56.840 --> 54:57.840]  Вот.
[54:58.840 --> 54:59.840]  Значит, соответственно, что делать?
[55:00.840 --> 55:04.840]  Значит, поэтому, поэтому, придется делать это как-то реально.
[55:04.840 --> 55:05.840]  Реально.
[55:06.840 --> 55:07.840]  Ну, как бы оно, просто лца так не сделаешь.
[55:08.840 --> 55:09.840]  Да и просто сумму так не сделаешь.
[55:10.840 --> 55:11.840]  Вот.
[55:12.840 --> 55:14.840]  Но как бы вообще, в принципе, это делали?
[55:15.840 --> 55:17.840]  Что нам эта декомпозиция вообще давала?
[55:18.840 --> 55:22.840]  Декомпозиция обычно давала примерно следующий механизм.
[55:23.840 --> 55:24.840]  Следующий простой механизм.
[55:27.840 --> 55:28.840]  Вот.
[55:31.840 --> 55:32.840]  Кто сказал?
[55:33.840 --> 55:34.840]  Нет.
[55:35.840 --> 55:36.840]  Скажем так, в таком виде, который мы реализуем, на самом деле, нет.
[55:37.840 --> 55:38.840]  Нет.
[55:39.840 --> 55:42.840]  Ну, как я уже сказал, пока как бы нет вообще никаких гарантий, что красные ребра вообще существуют.
[55:43.840 --> 55:45.840]  Я даже больше скажу.
[55:46.840 --> 55:55.840]  Как бы, если с нуля, там у вас только есть N-изолированных решений, таким образом делать линки, да, то есть, тупо повесить за синей, то красные ребра не появятся от слова никогда.
[55:56.840 --> 55:57.840]  Ну, да.
[55:58.840 --> 55:59.840]  Нет.
[55:59.840 --> 56:00.840]  Да.
[56:01.840 --> 56:09.840]  Никакой амортизации не будет, потому что тут, потому что в такой реализации никакой амортизации не будет.
[56:10.840 --> 56:19.840]  Потому что, если вы никогда не делаете красные ребра, то, как бы, по большому счету, вы реально все операции просто сейчас, если вы будете подниматься от верхней кори, вы делать будете в тупую.
[56:20.840 --> 56:25.840]  То есть, как бы, то есть, как вы знаете, то есть, как бы, причем это, что страшнее, это еще полбеды.
[56:26.840 --> 56:30.840]  Вы будете не в тупую, а еще и на каждом шаге объяснять, что на самом деле вы там что-то еще умное делаете.
[56:31.840 --> 56:33.840]  Амортизации не будет. Работаем с золотой.
[56:34.840 --> 56:40.840]  Ну вот, хотя по факту на самом деле не будет, то есть, это как бы, то есть, это вот такое.
[56:41.840 --> 56:50.840]  Ну вот, потом, да, и потом там уже, там, это, аудит там будет выяснять, что, как говорится, по какой причине вас уволили, там, вас уволили три года назад, но при этом продолжают начислять зарплату там и так далее.
[56:51.840 --> 56:52.840]  Но это мы уже обсуждали.
[56:53.840 --> 56:54.840]  Вот, соответственно.
[56:55.840 --> 56:58.840]  Но мечта, конечно, была бы, потому что, да, потому что как у нас работал Хавилайт?
[56:59.840 --> 57:06.840]  Он работал по принципу так, у меня есть две вершины, я иду к их лца, которые я еще и не знаю, но попутно еще и найду.
[57:07.840 --> 57:09.840]  И работать это будет примерно следующим образом.
[57:10.840 --> 57:17.840]  То есть, я там буду идти-идти-идти, вот, дойду на начало пути, пройду там по там, синим ребру.
[57:18.840 --> 57:23.840]  Вот, потом еще так пройду, потом еще по синим ребру, ну и так далее.
[57:24.840 --> 57:25.840]  Да, вот буду вот так вот как-то идти.
[57:26.840 --> 57:27.840]  Так вот.
[57:28.840 --> 57:30.840]  И вот тут, тут вот на этом подотреске что-то найду и возрадуюсь.
[57:31.840 --> 57:32.840]  Вот.
[57:33.840 --> 57:34.840]  Ну здесь все будет сложнее, сложнее.
[57:35.840 --> 57:37.840]  Ну ладно, вот так вот тут будет.
[57:38.840 --> 57:39.840]  Вот так.
[57:40.840 --> 57:41.840]  Вот так.
[57:42.840 --> 57:43.840]  Вот.
[57:44.840 --> 57:45.840]  Ну как-то так.
[57:46.840 --> 57:47.840]  Вот.
[57:48.840 --> 57:55.840]  И все было бы ничего, только ну просто у Хавилайта эти пути были устроены так, что просто этих синих ребер было от логарифма.
[57:56.840 --> 57:59.840]  Ну не в смысле, что их вообще от логарифма, конечно, боже упаси.
[58:00.840 --> 58:01.840]  Вот.
[58:02.840 --> 58:07.840]  Гарантируется только одно, на пути от любой вершины до корня этих синих ребер не более чем логарифма.
[58:07.840 --> 58:12.840]  Но у нас была очень-очень-очень жесткая структура на эту тему.
[58:14.840 --> 58:15.840]  Ну вот.
[58:16.840 --> 58:21.840]  Ну а теперь у нас структура такой нельзя, потому что дерево у нас постоянно меняется.
[58:22.840 --> 58:27.840]  То есть, напоминаю, я тут, кажется, зачеркнул, но как бы мечты, мечты, мечты остаются.
[58:28.840 --> 58:29.840]  Вот.
[58:30.840 --> 58:33.840]  Поэтому, ну как бы не случайно мы тут поминаем сплей.
[58:34.840 --> 58:42.840]  Потому что, на самом деле, ключом к решению абсолютно всех проблем у нас будет являться мистическая функция Expose.
[58:43.840 --> 58:45.840]  Вот я аж даже капсом ее напишу.
[58:52.840 --> 58:53.840]  О.
[58:54.840 --> 58:55.840]  Expose.
[58:55.840 --> 58:56.840]  О.
[59:02.840 --> 59:03.840]  Так.
[59:04.840 --> 59:05.840]  Чувствуете, что уже проблема решилась.
[59:08.840 --> 59:09.840]  Да.
[59:10.840 --> 59:11.840]  Ну да.
[59:12.840 --> 59:13.840]  Ну да, знаете, иногда бывает такое.
[59:14.840 --> 59:17.840]  Если вас что-то гложет, напишите об этом на заборе, вам станет легче.
[59:18.840 --> 59:19.840]  Вот.
[59:20.840 --> 59:22.840]  Значит, что же это такое?
[59:23.840 --> 59:24.840]  Так что, да.
[59:25.840 --> 59:26.840]  Что же это за Expose?
[59:27.840 --> 59:28.840]  Это будет.
[59:29.840 --> 59:30.840]  Будьте здоровы.
[59:31.840 --> 59:32.840]  Это будет мистическая функция.
[59:33.840 --> 59:35.840]  Вот сейчас абсолютно мистическая.
[59:36.840 --> 59:37.840]  В скопках нет.
[59:38.840 --> 59:40.840]  Которая скажет.
[59:41.840 --> 59:43.840]  Которая, нот, которая сделает следующее.
[59:45.840 --> 59:47.840]  Говорит, так, у меня была вершина У.
[59:48.840 --> 59:50.840]  И было у нее путь до корня.
[59:52.840 --> 59:53.840]  Вот.
[59:54.840 --> 59:55.840]  Вот.
[59:56.840 --> 59:57.840]  Вот.
[59:58.840 --> 59:59.840]  И немножко мани.
[01:00:00.840 --> 01:00:01.840]  Ну вот.
[01:00:02.840 --> 01:00:03.840]  А теперь.
[01:00:04.840 --> 01:00:05.840]  Значит, мы сделаем следующее.
[01:00:06.840 --> 01:00:08.840]  Мы чуть-чуть-чуть пошаманим ребра на этом пути.
[01:00:09.840 --> 01:00:10.840]  И еще на этом.
[01:00:11.840 --> 01:00:12.840]  Так.
[01:00:13.840 --> 01:00:14.840]  Таким мистическим образом.
[01:00:15.840 --> 01:00:17.840]  Чтобы у нас появился.
[01:00:18.840 --> 01:00:19.840]  Путь к отсутствию.
[01:00:19.840 --> 01:00:20.840]  Чтобы у нас появился.
[01:00:21.840 --> 01:00:24.840]  Путь, который начинается в корне.
[01:00:25.840 --> 01:00:28.840]  И заканчивается в вершине У.
[01:00:29.840 --> 01:00:30.840]  В вершине У.
[01:00:31.840 --> 01:00:32.840]  Ну, кстати, не обязательно заканчивается.
[01:00:33.840 --> 01:00:35.840]  Давайте для красоты будем считать, что заканчивается.
[01:00:36.840 --> 01:00:37.840]  А красный путь, да?
[01:00:38.840 --> 01:00:39.840]  Да.
[01:00:40.840 --> 01:00:41.840]  Что значит красный путь?
[01:00:42.840 --> 01:00:43.840]  Что в этой декомпозиции?
[01:00:44.840 --> 01:00:45.840]  Ну, делается по факту так.
[01:00:46.840 --> 01:00:47.840]  Все вот эти ребра объявляются красными.
[01:00:47.840 --> 01:00:48.840]  Вот.
[01:00:49.840 --> 01:00:51.840]  Если У была не последней вершиной в своем пути.
[01:00:52.840 --> 01:00:54.840]  То, как бы, значит, здесь вот это ребро обляется синим.
[01:00:55.840 --> 01:00:56.840]  Больше никаких изменений нет.
[01:00:57.840 --> 01:00:59.840]  А те красные ответвления в другую сторону?
[01:01:00.840 --> 01:01:01.840]  Чего? Какие?
[01:01:02.840 --> 01:01:04.840]  Ну, там где было синий ребро, у нас же был в другую сторону.
[01:01:05.840 --> 01:01:06.840]  Там красный был тоже.
[01:01:07.840 --> 01:01:08.840]  Ах, да. Спасибо.
[01:01:09.840 --> 01:01:10.840]  Да, это важно.
[01:01:11.840 --> 01:01:13.840]  Да, если были ответвления в другую сторону, значит, эти ответвления тоже объявляются синими.
[01:01:13.840 --> 01:01:14.840]  А сплей с плейм?
[01:01:15.840 --> 01:01:16.840]  А сплей с плейм?
[01:01:17.840 --> 01:01:18.840]  А сплей с плейм?
[01:01:19.840 --> 01:01:22.840]  А потому что у сплея есть, как бы, тоже, помните, что такое?
[01:01:23.840 --> 01:01:24.840]  Что такое сплей дерева, да?
[01:01:25.840 --> 01:01:27.840]  Какое двоичное дерево поиска называется сплей?
[01:01:28.840 --> 01:01:29.840]  Там является сплей деревом.
[01:01:30.840 --> 01:01:31.840]  Любое?
[01:01:32.840 --> 01:01:33.840]  Любое. Там тоже никаких вариантов нет.
[01:01:34.840 --> 01:01:37.840]  Там читерство было в том, что есть мистическая операция сплей.
[01:01:38.840 --> 01:01:39.840]  Надо было тоже капсу написать, видимо.
[01:01:40.840 --> 01:01:41.840]  Вот, которая просто говорит, так.
[01:01:42.840 --> 01:01:44.840]  Я работаю с вершиной, а давайте-ка мы ее в корень загоним.
[01:01:45.840 --> 01:01:48.840]  Вот. И после этого мы там шаманили-шаманили.
[01:01:49.840 --> 01:01:50.840]  Оказывается, что все работает за логарифом.
[01:01:51.840 --> 01:01:52.840]  И даже еще круче.
[01:01:53.840 --> 01:01:54.840]  Фибоначевая куча.
[01:01:55.840 --> 01:01:56.840]  Здесь мы ее не даже делали.
[01:01:57.840 --> 01:01:58.840]  Что фибоначевая куча?
[01:01:59.840 --> 01:02:02.840]  Спросите. Фибоначевая куча мы никакого дерева не использовали вообще.
[01:02:03.840 --> 01:02:04.840]  Какая-то красная куча.
[01:02:05.840 --> 01:02:06.840]  Нет.
[01:02:07.840 --> 01:02:08.840]  Нет, фибоначевая куча, нет.
[01:02:08.840 --> 01:02:09.840]  Нет.
[01:02:10.840 --> 01:02:12.840]  Фибоначевая куча, это мы как бы, где мы действительно сидим
[01:02:13.840 --> 01:02:15.840]  и буквально делаем, пока нам не приспичит.
[01:02:16.840 --> 01:02:17.840]  Ну вот.
[01:02:18.840 --> 01:02:19.840]  Но как бы это уже...
[01:02:20.840 --> 01:02:21.840]  Как говорится, это другая история.
[01:02:22.840 --> 01:02:23.840]  А.
[01:02:24.840 --> 01:02:27.840]  Значит, что делает эксполс?
[01:02:28.840 --> 01:02:29.840]  Он перешел...
[01:02:30.840 --> 01:02:33.840]  Он меняет цвета минимального количества рыбы
[01:02:35.840 --> 01:02:37.840]  таким образом, чтобы у вас образовался
[01:02:38.840 --> 01:02:40.840]  красный путь от вершины У до корня.
[01:02:41.840 --> 01:02:42.840]  Вот я формально так скажу.
[01:02:45.840 --> 01:02:47.840]  Ну нет, мы же меняем еще вот самое нижнее.
[01:02:48.840 --> 01:02:49.840]  Чтобы у нас был путь...
[01:02:50.840 --> 01:02:51.840]  А это включается в понятие,
[01:02:52.840 --> 01:02:53.840]  существует красный путь от У до корня,
[01:02:54.840 --> 01:02:55.840]  но я имею в виду, что это целый путь,
[01:02:56.840 --> 01:02:57.840]  а не как бы...
[01:02:58.840 --> 01:02:59.840]  Можно по красным ребрам добраться от удара.
[01:03:00.840 --> 01:03:01.840]  Спасибо за уточнение.
[01:03:02.840 --> 01:03:06.840]  То есть я хочу, чтобы У был одним из концов этого пути.
[01:03:09.840 --> 01:03:12.840]  То есть да, то, что на У висит, мы хотим отпилить.
[01:03:15.840 --> 01:03:17.840]  А сейчас мы сможем либо вниз отпиливать,
[01:03:18.840 --> 01:03:21.840]  разве нам не лучше, типа, иметь больше красных ребер?
[01:03:22.840 --> 01:03:23.840]  У нас же был какой-то путь,
[01:03:24.840 --> 01:03:25.840]  пусть уже будет просто для меня.
[01:03:26.840 --> 01:03:27.840]  Знаете, для...
[01:03:28.840 --> 01:03:29.840]  Ну вот это...
[01:03:30.840 --> 01:03:31.840]  Ну скажешь так, можно задумываться,
[01:03:32.840 --> 01:03:33.840]  когда это надо делать, а когда нет.
[01:03:34.840 --> 01:03:36.840]  Но пока скажем так, авторы сказали делать так.
[01:03:37.840 --> 01:03:38.840]  Значит, будем делать так.
[01:03:39.840 --> 01:03:40.840]  После того, как мы изучим доказательства,
[01:03:41.840 --> 01:03:43.840]  вы тогда уже получите возможность думать,
[01:03:44.840 --> 01:03:45.840]  когда это реально надо делать, когда нет.
[01:03:46.840 --> 01:03:49.840]  Одна из причин, почему это надо было делать.
[01:03:50.840 --> 01:03:54.840]  Предположим, что мистическая функция expose работает за логорифом.
[01:03:55.840 --> 01:03:56.840]  Ну, амортизировано, да?
[01:03:58.840 --> 01:03:59.840]  Допустим.
[01:04:00.840 --> 01:04:01.840]  Тогда, например,
[01:04:02.840 --> 01:04:03.840]  тогда, смотрите,
[01:04:03.840 --> 01:04:04.840]  тогда, например,
[01:04:05.840 --> 01:04:07.840]  тогда переподвесить корень, на самом деле,
[01:04:08.840 --> 01:04:09.840]  можно элементарным образом.
[01:04:10.840 --> 01:04:11.840]  То есть как...
[01:04:12.840 --> 01:04:13.840]  Вот эту вот операцию,
[01:04:14.840 --> 01:04:15.840]  теперь сделать легче всего.
[01:04:16.840 --> 01:04:18.840]  Да, делаем expose.u
[01:04:19.840 --> 01:04:21.840]  и делаем реверс вот этого пути в AVL.
[01:04:22.840 --> 01:04:23.840]  Все.
[01:04:24.840 --> 01:04:25.840]  То есть что такое корень?
[01:04:26.840 --> 01:04:27.840]  Это значит, возьмите корневой путь
[01:04:28.840 --> 01:04:29.840]  и возьмите в нем первую вершину.
[01:04:30.840 --> 01:04:31.840]  Все.
[01:04:31.840 --> 01:04:33.840]  А как вы помните, AVL у нас реверс на отрезке поддерживает.
[01:04:34.840 --> 01:04:35.840]  Оказывается.
[01:04:36.840 --> 01:04:37.840]  Да, кто бы мог подумать.
[01:04:38.840 --> 01:04:39.840]  Ну, факт стоит с фактом.
[01:04:40.840 --> 01:04:41.840]  Вот.
[01:04:42.840 --> 01:04:43.840]  Что дальше?
[01:04:44.840 --> 01:04:45.840]  Так, но это...
[01:04:46.840 --> 01:04:47.840]  Но это только реверт.
[01:04:48.840 --> 01:04:52.840]  Значит, у нас теперь задача как бы сделать все за expose.
[01:04:55.840 --> 01:04:56.840]  Вот.
[01:04:57.840 --> 01:04:59.840]  За expose плюс какие-нибудь там малое количество действий.
[01:05:01.840 --> 01:05:02.840]  Так.
[01:05:05.840 --> 01:05:06.840]  Чего-чего-чего?
[01:05:09.840 --> 01:05:10.840]  Нет, пока нет.
[01:05:11.840 --> 01:05:12.840]  Пока не хотим.
[01:05:17.840 --> 01:05:20.840]  Нет, ну пока нет.
[01:05:21.840 --> 01:05:22.840]  Пока просто какая-то черная магия, которая это делает.
[01:05:23.840 --> 01:05:24.840]  Хотя я вам скажу, на самом деле,
[01:05:25.840 --> 01:05:28.840]  никакой черной магии нет, он буквально в тупую вот это все делает.
[01:05:29.840 --> 01:05:30.840]  Чего?
[01:05:31.840 --> 01:05:35.840]  Потому что сплей тоже в тупую подымает вершину за корень,
[01:05:36.840 --> 01:05:37.840]  за отглубины этой вершины.
[01:05:39.840 --> 01:05:40.840]  Ну, я в тупую.
[01:05:41.840 --> 01:05:42.840]  Ну и идея одна и та же.
[01:05:43.840 --> 01:05:44.840]  Нет, на уровне идеи одна и та же.
[01:05:45.840 --> 01:05:46.840]  Вот, только в этом.
[01:05:47.840 --> 01:05:49.840]  А почему еще раз мы делаем за expose, если у нас...
[01:05:50.840 --> 01:05:54.840]  Ну, ладно, мы его делаем за expose плюс реверс в AVL.
[01:05:55.840 --> 01:05:56.840]  Ну хорошо.
[01:05:56.840 --> 01:05:57.840]  Так это мы только один.
[01:06:01.840 --> 01:06:02.840]  Ну нет, как бы...
[01:06:03.840 --> 01:06:05.840]  Нет, вся остальная структура дерева не меняется.
[01:06:07.840 --> 01:06:08.840]  Потому что...
[01:06:09.840 --> 01:06:10.840]  Да.
[01:06:11.840 --> 01:06:13.840]  Там есть остальные пути, для каждого пути храним,
[01:06:14.840 --> 01:06:16.840]  кто родитель этого пути.
[01:06:17.840 --> 01:06:18.840]  Все.
[01:06:19.840 --> 01:06:20.840]  От того, что вы превёрсили этот корневой путь,
[01:06:21.840 --> 01:06:22.840]  в общем, там родители остальных не поменялись.
[01:06:23.840 --> 01:06:24.840]  То есть поменялась их иерархия внутри.
[01:06:24.840 --> 01:06:26.840]  То есть, как вы знаете, это, скажем так,
[01:06:27.840 --> 01:06:28.840]  от перестановок в правительстве,
[01:06:29.840 --> 01:06:30.840]  жизнь всех остальных особо не поменялась.
[01:06:31.840 --> 01:06:33.840]  Ну вот, какая-то такая типичная ситуация.
[01:06:35.840 --> 01:06:36.840]  Ну вот.
[01:06:37.840 --> 01:06:38.840]  Ну, бывает такое.
[01:06:39.840 --> 01:06:40.840]  Ну, вы там, я не знаю...
[01:06:41.840 --> 01:06:42.840]  Ну, знаете, там...
[01:06:43.840 --> 01:06:44.840]  Да.
[01:06:45.840 --> 01:06:46.840]  Нет, ну мало, ну вот.
[01:06:47.840 --> 01:06:48.840]  Нет, ну мало ли.
[01:06:49.840 --> 01:06:50.840]  Там было...
[01:06:51.840 --> 01:06:53.840]  Ладно, лучше на всякий случай не будут тут приводить примеров.
[01:06:54.840 --> 01:06:55.840]  А то, знаете, тут...
[01:06:56.840 --> 01:06:57.840]  А то ляпни что-то на камеру лишки.
[01:06:58.840 --> 01:06:59.840]  Вот.
[01:07:01.840 --> 01:07:02.840]  Нет, Дональд.
[01:07:03.840 --> 01:07:04.840]  Что, Дональд?
[01:07:05.840 --> 01:07:06.840]  Не, ну как-то нет.
[01:07:07.840 --> 01:07:08.840]  Да, поменялась.
[01:07:09.840 --> 01:07:11.840]  Да, поменялась наша жизнь от того, что поменялся президент США.
[01:07:12.840 --> 01:07:13.840]  Действительно, да.
[01:07:14.840 --> 01:07:15.840]  Но учитывая, что они меняются там...
[01:07:16.840 --> 01:07:18.840]  Они там, господин, каждые восемь лет меняются.
[01:07:19.840 --> 01:07:20.840]  И это в худшем случае.
[01:07:21.840 --> 01:07:22.840]  А то бывает и почаще.
[01:07:22.840 --> 01:07:23.840]  Нет, а что у нас?
[01:07:24.840 --> 01:07:25.840]  Так, так, стоп.
[01:07:26.840 --> 01:07:28.840]  Так, ребят, давайте это...
[01:07:30.840 --> 01:07:31.840]  Как говорится, да под...
[01:07:32.840 --> 01:07:33.840]  Вот.
[01:07:34.840 --> 01:07:35.840]  Значит, смотрите.
[01:07:36.840 --> 01:07:37.840]  Значит, дальше.
[01:07:38.840 --> 01:07:39.840]  Так, значит, ладно, Вик.
[01:07:40.840 --> 01:07:41.840]  Так, что-то тут еще попроще.
[01:07:42.840 --> 01:07:43.840]  Так, ладно, самое тупое.
[01:07:44.840 --> 01:07:45.840]  Как найти ЛЦА?
[01:07:46.840 --> 01:07:47.840]  ЛЦА?
[01:07:48.840 --> 01:07:49.840]  ЛЦА?
[01:07:49.840 --> 01:07:50.840]  Ну да.
[01:07:51.840 --> 01:07:52.840]  Ну да.
[01:07:53.840 --> 01:07:54.840]  Вот самое смешное.
[01:07:55.840 --> 01:07:56.840]  Действительно, смотрите.
[01:07:57.840 --> 01:07:58.840]  Как найти...
[01:07:59.840 --> 01:08:00.840]  А, ну, во-первых, Влад, давайте еще...
[01:08:01.840 --> 01:08:02.840]  Что ж там?
[01:08:03.840 --> 01:08:04.840]  Нет, то на самом деле...
[01:08:05.840 --> 01:08:06.840]  Ладно, давайте вот начнем с разминочки.
[01:08:07.840 --> 01:08:09.840]  Как понять, является ли вершина У предком вершины В?
[01:08:11.840 --> 01:08:12.840]  Да, действительно.
[01:08:13.840 --> 01:08:14.840]  То есть предок, да.
[01:08:15.840 --> 01:08:17.840]  То есть просто делаем эксполс и просто проверяем.
[01:08:17.840 --> 01:08:20.840]  Не находится ли случайно вершина У на этом пути?
[01:08:21.840 --> 01:08:22.840]  Вот, кстати, очень удобно, да?
[01:08:23.840 --> 01:08:25.840]  То есть, на самом деле, операция эксполса,
[01:08:26.840 --> 01:08:29.840]  это называется операция ХАЧО, МОЁ РОДОСЛОВНОЮ!
[01:08:30.840 --> 01:08:31.840]  А как мы знаем?
[01:08:32.840 --> 01:08:33.840]  Ага, и отпилить потомков, да.
[01:08:34.840 --> 01:08:36.840]  Как мы можем понять, что вершина...
[01:08:37.840 --> 01:08:38.840]  Ну...
[01:08:39.840 --> 01:08:40.840]  Что корень, это корень.
[01:08:41.840 --> 01:08:43.840]  Ну, скажем так, каждое...
[01:08:44.840 --> 01:08:46.840]  Значит, воображать тут себе имеет смысл следующее.
[01:08:47.840 --> 01:08:48.840]  Каждая вершина, да?
[01:08:49.840 --> 01:08:50.840]  Вот знаете, тут на самом деле такой тонкий момент,
[01:08:51.840 --> 01:08:52.840]  который абсолютно естественный для Тарьяна,
[01:08:53.840 --> 01:08:54.840]  но абсолютно неестественный для олимпиадников.
[01:08:55.840 --> 01:08:57.840]  Значит, момент заключается в следующем.
[01:08:58.840 --> 01:09:01.840]  То есть, каждая вершина, это не какой-то там номер, да?
[01:09:02.840 --> 01:09:04.840]  Какое-то мистическое число, это какой-то объект.
[01:09:05.840 --> 01:09:08.840]  То есть, этот объект связан указателями с другими объектами,
[01:09:09.840 --> 01:09:13.840]  эти указатели каким-то образом в совокупности образуют дерево,
[01:09:14.840 --> 01:09:16.840]  кучу фибоначи или какую-нибудь другую структуру,
[01:09:17.840 --> 01:09:18.840]  соответственно.
[01:09:19.840 --> 01:09:20.840]  Но...
[01:09:21.840 --> 01:09:25.840]  Но на каждый этот объект у нас сохраняется ссылка.
[01:09:26.840 --> 01:09:27.840]  Поэтому мы можем тыкнуть у нее и говорить,
[01:09:28.840 --> 01:09:29.840]  так, в каком дереве ты лежишь?
[01:09:30.840 --> 01:09:31.840]  Ну, давайте мы от нее там, честно, в родителей овел дерева
[01:09:32.840 --> 01:09:33.840]  и пойдем, например.
[01:09:34.840 --> 01:09:35.840]  Вот.
[01:09:36.840 --> 01:09:38.840]  То есть, вот такая вот естественная мысль,
[01:09:39.840 --> 01:09:40.840]  то есть, там все вот тарьяновские структуры, в общем-то,
[01:09:41.840 --> 01:09:42.840]  подразумевают подобного рода вещь.
[01:09:43.840 --> 01:09:44.840]  Вот.
[01:09:44.840 --> 01:09:45.840]  Ну вот.
[01:09:46.840 --> 01:09:47.840]  То есть, да, мы это в свое время реализовывали,
[01:09:48.840 --> 01:09:50.840]  что для каждой вершины у нас есть какой-то итератор,
[01:09:51.840 --> 01:09:52.840]  который указывает, где эта вершина в куче находится.
[01:09:53.840 --> 01:09:55.840]  Вот мы в прошлый раз выкручивались так.
[01:09:56.840 --> 01:09:57.840]  Ну вот, суть такая.
[01:09:58.840 --> 01:10:00.840]  Но осторожно, если будете читать оригинальную статью,
[01:10:01.840 --> 01:10:03.840]  то там и код на алголе пишется, в принципе.
[01:10:04.840 --> 01:10:06.840]  Типа Кумир, только американский.
[01:10:07.840 --> 01:10:11.840]  Ну, тут я уже хрень не скажу подробнее.
[01:10:11.840 --> 01:10:12.840]  Вот.
[01:10:13.840 --> 01:10:14.840]  Но нет, там, в принципе, язык-то понятно,
[01:10:15.840 --> 01:10:16.840]  но просто там фишка.
[01:10:17.840 --> 01:10:18.840]  Ну вот, особенно на носях не писали,
[01:10:19.840 --> 01:10:21.840]  но с другой стороны, там алгоритмы в основном это какие-то
[01:10:22.840 --> 01:10:24.840]  в 80-х годах придумывались, соответственно.
[01:10:25.840 --> 01:10:26.840]  А то и раньше.
[01:10:27.840 --> 01:10:30.840]  Хотя нет, куча фибоначи это, по-моему, 84-й.
[01:10:31.840 --> 01:10:34.840]  Сплей дерева тоже примерно в этом роде.
[01:10:35.840 --> 01:10:37.840]  А, ну там забавно, кстати, линкат был придуман,
[01:10:38.840 --> 01:10:39.840]  кстати, на два года раньше.
[01:10:39.840 --> 01:10:40.840]  Сплей дерева, кстати, что интересно.
[01:10:41.840 --> 01:10:42.840]  Который использовал сплей дерева?
[01:10:43.840 --> 01:10:44.840]  Нет, нет, нет.
[01:10:45.840 --> 01:10:47.840]  Нет, там сказано было хитрее.
[01:10:48.840 --> 01:10:49.840]  Если использовать рандомное AVL-дерево,
[01:10:50.840 --> 01:10:51.840]  то будет лог-квадрат.
[01:10:52.840 --> 01:10:54.840]  Но если использовать специальное наше дерево,
[01:10:55.840 --> 01:10:56.840]  вот с такими свойствами из соседней статьи,
[01:10:57.840 --> 01:10:58.840]  какое-то там зубодробительное дерево,
[01:10:59.840 --> 01:11:00.840]  то это будет логарифом.
[01:11:01.840 --> 01:11:02.840]  А потом через два года вышло сплей дерева
[01:11:03.840 --> 01:11:04.840]  и простой тычок, что на самом деле оно на халяву
[01:11:05.840 --> 01:11:06.840]  решает эту задачу и еще пяток сверху.
[01:11:06.840 --> 01:11:07.840]  То есть там просто можно открыть статью,
[01:11:08.840 --> 01:11:09.840]  там просто сразу реклама.
[01:11:10.840 --> 01:11:11.840]  Вот у нас там для некоторых задач
[01:11:12.840 --> 01:11:13.840]  был изобретен finger 3.
[01:11:14.840 --> 01:11:15.840]  Там finger 3 делала асимптотику вот такую-то,
[01:11:16.840 --> 01:11:17.840]  такую-то, какие-то модули, модули, модули.
[01:11:18.840 --> 01:11:19.840]  А теперь давайте просто того,
[01:11:20.840 --> 01:11:21.840]  чтобы писать отдельно finger 3, давайте просто
[01:11:22.840 --> 01:11:23.840]  используем сплей дерева, и окажется,
[01:11:24.840 --> 01:11:25.840]  что оно работает вот так же.
[01:11:26.840 --> 01:11:27.840]  Ну вот, но здорово для каких-то других задач,
[01:11:28.840 --> 01:11:29.840]  мы использовали другое дерево.
[01:11:30.840 --> 01:11:31.840]  Оно работало вот за вот такую-то, такую-то
[01:11:32.840 --> 01:11:33.840]  и такую-то асимптотику, и в конкретных случаях
[01:11:34.840 --> 01:11:35.840]  это помогало.
[01:11:36.840 --> 01:11:40.040]  то же самое сплей дерева, оно работает за ту же самую
[01:11:40.040 --> 01:11:42.100]  асимптотику, на самом деле, пьем абсолютно не меняя
[01:11:42.100 --> 01:11:43.100]  своей структуры.
[01:11:43.100 --> 01:11:46.640]  То есть на самом деле сплей дерева, оно работает, ну
[01:11:46.640 --> 01:11:48.560]  в смысле в том плане, что это абсолютно то же самое
[01:11:48.560 --> 01:11:51.520]  сплей дерева, просто по нему можно доказать и ту асимптотику,
[01:11:51.520 --> 01:11:54.560]  и ту асимптотику, и эту асимптотику, и эту асимптотику, и логарифм
[01:11:54.560 --> 01:11:55.560]  сверху.
[01:11:55.560 --> 01:11:57.880]  То есть мы заплатили просто амортизацией.
[01:11:57.880 --> 01:11:58.880]  Вот.
[01:11:58.880 --> 01:12:00.960]  А вы знаете правда ли то, что вот создатель сплей
[01:12:00.960 --> 01:12:04.280]  дерева сидел на кэпе и под каждым разбором задач
[01:12:04.280 --> 01:12:06.280]  там, где был какой-то дерево поиска, он писал, что вот
[01:12:06.280 --> 01:12:09.280]  вообще-то через сплей дерева можно уже решить.
[01:12:09.280 --> 01:12:10.280]  Нет, этого я не знаю.
[01:12:10.280 --> 01:12:11.280]  Ну ладно.
[01:12:11.280 --> 01:12:14.280]  Нет, все, что я знаю, это то, что как бы я когда-то
[01:12:14.280 --> 01:12:18.760]  видел на Код Форсик человека синего рейтинга с именем
[01:12:18.760 --> 01:12:19.760]  Дэниел Слейтер.
[01:12:19.760 --> 01:12:20.760]  Это да.
[01:12:20.760 --> 01:12:21.760]  Кто?
[01:12:21.760 --> 01:12:22.760]  Дэниел Слейтер.
[01:12:22.760 --> 01:12:25.840]  Один из создателей, кстати, вот сплей дерева и вот этого
[01:12:25.840 --> 01:12:26.840]  вот.
[01:12:26.840 --> 01:12:30.040]  То есть это называется, можно более официальное название
[01:12:30.040 --> 01:12:32.440]  может быть это динамические деревья слейтера Торьяна.
[01:12:32.440 --> 01:12:33.440]  Вот.
[01:12:33.440 --> 01:12:36.280]  Но как бы одно дело придумать умный алгоритм, а другое
[01:12:36.280 --> 01:12:38.000]  дело там уметь записывать лапшу.
[01:12:38.000 --> 01:12:40.440]  Там тестирующую систему.
[01:12:40.440 --> 01:12:43.720]  Это да, это немножко раз.
[01:12:43.720 --> 01:12:47.120]  Это не оно.
[01:12:47.120 --> 01:12:48.120]  Ну как минимум.
[01:12:48.120 --> 01:12:52.360]  Ну ему наверно да.
[01:12:52.360 --> 01:12:53.360]  Ну там да.
[01:12:53.360 --> 01:12:56.520]  В этом случае страшно сказать сколько лет Торьяна, потому
[01:12:56.520 --> 01:12:59.720]  что насколько мне известно Торьян как бы жив и продолжает
[01:12:59.720 --> 01:13:02.320]  работать вполне себе.
[01:13:02.320 --> 01:13:06.040]  Ну правда, ну то есть понятно нет, у него там, я думаю,
[01:13:06.040 --> 01:13:10.400]  там понятно огромное количество учеников, учеников, учеников
[01:13:10.400 --> 01:13:11.400]  там и так далее.
[01:13:11.400 --> 01:13:14.840]  То есть мало и там, ну знаете, там вообще бывает, у меня
[01:13:14.840 --> 01:13:17.080]  прям азир лащей, потому что в 12-м году я вообще увидел
[01:13:17.080 --> 01:13:19.640]  такую ссылку на статью, которая называется строгая
[01:13:19.640 --> 01:13:20.640]  куча фибонахи.
[01:13:20.640 --> 01:13:24.640]  Но фишка заключает в том, как бы сделать такую кучу
[01:13:24.640 --> 01:13:26.320]  фибонахи, чтобы в ней не было амортизации.
[01:13:26.320 --> 01:13:29.960]  Чтобы вот эти заявленные симптотики были честными.
[01:13:30.800 --> 01:13:32.400]  Вот утверждение это можно.
[01:13:32.400 --> 01:13:40.360]  Нет, нет, я вам даже больше скажу, да ладно, раз уж отвлекаемся,
[01:13:40.360 --> 01:13:41.360]  то что делать.
[01:13:41.360 --> 01:13:43.840]  Нет, потому что вот действительно, вот что такое куча фибонахи?
[01:13:43.840 --> 01:13:47.320]  Это куча, да, которая делает все операции, кроме непосредственного
[01:13:47.320 --> 01:13:48.320]  удаления, за единицу.
[01:13:48.320 --> 01:13:49.320]  Ну удаление делает зелгориф.
[01:13:49.320 --> 01:13:53.400]  А теперь задача, нельзя ли сделать так, чтобы это
[01:13:53.400 --> 01:13:54.400]  было честно?
[01:13:54.400 --> 01:13:57.000]  Потому что там, потому что помните, да, если мы говорим,
[01:13:57.000 --> 01:13:59.440]  потому что помните, как сделать кучу, которая теперь делает
[01:13:59.440 --> 01:14:01.760]  инсерт за зелгорифом, все остальное за единицу.
[01:14:01.760 --> 01:14:03.080]  С помощью амортизации легко.
[01:14:03.080 --> 01:14:05.520]  Берем обычную кучу и с помощью правильного потенциала
[01:14:05.520 --> 01:14:06.520]  доказываем.
[01:14:06.520 --> 01:14:10.640]  Помните, да, то есть это как бы, то есть это уровень
[01:14:10.640 --> 01:14:14.240]  там просто, это просто называется словесной эквилибристики
[01:14:14.240 --> 01:14:15.240]  на самом деле.
[01:14:15.240 --> 01:14:16.240]  Вот.
[01:14:16.240 --> 01:14:18.080]  Поэтому можно ли сделать так, чтобы там реально все
[01:14:18.080 --> 01:14:19.080]  было по-честному?
[01:14:19.080 --> 01:14:20.080]  Вот.
[01:14:20.080 --> 01:14:23.440]  Ну на самом деле в 96 году появилась такая первая
[01:14:23.440 --> 01:14:24.440]  куча.
[01:14:24.440 --> 01:14:25.440]  Называется куча брода лакасаки.
[01:14:25.440 --> 01:14:26.440]  Вот.
[01:14:26.440 --> 01:14:27.440]  Наоборот.
[01:14:27.440 --> 01:14:38.880]  Нет, наоборот, это удаление и там удаление и экстракт
[01:14:38.880 --> 01:14:40.840]  мин за зелгорифом, все остальное за единицу.
[01:14:40.840 --> 01:14:43.120]  Но это какая-то достаточно сложная куча, я помню, пытался
[01:14:43.120 --> 01:14:45.080]  разобраться, а у меня там особо не получилось.
[01:14:45.080 --> 01:14:46.080]  Вот.
[01:14:46.080 --> 01:14:48.760]  Но также я видел статью на ссылку 12-го года, там
[01:14:48.760 --> 01:14:51.640]  автор, там Тарьян там второй автор, первый там кто-то
[01:14:51.640 --> 01:14:52.640]  еще.
[01:14:52.640 --> 01:14:54.440]  Это называется строгая куча фибоначи.
[01:14:54.440 --> 01:14:56.440]  У меня в счет возникло ощущение, что это была какая-то там
[01:14:56.440 --> 01:14:58.080]  видимо дипломная работа, возможно.
[01:14:58.080 --> 01:14:59.080]  Не знаю.
[01:14:59.080 --> 01:15:04.240]  Нет, я только ссылку видел в какой-то другой статье,
[01:15:04.240 --> 01:15:06.240]  что там строгая куча фибоначи хип.
[01:15:06.240 --> 01:15:07.240]  Все.
[01:15:07.240 --> 01:15:10.440]  Но я подозреваю, что это реально там на уровне, ну
[01:15:10.440 --> 01:15:12.760]  там может диплом, но даже не диплом, а может быть
[01:15:12.760 --> 01:15:14.560]  это PhD такое на самом деле было.
[01:15:14.560 --> 01:15:19.080]  Ну там ладно, отдельная песня там, что-то там PhD,
[01:15:19.080 --> 01:15:23.160]  потому что как бы там, можно уже бесконечно думать
[01:15:23.160 --> 01:15:25.720]  о том, какая там называется, насколько большая разница
[01:15:25.720 --> 01:15:29.640]  между там между PhD нашей кандидатской, потому что
[01:15:29.640 --> 01:15:36.480]  как бы вроде, тут я сослужусь на моего научного руководителя,
[01:15:36.480 --> 01:15:38.920]  он утверждает, что у нас кандидатская диссертация
[01:15:38.920 --> 01:15:40.120]  требует все-таки посильнее.
[01:15:40.120 --> 01:15:44.720]  Вот, собственно, чем-то к американскому PhD, но это
[01:15:44.720 --> 01:15:45.720]  уже другой вопрос.
[01:15:46.720 --> 01:15:47.720]  Вот.
[01:15:47.720 --> 01:15:54.920]  Значит, ладно, ну вот, так, откуда мы, откуда мы в это
[01:15:54.920 --> 01:16:00.760]  все пришли вообще, так, да, начали с expose, там по арматизации
[01:16:00.760 --> 01:16:03.840]  говорили, ну окей, ладно, это тоже, в общем так, немножко
[01:16:03.840 --> 01:16:06.960]  посмотреть, что происходит, можно, так что, давайте
[01:16:06.960 --> 01:16:10.920]  ладно, давайте пока подобиваем, значит, как понять с помощью
[01:16:10.920 --> 01:16:15.000]  expose является ли кто-то чьим-то предком, вот легко, потому
[01:16:15.000 --> 01:16:18.080]  что мы для вершины В можем просто вызвать expose, и теперь
[01:16:18.080 --> 01:16:20.480]  у нас есть путь, на котором лежат просто все предки
[01:16:20.480 --> 01:16:23.280]  В, и только они, и остается только выяснить есть ли
[01:16:23.280 --> 01:16:24.520]  среди них У, да или нет.
[01:16:24.520 --> 01:16:29.200]  Ну, проверить, является ли у родителем, ну, при
[01:16:29.200 --> 01:16:33.000]  наличии вверх, это уже не так тривиально, но, тоже,
[01:16:33.000 --> 01:16:39.640]  но, но пока да, теперь ЛСА, ну, просто, почему я, значит,
[01:16:39.640 --> 01:16:42.240]  это сделал перед ЛСА, потому что в ЛСА, да, у В, неплохо
[01:16:42.240 --> 01:16:44.800]  было бы проверить, является ли там кто-нибудь из них
[01:16:44.800 --> 01:16:48.960]  чьим-то предком, ну, пока в тупую, скажем, хотя на
[01:16:48.960 --> 01:16:51.560]  самом деле, как бы, можно опирать, но, то есть, как
[01:16:51.560 --> 01:16:53.760]  бы, если кто-то из них является чьим-то предком, то, как
[01:16:53.760 --> 01:16:56.240]  бы, значит, то, кто предком является, будь здоров, то
[01:16:56.240 --> 01:17:03.840]  ты ЛСА, логично, да, логично, да, значит, далее, что да,
[01:17:03.840 --> 01:17:08.160]  ну, вот, а что делать, если они не являются, ну, тогда
[01:17:08.160 --> 01:17:11.080]  идея оказывается простой, вот у нас есть, пусть у нас
[01:17:11.080 --> 01:17:15.000]  у и в не являются предками друг друга, тогда оказывается
[01:17:15.000 --> 01:17:20.160]  следующее, значит, вот где-то у есть в, вызываем с плей
[01:17:20.160 --> 01:17:33.280]  от, expose от у, а теперь вызываем expose от в, ну, тогда замечаю,
[01:17:33.280 --> 01:17:36.360]  что происходит, происходит следующее, путь распиливается,
[01:17:36.360 --> 01:17:39.160]  видимо, на два, ну, если никто ничем предком не даст,
[01:17:39.160 --> 01:17:43.560]  то пусть распиливается на два и уходит в сторону
[01:17:43.560 --> 01:17:48.720]  в, в чём обратите внимание, это происходит ровно в точке
[01:17:48.720 --> 01:17:51.120]  ЛСА, то есть, всё, что вам нужно, это теперь взять
[01:17:51.120 --> 01:17:53.800]  путь, в котором лежит у, взять его родителей этого
[01:17:53.800 --> 01:18:03.040]  пути и это и есть ЛСА, то есть, два expose и у от единицы,
[01:18:03.040 --> 01:18:14.960]  expose от у и expose от в, ну, я сказал два expose и у от единицы,
[01:18:14.960 --> 01:18:17.520]  а у от единицы это, что мы берём путь от у, ну ладно,
[01:18:17.520 --> 01:18:20.080]  это не у от единицы может быть, то просто берём путь
[01:18:20.080 --> 01:18:28.040]  от у и берём у этого пути родителя, ну, хорошо, ладно,
[01:18:28.040 --> 01:18:32.200]  там, ну ладно, давайте, за какую операцию вы по вершине
[01:18:32.200 --> 01:18:38.080]  поймёте её дерево, ну хорошо, ладно, допустим, хорошо
[01:18:38.080 --> 01:18:42.880]  логариф уговорить, ладно, два expose плюс логариф, хорошо,
[01:18:42.880 --> 01:18:45.520]  хотя там, ну или можно там правильную структуру придумать
[01:18:45.520 --> 01:18:55.480]  на эту тему шубы, ну ладно, так вот, да, можно сделать
[01:18:55.480 --> 01:18:59.720]  так, можно даже, на самом деле, заметить, что лишних
[01:18:59.720 --> 01:19:03.040]  expose для того, чтобы делать функцию из incestor даже не
[01:19:03.040 --> 01:19:06.360]  нужно, потому что можно было сделать так, делаем
[01:19:06.360 --> 01:19:10.600]  expose от у и тут же проверяем, не оказалось ли вершина
[01:19:10.600 --> 01:19:13.560]  в на этом пути, если оказалось, то ответ, соответственно,
[01:19:13.560 --> 01:19:17.680]  это и есть, ну, то ответ, соответственно, это называется
[01:19:17.680 --> 01:19:22.960]  и есть в, если не оказалось, вызываем expose от в, после
[01:19:22.960 --> 01:19:25.800]  этого проверяем, если у оказалось на пути между
[01:19:26.280 --> 01:19:30.000]  значит, ответ у, в противном случае берём путь от у
[01:19:30.000 --> 01:19:34.400]  и берём родителей этого пути, то есть реально, на
[01:19:34.400 --> 01:19:36.960]  самом деле, чтобы рассмотреть все случаи, на самом деле,
[01:19:36.960 --> 01:19:41.760]  вам просто суммарно нужно два expose, вот, ну это как
[01:19:41.760 --> 01:19:44.960]  бы, это естественно не асимпатическая оптимизация, но сами понимаете,
[01:19:44.960 --> 01:19:47.800]  наверное, как бы два expose вы делаете или пять, это
[01:19:47.800 --> 01:19:55.320]  всё-таки разные вещи немножко, вот, так, ну вот, так, ну
[01:19:55.320 --> 01:20:02.600]  вот и лца мы искать научились, переподвешивать тоже научились,
[01:20:02.600 --> 01:20:06.360]  но обратите внимание и, в общем-то, тогда и всякие
[01:20:06.360 --> 01:20:09.640]  вот эти вот суммы и присваивание и всё, что угодно на отрезке
[01:20:09.640 --> 01:20:14.520]  тоже делается без труда, то есть на месте сумм присваивания
[01:20:14.520 --> 01:20:18.120]  вот этих, всё, что вам нужно, это на самом деле, то есть
[01:20:18.120 --> 01:20:22.280]  уметь всё это делать в этой вашей АВЛ, всё, что вы умеете
[01:20:22.280 --> 01:20:26.080]  делать в АВЛ на подотрезке, собственно, прекрасно
[01:20:26.080 --> 01:20:30.840]  делается теперь и здесь, ну единственное, то есть как
[01:20:30.840 --> 01:20:34.080]  бы вам придётся там, то есть как бы хотите сделать
[01:20:34.080 --> 01:20:37.360]  там присваивание на пути, так, ну отлично, переподвешиваем
[01:20:37.360 --> 01:20:41.640]  дерево за вершину У, значит, вызываем там expose от В, и
[01:20:41.640 --> 01:20:45.680]  на этом пути, прям всём пути делаем, там объявляем отложенную
[01:20:45.680 --> 01:20:50.400]  операцию присваивания, понимаете, да, вот, то есть
[01:20:51.240 --> 01:20:53.440]  без проблем, причём без ухудшения асимптутики.
[01:20:55.440 --> 01:20:59.440]  А проверяемые в одном дереве лежат, так же, как в дверь, да?
[01:20:59.440 --> 01:21:01.000]  Прямо с хори не садиваем хори.
[01:21:01.000 --> 01:21:02.320]  Ну, типа того.
[01:21:03.640 --> 01:21:06.040]  Всё, с меня не понятно, почему expose так работает быстро.
[01:21:06.040 --> 01:21:10.080]  Вот, нет, да, осталось только, точнее, да, теперь, да, всё,
[01:21:10.080 --> 01:21:13.280]  да, ну главное бы ещё понять, как конкретно работает expose,
[01:21:14.720 --> 01:21:17.840]  но, как вы уже сказали, работает он в тупую, да, то есть все
[01:21:17.880 --> 01:21:20.800]  распилы, все биржи делаются абсолютно в тупую, прям вот
[01:21:20.800 --> 01:21:21.720]  честным проходом.
[01:21:22.720 --> 01:21:26.480]  Остается только выяснить, это, пока, за какую асимптутику
[01:21:26.480 --> 01:21:28.880]  оказывается, эта амортизированная expose работает.
[01:21:32.400 --> 01:21:36.920]  Ну, да, почему суммарных будет мало, но, думаю, это мы
[01:21:36.920 --> 01:21:41.960]  с вами, окей, поехали, итак, как было правильно отмечено,
[01:21:41.960 --> 01:21:45.200]  да, на самом деле, как делать конкретно линкат, чтобы
[01:21:46.040 --> 01:21:49.480]  красные птицы вообще были мы, на самом деле, не совсем
[01:21:49.480 --> 01:21:56.360]  отметили, вот, но отчасти, возможно, потому что забыли,
[01:21:56.360 --> 01:22:01.680]  а в другой части, потому что, как бы, мы, а в другой
[01:22:01.680 --> 01:22:04.920]  части, потому что, как бы, конечно, анализ expose будет
[01:22:04.920 --> 01:22:12.080]  естественно амортизированный, вот, но, поэтому, значит,
[01:22:12.080 --> 01:22:14.160]  надо будет посмотреть на потенциалы, каким образом
[01:22:14.160 --> 01:22:16.480]  вообще с ним работать, но, правда, по-хорошему,
[01:22:16.480 --> 01:22:18.080]  конечно, нам придется потом пробежаться по всем
[01:22:18.080 --> 01:22:21.800]  остальным операциям и убедиться в том, что там все, кроме
[01:22:21.800 --> 01:22:30.320]  expose меняет этот потенциал не сильно, вот, но, действительно,
[01:22:30.320 --> 01:22:33.440]  давайте думать, что же нам действительно нужно,
[01:22:33.440 --> 01:22:38.160]  действительно, чтобы сделать хороший кат, например, вот
[01:22:38.160 --> 01:22:40.880]  как нам теперь удобно распилить путь на два.
[01:22:44.960 --> 01:22:46.720]  Вот, вот, допустим, у нас есть мистическая функция
[01:22:46.720 --> 01:22:50.200]  expose, которая, заметим, да, что делать функцию expose,
[01:22:50.200 --> 01:22:53.400]  она не только соединяет меня с корнем, но и отпиливает
[01:22:53.400 --> 01:22:57.800]  всех моих потомков, и это, по идее, дает возможность
[01:22:57.800 --> 01:23:01.040]  делать очень удобный кат, кат будет называться, давайте
[01:23:01.040 --> 01:23:07.160]  вызовем, значит, expose от u, и после этого это ребро
[01:23:07.160 --> 01:23:09.920]  становится синим, и его без труда можно удалить,
[01:23:10.920 --> 01:23:13.920]  ну, то есть, по сути, просто взять вершину v, полезть в
[01:23:13.920 --> 01:23:16.800]  корень ее авиэльки и написать, что, слушай, у тебя тут было
[01:23:16.800 --> 01:23:17.800]  ребро?
[01:23:17.800 --> 01:23:19.320]  Да, все, теперь его нет, поздравляю, ты корень.
[01:23:19.320 --> 01:23:23.360]  Вот, удобно, правда?
[01:23:23.360 --> 01:23:29.240]  Вот, можно, например, это сделать так, как после этого
[01:23:29.240 --> 01:23:30.240]  сделать линк?
[01:23:30.240 --> 01:23:36.320]  Так, ну, как сделать линк, это, конечно, вопрос, потому
[01:23:36.320 --> 01:23:39.440]  что, да, наверное, конечно, напрашивается, конечно,
[01:23:39.440 --> 01:23:42.280]  что если уж хотите подвесить vq, наверное, от ub имеет смысл
[01:23:42.280 --> 01:23:46.920]  сделать expose, но, с другой стороны, непонятно зачем.
[01:23:46.920 --> 01:23:55.000]  Так, ну, нет, напоминаю, мы в линке прописали в инварианте,
[01:23:55.000 --> 01:23:58.920]  что v является корнем, да, можно, конечно, вызвать
[01:23:58.920 --> 01:24:05.360]  и vert, это да, но нет, ну, как-то нет, классическое описание
[01:24:05.360 --> 01:24:08.120]  все-таки говорят, что, как бы, хочется подвесить
[01:24:08.120 --> 01:24:12.000]  дерево с корнем v к вершине u, v гарантировано, корень
[01:24:12.000 --> 01:24:16.040]  u, как повезет, про u гарантируется только, что u не является
[01:24:16.040 --> 01:24:21.520]  потомком v, да, ну, то есть, нет, понятно, что там плюс-минус
[01:24:21.520 --> 01:24:24.680]  и vert как бы решает вопрос, но обычно, вот, лучше давайте,
[01:24:24.680 --> 01:24:26.640]  поэтому для удобства давайте лучше считать, что вы корень
[01:24:26.640 --> 01:24:32.000]  всегда, так, без ограничений общности, там, считаем,
[01:24:32.000 --> 01:24:34.880]  что, вот, но, правда, что можно сделать с линком?
[01:24:34.880 --> 01:24:37.520]  Линк, то есть, можно, действительно, просто сказать, ой, а давайте
[01:24:37.520 --> 01:24:41.200]  синие ребро добавим и не будем париться, что, собственно,
[01:24:41.200 --> 01:24:48.680]  такого, вот, но тут, конечно, надо почесаться.
[01:24:48.680 --> 01:25:14.280]  Так, ну, можно сделать так, можно сделать, но, с другой
[01:25:14.280 --> 01:25:17.240]  стороны, если линкать только по синим ребрам, то, как
[01:25:17.480 --> 01:25:19.240]  мы уже поняли, могут быть проблемы, хоть, конечно,
[01:25:19.240 --> 01:25:21.920]  мы там уже и по всем, во всех операциях начинаем делать
[01:25:21.920 --> 01:25:22.920]  эксполз.
[01:25:22.920 --> 01:25:28.000]  Так, могут быть проблемы, а могут и не быть, так что
[01:25:28.000 --> 01:25:31.160]  пришло время начать там понимать, как это вообще
[01:25:31.160 --> 01:25:36.520]  все относительно какого потенциала мы сейчас будем
[01:25:36.520 --> 01:25:41.400]  все это считать и насколько это будет получаться, значит,
[01:25:42.400 --> 01:25:44.160]  как это смотреть внимательно.
[01:25:44.160 --> 01:25:58.680]  Вот, страшная фраза, как-то, так, так, что из этого стереть?
[01:25:58.680 --> 01:26:06.920]  А, ну, давайте вот это стрем, о, ничего себе стерли, ой,
[01:26:06.920 --> 01:26:08.120]  а этим вот красным будет сейчас.
[01:26:08.120 --> 01:26:22.120]  Да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:22.120 --> 01:26:25.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:25.120 --> 01:26:28.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:28.120 --> 01:26:31.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:31.120 --> 01:26:34.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:34.120 --> 01:26:37.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:37.120 --> 01:26:40.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:40.120 --> 01:26:43.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:43.120 --> 01:26:46.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:46.120 --> 01:26:49.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:49.120 --> 01:26:52.120]  да, да, да, да, да, да, да, да, да, да, да, да, да, да, да,
[01:26:52.120 --> 01:26:54.120]  да, да, да, да, да.
[01:27:22.120 --> 01:27:24.120]  Так что давайте еще перейдем к онлайн-лекциям.
[01:27:24.120 --> 01:27:26.120]  Да, вообще ездить никуда не надо будет.
[01:27:26.120 --> 01:27:28.120]  Да, да, да, да.
[01:27:28.120 --> 01:27:30.120]  Да, вот вов-вов-вов.
[01:27:30.120 --> 01:27:32.120]  Я пробовал, да, все знаете.
[01:27:32.120 --> 01:27:34.120]  Первые две недели кайф, а потом...
[01:27:36.120 --> 01:27:38.120]  Вот, а потом это уже становится просто больно.
[01:27:38.120 --> 01:27:40.120]  Вот.
[01:27:40.120 --> 01:27:43.120]  Поэтому, конечно, поэтому, Боже упаси, конечно.
[01:27:43.120 --> 01:27:44.120]  Вот.
[01:27:44.120 --> 01:27:46.120]  Значит, значит, смотрите.
[01:27:46.120 --> 01:27:48.120]  Значит, что мы будем делать?
[01:27:48.120 --> 01:27:50.120]  Значит, дело в том, что мысленно,
[01:27:50.120 --> 01:27:52.120]  как минимум мысленно, да,
[01:27:52.120 --> 01:27:54.120]  мы у каждой вершины
[01:27:54.120 --> 01:27:56.120]  можем
[01:27:56.120 --> 01:27:58.120]  считать
[01:27:58.120 --> 01:28:00.120]  такую штуку, как
[01:28:00.120 --> 01:28:02.120]  СЗ от В.
[01:28:02.120 --> 01:28:04.120]  Ну, размеры под дерево, правда?
[01:28:04.120 --> 01:28:06.120]  Да, подчеркиваю, трижды подчеркиваю.
[01:28:06.120 --> 01:28:08.120]  Мысленно, потому что всякие вертки
[01:28:08.120 --> 01:28:10.120]  эту СЗ будет там вот
[01:28:10.120 --> 01:28:12.120]  переворачивать только так, логично, да?
[01:28:12.120 --> 01:28:14.120]  То есть там прям совсем
[01:28:14.120 --> 01:28:16.120]  больно будет.
[01:28:16.120 --> 01:28:18.120]  Там можно, конечно, то есть ладно, там отдельно
[01:28:18.120 --> 01:28:20.120]  может быть задачка, придумайте структуру
[01:28:20.120 --> 01:28:22.120]  данных, которые, то есть реализуйте
[01:28:22.120 --> 01:28:24.120]  линкад так, чтобы СЗ-шка прям все-таки
[01:28:24.120 --> 01:28:26.120]  хранилась в явном виде, но это все-таки скорее
[01:28:26.120 --> 01:28:28.120]  доп-накрутка.
[01:28:28.120 --> 01:28:30.120]  Вот есть мысленная СЗ.
[01:28:32.120 --> 01:28:34.120]  И в результате, смотрите, вот
[01:28:34.120 --> 01:28:36.120]  сейчас, вот знаете, сейчас вот как бы надо
[01:28:36.120 --> 01:28:38.120]  не запутаться. Значит, смотрите,
[01:28:38.120 --> 01:28:40.120]  у нас, вот давайте не перепутать,
[01:28:40.120 --> 01:28:42.120]  у нас ребра
[01:28:42.120 --> 01:28:44.120]  бывают красные,
[01:28:46.120 --> 01:28:48.120]  вот,
[01:28:48.120 --> 01:28:50.120]  а бывают синие.
[01:28:52.120 --> 01:28:54.120]  Логично, да?
[01:28:54.120 --> 01:28:56.120]  Вот.
[01:28:56.120 --> 01:28:58.120]  А еще ребра бывают
[01:28:58.120 --> 01:29:00.120]  тяжелые,
[01:29:08.120 --> 01:29:10.120]  а бывают легкие.
[01:29:10.120 --> 01:29:12.120]  Значит, внимание, значит, сейчас
[01:29:12.120 --> 01:29:14.120]  красные, синие и тяжелые, легкие
[01:29:14.120 --> 01:29:16.120]  это, вообще говоря, разные
[01:29:16.120 --> 01:29:18.120]  вещи. Не сильно друг с другом
[01:29:18.120 --> 01:29:20.120]  скоррелированы.
[01:29:20.120 --> 01:29:22.120]  Понимаете, да?
[01:29:22.120 --> 01:29:24.120]  Вот, понимаете?
[01:29:24.120 --> 01:29:26.120]  Да. Вот.
[01:29:26.120 --> 01:29:28.120]  Отлично, значит, тяжелые, легкие,
[01:29:28.120 --> 01:29:30.120]  красные, синие, радость.
[01:29:30.120 --> 01:29:32.120]  Ну, значит, тяжелые, легкие
[01:29:32.120 --> 01:29:34.120]  ровно в смысле хавилайта, да? То есть там
[01:29:34.120 --> 01:29:36.120]  реброл УВ является тяжелым,
[01:29:36.120 --> 01:29:38.120]  но у ребра у СЗ-шки
[01:29:38.120 --> 01:29:40.120]  то есть там реброл УВ является тяжелым,
[01:29:40.120 --> 01:29:42.120]  если там СЗ-шка больше ровно,
[01:29:42.120 --> 01:29:44.120]  чем одна-вторая СЗ-шка, ну, думаю, ну,
[01:29:44.120 --> 01:29:46.120]  это понятно.
[01:29:46.120 --> 01:29:48.120]  Так вот, пришло
[01:29:48.120 --> 01:29:50.120]  время
[01:29:50.120 --> 01:29:52.120]  ввести потенциал.
[01:30:00.120 --> 01:30:02.120]  Значит, потенциал мы нарисуем так.
[01:30:02.120 --> 01:30:04.120]  Потенциал
[01:30:04.120 --> 01:30:06.120]  это количество,
[01:30:06.120 --> 01:30:08.120]  как вы уже догадываетесь,
[01:30:08.120 --> 01:30:10.120]  красных.
[01:30:12.120 --> 01:30:14.120]  Ну, вот.
[01:30:14.120 --> 01:30:16.120]  Легких реброк
[01:30:16.120 --> 01:30:18.120]  совершенно верно.
[01:30:20.120 --> 01:30:22.120]  Да.
[01:30:22.120 --> 01:30:24.120]  Ну, в смысле вообще
[01:30:24.120 --> 01:30:26.120]  во всех деревьях естественно.
[01:30:26.120 --> 01:30:28.120]  Да, приятный потенциал,
[01:30:28.120 --> 01:30:30.120]  он всегда не отрицателен, изначально
[01:30:30.120 --> 01:30:32.120]  он ноль, в общем, то, что нам, то, что мы
[01:30:32.120 --> 01:30:34.120]  заказывали.
[01:30:34.120 --> 01:30:36.120]  А мы не определили еще
[01:30:36.120 --> 01:30:38.120]  легкие и тяжелые ребра, да?
[01:30:38.120 --> 01:30:40.120]  Определили так же, как в Heavy Light.
[01:30:42.120 --> 01:30:44.120]  Просто подчеркнули шток,
[01:30:44.120 --> 01:30:46.120]  то есть как бы, если раньше тяжелые и легкие,
[01:30:46.120 --> 01:30:48.120]  то есть тяжелое автоматически становилось
[01:30:48.120 --> 01:30:50.120]  красным, а легкое – синим, то теперь это не так.
[01:30:50.120 --> 01:30:52.120]  То есть это как бы, то есть
[01:30:52.120 --> 01:30:54.120]  красными и синими ребра становятся
[01:30:54.120 --> 01:30:56.120]  в зависимости
[01:30:56.120 --> 01:30:58.120]  от обстоятельств.
[01:30:58.120 --> 01:31:00.120]  А тяжелые и легкие в зависимости
[01:31:00.120 --> 01:31:02.120]  от тех же обстоятельств, но по-другому.
[01:31:02.120 --> 01:31:04.120]  Вот.
[01:31:04.120 --> 01:31:06.120]  Итак, значит, потенциал количества красных
[01:31:06.120 --> 01:31:08.120]  легких ребер.
[01:31:08.120 --> 01:31:10.120]  Так, ну и давайте
[01:31:10.120 --> 01:31:12.120]  думать. Вот я утверждаю, что относительно
[01:31:12.120 --> 01:31:14.120]  этого
[01:31:14.120 --> 01:31:16.120]  потенциала
[01:31:18.120 --> 01:31:20.120]  учетная стоимость эксполза
[01:31:20.120 --> 01:31:22.120]  логарифум
[01:31:22.120 --> 01:31:24.120]  общего числа вершин
[01:31:24.120 --> 01:31:26.120]  во всех деревьях, с которыми вы работаете.
[01:31:26.120 --> 01:31:28.120]  Вот.
[01:31:30.120 --> 01:31:32.120]  Вот давайте-ка пробежимся
[01:31:32.120 --> 01:31:34.120]  с вами по всем операциям
[01:31:34.120 --> 01:31:36.120]  и поймем.
[01:31:36.120 --> 01:31:38.120]  И поймем, верно ли,
[01:31:38.120 --> 01:31:40.120]  что если мы поверим в этот мистический
[01:31:40.120 --> 01:31:42.120]  эксполспарк,
[01:31:42.120 --> 01:31:44.120]  то все остальные
[01:31:44.120 --> 01:31:46.120]  операции тоже будут иметь учетную стоимость
[01:31:46.120 --> 01:31:48.120]  логариф.
[01:31:52.120 --> 01:31:54.120]  Нет, пока еще, ну вот.
[01:31:54.120 --> 01:31:56.120]  Но нет.
[01:31:56.120 --> 01:31:58.120]  Во-первых, линкат, а во-вторых,
[01:31:58.120 --> 01:32:00.120]  мы доказали, по-моему, для того,
[01:32:00.120 --> 01:32:02.120]  а вдруг те операции, которые мы делаем
[01:32:02.120 --> 01:32:04.120]  за отъединицы, они там увеличивают потенциал
[01:32:04.120 --> 01:32:06.120]  на бесконечность.
[01:32:06.120 --> 01:32:08.120]  Можешь быть такое?
[01:32:08.120 --> 01:32:10.120]  Но теперь давайте думаем. Всякие вот эти операции
[01:32:10.120 --> 01:32:12.120]  там типа LCA
[01:32:12.120 --> 01:32:14.120]  из Ancestor, то есть на самом деле они
[01:32:14.120 --> 01:32:16.120]  потенциал не меняют никак, потому что они не
[01:32:16.120 --> 01:32:18.120]  меняют структуру дерева.
[01:32:18.120 --> 01:32:20.120]  Да, мы пользуем.
[01:32:20.120 --> 01:32:22.120]  Ну, помните, как мы делали LCA,
[01:32:22.120 --> 01:32:24.120]  напоминаю, мы сделали
[01:32:24.120 --> 01:32:26.120]  в два эксполза
[01:32:26.120 --> 01:32:28.120]  и отъединицы
[01:32:28.120 --> 01:32:30.120]  чего-то там.
[01:32:38.120 --> 01:32:40.120]  Пока мы говорим,
[01:32:40.120 --> 01:32:42.120]  мы сказали так, поверим,
[01:32:42.120 --> 01:32:44.120]  что учетная стоимость эксползала
[01:32:44.120 --> 01:32:46.120]  логарифом.
[01:32:46.120 --> 01:32:48.120]  Структуру, в смысле,
[01:32:48.120 --> 01:32:50.120]  красно-синюю структуру.
[01:32:50.120 --> 01:32:52.120]  То есть, смотрите,
[01:32:52.120 --> 01:32:54.120]  из Ancestor он вызывает
[01:32:54.120 --> 01:32:56.120]  два эксполза, и после этого
[01:32:56.120 --> 01:32:58.120]  остается отъединица операции,
[01:32:58.120 --> 01:33:00.120]  которую структуру не меняют.
[01:33:00.120 --> 01:33:02.120]  Но нас заметил, что
[01:33:02.120 --> 01:33:04.120]  здесь вот, да,
[01:33:04.120 --> 01:33:06.120]  кто меняет структуру дерева?
[01:33:06.120 --> 01:33:08.120]  Эксполз и теоретически
[01:33:08.120 --> 01:33:10.120]  Link и Cut.
[01:33:10.120 --> 01:33:12.120]  Все остальные, значит, меняют структуру
[01:33:12.120 --> 01:33:14.120]  только эксползами.
[01:33:14.120 --> 01:33:16.120]  Отсюда тогда автоматически следует,
[01:33:16.120 --> 01:33:18.120]  что если остальные,
[01:33:18.120 --> 01:33:20.120]  то есть тогда получается,
[01:33:20.120 --> 01:33:22.120]  что учетная стоимость всего,
[01:33:22.120 --> 01:33:24.120]  что вы там делаете, помимо эксполза,
[01:33:24.120 --> 01:33:26.120]  это ноль.
[01:33:26.120 --> 01:33:28.120]  Понимаете, да?
[01:33:28.120 --> 01:33:30.120]  Вот, например,
[01:33:30.120 --> 01:33:32.120]  из Ancestor,
[01:33:32.120 --> 01:33:34.120]  он делает один эксполз
[01:33:34.120 --> 01:33:36.120]  и одну проверку, лежит ли
[01:33:36.120 --> 01:33:38.120]  вершина на пути.
[01:33:38.120 --> 01:33:40.120]  Лежит ли она в AVL.
[01:33:40.120 --> 01:33:42.120]  Вот.
[01:33:42.120 --> 01:33:44.120]  Это, очевидно, не меняет
[01:33:44.120 --> 01:33:46.120]  красно-синюю структуру,
[01:33:46.120 --> 01:33:48.120]  то есть от этого не меняются.
[01:33:48.120 --> 01:33:50.120]  Ну, или там. Ну, понятно.
[01:33:50.120 --> 01:33:52.120]  Может меняться внутренняя структура двоичного дерева,
[01:33:52.120 --> 01:33:54.120]  поиск, если вы там используете,
[01:33:54.120 --> 01:33:56.120]  условно, сплей, или там дикартячку,
[01:33:56.120 --> 01:33:58.120]  потому что вы там делаете сплит, мерч,
[01:33:58.120 --> 01:34:00.120]  и, возможно, мерч делает там дерево немножко другое.
[01:34:00.120 --> 01:34:02.120]  Но это уже локальные мелки,
[01:34:02.120 --> 01:34:04.120]  которые потенциал не волнуют.
[01:34:06.120 --> 01:34:08.120]  Поэтому получается учетный
[01:34:08.120 --> 01:34:10.120]  логорифм эксполза и честный
[01:34:10.120 --> 01:34:12.120]  логорифм анцестора, который не меняет
[01:34:12.120 --> 01:34:14.120]  потенциал, превращается тоже в учетный
[01:34:14.120 --> 01:34:16.120]  логорифм, в учетный логорифм так же.
[01:34:18.120 --> 01:34:20.120]  Вот. Ну, самой сайт тоже
[01:34:20.120 --> 01:34:22.120]  два эксполза и тоже от единицы
[01:34:22.120 --> 01:34:24.120]  операций ничего не меняющих, то есть там,
[01:34:24.120 --> 01:34:26.120]  которые там с логорифм работают.
[01:34:26.120 --> 01:34:28.120]  Ну, если вы вот это там, эверт.
[01:34:30.120 --> 01:34:32.120]  О, а вот, а вот, вот, вот,
[01:34:32.120 --> 01:34:34.120]  а вот с эвертом уже неет.
[01:34:34.120 --> 01:34:36.120]  А вот эверт
[01:34:36.120 --> 01:34:38.120]  вообще-то красно-синюю структуру меняет.
[01:34:38.120 --> 01:34:40.120]  Точнее, так, красно-синюю
[01:34:40.120 --> 01:34:42.120]  структуру не меняет,
[01:34:42.120 --> 01:34:44.120]  а вот тяжелолегкую прям сильно
[01:34:44.120 --> 01:34:46.120]  меняет.
[01:34:46.120 --> 01:34:48.120]  В каком
[01:34:48.120 --> 01:34:50.120]  плане меняет? Потому что
[01:34:50.120 --> 01:34:52.120]  что делает эверт? Он после эксполза
[01:34:52.120 --> 01:34:54.120]  делает, берет корневой красной
[01:34:54.120 --> 01:34:56.120]  путь и делает у него реверс.
[01:34:58.120 --> 01:35:00.120]  Получается, что все эти красные
[01:35:00.120 --> 01:35:02.120]  ребра, с точки зрения
[01:35:02.120 --> 01:35:04.120]  тяжелолегкости, могли там перетасоваться
[01:35:04.120 --> 01:35:06.120]  как угодно, правда?
[01:35:06.120 --> 01:35:08.120]  А почему вы говорите, что эверт не меняет
[01:35:08.120 --> 01:35:10.120]  красно-синюю структуру, если он ее меняет при эксползе?
[01:35:10.120 --> 01:35:12.120]  Нет, смотрите.
[01:35:12.120 --> 01:35:14.120]  Ну, я имею в виду
[01:35:14.120 --> 01:35:16.120]  да, именно,
[01:35:16.120 --> 01:35:18.120]  помимо эксполза, конечно, да.
[01:35:18.120 --> 01:35:20.120]  Помимо эксполза он красно-синюю
[01:35:20.120 --> 01:35:22.120]  не меняет, но тяжелолегкую меняет.
[01:35:22.120 --> 01:35:24.120]  Поэтому потенциал
[01:35:24.120 --> 01:35:26.120]  меняется.
[01:35:28.120 --> 01:35:30.120]  По-моему, линк и кат тоже не меняет
[01:35:30.120 --> 01:35:32.120]  цветную структуру.
[01:35:32.120 --> 01:35:34.120]  Как повезет.
[01:35:34.120 --> 01:35:36.120]  Вот, кстати, кат в нашей вексе, кстати,
[01:35:36.120 --> 01:35:38.120]  что, а они, вот,
[01:35:38.120 --> 01:35:40.120]  цветную не меняют.
[01:35:40.120 --> 01:35:42.120]  А вот у этого, у всего пути,
[01:35:42.120 --> 01:35:44.120]  откуда корня, на самом деле
[01:35:44.120 --> 01:35:46.120]  там
[01:35:46.120 --> 01:35:48.120]  эти тяжелолегкости поменяются
[01:35:48.120 --> 01:35:50.120]  только так. И не только
[01:35:50.120 --> 01:35:52.120]  от них, тут тяжелые, тут
[01:35:52.120 --> 01:35:54.120]  еще тут это, так что тут не все так
[01:35:54.120 --> 01:35:56.120]  просто.
[01:35:56.120 --> 01:35:58.120]  Ну, значит, будем думать.
[01:35:58.120 --> 01:36:00.120]  Ну, давайте до них доживем.
[01:36:00.120 --> 01:36:02.120]  Давайте пока не будем распыляться,
[01:36:02.120 --> 01:36:04.120]  так сразу вот давайте
[01:36:04.120 --> 01:36:06.120]  начнем с эверта.
[01:36:06.120 --> 01:36:08.120]  То есть для этого надо подумать.
[01:36:08.120 --> 01:36:10.120]  Вот это наш реверс на пути.
[01:36:10.120 --> 01:36:12.120]  Как он меняет вообще количество
[01:36:12.120 --> 01:36:14.120]  там красных легких ребер?
[01:36:14.120 --> 01:36:16.120]  Изменилось только то, что
[01:36:16.120 --> 01:36:18.120]  на пути было. Да.
[01:36:18.120 --> 01:36:20.120]  Ну, заметим, что сам по себе реверс поменял только
[01:36:20.120 --> 01:36:22.120]  легкость или тяжесть, только тех
[01:36:22.120 --> 01:36:24.120]  ребер, которые на этом пути были, правда?
[01:36:24.120 --> 01:36:26.120]  Ну, теперь утверждение такое.
[01:36:26.120 --> 01:36:28.120]  Утверждение номер А.
[01:36:28.120 --> 01:36:30.120]  Перед реверсом
[01:36:30.120 --> 01:36:32.120]  на этом пути было не более, чем
[01:36:32.120 --> 01:36:34.120]  логарифм легких ребер.
[01:36:36.120 --> 01:36:38.120]  Ну, помните, да, что в принципе в каждом
[01:36:38.120 --> 01:36:40.120]  момент времени верно, что на любом пути от
[01:36:40.120 --> 01:36:42.120]  вершины до корня не более, чем логарифм
[01:36:42.120 --> 01:36:44.120]  легких ребер. Даже не от логарифма, а буквально
[01:36:44.120 --> 01:36:46.120]  логарифм.
[01:36:46.120 --> 01:36:48.120]  Ну, помните почему, да?
[01:36:48.120 --> 01:36:50.120]  Вот. Ну, теперь заметим, что
[01:36:50.120 --> 01:36:52.120]  было их не более, чем
[01:36:52.120 --> 01:36:54.120]  логарифм, а после того,
[01:36:54.120 --> 01:36:56.120]  как вы их развернули, там
[01:36:56.120 --> 01:36:58.120]  все перетусовалось, но больше
[01:36:58.120 --> 01:37:00.120]  логарифма их не стало.
[01:37:00.120 --> 01:37:02.120]  То есть, возможно, это принципиально
[01:37:02.120 --> 01:37:04.120]  другие логарифм ребер,
[01:37:04.120 --> 01:37:06.120]  но и все равно логарифм.
[01:37:06.120 --> 01:37:08.120]  Поэтому потенциал изменился,
[01:37:08.120 --> 01:37:10.120]  получается, на какую-то величину
[01:37:10.120 --> 01:37:12.120]  от минус логарифма до логарифма.
[01:37:12.120 --> 01:37:14.120]  В общем, короче, увеличился не более,
[01:37:14.120 --> 01:37:16.120]  чем на логарифм. И это нас установило.
[01:37:16.120 --> 01:37:18.120]  Получается,
[01:37:18.120 --> 01:37:20.120]  с ревертом никаких проблем
[01:37:20.120 --> 01:37:22.120]  нет. Но правда, тут нам уже пришлось приложить
[01:37:22.120 --> 01:37:24.120]  осмысленные усилия.
[01:37:24.120 --> 01:37:26.120]  Но, кстати, это, заодно, это, кстати, хороший
[01:37:26.120 --> 01:37:28.120]  способ на самом деле помнить
[01:37:28.120 --> 01:37:30.120]  потенциал, потому что потенциал так слет,
[01:37:30.120 --> 01:37:32.120]  вот надо помнить, у всех красный или синий, там
[01:37:32.120 --> 01:37:34.120]  был и легкий, вот что-то такое.
[01:37:34.120 --> 01:37:36.120]  Особенно еще проблема, это я еще говорю
[01:37:36.120 --> 01:37:38.120]  красные и легкие, потому что, если вы там будете
[01:37:38.120 --> 01:37:40.120]  читать, скажем, вики-конспекты, да, там
[01:37:40.120 --> 01:37:42.120]  нет понятия красного ребра, есть понятие
[01:37:42.120 --> 01:37:44.120]  сплошное ребро.
[01:37:44.120 --> 01:37:46.120]  Да, давайте я сразу, значит, сразу
[01:37:46.120 --> 01:37:48.120]  откажу, если вы будете читать даже не просто вики-конспекты
[01:37:48.120 --> 01:37:50.120]  оригинальную статью, на самом деле
[01:37:50.120 --> 01:37:52.120]  понятия красный и синий нет.
[01:37:52.120 --> 01:37:54.120]  То есть, на самом деле,
[01:37:54.120 --> 01:37:56.120]  ну вот,
[01:37:56.120 --> 01:37:58.120]  ой, вот это я вообще плохо нарисовал,
[01:37:58.120 --> 01:38:00.120]  ой, плохо все.
[01:38:00.120 --> 01:38:02.120]  Потому что дело в том, что
[01:38:02.120 --> 01:38:04.120]  красные ребра называются сплошные
[01:38:04.120 --> 01:38:06.120]  на самом деле,
[01:38:06.120 --> 01:38:08.120]  а синие называются
[01:38:08.120 --> 01:38:10.120]  пунктирными, то есть они там в одноцветных
[01:38:10.120 --> 01:38:12.120]  статьях изображаются, что вот эти, типа, сплошные
[01:38:12.120 --> 01:38:14.120]  ребра эти пунктирные. Поэтому я тут плохо
[01:38:14.120 --> 01:38:16.120]  на самом деле.
[01:38:16.120 --> 01:38:18.120]  Обозначил? Ну, это я просто, вот
[01:38:18.120 --> 01:38:20.120]  помните, там будут вот такие обозначения,
[01:38:20.120 --> 01:38:22.120]  просто, вот, будьте морально готовы,
[01:38:22.120 --> 01:38:24.120]  то есть, красный, синий, потому что у меня такие марки, были бы
[01:38:24.120 --> 01:38:26.120]  другие марки, они были бы там, я не знаю,
[01:38:26.120 --> 01:38:28.120]  фиолетовые, серые, там, я не знаю.
[01:38:28.120 --> 01:38:31.120]  или что-нибудь еще в этом роде.
[01:38:31.120 --> 01:38:32.120]  Сейчас можно вопрос?
[01:38:32.120 --> 01:38:33.120]  Ага.
[01:38:33.120 --> 01:38:36.120]  У нас, когда мы делаем оборудование, у нас может меняться лёгкость,
[01:38:36.120 --> 01:38:38.120]  и уже не только ребра, которые на пути,
[01:38:38.120 --> 01:38:42.120]  а ещё и ребра, которые исходят из вот этого пути.
[01:38:42.120 --> 01:38:46.120]  То есть у нас путь, и вот ребра, которые от него вот так отходят.
[01:38:46.120 --> 01:38:53.120]  Да, но те ребра, которые от этого пути отходят, они синие.
[01:38:53.120 --> 01:38:54.120]  Логично.
[01:38:54.120 --> 01:38:59.120]  Вот, поэтому, как говорится, и это нас очень сильно радует.
[01:38:59.120 --> 01:39:00.120]  Да.
[01:39:02.120 --> 01:39:04.120]  Ой, хотя опять это...
[01:39:04.120 --> 01:39:06.120]  Ой, да-да-да, знаете.
[01:39:06.120 --> 01:39:10.120]  Как это называется? У хабаровских китайцев есть традиция.
[01:39:10.120 --> 01:39:11.120]  Что?
[01:39:11.120 --> 01:39:13.120]  У хабаровских китайцев есть традиция.
[01:39:13.120 --> 01:39:16.120]  И это должно нас вами настораживать, друзья.
[01:39:16.120 --> 01:39:19.120]  Да, тот уже сам факт, что у них есть традиция.
[01:39:19.120 --> 01:39:21.120]  Традиция и обратная традиция.
[01:39:21.120 --> 01:39:23.120]  Ну, это...
[01:39:23.120 --> 01:39:24.120]  Ну ладно.
[01:39:24.120 --> 01:39:25.120]  Нет.
[01:39:25.120 --> 01:39:27.120]  Нет, ещё больше должно настораживать,
[01:39:27.120 --> 01:39:30.120]  что как бы шутка 2003-го года, если или 2004-го.
[01:39:30.120 --> 01:39:31.120]  А, нет, или 2006-го.
[01:39:31.120 --> 01:39:32.120]  Ну ладно, 2006-го.
[01:39:32.120 --> 01:39:33.120]  Ну ладно.
[01:39:35.120 --> 01:39:37.120]  Война в Ираке.
[01:39:37.120 --> 01:39:40.120]  Нет, ну война в Ираке тут ни при чём.
[01:39:40.120 --> 01:39:42.120]  Да, там у них, я думаю, это...
[01:39:42.120 --> 01:39:44.120]  Традиция, скорее всего, не связана ни с этим.
[01:39:48.120 --> 01:39:49.120]  Ну да.
[01:39:49.120 --> 01:39:50.120]  Нет, ну шутка.
[01:39:50.120 --> 01:39:51.120]  Нет, ну шутка.
[01:39:51.120 --> 01:39:52.120]  Не-не-не.
[01:39:52.120 --> 01:39:53.120]  Шутка, да, точно.
[01:39:53.120 --> 01:39:56.120]  Шутка 2006-го года, да, потому что только в 2006-м году
[01:39:56.120 --> 01:39:58.120]  игрался конкурс 5 шуток про...
[01:39:58.120 --> 01:40:01.120]  Да, вот всё.
[01:40:03.120 --> 01:40:04.120]  Соответственно.
[01:40:04.120 --> 01:40:05.120]  Ну ладно.
[01:40:05.120 --> 01:40:07.120]  Ну да, Хабаровский.
[01:40:07.120 --> 01:40:10.120]  Да, это тоже ругаются, что хабаровские китайцы.
[01:40:10.120 --> 01:40:11.120]  Да.
[01:40:11.120 --> 01:40:12.120]  Так.
[01:40:12.120 --> 01:40:13.120]  Ладно.
[01:40:13.120 --> 01:40:14.120]  Так вот.
[01:40:14.120 --> 01:40:15.120]  Ладно.
[01:40:15.120 --> 01:40:17.120]  Так, хорошо, с вертом разобрались.
[01:40:17.120 --> 01:40:19.120]  Но заметим, что всякие вот эти вот суммы
[01:40:19.120 --> 01:40:22.120]  присваивания прибавления на отрезки тоже потенциал
[01:40:22.120 --> 01:40:23.120]  не меняют.
[01:40:23.120 --> 01:40:24.120]  Ну, кроме как эксползов.
[01:40:24.120 --> 01:40:25.120]  Понимаете?
[01:40:25.120 --> 01:40:27.120]  Ну значит, пришло время, чтобы это было всё
[01:40:27.120 --> 01:40:28.120]  всё ещё.
[01:40:28.120 --> 01:40:30.120]  Так что, ну, как бы, ну, ну, как бы, ну,
[01:40:30.120 --> 01:40:31.120]  ну, вот.
[01:40:31.120 --> 01:40:32.120]  Ну, вот, ну, вот так.
[01:40:32.120 --> 01:40:33.120]  Ну, вот, ну, вот.
[01:40:33.120 --> 01:40:34.120]  Ну, вот.
[01:40:34.120 --> 01:40:44.400]  значит пришло время значит пришло время того как же нам делать действительно линк и как
[01:40:44.400 --> 01:40:52.920]  заметим что да как мы поняли просто делать эксползату и отпилить в не работает
[01:40:52.920 --> 01:41:02.160]  вот ну вот ну а смысл от родителей от которого ребенка отпиливаем
[01:41:02.160 --> 01:41:10.480]  ну да потому что там действительно то есть тут на этом пути поменяется куда там поменяется
[01:41:10.480 --> 01:41:17.000]  значит все сыжешки значит там тяжелолегкость там и значит этих ребер поменяется их и там
[01:41:17.000 --> 01:41:22.480]  соседей возможно каких-то поменяется и кто там из их красных то синие черт их разберут
[01:41:22.480 --> 01:41:33.840]  что что синие красность не связано с тяжелолегкостью тут и проблема
[01:41:33.840 --> 01:41:41.440]  нет ладно у нас же на пути от уда корня было логин и стало на меч либо в ночь чем от
[01:41:41.440 --> 01:41:55.920]  логин красно легких ребер правильно ну понимаешь проблема но вот чем проблема зато очень но вот нет
[01:41:55.920 --> 01:42:07.400]  ну нет ну тут аккуратно потому что скажем так да заметим что если рассматривать только ребра
[01:42:07.400 --> 01:42:15.760]  на этом пути то потенциала не изменили не более чем на логрифм это правда да да проблема в том
[01:42:15.760 --> 01:42:20.560]  что как бы помимо этих ребер там как красными легкими могли стать ну для нас самое страшное
[01:42:20.560 --> 01:42:26.000]  когда ребра становятся красными легкими да потому что перестает быть красным легким то
[01:42:26.000 --> 01:42:32.880]  ничего не происходит то как бы нам потенциал только уменьшился ну и слава богу как говорится
[01:42:32.880 --> 01:42:43.160]  мая как-то монетка своза потенциалу легче и значит но соответственно помимо но помимо этого мы
[01:42:44.160 --> 01:42:51.320]  но помимо этого то есть какое-то ребро если оно было красным то оно могло быть тяжелым
[01:42:51.320 --> 01:43:00.720]  а стать легким если мы сделаем допустим эксползату дамы дамы уже стали мы сделали эксползату
[01:43:00.720 --> 01:43:10.560]  да тогда у нас на пути вот у нас есть этот красный путь а на нем да слушайте браво как бы
[01:43:10.560 --> 01:43:18.360]  браво браво браво ну отлично да то есть заметим да что у нас красный путь да что прямо сейчас
[01:43:18.360 --> 01:43:23.400]  когда мы отпиливаем у нас ситуация скорее вот такая то есть дать и желая тяжелолегкость и
[01:43:23.400 --> 01:43:29.160]  поменялись там у каких-то ребер ответить от этого пути но они все синие нас-то не волнует даже если
[01:43:29.160 --> 01:43:35.920]  бы они не были синими они не смогут стать легкими после того как мы отпилили что-то не вот ну да да да
[01:43:35.920 --> 01:43:51.480]  нет не может потому что мы сделали эксползату и вот еще один момент почему мы вот делали эксполз
[01:43:51.480 --> 01:43:59.240]  так что у это начало пути все у у и к там ни в каких детей красных ребер не ведет после эксполза
[01:43:59.240 --> 01:44:09.000]  зачем ну чтобы не мучиться с этим доказательством нет ну зачем легче легче просто отпилить
[01:44:09.000 --> 01:44:22.160]  а ну могли нет могли но просто чисто но по ходу-то сильно проще будет сделать один эксполз один
[01:44:22.760 --> 01:44:30.400]  сказать все то есть как бы то есть как то есть как всегда вы хотите как бы не мучиться интеллектуально
[01:44:30.400 --> 01:44:35.840]  на экзамене или вы или хотите чтобы потом ваш код не мучился там в течение много времени знаете
[01:44:35.840 --> 01:44:41.640]  вы там один раз доказали там написали но и у нас теперь ну знаете ну как сказать знаете вот я
[01:44:41.640 --> 01:44:46.840]  знаете я тоже так это один раз не мучился то чтобы там не не не набогатом написал игритом чтобы
[01:44:46.840 --> 01:44:53.520]  работал хоть как вместо этих душу каждая картинку мне два часа 1 хотя наверно если я где-то
[01:44:53.520 --> 01:44:57.920]  подумал что-то подоказывал потестировал один раз то как бы это все бы работало и быстрее
[01:44:57.920 --> 01:45:11.760]  не факт что работает нормально линк а мы пока про линк не обсуждали мы прокат говорили ну
[01:45:12.440 --> 01:45:20.320]  как работает как говорит так что мы вызываем эксползату и после этого типа ликвидируем это
[01:45:20.320 --> 01:45:28.480]  ребро но теперь заметим как мог поменяться потенциал вот но заметим что да в результате
[01:45:28.480 --> 01:45:35.320]  этого но заметим чтобы результате этого отпила да то есть в результате этого отпила только дочитка
[01:45:35.320 --> 01:45:40.680]  у каких ребер вообще поменялась тяжелолегкость только вот у этих ребер и каких-то соседей
[01:45:41.000 --> 01:45:50.760]  логично да вот но как-то но у каких красных вообще ребер могла поменяться тяжелолегкость
[01:45:50.760 --> 01:46:00.920]  но очевидно только у этих потому что все соседи синие логично да вот теперь заметим что от того
[01:46:00.920 --> 01:46:07.040]  что вы отпилили одно под дерево то есть до перед отпиливанием здесь было не более чем логови в
[01:46:07.040 --> 01:46:14.360]  малюсих ребер на этом пути и после отпиливания тоже стало не больше логовица правда значит
[01:46:14.360 --> 01:46:22.280]  потенциал изменился не более чем на логовицу вот в чем кстати кстати в этом смысл в этом
[01:46:22.280 --> 01:46:29.400]  смысле кстати интересно как получается страшнее линка потому что обратите внимание линк на
[01:46:29.400 --> 01:46:36.360]  самом деле получается легко сделать абсолютно также то есть делаем эксползату и после этого
[01:46:36.360 --> 01:46:45.120]  подвешиваем в причем за синее ребро и тоже оказывается что там лишь количество легких ребер
[01:46:45.120 --> 01:46:50.600]  меняется не более чем на логовицу при линке оно скорее уменьшается потому что когда вы
[01:46:50.600 --> 01:46:55.920]  подвешиваете ребро то тут скорее легкое ребро может перестать быть легким чем наоборот правда
[01:46:55.920 --> 01:47:01.160]  даже скорее наоборот не уж поэтому получается что линк может потенциал только уменьшить а вот
[01:47:01.160 --> 01:47:09.600]  кат наоборот увеличить поэтому вот с ним надо аккуратно работать вот такая неожиданная магия
[01:47:09.600 --> 01:47:17.560]  получается хорошо линка кат значит получается все делают тесто за логарифом но и получается да
[01:47:17.560 --> 01:47:23.040]  что мы делаем все то есть получается да смотри то есть линка кат значит дают учет значит все
[01:47:23.040 --> 01:47:33.720]  работает за учетную стоимость значит эксполз плюс логариф согласны да не считая самого эксполза
[01:47:33.720 --> 01:47:44.360]  так но и это приводит а собственно к финалу то есть теперь нам надо теперь мы просто говоришь
[01:47:44.360 --> 01:47:49.760]  теперь мы выкидываем просто все эти операции оставляем только эксполз то есть мы хотим то
[01:47:49.760 --> 01:47:54.560]  есть предположим что у нас есть такое тупое дерево в котором есть только линк кат ну ладно допущу
[01:47:54.560 --> 01:48:00.880]  буду мяс и просто эксполз мы там тычем тычем тычем эксполз и хотим показать что там амортизировано
[01:48:00.880 --> 01:48:11.360]  все хорошо относительно вот этого потенциала так понятно к чему мы перешли да давай кого поддерживаем
[01:48:11.360 --> 01:48:24.840]  нет ну смотри еще раз каждый красный путь мы храним в отдельной вл и в корне этой вл мы храним
[01:48:24.840 --> 01:48:34.760]  родителя вот этого там вот это синее ребро короче но сами красные ребра мы естественно хрене храним
[01:48:34.760 --> 01:48:43.880]  да то есть мы храним мы храним не явно так вот значит хорошо все это значит это безобразие
[01:48:43.880 --> 01:48:51.080]  ликвидируем оно не ликвидируется но я все равно делаю вид что его нет
[01:48:51.080 --> 01:49:06.720]  ну да нет нет там нет там страшнее зайти это там значит вы значит вы летите там вы летите
[01:49:06.720 --> 01:49:12.400]  на боевом самолете вам на встречу противник значит вы вы значит вы уже готовитесь его там
[01:49:12.400 --> 01:49:16.640]  встретить выпустить снаряд но обнаружите что вас на экране там есть кнопка рядом с ним появилась
[01:49:16.640 --> 01:49:25.840]  кнопка удалить значит вы нажимаете нажать удалить все он пропадает с экрана но тем не
[01:49:25.840 --> 01:49:31.040]  менее в окне вы понимаете что мимо вас прилетают два вражеских снаряда так думаете что-то не так
[01:49:31.040 --> 01:49:36.880]  то мы обнаружили что вас в левом нижнем углу экрана значит есть и конка корзина из которой так
[01:49:37.360 --> 01:49:45.600]  значит хвост самолета вы заходите в корзину и говорите очистить и там пишите очистить корзину
[01:49:45.600 --> 01:49:50.960]  там системы подозрительства вы действительно физически хотите удалить самолет противника
[01:49:50.960 --> 01:49:58.240]  восстановлению будет невозможно вы говорите да ну и тут собственно там у вас там появляется
[01:49:58.240 --> 01:50:05.360]  пушка выпускается наряд в общем самолет уничтожается все в порядок вот вы но вот ну вы
[01:50:05.360 --> 01:50:14.880]  ладно вы впрочем ладно вы впрочем сильно дольше там не проживете там максимум минут 15 ну там не
[01:50:14.880 --> 01:50:18.760]  помню то есть сначала там вы начнете зависать там ну что-то там система начнет немножко там
[01:50:18.760 --> 01:50:23.440]  что-то зависать вы ее потом перезагрузить она вам начнет сообщать что там предыдущий полет был
[01:50:23.440 --> 01:50:29.400]  завершен некорректно вы сейчас можете только ездить по аэродрому там вот после этого значит
[01:50:29.400 --> 01:50:39.000]  ага ну вот кодовая фраза удаление или все что вам остается это нажать кнопку катапультируется
[01:50:39.000 --> 01:50:46.960]  вы уверены что хотите катапультируется да подождите идет подготовка катапультирует все вот
[01:50:46.960 --> 01:50:52.560]  последнее что увидите в этой жизни это собственно зависащие от картинка в общем это называется там
[01:50:52.560 --> 01:50:58.040]  но чем тоже там можете там погуглить это называется да да это звать если бы самолеты поставили
[01:50:58.440 --> 01:51:10.680]  то есть тут вот кстати о войне в ираке кстати-то это тех времен это вот тех времен шутка да нет
[01:51:10.680 --> 01:51:14.480]  это реально тех времен шутка то есть она это на самом деле вот легенда в том что вот действительно
[01:51:14.480 --> 01:51:18.960]  это типа Microsoft переоборудовал до там военно-американские военные самолеты его там первый тестовый
[01:51:18.960 --> 01:51:23.800]  самолет доверили там опытнейшему пилоту и вот тут рассказывается вот то есть вот про эту вот
[01:51:23.800 --> 01:51:28.680]  красоту ну там помимо этого там конечно пока вы там летите он там рекламирует там вид там
[01:51:28.680 --> 01:51:38.520]  виндус для танков там в самолете на виндус 10 нет ну виндус 10 тогда еще не было но вот но там
[01:51:38.520 --> 01:51:43.600]  кончается все хорошо потому что планет в облогу самолетов значит иракцы находят значит соответственно
[01:51:43.600 --> 01:51:48.280]  диск с виндойка новая разработка мы должны поставить это на все самолеты через три недели
[01:51:48.280 --> 01:52:03.360]  ирак безоговорочно капитулировал вот ну вот так-то да конечно да вот но вот
[01:52:03.360 --> 01:52:16.600]  но вот так но вот значит так я тут пока вроде стер пока судо дело так что у нас тут но вот значит
[01:52:16.600 --> 01:52:26.800]  экспост и так значит чем у нас значит чем у нас занимается экспост но значит значитthird но
[01:52:26.800 --> 01:52:36.080]  экспосту нас занимается тем так но первых до disparities это занимается тем что сам
[01:52:36.080 --> 01:52:41.480]  соответственно от пиливает у вершины у соответственно ребенок
[01:52:41.480 --> 01:52:50.600]  Это первое, чем он занимается, но не отпиливает, а в смысле
[01:52:50.600 --> 01:52:51.600]  объявляет его синим.
[01:52:51.600 --> 01:52:59.720]  Так, ну сама по себе это операция, ну как сама по
[01:52:59.720 --> 01:53:02.960]  себе это операция, ну эта операция делается за сколько?
[01:53:02.960 --> 01:53:05.960]  За алгорифом, очевидно, да?
[01:53:05.960 --> 01:53:10.880]  Да, меняет, ну да, заметим, что тяжелолегкость не меняется,
[01:53:10.880 --> 01:53:12.720]  потому что максимум, что может произойти, потенциал
[01:53:12.720 --> 01:53:13.720]  уменьшится на единичку.
[01:53:13.720 --> 01:53:19.040]  А может и не уменьшится, но это не принципиально.
[01:53:19.040 --> 01:53:31.920]  Так, но вот, но страшнее, конечно, другое.
[01:53:31.920 --> 01:53:36.960]  Страшнее то, что происходит дальше, а дальше происходит,
[01:53:36.960 --> 01:53:40.480]  то есть дальше, напоминаю, происходит вот такая вот
[01:53:40.480 --> 01:53:41.480]  красота.
[01:53:41.480 --> 01:53:46.080]  То есть мы тут идем прям по-честному, прям идем
[01:53:46.080 --> 01:53:53.080]  на путь, прям до корня, до корня, до корня, вот, понятно,
[01:53:53.080 --> 01:53:54.080]  да?
[01:53:54.080 --> 01:53:59.600]  Ну вот, идем, соответственно, до корня, до корня, до корня,
[01:53:59.600 --> 01:54:06.660]  и каждая, и каждая операция у нас делает синие, одно
[01:54:07.060 --> 01:54:10.860]  синие ребро красным, ну с помощью там какой-нибудь
[01:54:10.860 --> 01:54:15.980]  мержа двух деревьев, да, и, возможно, если не повезет,
[01:54:15.980 --> 01:54:26.980]  какое-то красное ребро делается сием, вот, но это плохо тем,
[01:54:26.980 --> 01:54:31.420]  что эта штука может потенциал как увеличить, так и уменьшить.
[01:54:32.420 --> 01:54:35.420]  Красное на синие только уменьшает.
[01:54:35.420 --> 01:54:36.420]  Чего?
[01:54:36.420 --> 01:54:39.420]  Синие на красное увеличит.
[01:54:39.420 --> 01:54:42.420]  Ну, как сказать, ну, потому что, смотрите, ну, все, потому
[01:54:42.420 --> 01:54:46.420]  что, скажем так, потому что, скажем, если вот это ребро
[01:54:46.420 --> 01:54:49.420]  было тяжелым, а вот это легким, то потенциал увеличился.
[01:54:49.420 --> 01:54:50.420]  А, совсем?
[01:54:50.420 --> 01:54:52.420]  Я имею в виду глобально замена.
[01:54:52.420 --> 01:54:55.420]  Кстати, да, вот это, сама по себе вот эта операция
[01:54:55.420 --> 01:54:59.420]  тоже носит гордое научное название Splice.
[01:55:00.420 --> 01:55:03.420]  Да, это называется Splice.
[01:55:08.420 --> 01:55:09.420]  Вот.
[01:55:13.420 --> 01:55:15.420]  Ну да, ну да.
[01:55:15.420 --> 01:55:19.420]  Но нам тут сейчас вот надо, конечно, да-да, аккуратнее
[01:55:19.420 --> 01:55:22.420]  все доказывать, то есть там по большому счету потребуется
[01:55:22.420 --> 01:55:26.420]  доказать, что в среднем, ну, в амортизированном смысле,
[01:55:26.420 --> 01:55:29.420]  в среднем, Splice'ов происходит не более чем логарифом
[01:55:29.420 --> 01:55:32.420]  на операцию, точнее, логарифом на expose.
[01:55:42.420 --> 01:55:43.420]  Ну да.
[01:55:43.420 --> 01:55:44.420]  Но давайте так.
[01:55:44.420 --> 01:55:46.420]  Знаете, тут мы можем неожиданно счителить.
[01:55:46.420 --> 01:55:49.420]  На самом деле, тут вот, как бы нам вот аккуратнее
[01:55:49.420 --> 01:55:54.420]  делать, чтобы ничего не менять, значит, мы попробуем
[01:55:54.420 --> 01:55:55.420]  доказать следующее.
[01:55:55.420 --> 01:55:59.420]  Учетное число Splice'ов логарифом.
[01:56:06.420 --> 01:56:09.420]  Да, ну не два, ну ребер может быть и больше, да.
[01:56:09.420 --> 01:56:12.420]  Ну короче, да, мы меняем красное ребро ведущее
[01:56:12.420 --> 01:56:16.420]  в какого-то ребенка и перенаправляем его в другого ребенка.
[01:56:16.420 --> 01:56:17.420]  Да.
[01:56:19.420 --> 01:56:22.420]  Значит, смотрите, мы попробуем доказать, что учетное число
[01:56:22.420 --> 01:56:24.420]  Splice'ов логарифом.
[01:56:26.420 --> 01:56:27.420]  Вот.
[01:56:27.420 --> 01:56:31.420]  Нам нужно доказать, что на каждом пути в нашем дереве
[01:56:31.420 --> 01:56:36.420]  только логарифом синих ребер.
[01:56:36.420 --> 01:56:38.420]  Ээээ, ну вот.
[01:56:38.420 --> 01:56:40.420]  Чтобы доказать про Splice'а.
[01:56:40.420 --> 01:56:41.420]  Ну не совсем.
[01:56:41.420 --> 01:56:43.420]  Мы делаем амортизированное.
[01:56:43.420 --> 01:56:44.420]  Ну у нас амортизированное.
[01:56:44.420 --> 01:56:46.420]  Потому что то, что их просто логарифом синих ребер,
[01:56:46.420 --> 01:56:47.420]  это тупо неправда.
[01:56:48.420 --> 01:56:50.420]  Что такое учетное число Splice'ов?
[01:56:51.420 --> 01:56:53.420]  Относительно вот этого же потенциала.
[01:57:03.420 --> 01:57:05.420]  Ну реальная цена одного Splice'а это, ну.
[01:57:07.420 --> 01:57:08.420]  Нет, то на самом деле лог.
[01:57:08.420 --> 01:57:09.420]  Нет, ну почему?
[01:57:09.420 --> 01:57:10.420]  Ну не совсем.
[01:57:10.420 --> 01:57:11.420]  Ну почему даже в Splade дереве это лог будет?
[01:57:13.420 --> 01:57:14.420]  Ну там, да, отдельная песня.
[01:57:14.420 --> 01:57:17.420]  Ну это значит, значит, отдельно обсудим.
[01:57:18.420 --> 01:57:20.420]  Ну я хочу сказать, ну вот.
[01:57:21.420 --> 01:57:23.420]  Нет, ну на большом счете я утверждаю, что значит.
[01:57:23.420 --> 01:57:25.420]  Хочется показать, что допустим.
[01:57:25.420 --> 01:57:28.420]  У нас там, ну вот.
[01:57:28.420 --> 01:57:30.420]  То есть там, допустим.
[01:57:31.420 --> 01:57:32.420]  Нет, ну.
[01:57:33.420 --> 01:57:35.420]  Как бы сформулировать так, чтобы это там
[01:57:35.420 --> 01:57:37.420]  со всеми линками и катами было.
[01:57:37.420 --> 01:57:39.420]  Было работало хорошо.
[01:57:42.420 --> 01:57:43.420]  Вот.
[01:57:44.420 --> 01:57:45.420]  Не, ну понятно, в данном случае, да.
[01:57:45.420 --> 01:57:46.420]  Самое тупое, что можно было сделать.
[01:57:46.420 --> 01:57:49.420]  А давайте домножим потенциал на логорифом, конечно.
[01:57:52.420 --> 01:57:53.420]  Ну вот.
[01:57:54.420 --> 01:57:57.420]  Нет, ну просто как-то сделать максимально красиво.
[01:57:57.420 --> 01:57:59.420]  По идее, как бы, по классике доказывается так,
[01:57:59.420 --> 01:58:01.420]  что давайте докажем, что если было сделано
[01:58:01.420 --> 01:58:04.420]  ку-экспоузов, допустим, да, то суммарное число Splice'ов
[01:58:04.420 --> 01:58:06.420]  это вот там ку на логен.
[01:58:09.420 --> 01:58:11.420]  То есть докажем вот это вот.
[01:58:11.420 --> 01:58:14.420]  Стоп, ну если суммарное число Splice, то от ку на логен,
[01:58:14.420 --> 01:58:19.420]  то у нас же получается итоговое время работы в кулог квадрат.
[01:58:19.420 --> 01:58:20.420]  Да.
[01:58:21.420 --> 01:58:22.420]  Так и будет.
[01:58:23.420 --> 01:58:25.420]  То-то и прикол, что если вы используете абсолютно
[01:58:25.420 --> 01:58:28.420]  рандомную овл, то на самом деле асимптотики не лог, а лог квадрат.
[01:58:29.420 --> 01:58:31.420]  А мы не в перманентной марке слушаем?
[01:58:31.420 --> 01:58:32.420]  Нет, в чем проблема?
[01:58:32.420 --> 01:58:34.420]  Да, то-то и прикол, что нет.
[01:58:34.420 --> 01:58:35.420]  Сейчас, в чем проблема?
[01:58:35.420 --> 01:58:39.420]  У нас синих легких ребер логорифом, а каждое синее тяжелое
[01:58:39.420 --> 01:58:47.420]  ребро заменяется, значит, короче, путь, который шел не через него,
[01:58:47.420 --> 01:58:50.420]  на нем это ребро было легким, мы его удаляем.
[01:58:52.420 --> 01:58:55.420]  Если мы переподвешиваем и у нас было тяжелое ребро,
[01:58:55.420 --> 01:58:58.420]  значит путь, который отвертлялся, шел по легким.
[01:58:58.420 --> 01:59:00.420]  Но еще бывает, ну вот, ну да.
[01:59:01.420 --> 01:59:03.420]  Ну тут аккуратно, на самом деле, да, бывает еще просто легкие-легкие,
[01:59:03.420 --> 01:59:05.420]  которые потенциал не уменьшили, да.
[01:59:05.420 --> 01:59:09.420]  Тут надо вот аккуратно это рассматривать, но общая суть такая.
[01:59:09.420 --> 01:59:11.420]  Заметим, какие бывают вообще сплайсы.
[01:59:12.420 --> 01:59:13.420]  Сплайсы бывают.
[01:59:14.420 --> 01:59:17.420]  Ну, во-первых, бывают самые халявные вообще сплайсы.
[01:59:19.420 --> 01:59:23.420]  Вот это вот такого вида, когда на самом деле просто одно ребро стало красным
[01:59:23.420 --> 01:59:25.420]  и никакое ребро синим не стало.
[01:59:26.420 --> 01:59:27.420]  Оно было тяжелым?
[01:59:28.420 --> 01:59:32.420]  Нет, оно вовсе не обязательно.
[01:59:33.420 --> 01:59:35.420]  Т.е. когда просто оно заменилось на ребро.
[01:59:36.420 --> 01:59:41.420]  Но тогда заметим, что сам по себе такой сплайс, тогда ну потенциал мог, конечно,
[01:59:41.420 --> 01:59:46.420]  там, ну на один увеличить, если это ребро легкое.
[01:59:46.420 --> 01:59:49.420]  Но таких не более чем логарифы.
[01:59:52.420 --> 01:59:53.420]  Потому что, ну да.
[01:59:54.420 --> 01:59:56.420]  То есть давайте так, я вам скажу.
[01:59:56.420 --> 02:00:03.260]  логарифом потому что ну да то есть давайте так я даже по-другому буду
[02:00:03.260 --> 02:00:08.500]  рисовать значит если мс было ничего красным стало тяжелые ребра то потенциал
[02:00:08.500 --> 02:00:17.820]  меняется на 0 нам это не интересно хотя нет интересно потому что тут про
[02:00:17.820 --> 02:00:33.460]  ну потому что нам тут принципиально как бы сколько вот вот так да ну да да да
[02:00:33.460 --> 02:00:54.220]  не гарантируем не более одного нет мы ничего нет мы ничего не к сожалению мы
[02:00:54.220 --> 02:00:56.820]  ничего не гарантируем напоминаю нас может быть ситуация когда у нас просто
[02:00:56.820 --> 02:01:00.340]  произвольное дерево стоящий целиком из синих ребер никаких варианты это не не
[02:01:00.820 --> 02:01:10.180]  то есть да может быть такой splice который просто покрасил там синие ребро в красное
[02:01:10.180 --> 02:01:20.960]  да такое могло произойти причем нам фантастически повезло что действительно если покрасила
[02:01:20.960 --> 02:01:34.160]  легкое то как бы потенциал увеличился на идеечку да вот короче допустим у нас из вершины шло
[02:01:34.160 --> 02:01:41.240]  вниз какое-то ребро тогда если мы тяжелая то рот точно было легкое и потенциал изменился на
[02:01:42.240 --> 02:01:49.200]  сейчас где он изменился мы мы мы синих пока мы рассматриваем простой splice где синие
[02:01:49.200 --> 02:01:56.960]  ребро поменялось на красное давай без без без обобщений так сразу нас вот просто пока у нас
[02:01:56.960 --> 02:02:02.040]  есть как бы конкретная проблема что если если бы тяжелые ребро просто взяли от балды покрасили
[02:02:02.120 --> 02:02:10.800]  то потенциал не уменьшился да вот короче это единственная проблема да потому что если
[02:02:10.800 --> 02:02:17.920]  если у нас и заменилась то потенциал разумеется вот то есть есть вот действительно вот то есть
[02:02:17.920 --> 02:02:23.440]  действительно да такая но то есть да такая вот проблема у нас есть вот
[02:02:23.440 --> 02:02:35.200]  чего из каждой вершины хранить одно ребро
[02:02:36.200 --> 02:02:43.120]  вот почему плохо и с каждой вершины не хранить пути вниз хотя бы по одному
[02:02:43.120 --> 02:02:51.640]  ребру мы это можем поддерживать нет ну нет на самом деле нет здесь видимо здесь просто
[02:02:51.640 --> 02:02:55.360]  да вы выкрутас видимо будет другой да просто видим если бы по другому шли мы просто сказали
[02:02:55.360 --> 02:03:01.120]  что конкретно такие ситуации у нас суммарная линия по одной простой причине каждое такое
[02:03:01.120 --> 02:03:11.680]  перекрашивание уменьшает количество синих ребер ну там наводки день но вот вот что ладно
[02:03:11.680 --> 02:03:16.200]  видимо ладно придется видимо сделать наглеж и ввести себе в потенциал и счет следующий
[02:03:16.200 --> 02:03:30.640]  так но проблема пока заключается в том что как бы то есть мы рассматриваем слайс который просто
[02:03:30.640 --> 02:03:35.000]  ничего то есть не надо никакое красное ребро перекрашивать синя но на то просто синий
[02:03:35.000 --> 02:03:42.200]  перекрасить красный у нас возникла проблема что если ребро тяжелое да то как бы потенциал не
[02:03:42.200 --> 02:03:49.560]  поменялся из этого скорее всего будет следовать что значит тогда получается их могло быть сколько
[02:03:49.560 --> 02:04:03.760]  угодно и на какой ни на какой потенциал это не повлияет тогда как бы нам нужно чтобы потому
[02:04:03.760 --> 02:04:09.200]  что как что-то учетная стоимость это как бы когда все операции кроме там какого-то логарифма значит
[02:04:09.200 --> 02:04:16.200]  компенсирует с уменьшением потенциала то есть у нас есть куча много много операций каждый из
[02:04:16.200 --> 02:04:23.320]  них имеет там меняет потенциал на ноль то как бы учетная стоимость остает там совпадает с
[02:04:23.320 --> 02:04:35.720]  реальной и собственно никакой амортизации не происходит так но да но давайте да придется
[02:04:35.720 --> 02:04:40.480]  перевспоминать но заметим так ну во первых так пока вы делаете всякие реверсы на подотрезке то
[02:04:40.480 --> 02:04:47.480]  есть всякие верты там ничего не меняется да ну там если вы но если вам внутри одного дерева
[02:04:47.480 --> 02:04:51.520]  делаете там реверс там или там сумму какой-нибудь присваиваю там с присваиванием то как бы ничего
[02:04:51.520 --> 02:04:57.080]  не меняется пока то есть пока количество синих реверс что еще могло быть но заметим всякие
[02:04:57.080 --> 02:05:06.360]  линк и каты сами по себе кроме эксполза уменьшают на самом деле этот потенциал на единичку но линк
[02:05:06.360 --> 02:05:13.080]  увеличивает кат уменьшает но я говорю изменяет на единичку на там плюс-минус один поэтому поэтому
[02:05:13.080 --> 02:05:22.880]  кажется ничего глобального не произошло вот пока ничего глобального не произошло значит смотрим
[02:05:22.880 --> 02:05:31.280]  в эксполз значит тот получается значит красная часть потенциала поменялась на 0 синяя часть на
[02:05:31.280 --> 02:05:41.520]  минус 1 понимаете да вот с легкими ребрами еще интереснее то есть тут 1 минус 1 и того
[02:05:41.520 --> 02:05:48.360]  получается 0 так с эти потенциалы но вот и того получается значит то есть это вот то есть это
[02:05:48.360 --> 02:06:02.080]  получается уменьшает потенциал да новую версию потенциала а в легких нули но теперь
[02:06:02.080 --> 02:06:08.640]  заметим что это происходит не более чем лог раз на эксполз
[02:06:08.640 --> 02:06:25.240]  ну не более чем ну то есть вот это вот операция простого сплайса где просто там просто синее
[02:06:25.240 --> 02:06:31.680]  легкое ребро то есть там становится красным это происходит не более чем логарифом раз потому
[02:06:31.680 --> 02:06:38.680]  что на пути оттуда корня в принципе не более чем логарифма легких ребер естественно ну вот
[02:06:38.680 --> 02:06:51.840]  но легких синих которые перекрашиваются в красный еще меньше пока нет потому что мы мы рассмотрели
[02:06:51.840 --> 02:06:56.800]  только случаи когда мы перекрасили ребро и синяя в красный и не перекрасили при этом красное в
[02:06:56.800 --> 02:07:07.880]  синяя вот это еще только один из случаев а какие у нас еще а на самом деле у нас еще
[02:07:07.880 --> 02:07:12.640]  бывают случаи но мы теперь не будем говорить что мы перекрасили два ребра мы сказали что у нас
[02:07:12.640 --> 02:07:20.160]  было одно ребро красное и стало другое ребро красное мы эти случаи будем называть так вот
[02:07:20.160 --> 02:07:27.440]  допустим легкое ребро было вот красным было легкое ребро и после перекраски значит красным
[02:07:27.440 --> 02:07:44.320]  все еще стало легкое ребро возможно другое разобрали что каждый сплайс потенциал не
[02:07:44.320 --> 02:07:50.680]  увеличивает а причем либо уменьшает а когда вот именно прям 0 то их не более чем логарифм раз
[02:07:50.680 --> 02:08:05.880]  вот новый значит новый потенциал да да да да да да да ну там значит лл значит легкая но нет
[02:08:05.880 --> 02:08:10.320]  погодите значит я ну сейчас давайте я просто перечислю все случаи чтобы уже это значит
[02:08:10.480 --> 02:08:14.920]  могло так быть что было красuffy красное легкое ребро стало красной тяжелая либро
[02:08:14.920 --> 02:08:23.920]  ну и соответственно об Noise target было тяжелое мы ликвидировали красный и тяжелое ребро и
[02:08:23.920 --> 02:08:29.840]  но и стали красный и легкая либо но не unrest и леса лискей тяжелое ребро перестало быть
[02:08:29.840 --> 02:08:37.140]  красным зато красным стало легкое ну и осталось вшетки четвертый случай да ну что с того что
[02:08:37.140 --> 02:08:45.180]  этого случая не бывает потому что ну не бывает у вершины там ведущих детей два тяжелых ребра по
[02:08:45.180 --> 02:08:59.060]  определению тяжести вот так ну давайте разбираться легкость так ну замена легкости на легкость у нас
[02:08:59.060 --> 02:09:09.620]  получается заканчивается со счетом 0 0 да и это тоже происходит не более чем log n раз
[02:09:09.620 --> 02:09:21.940]  так хорошо так было легкое стало тяжелым так ну ладно давайте я тут везде нули рисую
[02:09:21.940 --> 02:09:29.740]  вот значит в легком тяжелом заметим что тут потенциал уменьшился это прям для
[02:09:29.740 --> 02:09:39.820]  нас кайф а вот тут наоборот увеличилось вот но замечаем теперь что эта ситуация
[02:09:39.820 --> 02:09:58.140]  тоже у нас произойдет не более чем логарифм раз на е спаус да потому что все вот эти ребра в правой
[02:09:58.140 --> 02:10:03.060]  колонке они лежат на одном и том же пути поэтому всех вот этих вот легких ребер на этом пути по
[02:10:03.060 --> 02:10:07.700]  любому не более чем логарифм то есть когда видите когда мы пишем не более чем логарифм на самом
[02:10:07.700 --> 02:10:13.420]  деле суммарно вот этого всего не более чем логарифм но не то чтобы нам сейчас это прям как-то
[02:10:13.420 --> 02:10:19.700]  погоду поменяет но поменяет только там поменяет константу но не погоду в целом то есть знаете
[02:10:19.700 --> 02:10:24.180]  это условно остатка осадков может выпасть чуть меньше и чуть больше но там дождик на солнышко
[02:10:24.180 --> 02:10:34.700]  это не поменяет так но а минус 1 да получается каждая такая штука уменьшает потенциал
[02:10:34.700 --> 02:10:48.300]  ой потому что потому что на автомате нет это это фолс как раз ну я как бы
[02:10:48.300 --> 02:10:54.300]  просуммировал все вот эти изменения вот тут тут минус 1 а да да да да потому что я
[02:10:54.300 --> 02:11:15.140]  ну вы имите воображение еще может быть зачем тут уже минуски для этого стоят я ну хорошо
[02:11:15.140 --> 02:11:42.780]  это изменение потенциала конкретно тут значит что это нам доказывает значит да то есть на
[02:11:42.780 --> 02:11:53.220]  самом деле да самое главное что это доказывает нет тут нет смотрите тут надо вот очень аккуратно
[02:11:53.220 --> 02:11:58.380]  на самом деле вот тут не запутаться потому что на самом деле доказывается следующее что учетное
[02:11:58.380 --> 02:12:13.020]  число значит получается учетное число сплайсов логарифа но это то это означает но по идее должно
[02:12:13.020 --> 02:12:19.300]  означать что есть у нас было ку эксползов да но наверное ступом предположим что у нас было дерево
[02:12:19.300 --> 02:12:26.300]  и все что мы делали это эксползы тогда если вы способ было ку то суммарное число сплайсов
[02:12:26.300 --> 02:12:41.060]  не превосходит значит ку на логе вот по большому счету что это означает вот
[02:12:41.060 --> 02:13:07.260]  ну да мы идем в корень да и там хранится следующий ну вот таки чего это нас приводит
[02:13:07.260 --> 02:13:12.500]  вот поэтому тот как вы да про то есть мыслить можно так то есть даже мы даже даже плясать не
[02:13:12.500 --> 02:13:21.300]  атосимптотики а вот какое суммарное число сплайсов мы сделаем потому что мы уже доказали да что то
[02:13:21.300 --> 02:13:28.100]  есть мы уже доказали что то есть помимо собственно собственно эксползов которые состоят из сплайса
[02:13:28.100 --> 02:13:35.340]  в свою очередь да мы делаем там от единицы каких-то операций правда и который потенциал меняют
[02:13:35.340 --> 02:13:43.380]  тоже на вот единицы правда но ладно вру был еще ладно вру на самом деле есть еще и верт который
[02:13:43.380 --> 02:13:50.660]  меняет который меняет потанц хотя нет каждый конкретный линк каждый конкретный кат тоже меняет
[02:13:50.660 --> 02:14:04.380]  потенциал на логарифом понятно да но при этом но вот чего нет не только эксполз каждый конкретный
[02:14:04.380 --> 02:14:10.180]  линк сам по себе кроме помимо эксползов дает еще как бы этому потенциалу логариф
[02:14:20.500 --> 02:14:20.940]  вот
[02:14:20.940 --> 02:14:36.940]  вот но с другой стороны да то есть но вот но
[02:14:36.940 --> 02:14:49.420]  дело в том что каждый конкретный сплайс мы просто тут есть разница что каждый конкретный сплайс
[02:14:49.420 --> 02:14:56.620]  мы все-таки за вот единицы делаем вот это не да именно не за вот единицы делом мы его делаем за
[02:14:56.620 --> 02:15:12.700]  мер штамп двух каких-то деревьев сплайсов я поэтому я говорю учетное число сплайсов
[02:15:12.700 --> 02:15:30.060]  они учетное время работы но можно и так-то нет нет лучше так не путать нам вот полезто будет
[02:15:30.060 --> 02:15:35.980]  иметь именно утверждение что как бы учетное число сплайсов не более чем логарифом
[02:15:35.980 --> 02:15:45.100]  да то есть учетное число сплайсов это логарифом или что то же самое есть у нас всего там оку
[02:15:45.100 --> 02:15:52.780]  запросов то сплайсов всего будет вот пока без относительно времени работая просто суммарное
[02:15:52.780 --> 02:16:03.900]  число сплайсов на ку запросов будет типа кулоген ладно от кулоген но это в идеале но мы но все
[02:16:03.980 --> 02:16:10.380]  постепенно я пока еще ничего такого не утверждаю так я не утверждаю что мы победили боже упаси нам
[02:16:10.380 --> 02:16:20.300]  еще придется поработать для этого вот значит смотрите работа то есть как бы то есть на самом
[02:16:20.300 --> 02:16:27.220]  деле я пока вот ограничимся следующим утверждением то есть я утверждаю что учетное число сплайсов
[02:16:27.220 --> 02:16:35.540]  логарифа то есть от логарифа то есть на кавказе каждый запрос приводит нас к не более чем в
[02:16:35.540 --> 02:16:44.500]  среднем но в амортизированном смысле в среднем не более чем от логарифму сплайсов значит еще
[02:16:44.500 --> 02:16:50.460]  раз потому что ну во первых но относительно вот этого потенциала но это все мы вводим вот этот
[02:16:50.460 --> 02:17:01.980]  потенциал и считаем количество сплайсов относить на этого потенциала нет у нас потенциал
[02:17:01.980 --> 02:17:10.220]  изначально 0 да да мы будем считать что у нас изначально ребер нет вообще есть только н голых
[02:17:10.220 --> 02:17:17.820]  вершин которые мы потом там из которых мы потом за n-1 линк бы собираем дерево поэтому изначально
[02:17:17.820 --> 02:17:28.300]  потенциал 0 и это хорошо значит смотрите значит что уж отсюда действительно очевидно это то что
[02:17:28.300 --> 02:17:37.540]  каждый конкретный эксполс на самом деле работает не более чем за учет на логарифом сплайсов потому
[02:17:37.540 --> 02:17:44.740]  что он работает не более чем за логарифом не оплачиваемых сплайс логично да и более
[02:17:44.740 --> 02:17:50.700]  того потенциал тоже увеличивает там более того сплайсов увеличивших потенциал тоже не более
[02:17:50.700 --> 02:17:58.180]  чем логариф ладно есть но вот есть еще вот эта операция которая увеличивает потенциал на единичку
[02:17:58.180 --> 02:18:03.820]  правда да потому когда вы просто заменяйте красный на синий ребро потенциал увеличивается как минимум
[02:18:03.820 --> 02:18:16.620]  синие части логично да нет погодейки у нас новый у нас потенциал не только количество красных
[02:18:16.620 --> 02:18:26.220]  лёгких ребер но и плюс еще количество синих ребер не не не не не не не не факт и количество
[02:18:26.220 --> 02:18:31.660]  синих ребер по любому по любому увеличилась на один вот в этой операции это самую первую
[02:18:31.740 --> 02:18:44.380]  когда мы от у отпилили ребенка да это увеличивает потенциал на единичку но правда вот вторая часть
[02:18:44.380 --> 02:18:50.740]  может либо это тут же скомпенсировать либо либо не скомпенсировать но в худшем случае потенциал
[02:18:50.740 --> 02:19:00.100]  получается увеличивается на один вот мораль то есть то есть мораль заключает в том что эксполс
[02:19:00.100 --> 02:19:08.060]  получается делает учетно не более чем логарифом сплайсов и при этом увеличивает потенциал тоже
[02:19:08.060 --> 02:19:22.180]  не более чем на логариф у нас кажется все сплайсы можно работать не больше чем учетно
[02:19:22.180 --> 02:19:29.700]  ну именно учетно да но у нас вообще у нас есть только один сплайс но то что у нас вообще есть у
[02:19:29.700 --> 02:19:37.140]  нас есть как бы смотрите у нас есть вот вот эти сплайсы значит оплачиваются потенциалом да мы
[02:19:37.140 --> 02:19:45.820]  их не учитываем вот есть значит есть сейчас но есть все остальные сплайсы которых суммарно не
[02:19:45.820 --> 02:19:52.060]  более чем логариф да при этом да эти сплайсы еще не порти вообще не меняют потенциал а
[02:19:52.060 --> 02:19:58.940]  конкретно вот этот сплайс его увеличивает но получается да но получается потенциал от
[02:19:58.940 --> 02:20:06.500]  этого там больше чем на логариф не изменился понятно да но то есть отсюда автоматически
[02:20:06.500 --> 02:20:13.460]  следует что значит получается учетная стоимость эксполс количество сплайсов делаемых одним
[02:20:13.460 --> 02:20:20.780]  эксползом это логариф напоминаю то есть учетная стоимость эксполза они учетное время работы
[02:20:20.780 --> 02:20:28.340]  боже упаси количество количество у нас мы же можем сколько угодно сделать ну они просто
[02:20:28.340 --> 02:20:34.340]  весит а вот да а у нет а учетное а учетное количество логариф учет оно в том же смысле
[02:20:34.340 --> 02:20:43.180]  в котором мы сейчас вводим понятие учетное время работы но как бы они в учетном
[02:20:43.180 --> 02:20:48.260]  времени не учитываются потому что делая один сплайс и потенциал уменьшится на единицу учет
[02:20:48.260 --> 02:20:53.620]  на 0 кайф то есть как это да как это раньше я могу делать сколько угодно таких операций
[02:20:53.620 --> 02:21:02.180]  потому что они не учитываются говорим мы и вводим каскадинка как вы помните а уже не помните
[02:21:02.180 --> 02:21:09.500]  да ну да не дай да типа не все бы отдали на отл да ну каскадинка в куче фибонаки
[02:21:09.500 --> 02:21:20.740]  не но там было это типа тогда чтобы удалить вершину надо ее отпилить отра отпилить от
[02:21:20.740 --> 02:21:27.060]  родителя ой от родителей уже отпили вы ребенка ладно давайте его тоже выпилим и те как это
[02:21:27.060 --> 02:21:31.740]  да каждый родитель готов вытерпеть от пил только одного ребенка если отпилили второго то все он
[02:21:31.740 --> 02:21:39.580]  уже да он начинает требовать он начинает требовать да сделать им да какой кошмар у меня отпилили два
[02:21:39.580 --> 02:21:46.940]  ребенка сделайте меня корнем до его делает корнем он успокаивается но это но это злой какой-то
[02:21:46.940 --> 02:21:52.100]  родитель конечно да потому что если родитель корень то отпиливайте хоть всех мне по барабану
[02:21:52.100 --> 02:22:05.020]  да злая структура конечно так учащего на чем-то но значит значит что у нас теперь значит но
[02:22:05.020 --> 02:22:10.060]  раз значит значит что значит мы доказали что значит каждый эксполс учетно делать не более
[02:22:10.060 --> 02:22:16.540]  чем логарифа не более чем ладно учетно ладно от логарифа давайте скажем потому что логарифом
[02:22:16.540 --> 02:22:22.300]  плюс один вот это все да но теперь если проследить по всем остальным все остальные операции то как мы
[02:22:22.300 --> 02:22:28.420]  помним этот потенциал все остальные операции там в ней эксполса меняют тоже не более чем на
[02:22:28.420 --> 02:22:35.660]  логарифа правда значит учетное количество сплайсов получается на каждую операцию не более чем от
[02:22:35.660 --> 02:22:44.940]  логарифа значит марая но вот из-за этого ну то есть в принципе как бы то есть это эквивалент на
[02:22:44.940 --> 02:22:50.540]  следующем утверждение что если у вас было к запросов вашему линкату просто ко всей структуре
[02:22:50.540 --> 02:23:00.940]  то суммарное число сплайсов выполненных в нем это ку лог н то есть можно теперь выкинуть этот
[02:23:00.940 --> 02:23:06.500]  потенциал потому что мы сказали у нас главное есть утверждение что сплайсов ку лог н а помимо
[02:23:06.500 --> 02:23:10.580]  сплайсов мы ничего особо не делаем то есть помимо сплайсов мы там практически самое там
[02:23:10.580 --> 02:23:16.180]  либо делаем операции буквально за вот единицы либо там берем это корневое корневой красный
[02:23:16.180 --> 02:23:26.860]  путь и начинаем там в эвельки какие-то операции отложенные делать понимаете да ну вот вот то есть
[02:23:26.860 --> 02:23:31.900]  по большому счету мы доказали что то есть в принципе это уже дает нам асимптотику лог
[02:23:31.900 --> 02:23:38.540]  квадрат на операцию в среднем почему лог квадрат ну потому что все вот эти потому что конкретно
[02:23:39.460 --> 02:23:44.980]  как мы помним все все операции кроме экспол затратят не более чем логарифом честного
[02:23:44.980 --> 02:23:53.780]  времени правда ну честного по модулю того насколько честная у вас там в элька да но там уже свои
[02:23:53.780 --> 02:24:13.780]  потенциалы это уже там ну давайте давайте но нет там все просто там мы будем знать так что мы
[02:24:13.780 --> 02:24:18.700]  суммарно сделали на деревьях то есть на деревьях мы вот этих вот отложенных мы этих вот всех
[02:24:18.700 --> 02:24:26.460]  операций суммарно сделали тоже откуда потому что асплайсов было там от кулоген и остальных
[02:24:26.460 --> 02:24:33.340]  операции тоже не более чем там кулоген да вот а вот а мы знаем мы уже умеем доказывать из
[02:24:33.340 --> 02:24:38.540]  этой амортизации для любых где там деревьев там что там суммарно тогда эти операции будут
[02:24:38.540 --> 02:24:45.340]  работать за там кулоген умножить на логен это вот если это будет сплей ну и как сказать можно
[02:24:46.180 --> 02:24:52.140]  если это в л там вообще все честно нет есть ещё конечно вероятность но вероятности там
[02:24:52.140 --> 02:24:55.660]  надо будет доказывать почему я вот собственно не очень хочу с обсуждать декартовый дерево да
[02:24:55.660 --> 02:25:01.240]  потому что в декартом тебе надо доказывать что математическое ожидание количество операций
[02:25:01.240 --> 02:25:08.500]  будет там от лаго рифма да вот я сейчас не хочу как и как просто с вами обсуждая я на я на
[02:25:08.500 --> 02:25:14.480]  первом курсе ругаться punch ai however start я не хочу начинать ругаться там такими словами раньше
[02:25:14.480 --> 02:25:19.640]  чем там с вами поругаются собственно другие преподаватели на эту тему вот они и планируют
[02:25:19.640 --> 02:25:25.040]  с вами ругаться на эту тему на третьем куда она в третьем семестре вот но там мотом от ожидания
[02:25:25.040 --> 02:25:31.320]  вводится достаточно быстро поэтому то но вот но вот поэтому собственно я думаю там мы попробуем
[02:25:31.320 --> 02:25:38.400]  надеюсь разобраться ладно кодовая фраза конечно надеюсь потому что честно говоря пока не когда
[02:25:38.400 --> 02:25:44.160]  такого у нас в программе не было прям доказательства мот ожидания дикартья чкину но наверное вот
[02:25:44.160 --> 02:25:52.880]  собственно что какую-то новинку вводить да нет вот надо но тут надо вспомнить с этим общего
[02:25:52.880 --> 02:26:00.280]  со всем вообще у вашего партии сейчас была какая-то новинка вообще или нет совки нет
[02:26:00.280 --> 02:26:04.640]  совки не новинка софтип я бы там вам я там вы уже по-моему примерно четвертая поколение
[02:26:05.240 --> 02:26:21.200]  так и вот это и вот и вот это неправда потому что как раз ровно в предыдущем поколении линкаты
[02:26:21.200 --> 02:26:33.120]  появился ну окей а нет а все как поезд уже ушел я ему ничего не могу сделать уже но это да нет
[02:26:33.120 --> 02:26:37.840]  вот очень странно нет линка линка был бы это может конечно может я случайно упустил его в
[02:26:37.840 --> 02:26:42.720]  программе экзамена непонятно почему но нет там линка был бы там как раз эту статью пытались
[02:26:42.720 --> 02:26:49.160]  даже чуть-чуть читать нет это длинная история на самом деле рассказываю много лет но как бы
[02:26:49.160 --> 02:26:53.280]  только в прошлом году собственно удалось рассказать что он нормально за логарифом до этого времени как
[02:26:53.280 --> 02:26:57.280]  бы просто было что типа все знают что работает за логарифом если в спае вставить туда сплей а
[02:26:57.280 --> 02:27:03.400]  почему не знает никто потому что я говорю я как после я был у меня было у меня это работало по
[02:27:03.400 --> 02:27:07.480]  принципу они открывают генальную статью таря на слейтер они там вместо сплей дерева пытаются
[02:27:07.480 --> 02:27:12.360]  какой-то зубодробительное дерево какое-то неизвестное там делать но там говорят они там обладают
[02:27:12.360 --> 02:27:17.000]  какими-то свойствами там шамань шамань шамань все хорошо а потом выяснилось что просто сплей
[02:27:17.000 --> 02:27:21.160]  дерево появилось через два года после появления линката и они там в этой статье помимо всего
[02:27:21.160 --> 02:27:25.480]  прочего и тыкнули носом что оказывается сплеи там со сплей деревом тут все классно работает за
[02:27:25.480 --> 02:27:36.680]  логариф так статик по моему примерно пришло время выяснить почему то есть что нам нужно на самом
[02:27:36.680 --> 02:27:41.440]  деле но то есть по большому счету да нам нужно попытаться доказать что суммарно все эти там
[02:27:41.440 --> 02:27:47.840]  если все это правильно делать со сплей деревом то получится но то значит все эти мержи будут
[02:27:47.840 --> 02:27:53.080]  собственно работать адекватно и вот но вот мы желательно что одна вот эта цепочка будет там
[02:27:53.080 --> 02:27:59.880]  учетно работать за логарифом ну учетно правда уже не относительно этого потенциала но потому
[02:27:59.880 --> 02:28:06.280]  что что нам приятно да то есть мы уже показали что у нас происходит ку логан сплайсов но вот
[02:28:06.280 --> 02:28:16.240]  еще там от единицы каких-то операций с деревьями правда причем каких ну там ну на самом деле
[02:28:16.240 --> 02:28:19.840]  понятно что может быть там присваивание на подотреске но оно скорее всего но как бы
[02:28:19.840 --> 02:28:24.880]  присваивание там идет на всем подделье присваивая на всем подделье делается за от единицы честного
[02:28:24.880 --> 02:28:32.400]  времени и он вот и вот единицы учет но потенциал вообще не меняется правда ну то что такое удаленная
[02:28:32.400 --> 02:28:43.880]  операция на всем подделье просто в корне написали чтоб всем прибавь 5 он говорит и все вот ну вот
[02:28:43.880 --> 02:28:52.480]  нет ну так и есть вот даже даже парадокса собственно нету никакого вот но вот поэтому
[02:28:52.480 --> 02:28:59.800]  теперь возможно придется ввести еще другой потенциал и доказать но и относительно него
[02:28:59.800 --> 02:29:06.440]  там действительно доказать что там все это вот действительно все красиво делается значит ну нет
[02:29:06.440 --> 02:29:11.040]  утверждение такое что как мы то мы только что доказали значит еще раз подчеркну до что если
[02:29:11.040 --> 02:29:16.880]  вы храните в абсолют там вот эти красные пути в абсолютно произвольной сбалансированный дикарта
[02:29:16.880 --> 02:29:24.440]  в эльке то у вас получается лог квадратная операция значит мы пытаемся доказать теперь
[02:29:24.520 --> 02:29:31.640]  мистическое утверждение что если вы будете это делать с плей деревом то мистическим
[02:29:31.640 --> 02:29:41.240]  образом окажется что на операцию вы тратите логарифом они лог квадрат вот понятно да вот
[02:29:41.240 --> 02:29:57.680]  понятна вот значит для этого значит непосредственно с плей деревья мы введем другой потенциал ну можно как
[02:29:57.680 --> 02:30:02.560]  бы понятно глобально этой цикла шумы как бы все то есть как бы как объединяется если у нас там в
[02:30:02.560 --> 02:30:06.680]  какой-то части амортизация относительно одного потенциала в другой части амортизация относительно
[02:30:06.680 --> 02:30:12.680]  другого надо просто в итоге сложить эти потенциалы и смотреть на глобальный потенциал но там могут быть
[02:30:12.680 --> 02:30:17.480]  проблемы конечно что может быть вот это первая часть оптимизирует вот этот потенциал но сильно
[02:30:17.480 --> 02:30:23.320]  портит второй наоборот и за этим надо следить но очевидно та часть потенциала которой мы сейчас
[02:30:23.320 --> 02:30:28.080]  будем смотреть она с этим не связана это это потенциал будет связан то есть это будет классический
[02:30:28.080 --> 02:30:37.120]  сплейный потенциал понимаете да но но вот мы не случайно с вами в прошлый раз доказывали
[02:30:37.120 --> 02:30:41.400]  сплей дерево не относительно просто потенциала лишь бы доказать хоть какой-нибудь логарифом
[02:30:41.400 --> 02:30:53.640]  относительно какого-то потенциала с весами какого-то потенциала с весами помните да вот
[02:30:53.640 --> 02:31:11.200]  так сколько времени то вообще кстати аптечек кстати аптечек 1157
[02:31:11.200 --> 02:31:26.600]  так а ну нормально пока живем или уже не живем нет только не до пораньше на три минуты да
[02:31:26.600 --> 02:31:36.480]  не дайте тонкая разница в 12 10 она заканчивается на фистесе то есть потому что только вот на
[02:31:36.480 --> 02:31:41.760]  фистесе между первой второй парой перерыв 20 минут называется конкретно здесь этого нет
[02:31:41.760 --> 02:31:47.080]  поэтому тут все расписание кроме первой пары сдвинута на 10 минут да вот такой интересный
[02:31:47.080 --> 02:31:54.760]  эффект нет ну что у нас еще третья пара есть так что как-нибудь это все успеем 4 русских но
[02:31:54.760 --> 02:32:01.040]  видимо 4 русских ждут нас на следующих трех парах да но дайте там четырех русских много
[02:32:01.040 --> 02:32:13.280]  понимаете да как минимум четыре а то и больше но это классику да это называется да слушайте да
[02:32:13.280 --> 02:32:18.360]  там знаете про какой-то там коллектив там пишут ой замечательно поют хорошо только он какой-то
[02:32:18.360 --> 02:32:25.520]  маленький нужно его как-то вот расширить так так но это же квартет ну и что но будет такой большой
[02:32:25.520 --> 02:32:34.920]  массовый квартет в чем проблема и вот так поднимите руки кто знает из какого фильма цитата значит
[02:32:34.920 --> 02:32:40.240]  еще раз ну что ж неплохо неплохо только людей как-то мало пусть взяли бы побольше людей но это
[02:32:40.240 --> 02:32:45.920]  же квартет серафим иванович ну и что что квартет пусть будет большой взяли бы больше людей будет
[02:32:45.920 --> 02:33:00.000]  большой массовый квартет так дальше так но это уже да нет но это уже конечно сужает пусть так
[02:33:00.000 --> 02:33:11.920]  конечно конечно карнавальная ночь ой ребят посмотрите не не пожалеете эти нет как за
[02:33:12.640 --> 02:33:21.560]  пофазу я смотрю но я не знаю я помню примерно в вашем возрасте по моему по моему первый раз
[02:33:21.560 --> 02:33:26.320]  этот фильм на сабли толком посмотрел честно я валялся правда очень смешной фильм так что
[02:33:26.320 --> 02:33:31.000]  очень рекомендую вот эти они за там помолли у того что возможно вам будет там некоторые вещи
[02:33:31.000 --> 02:33:37.660]  совсем не понятно то есть рекомендую наверно там с родителями посмотреть нет нет но я имею в том
[02:33:37.660 --> 02:33:41.340]  плане что возможно там и все какие-то какие какие-то детали советской действительности которые
[02:33:41.740 --> 02:33:49.740]  от вас могут быть там вообще долети там я не знаю но но это но но звать общий там потому что там
[02:33:49.740 --> 02:33:54.660]  ну то есть я для вас конечно да вы да вы можете считать что там какая-то организация готовит
[02:33:54.660 --> 02:34:00.340]  как паратива у начальника там называется свое мнение по данному вопрос но вот а еще надо добавить
[02:34:00.340 --> 02:34:05.460]  дошу этого начальника есть тоже начальство которое тоже следит за тем что там какое-то высокое
[02:34:05.460 --> 02:34:09.700]  начальство которое требует что дает там это как он выражается есть установка весело встретить
[02:34:09.700 --> 02:34:18.580]  новый год там но вот это вот в общем короче суть такая примерно ну ну а как же нет ну как это
[02:34:18.580 --> 02:34:24.500]  в данном случае да надо в данном случае это называется сайтира но потому что за эти 50-е годы
[02:34:24.500 --> 02:34:29.220]  типичная ситуация то есть когда активно ну то есть там когда как бы активно надо высмеивать то
[02:34:29.220 --> 02:34:34.900]  что если какие-то бюрократы там начинают делать все как бы что было там более правильно формально
[02:34:34.900 --> 02:34:41.140]  но там бредово по сути там более типичный фильм конечно это верные друзья с этой точки зрения но
[02:34:41.140 --> 02:34:46.580]  вот когда там там в этом смысле более страшная проблема потому что ситуация там ваша там вы
[02:34:46.580 --> 02:34:51.980]  строители ваша задача подготовили там построить горн животноводов вот вам надо их построить к
[02:34:51.980 --> 02:34:56.740]  фиксированному сроку к вечеру но вот но у вас не получается почему потому что у вас нет материала
[02:34:56.740 --> 02:35:04.660]  но но нет но все но все ситуация получается такая значит там начальника номер раз требуемый
[02:35:04.660 --> 02:35:09.380]  значит материал значит принципе материал из которого в принципе это можно построить просто
[02:35:09.380 --> 02:35:16.340]  вот у вас он на самом деле есть сколько угодно но в проекте утвержден нам там великим академикам из
[02:35:16.340 --> 02:35:22.900]  Москвы великим потому что из Москвы потому что академикам да это это только других причин нет
[02:35:22.900 --> 02:35:27.940]  на самом деле там собственно об этом и фильм вот значит там требуется нужно готовить вот весь
[02:35:27.940 --> 02:35:33.220]  конкретного материала с конкретного селикатного кирпича его приходится значит боржами возить за
[02:35:33.220 --> 02:35:40.820]  300 километров вот то есть как бы то есть формально как бы вы получается ничего сделать не можете но
[02:35:40.820 --> 02:35:46.860]  там кроме того чтобы он вот потому что там попытки там значит поехать там значит поехать попытка
[02:35:46.860 --> 02:35:50.140]  договориться с этим академикам невозможно потому что этот академик просто так не принимает
[02:35:50.300 --> 02:35:58.300]  он великий могучий да то есть он там зайцев почему-то так людей не принимает но там вот
[02:35:58.300 --> 02:36:02.740]  я говорю об этом но вот с другой стороны как заданному сроку там как бы не просто так потому
[02:36:02.740 --> 02:36:07.380]  что там собственно там животноводы наоборот там приводят там свои табуны там в результате их
[02:36:07.380 --> 02:36:11.580]  просто просто там просто им просто негде находиться и малейшие чего там эти животные
[02:36:11.580 --> 02:36:16.140]  начинают там просто там по всем полям разбегаться или там называется уже носится на людей при
[02:36:16.140 --> 02:36:22.140]  малейшем пожаре там в лесу вот и так далее там были жуткие проблемы там просто там зосем
[02:36:22.140 --> 02:36:29.260]  кого-то реально очень больно вот вот это вот это вот такой вот это там типа там те типичный
[02:36:29.260 --> 02:36:32.420]  сюжет на эту тему который мог возникнуть как фильм называется верные друзья примерно того
[02:36:32.420 --> 02:36:36.220]  же времени но то есть это не совсем уже комедия хотя тоже хотя там тоже смешные моменты есть на
[02:36:36.220 --> 02:36:41.020]  самом деле могу порекомендовать так ну вот три минуты и прошли так что теперь можно устраивать
[02:36:41.580 --> 02:36:48.020]  да правильно или да или да или что то же самое а можем мы наконец начать пару да
[02:36:48.020 --> 02:36:56.340]  то вот да а то действительно то что-то а то да я еще понимаю если мы там закончили психушкой
[02:36:56.340 --> 02:37:02.620]  кладбище но начинать с нее пару это как-то уже хотя да может лучше сразу начать и подальше хуже
[02:37:02.620 --> 02:37:08.460]  уже не будет там поэтому знаете как-то ладно последний сейчас скажу перед тем как продолжим
[02:37:08.460 --> 02:37:12.860]  дайте как-то как-то выходит постарайтесь когда вы ждете юмора ходите на сцену говорит колобок
[02:37:12.860 --> 02:37:20.580]  повесился не не пугайтесь я специально опустил вас на самое дно юмора чтобы оттолкнулись и
[02:37:20.580 --> 02:37:29.340]  полетели к новым высотам и продолжаем так вот линка и так значит соответственно что у нас и так
[02:37:29.340 --> 02:37:37.500]  значит еще раз чем мы сейчас занимаемся занимаемся тем что у нас есть значит линка мы доказали что
[02:37:37.500 --> 02:37:44.500]  значит учетная стоимость а эксползаб всего остального есть лог квадрат если мы каждый
[02:37:44.500 --> 02:37:53.060]  конкретный красный путь храним что там произвольном с балансированным деревья поиска я теперь
[02:37:53.060 --> 02:38:00.180]  мистическое утверждение начинается с этого момента мы начинаем работать в сплей деревья
[02:38:00.180 --> 02:38:08.860]  начинаем работать со сплей деревьями то есть каждый красный путь хранится в сплей деревья так
[02:38:08.860 --> 02:38:15.980]  вот я утверждаю что теперь потенциал можно подмодифицировать таким образом чтобы убедиться
[02:38:15.980 --> 02:38:26.740]  что учетная стоимость опера операции теперь не лог квадрат а логан то есть в переводе говоря
[02:38:26.900 --> 02:38:35.420]  если вы сделали к у запросов к этому дерево то суммарно там будет выполнена от ку логен действий
[02:38:35.420 --> 02:38:42.140]  вот я буду именно в таком формате говорить потому что пока мы доказали следующее значит предыдущие
[02:38:42.140 --> 02:38:50.140]  две пары мы по сути обсуждали сам линка ты доказывали следующее что но вот что суммарное
[02:38:50.140 --> 02:38:56.980]  число что во первых мы заметим что суммарное число экспорту значит сплайсов которые мы
[02:38:56.980 --> 02:39:11.860]  выполняем до ку логен понимаете да соответственно и нот и нот ну и соответственно но по большому
[02:39:11.860 --> 02:39:20.180]  счету это означает ну по большому счету это можно из этого следует что сплитов мержею у нас там от
[02:39:20.180 --> 02:39:28.500]  ку логан там ку логан получается да ну от от там ку логан ну правда само по себе нам это не поможет
[02:39:28.500 --> 02:39:36.540]  но теперь мы пока но вот но основное что нам потребуется доказать это конечно следующее нам
[02:39:36.540 --> 02:39:44.940]  хочется показать что учетная стоимость экспорта это не лог квадрат а лог но спрашивается относительно
[02:39:44.940 --> 02:39:56.380]  какого потенциала но заметим следующее значит ну у нас уже был потенциал значит сейчас у нас
[02:39:56.380 --> 02:40:03.020]  смотрите был у нас значит потенциал равен напоминаю но был у нас потенциал там количество
[02:40:03.020 --> 02:40:15.380]  красных легких красных легких там соответственно плюс там количество синих и мы доказали что этот
[02:40:15.380 --> 02:40:24.940]  потенциал у нас но вот но мы доказали короче что этот потенциал оплачивает там кого-то и
[02:40:24.940 --> 02:40:37.580]  суммарно там изменяется не более чем на лагеризм да то есть мы там ну вот делали какие-то там
[02:40:37.580 --> 02:40:49.580]  кула нот кула ноты и так далее вот а мы теперь ведем еще один мистический значит мистический
[02:40:49.580 --> 02:40:56.700]  потенциал зелененький очевидно да почему очевидно потому что других цветов нет вот
[02:40:56.700 --> 02:41:05.100]  да не у господи это тут ножка еще для так значит смотрите значит здесь у нас будет
[02:41:05.100 --> 02:41:13.380]  следующее значит здесь мы введем потенциал из сплей дерева то есть помните сплей дереве у нас
[02:41:13.380 --> 02:41:20.740]  был потенциал что в каждой вершине сплей дерева есть какой-то вес помните да и потенциал зависел
[02:41:20.740 --> 02:41:26.420]  от этих весов помните то есть мы там что-то в каждой вершине суммируем веса на под дереве да
[02:41:26.420 --> 02:41:36.940]  помните и значит да потом потом берем логарифом все эти логариф мы суммируем было дело да вот
[02:41:36.940 --> 02:41:43.980]  то есть условно говоря так давайте я так и напишу сумма по всем вершинам сумма по
[02:41:43.980 --> 02:41:58.660]  всем тум значит у значит внимание потомок в в соответственно сплей дереве я это пишу красным
[02:41:58.660 --> 02:42:05.100]  потому что у нас как бы сплей дерево это то что отвечает за красные пути да и сумма получается
[02:42:05.100 --> 02:42:18.100]  там значит логарифом с точнее так логарифом здесь двоичный а здесь сумма вот этих вот весов
[02:42:18.100 --> 02:42:28.940]  в это но это на самом деле тождественно значит равно значит сумме по всем в там лог 2 с там
[02:42:28.940 --> 02:42:41.860]  и значит с в этой а здесь у написать конечно вот помните в прошлый раз такое было да нет
[02:42:41.860 --> 02:42:50.100]  с это сумма вешек на под дереве в но если в тупую делать туда берется единица и мы не паримся на
[02:42:50.100 --> 02:42:55.300]  самом деле мы говорим что если у нас в все в больше либо равно единицы то мы в прошлый раз
[02:42:55.300 --> 02:43:04.060]  доказали что каждый конкретный внимание сплей сплей да делается за то есть каждый конкретного
[02:43:04.060 --> 02:43:13.820]  сплея есть учет относительно этого потенциала учетная стоимость значит о от лог значит w делить
[02:43:13.820 --> 02:43:22.580]  на w в это где w вот это вот большой это большое w вот ведь оно больше вот этого поэтому оно
[02:43:22.580 --> 02:43:32.780]  большое вот это сумма весов на всем дереве вот вот я специально это подчеркиваю потому что мы
[02:43:32.780 --> 02:43:37.060]  сейчас этим начнем пользоваться то есть мы есть правильный там тоже сплей дерева доказывали что
[02:43:37.060 --> 02:43:41.380]  он при самой тупой доказательства того что сплей дерево работает за логарифом то что давайте все
[02:43:41.380 --> 02:43:46.980]  w маленькие введем единичками и тогда вот это получится там лога остается только убедиться что
[02:43:46.980 --> 02:43:53.980]  все остальное что мы делаем кроме операции с плей то есть помимо непосредственно сплея там тоже
[02:43:53.980 --> 02:44:00.940]  имеет учетную стоимость там адекватно помните да правда у нас возникало ощущение что доказать
[02:44:00.940 --> 02:44:04.820]  про каждую операцию что она работает за какую-то подобную асимптотику у нас особо не получалось
[02:44:04.820 --> 02:44:10.700]  потому что там возникали конкретно какие-то конкретные детали но общая суть оставалось там
[02:44:10.700 --> 02:44:17.260]  той же что если как бы доказать что ввести потенциал где вот эти w маленькие равны единице то легко
[02:44:17.260 --> 02:44:25.500]  оказывалось доказать что все операции работают за логан было было такое в прошлый раз чего больше
[02:44:25.500 --> 02:44:32.020]  либо равно нет именно вот если именно равно единицы просто если вот это w именно равно единицы то вот это
[02:44:32.020 --> 02:44:39.940]  отношение оно не превосходит и получается что сплей дереве все операции работают за отлога нет
[02:44:39.940 --> 02:44:46.940]  если я веду другие w получится другие асимптотики уже не факт что там обязательно будет логан вот
[02:44:46.940 --> 02:44:56.740]  нет в смысле нет проблема в другом понимаете вопрос как бы насколько это адекватно потому
[02:44:56.740 --> 02:45:01.900]  что если получится что w равно там 2 в степени n а конкретно вот это w случайно осталось единичкой
[02:45:01.900 --> 02:45:07.540]  то как бы у тебя получится логарифм 2 степенем то есть вот то есть как бы если неправильно ввести
[02:45:07.540 --> 02:45:13.380]  потенциалы то это нам не поможет то есть да то есть да это утверждение верно но просто вопрос как
[02:45:13.380 --> 02:45:18.860]  бы насколько оно нам помогает то есть теперь в зависимости того как мы ведем потенциал мы говорили
[02:45:18.860 --> 02:45:24.620]  что мы их можем ввести как честно то есть там каждый w единичка можем ввести где-то на каждую
[02:45:24.620 --> 02:45:30.740]  вершину навесим вес там равный тому сколько сколько сплеев из нее мы хотим вообще вызвать и
[02:45:30.740 --> 02:45:37.980]  оказывалось там что-то типа там энтропии на самом деле ну вот то есть там в этом смысле тоже там
[02:45:37.980 --> 02:45:42.100]  еще даже спайдеров там в каком-то смысле там информационно оптимально там или что-то еще в
[02:45:42.100 --> 02:45:49.940]  этом роде но вот будет у вас теория информации вот там собственно там встретите ой правда когда
[02:45:49.940 --> 02:46:01.500]  у вас это теория информации будет что-то ладно чую прям совсем выкинули что-то но у вас есть план
[02:46:01.500 --> 02:46:09.660]  учебный нету вы как бы если ее нет за 4 выкинули причина доказать очень простое у меня она была
[02:46:09.660 --> 02:46:17.580]  но ну что ну ладно в случае чего в шаде она тоже есть а или по крайней мере была да
[02:46:17.580 --> 02:46:28.460]  в смысле не но если вы все нет если отменился еще и шат но это совсем печально не не ну нет
[02:46:28.460 --> 02:46:33.500]  не но шат незачем зачем зачем яндексу отменить там по моему они свои образовательные проекты
[02:46:33.500 --> 02:46:43.340]  наоборот скорее расширяют чем сужают все все слава богу господи не но не не за что такой
[02:46:43.340 --> 02:46:52.100]  курс выкидывали но это как то нету при желании нету вы можете просто не выбирать такой курс по
[02:46:52.100 --> 02:47:11.980]  выбору так вот таким вот сплеем так вот мы берем вот такой потенциал да тут конечно ладно
[02:47:11.980 --> 02:47:21.620]  потенциал конечно выглядит немножко не равно весно вот так ну хотя да может быть тут даже
[02:47:21.620 --> 02:47:28.620]  да красные легкие красные синие даже нет смысла действительно непосредственно обсуждать поэтому
[02:47:28.620 --> 02:47:35.420]  знаете вы что сделаем значит мы для красоты сделаем так ты так так так так так так
[02:47:35.420 --> 02:47:40.660]  хотя
[02:47:40.660 --> 02:47:48.820]  как будто вот действительно красиво делать что прямо-то вообще хорошо было нет уже
[02:47:48.900 --> 02:47:56.140]  так просто как будто нет полночения чтобы сантиметр с килограммами где-то складываем так
[02:47:56.140 --> 02:48:09.580]  ну да нет это да но правда по эти этот потенциал мы вводили для того чтобы доказать количество
[02:48:09.580 --> 02:48:17.300]  сплайсов а этот потенциал мы доказываем чтобы вести время нет да да нет скорее даже не
[02:48:17.300 --> 02:48:22.940]  перемножать я думаю но вот но просто нет я думал что как бы может быть и чтобы там по времени
[02:48:22.940 --> 02:48:31.100]  было давайте вот это вот давно же мы логарифом но это тогда лог квадрат даст ну да так что
[02:48:31.100 --> 02:48:40.300]  соответственно нету ладно давайте сделаем так мы операции складываем только самой операции
[02:48:40.860 --> 02:48:50.660]  что-то что-то что-то что ведь у нас последний потенциал это подцепим операции первой
[02:48:50.660 --> 02:48:56.540]  2 это потенциал как бы количество операции но вот да поэтому вот так поэтому так не надо
[02:48:56.540 --> 02:49:03.580]  делать значит смотрите давайте так теперь мы значит мы сделаем вот как мы сейчас значит мы
[02:49:03.580 --> 02:49:08.880]  мы сказали так мы доказали вот помните мы доказали что у нас суммарное число
[02:49:08.880 --> 02:49:13.380]  splice в кулоген да без всяких амортизации просто доказали что их
[02:49:13.380 --> 02:49:17.700]  суммарно кулоген но это по сути есть амортизация просто вот в исконном виде
[02:49:17.700 --> 02:49:23.860]  что она по сути значит поэтому мы значит забыли о том потенциале ну какие-то
[02:49:23.860 --> 02:49:27.000]  какие какие-то там красно-синее безобразие ну может там что-то вспомним
[02:49:27.000 --> 02:49:33.920]  ну если что передакажем и введем теперь новый красивый зелененький потенциал и
[02:49:33.920 --> 02:49:38.960]  сейчас будем из плена вот и сейчас будем исследовать наш линкат с точки
[02:49:38.960 --> 02:49:50.040]  зрения этого потенциала но при этом мы сделаем маленькую хитрую вещь потому
[02:49:50.040 --> 02:49:52.640]  что для того чтобы правильно исследовать и получить хороший результат
[02:49:52.640 --> 02:49:56.720]  мы хорошо подгоним вот эти маленькие w
[02:49:56.720 --> 02:50:06.480]  значит для этого я вам попробую сейчас нарисовать начать эти как выглядит вообще
[02:50:06.480 --> 02:50:11.360]  сплей как выглядит вообще линкат у линката есть вот такой путь
[02:50:11.360 --> 02:50:23.600]  ну условно и на нем висят какие-то под деревья
[02:50:23.600 --> 02:50:28.120]  возможно даже не одно вот а я даже вот так
[02:50:28.120 --> 02:50:40.640]  да ну как бы да идея та же сейчас будет да маркер правда тогда лучше работал но это уже
[02:50:41.240 --> 02:50:50.000]  да ну и тогда и смотрите немножко мистики значит вот такой работы но в реальности мы это храним
[02:50:50.000 --> 02:50:57.480]  не так в реальности на самом деле у нас красные вершины этот путь хранится в каком-то сплэй
[02:50:57.480 --> 02:51:05.520]  дереве да там не самом балансе дот и на каждом из них так ладно раз два три четыре пять
[02:51:05.520 --> 02:51:09.120]  шесть семь восемь девять десять раз два три четыре пять шесть семь восемь девять
[02:51:09.120 --> 02:51:19.920]  десять ух ты ничего ся колдовище чисто пальцы в небо отвечают так вот на принципе но на каждой
[02:51:19.920 --> 02:51:26.160]  из этих вершин продолжает висеть абсолютно такое же синее дерево да просто красный они просто друг
[02:51:26.160 --> 02:51:31.360]  на друге по-другому висят именно как красный но как бы синие под деревья на них висят те же
[02:51:31.360 --> 02:51:41.080]  понимаете да так вот у меня теперь идея такая если у меня есть вершина в то я у меня ей будет
[02:51:41.080 --> 02:51:53.280]  сопоставляться ее вес ладно неправильно значит будет сопоставляться зее ее вес
[02:51:53.280 --> 02:52:03.760]  который равен размеру вот этого синего под дерево то есть помните мы уже с этим сталкивались то есть
[02:52:03.760 --> 02:52:10.720]  потенциал тот же как в хл дешке нет не может сама вершина потому что считается то есть это не
[02:52:10.720 --> 02:52:21.880]  менее чем один но как 8 8 сама вершина а также все что висит на ней на внимание синих ребрах то есть
[02:52:21.880 --> 02:52:27.600]  там то что висит на красных мы это конкретно весе не считаем то есть это конечно будет учтено вот
[02:52:27.600 --> 02:52:37.520]  здесь это будет учтено конечно но именно здесь нет почему сейчас нет нет в хл дешке мы тоже говорили
[02:52:37.520 --> 02:52:43.320]  что вверх по сути так вес каждой вершины на пути это вот вес вот этого синего дерева и потом по мы
[02:52:43.320 --> 02:52:48.640]  уже начинали там найдем условно говорят там это взвешенный центро этого пути соображаться нормально
[02:52:48.640 --> 02:52:53.680]  вот ну то есть короче такую вершину что если вы ее выкинете то как бы тут будет висеть там
[02:52:53.680 --> 02:52:58.200]  по сумма весов меньше половины тут сумма весов меньше половины но меньше либо равна
[02:52:58.200 --> 02:53:11.680]  а мы а мы здесь где считаем это тоже в вершинах вот и потенциал дальше то есть ну то есть как бы
[02:53:11.840 --> 02:53:18.040]  мы делаем сплэй дерево это ну как бы для того чтобы посчитать потенциал сплэй дереве мы должны
[02:53:18.040 --> 02:53:27.640]  у каждой вершины объявить вес понимаете да правда есть один на маленькая тонкость правда на который
[02:53:27.640 --> 02:53:33.400]  надо обратить внимание когда мы исследовали сплэй дерева мы подразумевали что вес один раз там
[02:53:33.400 --> 02:53:40.960]  значит один раз оказался там на вершине все раз и навсегда здесь обратите внимание
[02:53:41.280 --> 02:53:47.560]  эта величина меняться будет как минимум при операции линк потому что мы за синие веро как
[02:53:47.560 --> 02:53:53.160]  бы операция линк к любой из этих вершин за синие ребро подвешивает еще что то и вес увеличивается
[02:53:53.160 --> 02:54:06.760]  вот и да с другой стороны при операции кат он уменьшается так нет а причем тут нет почему
[02:54:06.760 --> 02:54:11.120]  ну при при самом экспозиции но что меняется при экспозиции два дерева мерзите вообще-то
[02:54:11.120 --> 02:54:20.560]  вы там каждый сплайс это вообще-то какие-то какие-то сплиты какой-то мерзь ну или хотя бы
[02:54:20.560 --> 02:54:28.640]  что-то из этого уж точно ну мерзь точно сплит ну если сами веса вершины меняются само дерево
[02:54:28.640 --> 02:54:40.880]  здрасте приехали вы два дерева повесили да как бы весело у меня тут синие дерево а теперь
[02:54:40.880 --> 02:54:52.360]  я говорю а теперь это тоже путь все веса поменялись поздравляю да нет так что поэтому нам придется
[02:54:52.360 --> 02:54:59.960]  но вот но там линки меняют каты меняют эверт слава богу не меняет потому что от того что вы
[02:54:59.960 --> 02:55:05.320]  развернули это дерево как бы конкретные веса не меняются правда ну и в принципе вообще есть так
[02:55:05.320 --> 02:55:11.560]  вспомнить все остальные операции то можно обнаружить что да кроме то есть все кроме эксполза на
[02:55:11.560 --> 02:55:19.640]  самом деле собственно это этот потенциал не трогает от слова вообще да но собственно линк
[02:55:19.640 --> 02:55:28.960]  а ты эксполз хорошо да так давайте еще какой-то пример быстренько найдем но конкретно вот этот
[02:55:28.960 --> 02:55:35.240]  вес не зависит от того к этом кто я всплой деревья он зависит от того кто у меня пасет кто на мне
[02:55:35.240 --> 02:55:47.560]  по синим на синих ребрах висит сейчас еще раз если мы делаем его эксползная часть нет ну что
[02:55:47.560 --> 02:55:56.800]  такое эксползная часть но так и так меня это скажешь так эверт вне эксполза не меняет вот так то
[02:55:56.800 --> 02:56:01.520]  есть сам по себе реверс пути этого потенциала пародии не меняет сейчас все попало дерево не
[02:56:01.520 --> 02:56:10.080]  изменится но ну и такие дерево нет такие дерево-то изменится но как бы типа развернется но вес его но
[02:56:10.080 --> 02:56:22.800]  вес каждой вершины от этого не поменяется от слова никак это вес это это один плюс размер суммарный
[02:56:22.800 --> 02:56:29.400]  размер всех всего что висит на синих ребрах в чем висит именно в смысле глобального дерева
[02:56:29.400 --> 02:56:38.000]  они в смысле сплея но на нашей вершине до у нашей вершине как бы есть дети ну вот и
[02:56:38.000 --> 02:56:45.520]  некто большинство из этих детей кроме может быть одного вообще висят по носимых ребрах нет
[02:56:45.520 --> 02:56:51.440]  не детей а потомков висящих на этих детях во всем по деревьям образованных этими детьми
[02:56:51.440 --> 02:56:58.120]  нет количество потомков этих детей ну считай сами где плюс один еще мы себя мы тоже считаем
[02:56:58.120 --> 02:57:07.640]  но вот но по большому счету с точки зрения вот этого как всегда можете считать что это
[02:57:07.640 --> 02:57:14.360]  сз от этой вершины минус если у нее есть тяжелый ребенок минус сз от этого тяжелого ребенка давай
[02:57:14.360 --> 02:57:20.520]  смотрите вот допустим мы делаем двух деревьев делаем у нас у каждой вершины висели штуки на
[02:57:20.520 --> 02:57:28.280]  синих синие по деревьям всегда мы сделали мерч синие по деревья у нас изменилась структура самого
[02:57:28.280 --> 02:57:36.280]  дерева но то что висела у нее на синих по деревьях кажется не изменил правильно ну ну когда во время
[02:57:36.280 --> 02:57:45.400]  мерча ну во время мерча ну да ну так сами веса не поменялись да но структура сплой
[02:57:45.400 --> 02:57:50.680]  деревьев изменилась поэтому как бы там поэтому все утверждения которые мы доказывали про
[02:57:50.680 --> 02:57:56.760]  сплой дерева остаются как минимум локально верными поэтому кажется x полоса нож состоит из
[02:57:57.360 --> 02:58:08.120]  так не должно
[02:58:08.120 --> 02:58:21.920]  по сути когда мы делаем сплит ну буквально у последней или последние вершины пути добавляем
[02:58:21.920 --> 02:58:29.760]  синие по дерево по дереву по синему либру вообще да вообще как бы ну вот но с другой стороны можно
[02:58:29.760 --> 02:58:36.600]  просто отдельно сказать что вот мы сначала добавили потом на это посмотрели изменение потенциала так а
[02:58:36.600 --> 02:58:43.960]  дальше уже сделали на постоянных ну с постоянными сами но вообще да но хотя с другой стороны тут
[02:58:43.960 --> 02:58:49.000]  надо что w ну правда надо аккуратно потому что полноченье же знаете какая фишка пролежа шла
[02:58:49.000 --> 02:58:55.840]  w поменялась но во первых конкретно при отпиливании там произошло следующее сначала с помощью
[02:58:55.840 --> 02:59:02.880]  сплея но есть так кратко то что сейчас будет дальше значит мы же как делается вообще сплит
[02:59:02.880 --> 02:59:08.760]  сплей деревья то есть мы там берем вершину откатывая справа от которой мы хотим все отпилить
[02:59:08.760 --> 02:59:16.520]  заносим в корень а потом просто убиваем правое под дерево да вот получается вес от этого каким-то
[02:59:16.740 --> 02:59:23.800]  но там так получается при этом при этом отпиливании казалось бы вот с к да то есть
[02:59:23.800 --> 02:59:41.500]  при этом как получается так etc как бы уменьшается уменьшается
[02:59:46.520 --> 03:00:01.520]  да но по дереву в сплей дереве вот так что сейчас вот будем аккуратно это вы
[03:00:01.520 --> 03:00:06.080]  значит смотреть что у нас будет происходить значит внимание значит
[03:00:06.080 --> 03:00:10.400]  смотрите внимание немножко значит да то есть тут надо вот аккуратно потому что
[03:00:10.400 --> 03:00:14.360]  основная еще проблема в том что любая операция даже помимо эксползу у нас
[03:00:14.360 --> 03:00:18.920]  происходит что этот потенциал меняется в отличие от сплея да поэтому то есть
[03:00:18.920 --> 03:00:23.120]  сплей у нас там была мечта в сплее дереве что как бы этот потенциал меняет
[03:00:23.120 --> 03:00:28.880]  только функция сплей да это неправда это в принципе неправда но как это
[03:00:28.880 --> 03:00:32.560]  работало в сплее в сплей это работало что когда мы делаем скажем мерч да что
[03:00:32.560 --> 03:00:36.680]  мы делаем мы делаем один сплей который меняет там который учетно работает
[03:00:36.680 --> 03:00:41.960]  адекватно а потом мы делаем за от единицы к корню подвешиваем под дерево
[03:00:41.960 --> 03:00:47.360]  которая изменяет эску только у одной вершины у корня изменяет его не более
[03:00:47.360 --> 03:00:52.800]  чем на логариф за счет этого получал что то есть получас вот эта операция да
[03:00:52.800 --> 03:00:55.960]  у нее конечно учетная стоимость логарифом хотя реально было единицы но
[03:00:55.960 --> 03:01:02.680]  суммарно это нас все равно устраивало вот теперь просто надо проследить значит
[03:01:02.680 --> 03:01:10.280]  как с этим потенциалом работает ну как всегда все кроме эксполза пока всегда
[03:01:10.280 --> 03:01:16.400]  эксполз мы оставим на сладенькое значит но давайте думать что у нас вообще есть
[03:01:16.400 --> 03:01:21.840]  давай вспоминаем конечно же так но если там вспоминать что у нас по списку было
[03:01:21.840 --> 03:01:26.720]  сверху у нас были всякие операции типа сумма присвоить на отрезке и так далее
[03:01:26.720 --> 03:01:32.120]  да но но помимо эксполза это просто за уап единицы мы записываем в корень
[03:01:32.120 --> 03:01:35.720]  отложенную операцию потенциал это в это само от единицы потенциал это не меняет
[03:01:35.720 --> 03:01:46.000]  от слова никак правда поэтому неинтересно так что у нас там дальше значит да ну
[03:01:46.000 --> 03:01:54.160]  ладно дальше идет по списку линк да а вот тут да ну вот а вот тут конечно
[03:01:54.160 --> 03:02:03.200]  становится интересно значит интересно становится то что заметим что если мы
[03:02:03.200 --> 03:02:09.680]  сделаем просто значит как у нас вообще линку строим мы заказывали что если мы там к у подвешиваем
[03:02:09.680 --> 03:02:18.000]  в то как бы мы от у вызываем с плей вызвали до твой не с плей эксполз и потом говорим что а
[03:02:18.000 --> 03:02:27.920]  теперь мы просто подвисим синий ребро так но по-моему это ощущение что это вот единичная операция
[03:02:27.920 --> 03:02:34.200]  вызывает вызывает у нас проблем дело даже не в том что мы тут для того чтобы найти корень
[03:02:34.200 --> 03:02:38.640]  этой кстати их вершины с плей деревьев нам приходится вызывать дополнительно с плей но
[03:02:38.640 --> 03:02:43.640]  это само по себе относительно этого потенциала не проблема да проблема в том что конкретно эта
[03:02:43.640 --> 03:02:52.160]  операция меняет потенциал и меняет его вообще не самым приятным образом то есть у всех вот этих
[03:02:52.160 --> 03:03:04.800]  вот вершин меняется вес или нет хорошо действительно вес меняется только у этой
[03:03:04.800 --> 03:03:10.360]  вершины потому что если мы мы что-то повесили за синее ребро то проблемы только у того к чему
[03:03:10.360 --> 03:03:18.560]  мы повесили но не у него его предков да а вот со всего дерева в целом потенциал меняется потому
[03:03:18.560 --> 03:03:24.400]  что смотрите дабл юкаш поменялась только этой вершины но логарифом то мы берем не дабл юшек
[03:03:24.400 --> 03:03:34.960]  а мы их берем извините логарифом эссак поэтому как бы поэтому как бы вопрос там будет то есть у
[03:03:34.960 --> 03:03:42.480]  всех то есть эска поменяется у всех вершин которые являются предками у в сплее дерева
[03:03:42.480 --> 03:03:57.680]  поэтому поэтому мы поэтому мы проконтролируем специально и скажем что действительно перед
[03:03:57.680 --> 03:04:06.400]  тем как вешать там подвешивать что так у мы у объявим коркин то есть как бы да
[03:04:06.400 --> 03:04:13.840]  то есть но типа сказать что давайте вершина у это не просто так это там типа крутой батя на
[03:04:13.840 --> 03:04:23.880]  него можно что-то вешать соответственно да вот кстати да с этой то для того чтобы это кстати
[03:04:23.880 --> 03:04:27.880]  зашить то есть вы можете специально проследить за тем что то есть видите то есть получается как
[03:04:27.880 --> 03:04:33.720]  будто это с модификациями получается да то есть этим надо проследить но на самом деле тут как бы
[03:04:33.720 --> 03:04:38.880]  еще авторы выкручиваются даже заранее выкручиваются так что они даже линк предлагали
[03:04:38.880 --> 03:04:47.200]  делать так что чтобы вот это ребро было не синемо-красным на самом деле то есть типа
[03:04:47.200 --> 03:04:51.640]  вы конкатинируете эти два пути там прям так и вызывается прям это вызывается функция конкати
[03:04:51.640 --> 03:04:57.120]  ней но конкати ней двух путей он так и будет делаться вы делаете сплей а то потом с правой
[03:04:57.120 --> 03:05:12.240]  по дерева объявите вы ну например но знаете это как но опять же это опять же типа называется
[03:05:12.240 --> 03:05:17.720]  да зачем и сами письма разносите лучше по почте отправили то есть по большому счету как бы то
[03:05:17.720 --> 03:05:26.960]  же самое только с добавлением бюрократии большой нет но не знаю скажем так помню помните да
[03:05:26.960 --> 03:05:32.720]  стоси зрения математики выливание воды из чайника это хорошо с точки зрения программирования это
[03:05:32.720 --> 03:05:38.280]  как бы хорошо только в определенном смысле до определенной степени то есть лучше легче реально
[03:05:38.280 --> 03:05:43.920]  вот аккуратненько предел вот сплей сделайте не парится нет круче нет круче нет самое крутое
[03:05:43.920 --> 03:05:48.080]  конечно тут высший пилотаж наверное это сделать тесты на которых как бы и если делать этот
[03:05:48.080 --> 03:05:53.360]  сплей то будет работать за логарифом а если не сделать то за лук квадрат есть такой вообще
[03:05:53.360 --> 03:05:58.280]  возможно конец потому что там окажется что там из-за каких-то свойств суммы логарифов красивых
[03:05:58.280 --> 03:06:09.360]  на самом деле никаких проблем не будет и так какие-то а причем тут китайские дыру вообще что
[03:06:09.360 --> 03:06:17.480]  такое китайский дико тач не не помоги по китайцами по моему немножко по другим облако
[03:06:17.480 --> 03:06:35.320]  ну я так вот да да да избегайте там и другого да но это да ну окей не знаю вклад это скажет
[03:06:35.320 --> 03:06:40.520]  мне такая информация неизвестна но лакей если у него есть так скажешь так а спаривать не
[03:06:40.520 --> 03:06:46.480]  буду как бы знаете это называется там китайцам свечку компаний держал что они там пишут я не
[03:06:46.480 --> 03:06:55.440]  знаю так что может быть но окей но за ростом мало ли но в любом случае ладно этот алгоритм как
[03:06:55.440 --> 03:07:07.440]  бы все равно американский так что соответственно значит далее значит так значит хорошо значит
[03:07:07.440 --> 03:07:12.640]  договорились что линк обязательно должен быть сконкатиной там то есть либо там скотина и там
[03:07:12.640 --> 03:07:18.600]  либо хотя бы у этой вершины сплей вызвать надо если вы у нее вызовите сплей то в общем-то по
[03:07:18.600 --> 03:07:22.840]  барабану за красной реброву будете в окне подвешивать или за синее в общем-то суть от этого не
[03:07:23.400 --> 03:07:30.040]  по крайней мере суть этого потенциала там конечно надо еще по-хорошему обработать там то что как
[03:07:30.040 --> 03:07:36.000]  поменяется потенциал тот там относительно количество сплайсов но думаю сами догадываетесь что собственно
[03:07:36.000 --> 03:07:49.440]  ничего криминального там не произойдет правда это одного дерева да то есть по факту для того
[03:07:50.040 --> 03:07:55.040]  вообще по всем вершинам пройтись для каждой вершины найти всех ее потомков в сплай дереве и
[03:07:55.040 --> 03:08:07.360]  посчитать посчитать сумму там вешек это получится эскою это эско взять алгоритм да но потомка в
[03:08:07.360 --> 03:08:19.400]  линкате причем потомков на синих ребрах да да да как и старых лдшки да то есть как бы
[03:08:19.400 --> 03:08:27.720]  все все вершины лежат в путях просто некоторые пути длины 1 в смысле длины 0 вот ну как
[03:08:27.800 --> 03:08:51.560]  найти глубину ну вообще да сделай как бы пожалуйста сплея поддерживай сз и все
[03:08:51.560 --> 03:09:10.640]  ну сз в смысле относительно самого сплея конечно вот но смотри по мне по потенциал
[03:09:10.640 --> 03:09:15.840]  ну смотри заметил что вес поменялся только у одной вершины это собственно вершина у но
[03:09:15.840 --> 03:09:21.960]  если она корень то вес поменялся только у нее следовательно и как бы эско поменялось
[03:09:21.960 --> 03:09:30.360]  только у вершины в у вершины у вес в любом случае меняется только у эски могли поменяться больше
[03:09:30.360 --> 03:09:44.840]  нет у мы не сделали корнем но умы не умы сделали так аккуратно корнем в корневом сплее корневом
[03:09:44.840 --> 03:09:50.840]  сплей деревья мы ее сделали корнем да да то есть нет мы не только сделали эксполз ату но а
[03:09:50.840 --> 03:09:57.720]  после этого мы еще и сделали сплей ату после этого дополнительно потому что мы пока не
[03:09:57.720 --> 03:10:02.880]  гарантируем что призывал в результате эксполза у окажется корки нет если мы конечно добавим
[03:10:02.880 --> 03:10:24.640]  в эксполз такое требование может нам даже и поможет в да и зависит более потому что
[03:10:24.640 --> 03:10:28.680]  непосредственно у нас же после этого есть еще мистическая операция непосредственно
[03:10:29.280 --> 03:10:40.440]  подвешивание вершины в кушечке а она работает вообще за от единицы ну ладно за да может быть
[03:10:40.440 --> 03:10:46.800]  еще сплея тв в ее дереве допустим да это мелче но фишка в том что эта операция будучи самой
[03:10:46.800 --> 03:11:05.480]  от единицы меняет потенциал потому что она меняет собственно в ну да ну как сказать да
[03:11:05.480 --> 03:11:27.360]  в вот этих вершин она не меняет потому что смотрите поменялась одно w но получается вот мы
[03:11:27.360 --> 03:11:33.120]  прибираемся по всем вершинам и суммируем там логарифмы каких-то сумм w так вот если у не
[03:11:33.120 --> 03:11:41.680]  сделать корнем то она будет участвовать в нескольких таких суммах и тогда суммарно
[03:11:41.680 --> 03:11:57.960]  потенциал мог и не на логарифм увеличится она очень много на что вот сейчас вот давайте сейчас
[03:11:58.040 --> 03:12:05.720]  покажу вот у меня была где-то здесь допустим да когда допустим и значит что такое потенциал у
[03:12:05.720 --> 03:12:11.880]  нас сейчас пробегаемся по всем вершинам для каждой вершины мы берем все ее под дерево и
[03:12:11.880 --> 03:12:24.200]  значит суммируем размер да ну по большому счету кстати эск это просто да то есть как бы условно
[03:12:24.200 --> 03:12:28.240]  говоря если мы предположим что мы реально этот красный путь вместо красного пути ханим такой
[03:12:28.240 --> 03:12:35.440]  под дерево сколько тут вообще вершин висит по большому счету вот но фишка следует но фишка
[03:12:35.440 --> 03:12:42.600]  следующем дело в том что если вы подвесили вот сюда есть еще одно под дерево то увеличилась да
[03:12:42.600 --> 03:12:49.320]  было но туда дабл и увеличилась только от у но эска у которой выберете логарифм у этой вершины
[03:12:49.320 --> 03:12:58.440]  тоже увеличилась и у этой и у этой и у этой ночем все что там есть вот поэтому и проблема
[03:12:58.440 --> 03:13:07.800]  а сплей решает очень просто установится корнем потому что если до корнем этого
[03:13:07.800 --> 03:13:12.480]  дерева то есть смотрите как это решается то есть теперь вот тут получается вот значит все вот это
[03:13:12.480 --> 03:13:19.000]  вот тут вот все весит да и вы теперь подвешиваете дерево прям вот сюда то есть у него есть вот под
[03:13:19.000 --> 03:13:26.640]  дерево вы еще тут повесили тогда заметим что да меняется w у этой вершины но и эска меняется
[03:13:26.640 --> 03:13:40.400]  теперь только у этой вершины да по по дереву этой вершины в сплей дереве кстати это неправда что
[03:13:40.400 --> 03:13:47.440]  это количество вершин всего по дереве потому что у нас может быть вершины которые все си нет
[03:13:47.440 --> 03:13:53.720]  но они что тоже считаются то есть там говорится так что давайте удалим все красные ребра вместо
[03:13:53.720 --> 03:13:59.720]  это то есть вот эти красные ребра удалим а вместо их составим вот эти сплей дереве тогда как бы
[03:13:59.720 --> 03:14:07.960]  эска каждой вершины это просто реально тупо размер под дерево так вот а тут получается фишка в том
[03:14:07.960 --> 03:14:13.440]  чтобы эска помет то есть надо чтобы не только дабл юа поменялся только одно но и эска поменялась
[03:14:13.440 --> 03:14:21.440]  только одна это для нас важно вот чем помогает сплей ну и заметим что помо увеличивается
[03:14:21.440 --> 03:14:30.280]  получается не более чем на логариф мэн получается примете да ну потому что вес вес этой вершины
[03:14:30.280 --> 03:14:42.240]  в принципе не более чем логариф мэн правда ну ладно хорошо вес не более чем мэн
[03:14:42.240 --> 03:14:54.440]  вес это вес этой вершины что это все что висит на ней на синих ребрах это в принципе не более
[03:14:54.440 --> 03:15:01.440]  чем это вот auch не значит увеличивается не более чем на логариф а значит эска тоже не более
[03:15:01.440 --> 03:15:08.440]  чем эска но это когда мы суммируем не только это но это но она тоже не более чем в принципе значит
[03:15:08.440 --> 03:15:16.920]  следовательно логарифом это эске увеличился не более чем на логари shoulders следователе
[03:15:16.920 --> 03:15:21.200]  потенциал от конкретно этого подвешивание увеличивается не более чем налогарифа он ура
[03:15:21.200 --> 03:15:30.200]  Вот пока вроде логично, да? То есть видим, да, что относительно потенциала пришлось подшаманить,
[03:15:30.200 --> 03:15:34.360]  но там возможно придется теперь аккуратно вспоминать, как делать, соответственно,
[03:15:34.360 --> 03:15:43.440]  теперь, то есть как-то меняется это потенциал, ну хотя да, от этого как меняется анализ от того,
[03:15:43.440 --> 03:15:48.080]  что это ребро мы теперь объявляем не синим, а на самом деле красным, но на самом деле там
[03:15:48.080 --> 03:15:54.000]  в потенциале на splice что там поменялось? Там количество синих ребер уменьшилось на один,
[03:15:54.000 --> 03:15:59.360]  это нормально, но зато, то есть там минус один и плюс еще может быть это ребро легкое,
[03:15:59.360 --> 03:16:04.160]  то есть в общем тот потенциал, по-моему, от этого даже не увеличился, а если увеличился,
[03:16:04.160 --> 03:16:11.560]  то на единицу, поэтому нам по барабану, то есть все старые рассуждения остались в силе или нет?
[03:16:11.560 --> 03:16:16.400]  Мы старый потенциал не трогали вообще. Да нет, как-то мы его трогали, извините,
[03:16:16.400 --> 03:16:21.760]  мы тронули, мы алгоритм поменяли. Раньше мы говорили, что мы просто подвешиваем за
[03:16:21.760 --> 03:16:26.440]  синие ребро и говорим, что нам ходит бухлое, а теперь мы говорим, что оно красное, на самом деле.
[03:16:26.440 --> 03:16:30.760]  Что? Мы же splice вызвали для того, чтобы не делать его красным.
[03:16:30.760 --> 03:16:52.480]  Нет, мы поменяли алгоритм, мы вызвали внутри splice, но сказали хорошо. В официальной версии все
[03:16:52.480 --> 03:16:57.080]  таки это ребро красное, просто красное ребро дополнительного splice вызывать не надо,
[03:16:57.080 --> 03:17:02.360]  потому что конкретинация двух путей, а на этот splice сама вызовет. Ладно,
[03:17:02.360 --> 03:17:07.600]  если вы неудачно реализуете, она вызовет splice отсюда и подвесит вот это дерево,
[03:17:07.600 --> 03:17:15.000]  но так делать не надо. Лучше наоборот, вот как бы подвешивайте сюда и вам будет хорошо.
[03:17:15.000 --> 03:17:28.680]  Нет, ну возможно нам сейчас это будет все-таки аккуратно важнейше,
[03:17:28.680 --> 03:17:33.200]  если его конкатинировать именно так, то как бы будет адекватно, потому что,
[03:17:33.200 --> 03:17:46.680]  знаешь, ну да. Ну да, но там просто, но, видимо, просто приходится прописывать,
[03:17:46.680 --> 03:17:51.360]  как конкретно делать мерч. Знаете, бывает на олимпиаде такое, что вы так не пишете,
[03:17:51.360 --> 03:17:53.960]  пишете так почему, потому что так доказательство сходится, а так нет.
[03:17:53.960 --> 03:18:02.640]  Вот, я просто был на тренировке как-то ситуация, я писал там с open cup и там вот и студенты писали,
[03:18:03.520 --> 03:18:07.280]  и там стоит студент, там что-то не смог знать, написал нормальную динамику,
[03:18:07.280 --> 03:18:10.680]  но пихал-пихал, а наоборот не работает. Вот я написал, а она у меня с splice зашла.
[03:18:10.680 --> 03:18:16.200]  Ну я сказал, я вот и писал, ну я почти как ты, только вот вместо этого написал вот это,
[03:18:16.200 --> 03:18:20.720]  а почему вот это? Ну я говорю, ну потому что вот так у меня доказательство сходилось, а так нет.
[03:18:20.720 --> 03:18:26.000]  Ну вот он очень... Что, надо что-то доказывать?
[03:18:26.000 --> 03:18:35.080]  Не, ну я помню, это был такой вообще активный такой студент, я помню, там это, в те времена
[03:18:35.080 --> 03:18:38.200]  еще экзамен сдавался долго, он мне там в течение нескольких часов вообще объяснял,
[03:18:38.200 --> 03:18:42.040]  что доказывать ничего не надо, вообще сопротивлялся, вообще я не понимаю,
[03:18:42.040 --> 03:18:45.520]  что он Форд Белман, понятно алгоритм, что он называется, что вы тут придираетесь вообще.
[03:18:45.520 --> 03:19:01.960]  Какой прецедент? Ну, в данном случае, я тут за математику, можно пытаться доказывать опытным путем,
[03:19:01.960 --> 03:19:06.120]  но я говорю, подлянка может в том, что у меня всегда работал, а потом пришел какой-нибудь злобный,
[03:19:06.120 --> 03:19:12.840]  я не знаю, Макс Бобенко и превратил ваш окей в TL99.
[03:19:12.840 --> 03:19:38.560]  Бывает, да. Ну молодец, ну да, а мог бы стать более уверенным призером, да. Так вот, ладно,
[03:19:38.560 --> 03:19:43.800]  идем дальше. Значит, смотрите, так что давайте лучше аккуратненько, потому что, поэтому я всегда,
[03:19:43.800 --> 03:19:50.000]  с этой точки зрения, как бы я не люблю махать украин, тут все работает злобным, почему? Магия!
[03:19:50.000 --> 03:19:59.360]  Да, я как бы за то, что смотрите, лучше давайте смотреть, что там за магия. А то знаете, а то в
[03:19:59.360 --> 03:20:05.760]  этом смысле это верить авторитетам, вещь такая, как-то получится, да, мне мой авторитет сказал,
[03:20:06.360 --> 03:20:11.840]  а мне мой авторитет сказал, что это не логарифм, а лог квадрат. Ну и все, там будем драться,
[03:20:11.840 --> 03:20:16.920]  кто круче, Бэтмен или Супермен, что ли, или вот это все. Нет, страшно, конечно, если вы с
[03:20:16.920 --> 03:20:24.200]  плейдерами на них ссылаетесь, но да. Так вот, так все, стоп, так все, да, что-то мы уже передат,
[03:20:24.200 --> 03:20:32.400]  ладно, что-то мы уже, да, шел пятый час лекции, да, вот это все, да, вот, нет, ну буквально,
[03:20:32.400 --> 03:20:38.720]  ну ладно, даже спи, да. Не, ну не совсем, перерывы были, ладно, так все, стоп, так ладно, давайте
[03:20:38.720 --> 03:20:42.200]  сейчас разберемся, в туши как бы разберемся и как бы я вас обключу, потому что сейчас начинать
[03:20:42.200 --> 03:20:52.520]  новую тему бессмысленно уже, так что да. Какой красивый? Ну по-моему, само последний кат,
[03:20:52.520 --> 03:21:02.600]  это с доказательством, это уже красивая задачка. Ладно, значит, смотрите. Так, тихо, тихо, тихо. Так,
[03:21:02.600 --> 03:21:08.240]  давайте все, чем как бы, да, как бы больше будете обсуждать, тем как бы меньше будете потом отдыхать,
[03:21:08.240 --> 03:21:19.560]  вот. Так вот, значит, хорошо, с линком разобрались, ну с катом тоже, ну с катом желательно тоже,
[03:21:19.560 --> 03:21:23.400]  в общем короче говоря, видимо желательно, просто как будто, знаете, вот неплохой лайфхак,
[03:21:23.400 --> 03:21:28.240]  внутри экспоза, когда если вы делаете со сплейми, то там последнее, что сделаете в экспозе,
[03:21:28.240 --> 03:21:34.040]  это просто сплей от ух. Ну то есть там типа гарантируете, пожалуйста, что когда вы делаете
[03:21:34.040 --> 03:21:40.800]  сплей, вы там, то есть когда вы делаете экспоз, что это вершина корень сплей дерева. Пожалуйста.
[03:21:40.800 --> 03:21:53.400]  Не совсем. Нет, на самом деле мы по факту, если внимательно вдуматься в то, что мы делали,
[03:21:53.400 --> 03:22:04.520]  мы использовали то, что веса не меняются в процессе самого сплея. То есть, да, что мы доказали,
[03:22:04.520 --> 03:22:08.640]  давайте, давайте я проговорю этот аккуратный момент, чтобы вот всем было понятно, да, смотрите,
[03:22:08.640 --> 03:22:13.520]  что мы вот, если напомнить вот основу, что такое учетная стоимость, да, то есть учетная стоимость
[03:22:13.520 --> 03:22:21.200]  это реальная стоимость плюс потенциал в конце минус потенциал в начале. Мы доказали, что если в
[03:22:21.200 --> 03:22:26.640]  процессе одного конкретного сплея веса не меняются по факту, да, и удовлетворяют свойствам, что они там
[03:22:26.640 --> 03:22:33.400]  все больше либо равно единице, то тогда учетная, только вот эта вот реальная стоимость плюс потенциал
[03:22:33.400 --> 03:22:43.560]  в конце минус потенциал в начале, это от вот этого вот. Логично, да? Вот все, что мы сделали. Да, у нас важный
[03:22:43.560 --> 03:22:47.640]  момент, что потенциал, когда мы делаем другие операции, этот потенциал в наглу меняется,
[03:22:47.640 --> 03:22:53.720]  поэтому наша задача это аккуратно учесть. Ну да, потому что если мы каждый раз будем уменьшать потенциал
[03:22:53.720 --> 03:23:00.560]  на n, а потом между, увеличимся обратно на n. Ну да, да, да. Как это называется? Отдавайте да. Ну да,
[03:23:00.560 --> 03:23:09.560]  это слово откат, конечно, само собой возникает. Так вот, ну как бы да, вы как бы даете монетки,
[03:23:09.560 --> 03:23:15.080]  а потом они вам в тихую их возвращают. Это что, не откат что ли? Ух, вам едва ли не словарное
[03:23:15.080 --> 03:23:23.800]  определение этого слова. Так вот, значит, поэтому каждый сплей будет вот работать за столько. Так
[03:23:23.800 --> 03:23:28.800]  же с этим все нормально. Потому что потенциал-то мы взяли в общем-то, в чем там, мы доказывали,
[03:23:28.800 --> 03:23:36.120]  что это именно относительно вот этого потенциала, что важно. Так вот, чему нас теперь, значит,
[03:23:36.120 --> 03:23:42.440]  ну вот, значит теперь вот возникает действительно самое интересное. То есть, хорошо, с линком все
[03:23:42.440 --> 03:23:47.040]  в порядке, ну с катом тоже, если мы делаем вот перед тем, как отпилить вот это синее ребром,
[03:23:47.040 --> 03:23:52.560]  и а ту еще не делаем, не только эксполс, но и потом еще эксплей, то тоже, ну вот, а хотя здесь как раз
[03:23:52.560 --> 03:24:03.760]  проблем нет, для usplay можно не делать, потому что от того, что вы там, ну да, кстати, действительно,
[03:24:03.760 --> 03:24:08.520]  от того, что вы отпилили какое-то синее ребро от кого-то, наоборот, потенциал только уменьшился.
[03:24:08.520 --> 03:24:20.720]  Но если вы отпилили именно синее ребро, что важно? Если мы отпилили красное, не изменилось? Нет, почему,
[03:24:20.720 --> 03:24:27.920]  ну как сказать, нет, если вы... Как мы можем отпилить синее? Нет, помните, мы в кате преслеживаем за тем,
[03:24:27.920 --> 03:24:34.400]  что когда мы отпиливаем, оно синее. Поэтому вот, нет, когда мы отпиливаем красное, потенциал тоже
[03:24:34.400 --> 03:24:42.000]  уменьшается на самом деле. А, хотя не факт, если вы отпиливаете вот такое красное уже в сплее,
[03:24:42.000 --> 03:24:47.520]  то как бы очевидно потенциал уменьшился, потому что у этой вершины, как бы, на ней стало висеть
[03:24:47.520 --> 03:24:54.920]  меньше вершин. Вот, но это уже, но нам это уже не так важно, потому что, да, главное, что отпилили
[03:24:54.920 --> 03:24:59.320]  синее-синее ребро, значит, тут у всех вот этих вершин веса поуменьшались, значит,
[03:24:59.400 --> 03:25:10.120]  поуменьшались кайф. Так, что у нас еще там есть? Так, нет, ну давайте так, ладно. Так, ну да,
[03:25:10.120 --> 03:25:18.960]  есть еще и верт, но сам по себе реверс, на самом деле этот потенциал не меняет никак. А, ну или
[03:25:18.960 --> 03:25:24.000]  что то же самое, дайте тут тоже два варианта. Можем просто увидеть, что конкретно наш реверс,
[03:25:24.000 --> 03:25:29.200]  как отложенная операция, да, он как бы не сильно отличается от того же присваивания на подотреск,
[03:25:29.200 --> 03:25:35.440]  то есть мы там в корень записали что-то и не паримся. Вот, так что кайф. То есть потенциал не
[03:25:35.440 --> 03:25:41.200]  поменялся. Или можно было сразу сказать, в сплее деревья мы умеем делать реверс всего под дерево
[03:25:41.200 --> 03:25:48.480]  за учетно от логарифма относительно вот этого потенциала. То же мы в прошлый раз это вот доказали.
[03:25:48.480 --> 03:25:58.280]  Ну, положили отложенную операцию в корень, а каждый раз, когда мы спускаемся вниз, мы как бы
[03:25:58.280 --> 03:26:05.960]  эту операцию пропитируем. Да, само по себе это вообще у одного, да. То есть вообще за у одного
[03:26:05.960 --> 03:26:19.880]  реального времени и ноль изменения потенциала. Никак. Нет, а отложенная операция нам реально
[03:26:19.880 --> 03:26:25.320]  время работы увеличивает только в константу раз, потому что все операции сплея деревья мы делаем
[03:26:25.320 --> 03:26:30.400]  сверху вниз, и когда нам нужно пройти от вершины в ее ребенка, то прежде чем мы в этого ребенка
[03:26:30.400 --> 03:26:39.160]  идти, мы за от единицы делаем проталкивание. Поэтому реальное время поменялось там в константу.
[03:26:39.160 --> 03:26:48.680]  А симпатичность это не меняется от слова «никак». Вот, собственно, в этом, собственно, и великий
[03:26:48.680 --> 03:26:55.880]  мистицизм технологии отложенных операций в принципе. Вот. Поэтому с этой точки зрения не
[03:26:55.880 --> 03:27:03.800]  паримся. Так, что у нас там еще было? Так, ну да, ну в ЛСА ничего не происходит. Ну да, в ЛСС.
[03:27:03.800 --> 03:27:14.160]  Но там, но там происходит два экспоза. Один, видимо, сплей. Нет, ну потому что там есть операции,
[03:27:14.160 --> 03:27:20.800]  видо «возьми вершину и скажи мне, пожалуйста, там корень ее дерева». Да, в сплее это выражается
[03:27:20.800 --> 03:27:34.920]  в виду «возьми вершину, кто ее корень?» Так, Петя, кто у тебя корень? Я. Так, Вася, ты же был корень?
[03:27:34.920 --> 03:27:44.640]  Да. Вот, это сплей дерева, да? То есть знаете, да, куда? Ну там, да, не то чтобы корень Шрюзингера,
[03:27:44.640 --> 03:27:50.760]  конечно, но вот. Ну какая-то такая бистика. Да, так, так, так, каждый спрашивает, что за безобразие?
[03:27:51.360 --> 03:28:05.040]  Зато быстро. Вот так вот быстро. Так, ладно. Так что, ну да, что там еще было? А, но мы еще должны были
[03:28:05.040 --> 03:28:10.440]  проверить. А, ну всякие эти операции, типа является ли вершина предком другой в линкате, да, но это
[03:28:10.440 --> 03:28:15.360]  тоже, да, что там один экспоз и проверка лежит ли вершина на пути, но это тоже один дополнительный
[03:28:15.360 --> 03:28:27.640]  сплей, ничего страшного, да? Так что остается финал. Финал в виде, собственно, экспоза. Значит,
[03:28:27.640 --> 03:28:35.640]  давайте внимательно думать. Значит, внимательно думать. Значит, как же у нас тут будет все происходить?
[03:28:35.640 --> 03:28:42.160]  Происходить будет так. Ну, на самом деле, даже, значит, ну что у нас тут будет происходить? Ну,
[03:28:42.160 --> 03:28:51.160]  во-первых, мы начнем с того, что мы там, значит, распилили какое-то дерево на два. Вот. Но заметим,
[03:28:51.160 --> 03:28:56.960]  что от этого, от того, что мы там распилили путь на два, на самом деле, просто распилили путь на два,
[03:28:56.960 --> 03:29:02.480]  да? И даже один из этих путей подвесили к другому за синее ребро. Можно заметить, что потенциал
[03:29:02.480 --> 03:29:14.840]  от этого, но уж не увеличится точно. Смотрите, что произошло. Как делается сплит в сплее? Значит,
[03:29:14.840 --> 03:29:20.720]  вот, допустим, вам нужно посплитить вот по этому ребру, да? Тогда что происходит? Вот это, допустим,
[03:29:20.720 --> 03:29:25.880]  пусть эти вершины А и Б, чтобы мы не путались. Тогда что делает сплей? Сплей, во-первых,
[03:29:25.880 --> 03:29:36.200]  сплей дерева вызовет сплей от А и объявит А корнем, да? И что теперь, значит, как теперь делается сплит
[03:29:36.200 --> 03:29:44.520]  дальше? Сплит просто с точки зрения сплея убивает вот это под дерево, правда? А с точки зрения линката,
[03:29:44.520 --> 03:29:53.040]  по факту, мы сказали, что просто это ребро теперь не красное, а синее. Ну, правда, оно соединяет не эту
[03:29:53.040 --> 03:29:58.520]  вершину, а вот где-то вот эту, но это другой вопрос, это уже мелочь. Но заметим теперь следующее,
[03:29:58.520 --> 03:30:06.920]  что от того, что мы вот это сделали, заметим, что произошло. То есть произошла весьма интересная
[03:30:06.920 --> 03:30:14.160]  вещь. С одной стороны, в эске этой вершины вот это не учитывается, правда? То есть эска, то есть
[03:30:14.160 --> 03:30:20.520]  удаление отпиливания вот этого под дерево как бы уменьшило эску этой вершины на размер вот этого
[03:30:20.520 --> 03:30:28.920]  дерева. Вот, но, нет, само по себе удаление, но подвешивание за синее ребро увеличило конкретно ее w
[03:30:28.920 --> 03:30:33.600]  на ту же величину и, следовательно, эску увеличило на ту же величину. То есть, по факту,
[03:30:33.600 --> 03:30:41.680]  ничего не поменялось. То есть потенциал, конкретно вот эта операция, потенциал не поменяла от слова
[03:30:41.680 --> 03:30:52.320]  вообще, прям вообще не поменяла. Можно еще раз вопрос? Значит, эс от у, вы говорите, что это, на самом
[03:30:52.320 --> 03:30:59.720]  деле, количество шин по дереве? Вроде бы это все-таки неправда, потому что если мы берем у посередине
[03:30:59.720 --> 03:31:10.960]  пути, то мы учитываем в этом весе также те, которые сверху от нее. Нет, в весе мы вообще не
[03:31:10.960 --> 03:31:15.280]  учитываем ни то, что сверху, ни то, что снизу, мы учитываем в весе только то, что висит на синих
[03:31:15.280 --> 03:31:25.000]  ребрах. А эска? А если она корень, то у нее все в под дереве. А если она не корень, то из нее вверх идет
[03:31:25.000 --> 03:31:31.960]  красный ребро, которое мы не учитываем в эске. Правильно. Но при этом, например, это может быть
[03:31:31.960 --> 03:31:38.480]  корень в нашем дереве, и если из него идет вверх красный ребро, то получится... Ну, поэтому я говорю,
[03:31:38.480 --> 03:31:44.880]  что под дерево, в смысле, скорее сплей дерево. То есть там говорилось не под дерево глобальное
[03:31:44.880 --> 03:31:50.200]  линката. Если имеете в виду под дерево вершины у в линкате, то это, конечно, неправда. А я имею
[03:31:50.200 --> 03:31:55.120]  в виду следующее. То есть правда это будет в следующем смысле. Давайте рассмотрим вот этот красный
[03:31:55.120 --> 03:32:02.240]  путь, удалим все красные ребра, вот эти, а вместо них составим красные ребра вот с таким деревом.
[03:32:02.240 --> 03:32:13.520]  Вот тогда это будет буквально сумма под дерева. Ну, в смысле... Ну, как бы, это тоже будет дерево,
[03:32:13.520 --> 03:32:20.040]  просто есть красное дерево, на котором висят еще синие под деревья какие-то. Я утверждаю, что вот
[03:32:20.040 --> 03:32:27.160]  в таком мысленно составленном дереве действительно эска это тупо размер под дерево. Вот. Только это,
[03:32:27.520 --> 03:32:34.360]  боже упаси. Конечно, если брать именно под дерево линката, то это, конечно, не то. Да, боже упаси.
[03:32:34.360 --> 03:32:51.120]  Ну, в сплее не обязательно. Нет, смотри, тут фишка такая. Ну, опять, нет, смотри, тут фишка такая,
[03:32:51.120 --> 03:33:00.840]  что синие ребро... Ну, смотри, мы сначала отпилили вот это красное ребро. Получилось вот такие два
[03:33:00.840 --> 03:33:13.200]  дерева. Справа под дерево, которое отвечает за вот эту часть пути. Пока тут крестик. Отпилили.
[03:33:13.280 --> 03:33:23.560]  Замечаем, что поменялся вес. То есть, ладно, вес у этажки от этого не поменялся. Ну вот. А эска
[03:33:23.560 --> 03:33:33.480]  уменьшилась на сумму весов, на вот это вот все. Но теперь мы решили, как бы, подвесить этот весь
[03:33:33.480 --> 03:33:40.520]  путь до за синие ребро. Как это будет происходить? Это называется... Для этого мы заводим подмержить
[03:33:40.520 --> 03:33:45.800]  это дерево к этому. А как это делается? Мы берем в этом дереве самую правую вершину,
[03:33:45.800 --> 03:33:54.840]  отправляем ее в корень. Ну, в принципе, это уже произошло. Правда? И... Ну вот. А, нет, даже не так. Нет,
[03:33:54.840 --> 03:33:59.000]  погодите. Как это вообще происходит? То есть, мы берем вот это дерево и говорим, что у этого дерева
[03:33:59.000 --> 03:34:08.200]  есть синие ребро, ведущего в родителя. И этот родитель А. Вот так вот я даже нарисую. Да, то есть,
[03:34:08.200 --> 03:34:14.560]  по факту, где находится вершина В в этом дереве? Вершина В находится, ну вот, вот где-то здесь,
[03:34:14.560 --> 03:34:20.840]  на самом деле. Вот. Но мы как бы, помните, это ребро мы храним, боже упаси, не в вершине В, а как бы в
[03:34:20.840 --> 03:34:26.920]  корне этого дерева. Ну, то есть и так. У нас есть как бы нечто, нечто, ассоциирующееся с деревом в целом.
[03:34:26.920 --> 03:34:37.760]  Да? Вот. Вот. И в этом нечто мы, собственно, синие ребро и храним. Вот. Но теперь заметим, что это
[03:34:37.760 --> 03:34:45.320]  увеличило вес Ашки. Но заметим, что увеличило ровно на ту же величину, на которую только что
[03:34:45.320 --> 03:34:52.600]  уменьшилась ее эска. Но увеличение В оно и эску тоже увеличило. То есть, получается, суммарно, значит,
[03:34:52.600 --> 03:34:59.080]  эска у Ашки не поменялась. Это непосредственно отпиливание вот этого. То есть, когда мы сплеем
[03:34:59.080 --> 03:35:04.360]  выводили ее в корень, конечно, там эски и вэшки поменялись. Но это была операция сплея и, значит,
[03:35:04.360 --> 03:35:28.440]  учетная стоимость адекватная. Нет. На сумму всех весов. Потому что на этом синим ребре,
[03:35:28.960 --> 03:35:37.200]  когда у нас есть тут синий ребро, мы к весу добавляем размер под дерево в линкате. А размер под
[03:35:37.200 --> 03:35:44.040]  дерево в линкате в данном случае содержит и вот это вот все. Потому что в реальном-то дереве,
[03:35:44.040 --> 03:35:49.240]  помните, у нас тут есть вот вершина В, вот это вот все ее потомки, и тут все висящее синий,
[03:35:49.240 --> 03:35:54.960]  это тоже ее потомки. Поэтому это тоже в весе все прекрасно учитывается. Нет, я имею ввиду,
[03:35:54.960 --> 03:36:01.200]  что у нас не в ноль потенциал вышел, а вообще в минус. В какой минус? Нет, в минус он не
[03:36:01.200 --> 03:36:16.520]  мог выйти, потому что все веса не менее чем один. Нет, по-моему, ровно в ноль. Вычился вес этого
[03:36:16.520 --> 03:36:18.920]  дерева и прибавился вес этого дерева.
[03:36:18.920 --> 03:36:34.680]  Сейчас, ну вот у нас вычился вес правого под дерево. У нас же вычилась сумма по всем весам
[03:36:34.680 --> 03:36:43.800]  в правом под дерево, нет? Нет, само под дерево осталось, но его просто отрезали от нашего дерева.
[03:36:43.800 --> 03:36:53.720]  Ну и тем самым с потенциалом... Нет, ну как бы... Короче, напишите, пожалуйста, что вот по шагам.
[03:36:53.720 --> 03:36:58.920]  Вот мы отрезали это красное репро, что у нас... Нет, ну... Смотри, в правом под дереве ничего не
[03:36:58.920 --> 03:37:07.400]  было. Нет, ну смотри, из эски, вот жила была эска, эска это сумма всех весов вот этих вот этого всего,
[03:37:07.400 --> 03:37:14.360]  да? Из эски по удалению этого ребра вывалилась сумма весов вот всех этих вот вершин.
[03:37:14.360 --> 03:37:27.800]  А сумма весов вот этих вот вершин не равна размеру? Ровна, потому что... Что такое вес вершины?
[03:37:27.800 --> 03:37:36.760]  Это что? Это вес вершины, это один, плюс перебираем все синие, все синих детей и для каждого ребенка
[03:37:36.760 --> 03:37:39.400]  берем размер реального под дерево в линкате.
[03:37:39.400 --> 03:37:50.680]  А, все, я, кажется, понял, да, там проблема в том, что типа размер это не реальный размер, а типа размер
[03:37:50.680 --> 03:38:00.840]  в кавычках. В смысле, размер по серям. Ну, размер по синим, да. Ну, то есть и так, что значит по синим?
[03:38:00.840 --> 03:38:04.760]  То есть как бы мы учитываем только синие ребра, но в детей, когда мы рассматриваем уже, из детей
[03:38:04.760 --> 03:38:10.120]  идем в луков, нам уже плевать, там синие, красное, серо-бурмалиновое, там уже учитывается все.
[03:38:10.120 --> 03:38:25.160]  Вот так вот. Ну, на самом деле, да. То есть реальному размеру под дерево вершины В,
[03:38:25.160 --> 03:38:30.600]  который является реальным корнем этого дерева. Вот, все, разобрались, отлично.
[03:38:30.600 --> 03:38:38.760]  Так, получается, этот вот распил подмена, получается, потенциал сам по себе не поменял от слова никак.
[03:38:38.760 --> 03:38:46.120]  Понятно, да? Но это было только начало эксполза. Так, ну хорошо, получается, начало эксполза
[03:38:46.120 --> 03:38:52.440]  потребовал нам один сплей и один вот такой, один сплей, который работает учетно за логорифом, да.
[03:38:52.440 --> 03:39:04.600]  Там учетно за логорифом, да, давайте, мы доказываем про логорифом, да. Ну, там вот какой-то логорифом,
[03:39:04.600 --> 03:39:11.040]  но так как у нас W большое, по-любому не превосходит N, то все нормально. Вот, то логорифом. И как бы
[03:39:11.040 --> 03:39:17.720]  не некоторая, ну вот, значит, один сплей и дальше какая-то операция, которая работает за 1,
[03:39:17.720 --> 03:39:27.560]  потенциал не поменял. Что происходит дальше? Значит, дальше будет происходить следующее.
[03:39:27.560 --> 03:39:34.520]  Значит, теперь у нас есть, давайте, вот начиная, значит, мы вызвали эксползад U, вот она, так,
[03:39:34.520 --> 03:39:43.600]  что-то на ней тут висит, красных детей у нее нет, но дальше у нас теперь есть вот эта вот веселая
[03:39:43.600 --> 03:40:00.360]  цепочка. Вот такая, вот такая, вот такая и так далее. Вот, ну да, так что так далее, как говорят
[03:40:00.360 --> 03:40:09.840]  поляки, соответственно, и так далее, и так далее, и так далее, и так далее, и так далее. Так что
[03:40:09.840 --> 03:40:22.600]  теперь будет происходить? Так вот, значит, дальше будет происходить следующее. Значит,
[03:40:22.600 --> 03:40:32.080]  дальше мы будем, ну вот, значит, что мы будем делать теперь? Значит, делать теперь мы будем
[03:40:32.080 --> 03:40:37.080]  следующее. Значит, мы тут вот проделали какую-то операцию, возможно даже добились того, что U это
[03:40:37.080 --> 03:40:44.120]  корень, ну или просто на свою ноту. Значит, дальше будет происходить следующее условно. Теперь,
[03:40:44.120 --> 03:40:49.160]  значит, вот у нас возникает такая последовательность мержей, давайте я их так и назову. Допустим,
[03:40:49.160 --> 03:40:58.920]  V1, V2, допустим, V3. Смотрите, что будет естественным образом дальше делать эта последовательность
[03:40:58.920 --> 03:41:03.400]  мержей? Ну, если мы будем именно всегда подвешивать, так сказать, правое дерево к левому,
[03:41:03.760 --> 03:41:12.000]  ну типа кого корнем делать, то, смотрите, вот давайте тогда это будет V1, V2, V3, V4, а это будет,
[03:41:12.000 --> 03:41:25.000]  ну давайте я вот, как мы это сделаем? Вот. Ну ладно, значит, смотрите, то есть происходить будет
[03:41:25.000 --> 03:41:31.320]  теперь следующее, значит, глобально. То есть мы как бы, вот этот первый мерж мы сделаем фактически
[03:41:31.320 --> 03:41:43.440]  за сплей от V1, правда? Ну плюс 1. На самом деле мы его, ну смотрите, как мы это сделаем? Мы
[03:41:43.440 --> 03:41:55.680]  сделаем здесь сплей от V1, ну по факту, да? Значит, плюс от пил, ну от пил подвес, ну и плюс, соответственно,
[03:41:55.680 --> 03:42:02.440]  наоборот, запил вот этого, да? Но заметим, что тут непросто, то есть получается это очень удобно,
[03:42:02.440 --> 03:42:08.000]  да? Если у вас ваша вершина корень сплей дерева, то там висящие на ней ребра, вы можете заменять
[03:42:08.000 --> 03:42:15.080]  красные на синие, синие на красные, ничего страшного не происходит. Ну как бы, вот здесь вы отпиливаете
[03:42:15.080 --> 03:42:19.920]  синие на красные, как вы только что убедились, потенциал вообще не меняется, прям буквально не
[03:42:19.920 --> 03:42:26.720]  меняется от самого по себе замены вот этого ребра красного на красного на синие, да? Если вы один
[03:42:26.720 --> 03:42:32.680]  корень в сплей дереве, ну мы только что, а вот, а если потом мы после этого берем вот это дерево,
[03:42:32.680 --> 03:42:38.880]  у которого мы еще и заранее знаем корень, ничего дополнительно не делая, да? А мы можем там, ну скажем
[03:42:38.880 --> 03:42:44.280]  например, от вершины U еще в конце вызвать сплей, ну так, контрольный сплей такой, хотя скорее всего нам
[03:42:44.280 --> 03:42:49.480]  это даже не понадобится, особенно если, ну то есть нам может это понадобится, но если мы изначально
[03:42:49.480 --> 03:42:55.320]  от вершины U что-то отпиливали, то U уже корень. Ну вот, так что можем там контрольный сплей, ну вот,
[03:42:55.320 --> 03:43:00.120]  но если нет, то значит просто сплей вызовем. А, ну нам полюбайся какой-то придется делать, чушь.
[03:43:00.120 --> 03:43:10.880]  А суть та же. Просто это тоже самое, только наоборот, мы как бы убиваем это ребро и завешиваем это,
[03:43:10.880 --> 03:43:14.680]  потому что пример же двух деревьев, вы просто к этому корню вот это дерево подвесите и все.
[03:43:14.680 --> 03:43:26.080]  Поэтому это просто, вы сделали прям буквально тоже самое, только наоборот. Да. Вот, ну получается
[03:43:26.080 --> 03:43:30.120]  за какое, ну так, то есть получается вы сделали за один сплей, то есть это вот, то есть вот это,
[03:43:30.120 --> 03:43:42.960]  вот это получается там от единицы там без изменения потенциала, правда? Вот. А сам по себе этот сплей,
[03:43:42.960 --> 03:43:54.160]  он работает за сколько? Он у нас, напоминаю, работает за, учетно за O от W1 поделить на,
[03:43:54.160 --> 03:44:06.640]  точнее на логарифм двоичный W1 поделить на W1, W1 большое. Внимание, вопрос для внимательных
[03:44:06.640 --> 03:44:22.720]  слушей. А что такое W1 большое? Сумма весов вот этого сплейдерева, да? Или что то же самое,
[03:44:22.720 --> 03:44:35.520]  это просто размер вот этого реального поддерева в линкате, по факту. Логично, да? Подождите,
[03:44:35.520 --> 03:44:42.960]  какого поддерева в линкате, которая направо идет? Нет, поддерева висящего вот на этом пути,
[03:44:42.960 --> 03:44:48.880]  прям вообще. То есть вот есть путь, на нем висят какие-то синие, там синие безобразие. Тут,
[03:44:49.040 --> 03:45:00.160]  вот тут висит, тут висит, даже тут висит, кстати, тоже вот. Ну вот. Нет, W1 это не корень,
[03:45:00.160 --> 03:45:06.400]  это вообще число. Ну корень, правда, корень меняется, потому что по результатам сплея корень
[03:45:06.400 --> 03:45:21.280]  это как бы W1. Нет, W1 просто размер этого всего поддерева. Да, оно просто утверждение,
[03:45:21.280 --> 03:45:31.520]  да, оно совпадет с потенциалом, то есть с там S-кой от W1 после сплея от нее, да. Или что-то,
[03:45:31.600 --> 03:45:36.480]  или оно совпадет с потенциалом, то есть там с S-кой корня этого сплея
[03:45:36.480 --> 03:45:41.840]  дерева непосредственно перед сплеем. В общем, да, в общем, оказывается.
[03:45:41.840 --> 03:45:48.080]  Можно быстро сначала, вот как я понимаю, то есть в чем мы делаем? Нам нужно сделать мёртвый сплит,
[03:45:48.080 --> 03:45:54.080]  но сначала вот это W1, делаем сплит. Так, нет, сначала мы берем U и отпиливаем ребенка.
[03:45:54.080 --> 03:46:00.000]  Да, да, но это шаг мы уже рассмотрели. Да. Вот сейчас мы делаем сплайс. Делаем, да, делаем вот этот
[03:46:00.320 --> 03:46:04.400]  сплайс. Мы делаем сплай от W1. Доделаем, ну как бы делаем сплай от
[03:46:04.400 --> 03:46:09.600]  W1, отпиливаем правое поддерево, подвешиваем новое правое поддерево. То есть само по себе
[03:46:09.600 --> 03:46:13.080]  это переподвешение деревьев, как мы уже выяснили раньше, потенциал не меняет.
[03:46:13.080 --> 03:46:18.960]  А почему а? Смотрите предыдущие рассуждения на тему того, почему, когда мы отпиливаем,
[03:46:18.960 --> 03:46:24.880]  вот U, значит вотS-кой не меняется, то есть тут kinda тут отпиливают все Appreciate the way,
[03:46:24.880 --> 03:46:28.640]  буквально тоже самое, когда здесь подвешиваем происходит тоже буквально то же самое,
[03:46:28.640 --> 03:46:37.080]  но наоборот вот получается то есть мы потратили суммарно на это время нет вот здесь очень важно
[03:46:37.080 --> 03:46:41.040]  подчеркнуть так как логарифом вот этот может быть меньше единицы поэтому важно писать что мы
[03:46:41.040 --> 03:47:00.400]  это сделали плюс за время плюс значит плюс один что ж там сейчас где учитывать нет погодите нет
[03:47:00.400 --> 03:47:07.200]  но сейчас там важно что нету смотрите мы нет мы говорим так мы как будто смотрим на учетное
[03:47:07.200 --> 03:47:11.760]  время работы относительно этого потенциала получаем что учетное время конкретно этого мержа
[03:47:11.760 --> 03:47:17.120]  было вот таким поэтому давайте уж максимально аккуратно потому что вот именно отсутствие
[03:47:17.120 --> 03:47:21.200]  максимальной аккуратности приводило к тому что там там перья там много поколений ваших
[03:47:21.200 --> 03:47:29.560]  великих предшественников собственно умеют только залог квадрат вот теперь дальше переходим и так
[03:47:29.560 --> 03:47:37.760]  значит вы один теперь корень да то есть вы один теперь король и мы это все а ну теперь у нас
[03:47:37.760 --> 03:47:49.160]  давайте вот теперь у нас вот такая ситуация и мы хотим это все подвесить к v2 да аналогичным
[03:47:49.160 --> 03:47:53.920]  рассуждениям и можем показать что теперь вот это вот да то есть теперь мы говорим что пусть
[03:47:53.920 --> 03:48:01.760]  вот это размер вот этого всего это w2 большое и тогда получаю что это мы теперь делаем за о от
[03:48:01.760 --> 03:48:13.920]  логарифма двоичного w2 поделить на w2 с вашей оговоркой что в 2 на тот момент когда мы реально
[03:48:13.920 --> 03:48:21.920]  от нее с плей вызывали понимаете да вот да но мистика да но миллион вот да да да да да да да
[03:48:21.920 --> 03:48:33.920]  плюс что еще ну плюс короче и тогда ли делаем так как раз где кара в но непонятно не знаю уж не
[03:48:33.920 --> 03:48:41.520]  знаю чему если честно там чему угодно на самом деле оно может быть равно не не не реально оно
[03:48:41.520 --> 03:48:48.440]  может быть равно чему угодно учетно да то есть получается значит если мы сделали эту операцию
[03:48:48.440 --> 03:49:00.040]  карас вот то теперь значит когда мы это суммируем то получается это не превосходит о от к ну вот я
[03:49:00.040 --> 03:49:06.160]  единички просуммировал да плюс о от я теперь эти логарифмы запишу немножко в другом виде
[03:49:06.160 --> 03:49:18.840]  то есть это логарифм двоичный w1 минус логарифм двоичный вот это в в 1 плюс о от нет ладно
[03:49:18.840 --> 03:49:31.120]  дальше чтобы лишние ушки не писать давайте уберу плюс значит логарифм двоичный w2 минус
[03:49:31.120 --> 03:49:44.000]  логарифм двоичный w2 это шишмест все время скобки хочу писать плюс логарифм двоичный w3
[03:49:44.000 --> 03:49:51.280]  минус логарифм так в в в 3 плюс-то сколько раз будете писать карас и буду писать так
[03:49:51.280 --> 03:50:00.120]  в логарифм двоичный v4 да шучу шучу естественно ну в общем короче и так далее до к
[03:50:00.120 --> 03:50:22.560]  ну вот ладно тут я даже не прав тут вообще равенство а теперь заметим маленькую приятность да то
[03:50:23.080 --> 03:50:35.320]  конечно тут вот маленькие оговорки что эти дабл не понятно на какой момент вот но важно
[03:50:35.320 --> 03:50:42.560]  следующее заметим что когда мы переходим от 1 к 2 то замечаем что вес вот этой вершины он
[03:50:42.560 --> 03:50:52.720]  больше чем вот это вот w1 но по простой причине что вот это вот это лишь часть того что учитывается
[03:50:52.720 --> 03:51:00.760]  в ее весе потому что он даже заведомо больше то есть поэтому поэтому тут получается как бы
[03:51:00.760 --> 03:51:07.320]  шлеп шлеп с точки но вот давайте заменим просто поэтому на самом деле получается так смотрите
[03:51:07.400 --> 03:51:21.320]  и тогда нужно править я с точки зрения меньше либо равно то есть получается то менше либо равно
[03:51:21.320 --> 03:51:26.500]  потому что получается значит тут с точки зрения меньше либо равно там вот шлеп шлеп тут шлеп
[03:51:26.500 --> 03:51:30.620]  шлеп но это меньше либо равно именно да я вот так на germ cloth меньше либо равно да вот lại
[03:51:30.620 --> 03:51:52.620]  равно, да? Вот. Вы сократили v2 с v1? Ну да. Почему? Нет, вы должны сокращать v1 с v2. Да, я должен сократить w1 с вот этим вот, потому что вот это вот больше либо равно, чем вот это.
[03:51:52.620 --> 03:52:02.620]  Вот это больше либо равно, чем вот это, поэтому это минус это меньше либо равно нуля.
[03:52:02.620 --> 03:52:30.620]  Вот. А так получается, смотрите, теперь o от k плюс o от, соответственно, логарифм двоичный теперь я уже так напишу, w вот этого k поделить на
[03:52:30.620 --> 03:52:52.620]  w v1. Так. Тогда, но здесь правда получается асимптотика o от, то есть получается o от k плюс логан. Вот. То есть на самом деле, по-хорошему, это еще не победа.
[03:52:52.620 --> 03:53:08.620]  Это не совсем победа. То есть чтобы, то есть на самом деле вот это k еще придется убивать, потому что это единички. Понимаете, да? Нет, смотрите, мы посчитали учетную стоимость относительно этого потенциала и получили вот это.
[03:53:08.620 --> 03:53:34.620]  Напоминаю, старый потенциал мы отменили. Нет, да, но оплаченный относительно другого потенциала. Поэтому, нет, это да, но просто остатки. Сейчас вот давайте поговорим просто, как теперь, то есть да, понятно, что вот да, финал, но давайте сейчас вот там поймем, как этого финала добиться максимально хорошо.
[03:53:34.620 --> 03:54:04.620]  То есть дальше рассуждение такое, относительно этого потенциала учетная стоимость о от k плюс логарифма n, да? То есть это означает, то есть внимание, то есть это означает, что если вы про, но заметим, что, ну вот, то есть значит, это означает, что если вы выполните кооперации, то суммарно эти операции в честном исчислении будут выполнены за не более
[03:54:04.620 --> 03:54:28.620]  чем q лог n плюс сумма по всем этим операциям каита. Вот эти, где каита, это то, что вот тут возникает, ну вообще вот, короче, возникает. Вот. То есть, ну вот.
[03:54:28.620 --> 03:54:42.620]  Что ж там? Ну вот. А вот теперь, да, мы вспоминаем, что так, как каита, это по факту там оценивается сверху, как константа на количество сплайсов по факту, да?
[03:54:42.620 --> 03:55:01.620]  Это даже не амортизировано, а просто. Что такое каита? По сути, вот сплайсы. Ладно, плюс еще, плюс может быть там плюс-минус единица. То тогда получается, ну да, q лог n, да, тут еще надо учесть, что мы, помимо, собственно, самих эксползов еще что-то делали, да, помните?
[03:55:01.620 --> 03:55:11.620]  То есть там не совсем. То есть, если мы делали q операции, там, конечно, не совсем q, а какая-то другая константа, потому что в каждой из этих операций эксползов могло быть больше, чем один.
[03:55:11.620 --> 03:55:22.620]  Помните, да? Но, как мы помним, там, более того, там всякие келинки и каты тоже могли менять потенциал, но тоже, там, каждое, каждое изменение не более чем на там логарифм или вот логарифм.
[03:55:22.620 --> 03:55:31.620]  Поэтому тут получается, не более q' лог n, плюс вот то, что мы вот эти кашки из эксползов, да, то есть и бежит по всем эксползам.
[03:55:31.620 --> 03:55:45.620]  Ну вот теперь мы достаем из кармана вот факт, который мы доказывали первые три часа, а доказывали мы по сути то, что, то есть видите, что победа в том, что мы как бы, как бы, что у нас в осимптотике,
[03:55:45.620 --> 03:55:55.620]  то есть даже теперь, даже во времени работы теперь у нас каждый сплайс учитывается не за логарифм, а за единицу. То есть вопрос, сколько сплайсов мы делали?
[03:55:55.620 --> 03:56:08.620]  А мы уже доказали, что мы этих сплайсов суммарно делали o от q' лог n. То есть вывод, эти q операции сделаются за o от q' лог n.
[03:56:08.620 --> 03:56:20.620]  Ну да, q это не константа, поэтому я здесь подпишу. А это и означает, что, значит, амортизировано, значит, учетная стоимость получается каждой этой штуке логарифм.
[03:56:21.620 --> 03:56:22.620]  Все.
[03:56:23.620 --> 03:56:29.620]  А вообще в какой момент мы вот этот новый потенциал зеленый мы использовали, чтобы типа оплатить действие?
[03:56:31.620 --> 03:56:39.620]  Мы его использовали, чтобы заиметь миральство v, v1 меньше или равно, чем v2.
[03:56:39.620 --> 03:56:49.620]  Да. То есть мы для чего ввели такой потенциал? Мы его ввели для того, чтобы вот конкретно в этом месте, точнее так, потенциал мы ввели с самого начала, потому что он из плея, да?
[03:56:50.620 --> 03:56:59.620]  Но самое главное, почему мы ввели именно такие веса? Именно такие веса надо сделать, чтобы оказалось, что вот это вот действительно уничтожает, вот это слога ему уничтожает вот это.
[03:57:00.620 --> 03:57:03.620]  Вот это вот это вот это, чтобы типа телескопическая сумма слопнулась.
[03:57:03.620 --> 03:57:13.620]  То есть как бы интуитивно, вот например, если вы там вот, например, если вы там, скажем, попробуете там погулять там или по ютьюбить там, допустим, лекцию про сплей дерево, возможно вы найдете лекцию Андрея Станкевича.
[03:57:15.620 --> 03:57:16.620]  Вот.
[03:57:17.620 --> 03:57:22.620]  И там, но там вот мистера такая, то есть он там все четко докажет залог квадрат, но в конце останется мало времени.
[03:57:22.620 --> 03:57:40.620]  Поэтому на тему лога он скажет так, что, значит, если у вас есть логарифом, то есть у вас, значит, есть сплей дерево, то здесь просто окажется, что, значит, тут вызываются какие-то сплеи, и они как-то вот суммарным образом вот красиво работают, как один типо большой сплей.
[03:57:42.620 --> 03:57:43.620]  Вот, ну примерно.
[03:57:44.620 --> 03:57:45.620]  Да, и это фигня неверно.
[03:57:46.620 --> 03:57:47.620]  Нет, ну почему неверно?
[03:57:48.620 --> 03:57:51.620]  Потому что у нас не получается телескоп, потому что ВИТ в каждый раз может быть в самом низу.
[03:57:52.620 --> 03:57:57.620]  Ну да, ну там, ну там не совсем, понимаете, там можно это вопределить и так, вы же могли это вопределить и так.
[03:57:58.620 --> 03:58:10.620]  Вы как бы там допустим что-то поподвешивали, а потом делали там для вершины, ну один большой сплей, но при этом там не чистый сплей, а как бы вершина в какой-то момент останавливается, а как бы дальнейший сплей мы делаем не от нее, а типа дальше.
[03:58:12.620 --> 03:58:19.620]  И это как бы тоже, ну вот, ну там вот видимо психологически можно и так себе воспринимать, можно даже возможно там в такую интерпретацию доказать, что он даже и честно работает.
[03:58:19.620 --> 03:58:31.620]  Более того, такую интерпретацию вам подведет, если вы будете, если вы там, например, захотите что-нибудь почитать и начнете гуглить на английском языке, то скорее всего вы найдете конспект МИТ на эту тему.
[03:58:32.620 --> 03:58:41.620]  Там просто будет конспект, но там та же проблема, то есть там залог квадрат значит все честно докажет, а потом в конце вам там помашут руками и скажут, что тут все слопывается и хорошо.
[03:58:43.620 --> 03:58:44.620]  Вот такая проблема будет.
[03:58:44.620 --> 03:58:53.620]  Нет, это не совсем, нет, это не совсем правда, поэтому так, поэтому если хотите именно четкую литературу, я могу сказать только одну железбетонную литературу.
[03:58:53.620 --> 03:58:56.620]  Литература называется оригинальная статья Слайтера Тарьяна.
[03:59:01.620 --> 03:59:04.620]  Это не литература, это видеозапись лекции.
[03:59:05.620 --> 03:59:08.620]  Это не литература, это видеозапись лекции.
[03:59:11.620 --> 03:59:18.620]  А ну, а ну, если его напишете, то да, а ну или там, ну или там ваши великие предшественники еще могли написать.
[03:59:20.620 --> 03:59:22.620]  Ничего не делали, да, ну окей.
[03:59:24.620 --> 03:59:25.620]  Ну хорошо.
[03:59:26.620 --> 03:59:33.620]  Ай, хотя хорошо, нет, хотя действительно, если вы так сейчас хорошо конспекты напишете, в следующем году можно думать, а надо ли вообще читать лекции.
[03:59:34.620 --> 03:59:36.620]  Нет, просто нет, просто если серьезно.
[03:59:38.620 --> 03:59:49.620]  Нет, просто нет, если серьезно, там нет, почему, нет, просто последний вот сейчас скажу, хотя ну вот, там просто, я помню когда-то вот еще старый заведующий кафедр еще, вот еще Михаил Абрамович Ройдберг, который меня собственно на работу брал.
[03:59:50.620 --> 03:59:53.620]  Ну там давным-давно, он там на самом деле уже там много лет назад умел, к сожалению.
[03:59:54.620 --> 04:00:07.620]  Ну вот, но он говорил так, что в некоторых американских вузах на самом деле практикуется такой подход к учебе, что профессор считает, зачем мне тратить силы на то, чтобы вот рассказывать то, что в принципе он уже не просто рассказано, но и записано.
[04:00:08.620 --> 04:00:16.620]  Ну в вашем случае это называется, вот зачем мне еще рассказывать то, что вот вы в принципе с тем же успехом могли там послушать, скажем, запись прошлого года.
[04:00:16.620 --> 04:00:20.620]  Ладно, конкретно здесь не рекомендую, конечно, там она была менее четкая, но это другой вопрос.
[04:00:21.620 --> 04:00:22.620]  Ну я тогда просто первый раз это рассказывал.
[04:00:23.620 --> 04:00:28.620]  Ну и потом там, знаете, каждый раз когда слушаешь, там как бы были другие люди, там может быть другой внутренний контекст и так далее, но не важно.
[04:00:29.620 --> 04:00:33.620]  Но в общем суть такая, допустим, уже давно это все известно, то есть вы можете сами почитать.
[04:00:34.620 --> 04:00:41.620]  Поэтому логика, поэтому там пары могут проводиться следующим образом, но на самом деле, если вдуматься, более сложно для преподавателя.
[04:00:41.620 --> 04:00:46.620]  Значит вам дается домашнее задание, к лекции прочитать вот это вот.
[04:00:48.620 --> 04:00:55.620]  И на лекцию вы приходите на занятия для того, чтобы задать вопросы и разобраться в том, что непонятно.
[04:00:56.620 --> 04:01:02.620]  Или убедиться, или нет, это конечно рассчитано в том числе и на вашу сознательность на самом деле.
[04:01:03.620 --> 04:01:07.620]  Хотя это в принципе, знаете, на самом деле это хороший подход, вот кто-то так вот рекомендует.
[04:01:08.620 --> 04:01:11.620]  Знаете, там некоторые студенты пишут, вот как мы хорошо учились.
[04:01:12.620 --> 04:01:14.620]  Вот какие-то студенты так и рассказывают, что мы делали просто.
[04:01:15.620 --> 04:01:20.620]  Значит мы после каждой лекции садились там в том числе по учебникам, по конспектам и думали там все ли я понял.
[04:01:21.620 --> 04:01:22.620]  Если я что-то не понял, то разбираюсь.
[04:01:23.620 --> 04:01:25.620]  Либо сам разбираюсь, либо с помощью товарища.
[04:01:26.620 --> 04:01:32.620]  Значит у нас была компашка и цель этой компашки, мы работали так, что наша цель была, чтобы всем было понятно.
[04:01:33.620 --> 04:01:37.620]  Если кому-то непонятно, значит этот кто-то активно работает, задает вопросы, мы ему объясняем.
[04:01:38.620 --> 04:01:39.620]  Нам это оказывается двояко полезно.
[04:01:40.620 --> 04:01:44.620]  Потому что в процессе вопросов может выясниться, что мы на самом деле понимаем сильно меньше, чем мы думаем.
[04:01:45.620 --> 04:01:46.620]  Логично, да?
[04:01:47.620 --> 04:01:48.620]  Но к чему это проводит?
[04:01:49.620 --> 04:01:53.620]  Либо мы значит суммарно разбираемся и все все понимаем, либо если мы понимаем, что мы всей компании думали-думали и ничего не поняли,
[04:01:54.620 --> 04:01:58.620]  то мы тогда просто собираемся к компании и на следующую лекцию приходим уже с вопросами.
[04:01:59.620 --> 04:02:03.620]  Нет, это на самом деле класс.
[04:02:04.620 --> 04:02:05.620]  То есть у профессора появляется обратная связь.
[04:02:06.620 --> 04:02:11.620]  Вы хорошо скажете, что вы в этом случае превращаете не в объект образования, а в субъект.
[04:02:15.620 --> 04:02:21.620]  То есть как-то не над вами что-то делают, а вы как-то пассивно реагируете, а вы его активная составляющая.
[04:02:22.620 --> 04:02:27.620]  То есть вы как-то активно вталкиваете, вы хотите в результате получается очень активное на самом деле полезное обсуждение.
[04:02:28.620 --> 04:02:35.620]  Это приводит вас к тому, что даже мелкий побочный эффект уже то, что к экзамену вам готовиться уже почти не надо.
[04:02:36.620 --> 04:02:42.620]  Это уже классически, когда на экзамен вы действительно ничего не изучаете новое, а только вспоминаете и систематизируете не более.
[04:02:43.620 --> 04:02:46.620]  Но к тому, что вы реально поняли все.
[04:02:47.620 --> 04:02:52.620]  Потому что каждый день вы вбивали себе в голову по одному квоздю.
[04:02:53.620 --> 04:02:59.620]  Причем шли на это добровольно и причем старались прям вбить, называется себе прям, называется гвоздь, так потолще и помощнее.
[04:03:00.620 --> 04:03:06.620]  Так что в результате, то есть как бы эффект от образования оказывался вообще сильно больше, чем если это просто не заморачивать.
[04:03:07.620 --> 04:03:12.620]  Но предмет, как вы уже догадались, естественно этот подход работает не только к алгоритмам, работает вообще по всем предметам.
[04:03:13.620 --> 04:03:19.620]  Так что вот соответственно, так что если что-то реализуется подобное, в том числе путем конспектов для чего-то еще, то на самом деле это было бы классно.
[04:03:19.620 --> 04:03:24.620]  Так, ладно, странно, что нас еще все еще не выгнали, но на сегодня все.
