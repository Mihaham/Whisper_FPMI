[00:00.000 --> 00:10.840]  Мы с вами попробуем повысить планочку, потому что, смотрите, мы говорим о задаче поиска подстроки
[00:10.840 --> 00:17.880]  в строке. Мы с вами уже изучили там уже даже целых два способа, не считая фешей, как это
[00:17.880 --> 00:27.440]  сделать, собственно, за ООП дополнительной парити. Убедились, что и в зете, и в префексе, в общем-то,
[00:27.440 --> 00:37.520]  ООП предоставчит. Но идеал, но, конечно, тут может разходиться больше, но идеальный
[00:37.520 --> 00:43.080]  алгоритм, конечно, потребовал бы тогда, ну, куда уж идеальный, так, конечно, казалось бы,
[00:43.080 --> 00:49.120]  мы ищем подстроку в строке за ООП суммарной длины строк, то есть за ООП года. Можно лучше. Да,
[00:49.120 --> 00:54.800]  но можно лучше. Можно сделать, можно как бы, совсем идеальный, чтобы за ту же самую
[00:54.800 --> 01:02.440]  асимптотику был еще и за ООП дополнительной памяти. Ну, на самом деле, конечно, если мы,
[01:02.440 --> 01:06.720]  конечно, верим в хэши, то забегаем вперед, скажем, что такой способ, конечно же, есть.
[01:06.720 --> 01:13.680]  Ну, вот, действительно, потому что, вообще, ну, потому что пробежаться там, этим вот там,
[01:13.680 --> 01:18.520]  условно, окошков там, или каждый подстроки длины П, собственно, там, оперативно поддерживать
[01:18.520 --> 01:23.800]  его хэш, это, собственно, не такая большая проблема. Но этот метод такой, полувероятностный,
[01:23.800 --> 01:33.160]  полуподхачить шмысла. Вот, поэтому мы сегодня начнем приближаться к этому. Значит, действительно,
[01:33.160 --> 01:40.680]  существует идеальный алгоритм, статья, по которому, значит, была получена в августе 1981
[01:40.680 --> 01:48.840]  года, собственно, таким журналов как Journal of Computer and System Science. Вот, но, как говорится,
[01:48.840 --> 01:57.720]  да, видимо, называется review, но прошло в июле 82-го. Так что, ну, так что, да, нормальная ситуация,
[01:57.720 --> 02:01.920]  что если вы послали статью, то журнал ее посмотрит когда-нибудь там месяцев через 20.
[02:01.920 --> 02:14.320]  И в этой статье, соответственно, описано, как искать подстроку в строке, ну, как минимум,
[02:14.320 --> 02:19.440]  отвечает на уровне, входит ли это подстрока в текст, входит шаблон в текст как по строкам,
[02:19.440 --> 02:27.200]  да или нет, хотя бы. Хотя, по факту, он, в общем-то, и все обхождения тоже, вроде как, найдет. Ну вот,
[02:27.200 --> 02:36.880]  и использовать будем при этом от единицы до полнительной памяти. Ну, честно скажу, нам не
[02:36.880 --> 02:47.120]  удастся же сегодня полностью изучить этот алгоритм. Ну, да, почему? Вот, ну, там, к сожалению,
[02:47.120 --> 02:53.960]  ну, во-первых, алгоритм сейчас не тривиальный будет, а с другой стороны, это еще выясняется,
[02:53.960 --> 03:00.240]  что, к сожалению, в каком-то месте авторы начинают отсылаться, собственно, на тоже
[03:00.240 --> 03:08.620]  какую-то другую свою статью, в которой они тоже что-то делали. Вот, поэтому мы сегодня только
[03:08.620 --> 03:14.520]  сделаем некоторый наскок в этом направлении. Очень надеюсь, что нам в будущем удастся,
[03:14.520 --> 03:20.280]  собственно, и добиться этого. Ну, в любом случае, ну, так или иначе, это интересно, по стоку, по
[03:20.280 --> 03:29.640]  скоку, нам тоже удастся еще в этом месте подумать о каких-то интересных свойствах строчек. И там всякой
[03:29.640 --> 03:41.160]  переводи. Значит, давайте попробуем вести для этого некоторые понятия. Так, какие же, значит,
[03:41.160 --> 03:51.880]  понятия мы введем? Так, ну, во-первых, да, как это, в некотором месте, да, на всякий случай еще скажу,
[03:51.880 --> 03:58.560]  что, тут мы берем слово, как говорится, американским коллером, собственно, одного коллера зовут
[03:58.560 --> 04:25.120]  Галю, второго будут звать Джоэл Сейкерс. Ну, как американским? Ладно, первый представляет
[04:26.120 --> 04:29.760]  с одной стороны Тель-Авивский университет, с другой стороны департамент компьютерсайнса
[04:29.760 --> 04:39.800]  университета Коллаби. Второй представляет отделение компьютерсайнс университета Родчерс, это тоже Нью-Йорк.
[04:39.800 --> 04:48.200]  Правда, видимо, в одном случае, во втором случае это просто Штаты, в другом не только Штаты, но и
[04:48.800 --> 04:59.240]  в диаграфии Соединенных Штатов я, к сожалению, плохо не знаю. Вот, значит, вот попробуем смотреть, что же они нам
[04:59.240 --> 05:08.560]  предлагают. Ну, предлагают они нам примерно следующее. Первое, что мы сделаем, это, внимание, введем
[05:08.560 --> 05:24.520]  мистическую константу K. Значит, ну, тут специально, вот они ее отдельно выделяют как K, да, по факту она будет
[05:24.520 --> 05:30.480]  4, хотя в принципе алгоритм может работать и там для K равно 5, 6 и так далее. Ну, с чем-то подобным мы уже
[05:30.480 --> 05:36.320]  с вами сталкивались, когда искали медиа. То есть там делим на пятерке, но по факту могли, как мы уже
[05:36.320 --> 05:44.840]  выяснили, делите на семерке, на девятке, в общем-то, проблем бы не было. Вот, соответственно. Ну, вот такая
[05:44.840 --> 05:52.440]  мистическая константа. Смысл ее, на самом деле, будет очень интересен. То есть, когда у нас есть какие-то
[05:52.440 --> 05:59.560]  строчки, нас очень будет в каких-то строчках интересовать ее префиксы, у которых есть вот
[05:59.560 --> 06:12.880]  K одинаковых блоков в начале. Ну, вначале так. Тут, конечно, длины этих блоков могут быть разные, но вот разные
[06:12.880 --> 06:21.960]  длины нас как-то интересовать и будут. Вот с этой точки зрения она будет очень интересна. Значит, смотрите.
[06:21.960 --> 06:32.080]  Ну, во-первых, сразу скажем, что мы будем жить с вами в один индексации. Вот, вот там есть какие-то подстроки.
[06:32.080 --> 06:46.640]  Значит, еще сразу введем определение. Значит, строка Z, вот они тут очень оригинально пишут, смотрите.
[06:46.640 --> 07:07.080]  Строка Z будет называться периодом строки, период строки S, если определение такое S, префикс строки Z в бесконечной степени.
[07:07.080 --> 07:18.000]  Ну, что, собственно, равно. Просто Z, Z, Z, Z, Z. Вот такое оригинальное определение.
[07:18.000 --> 07:32.960]  Вот. Ну или вот эквивалентно, но здесь они сразу же приводят, что это эквивалентно, то есть вот это вот
[07:33.920 --> 07:45.640]  утверждение, на самом деле, оно эквивалентно тому, что строка Z период, точнее, не период, а префикс.
[07:45.640 --> 08:09.240]  Соответственно, S, префикс строки ZS. Ну, думаю, эквивалентность этого очевидна.
[08:09.240 --> 08:20.000]  Ну, понятно, что это эквивалентно тому, что, конечно, тут можно правильную Z функцию, конечно, сказать.
[08:20.000 --> 08:30.160]  Ну, можно еще просто сказать, что там что-нибудь еще в духе нам сегодня пригодится. Допустим, Z от, так сказать,
[08:30.160 --> 08:37.680]  то есть это, да, не путать Z функцию с этой строкой Z, да, проявить, наверное, другую звуку, ввести на всякий случай, но уже ладно.
[08:37.680 --> 08:52.000]  Ну вот, что Z функция с индексом S от Z плюс 1, соответственно, должна быть равна модуль S минус модуль Z и, ну и, конечно, Z префикс S.
[08:52.000 --> 09:10.240]  Хотя, заметим, что формально, по такому определению, это неправда. Почему неправда?
[09:10.240 --> 09:21.160]  Да, на самом деле, заметим, что по такому определению вполне может быть, что Z даже длиннее S.
[09:21.160 --> 09:37.000]  И это нас исправит. Вот. Так что тут придется тогда написать или, не знаю, S префикс Z, ну вот такие всякие оговорки, но это уже мелкие.
[09:37.000 --> 09:44.520]  Ладно, общую судьбу мы поняли. По факту, наверное, периоды длиннее S мы, в общем-то, рассматривать особо и не будем.
[09:44.520 --> 10:02.200]  Вот. Так что, да, значит, теперь еще одно определение. Значит, еще одно определение, которое нам потребуется.
[10:02.200 --> 10:17.880]  Что называется? Пусть P, значит, у нас это целое число от 1 до модуль Z, модуль S, пардон, тогда мы введем такое понятие.
[10:17.880 --> 10:43.800]  Рич с индексом S от P. Рич с индексом S от P это равно, ну, в формале так, это равно максимальному такому Q.
[10:43.800 --> 11:10.680]  Значит, Q должно быть меньше или в равно модуль S. Вот. Где, соответственно, вот этот вот, где вот префикс P, вот S, это период S.
[11:14.680 --> 11:15.180]  Вот.
[11:24.360 --> 11:29.880]  Вот теперь внимание вопрос. А чему это, как вы думаете, чему это равно в терминах Z?
[11:43.800 --> 12:10.840]  Видел мы даже назначение Z функ P plus 1 и прибавить. Да, совершенно верно, это равно. Ну, раз уж мы живем в 1 индексации, то это P plus Z с индексом S от P plus 1, да, совершенно.
[12:10.840 --> 12:21.880]  Знаете, вот еще одна интерпретация. Это вот что такое Z функция. Это называется, мы хотим рассмотреть префикс, который периодичен с периодом P.
[12:21.880 --> 12:33.080]  То есть Z функция нам указывает, где эта периодичность будет заканчиваться. Еще одно такое интересное определение. Вот такое понятие нам потребуется.
[12:34.040 --> 12:44.120]  Так, значит, далее, значит, у нас тут, да, я вот попытаюсь тут написать все необходимые понятия вот на этой доске, а на другой доске будем пытаться что-то умное делать.
[12:44.120 --> 12:51.640]  Потому что тут, да, тут есть какие-то нетривиальные достаточно понятия, нам придется думать. Значит, внимание. Еще одно определение.
[12:51.640 --> 13:19.800]  Строка S называется базовая, если не существует такой строки Z.
[13:22.440 --> 13:30.200]  Ну ладно, лучше T давайте напишем. А то они любят вот Z и это, но они Z функции не функционируют.
[13:30.200 --> 13:40.200]  И не существует T и такого числа И больше единицы, такого, что S равно T в степени B.
[13:40.200 --> 13:58.760]  Ну, в переводе говоря, S нельзя представить как кондонацию двух или более одинаковых строчек. Понятно, да?
[13:58.760 --> 14:13.320]  Ну, то есть, вот, например, типичный пример, который тут любят авторы, например, вот AB, AB, AB, например, она, очевидно, не базовая, потому что она получается AB в кубе, видите, да?
[14:13.320 --> 14:19.320]  Но при этом вот AB, AB, AB, A, она вполне себе базовая.
[14:19.880 --> 14:25.880]  Да, вот есть такое вот базовое строка.
[14:31.880 --> 14:41.880]  Так, и вот тут сейчас будет такое совсем мистическое определение, в котором, наконец, вот эта константа H начинает играть.
[14:42.440 --> 14:50.440]  Она на стопу вообще так начинает играть, как будто хоть ее отдельным цветом выносить.
[14:50.440 --> 14:54.440]  Значит, определение.
[14:54.440 --> 15:10.440]  Будем говорить, значит, строка T это префиксный период, да, внимание, новое словосочетание, префиксный период.
[15:11.000 --> 15:17.000]  S, новое слово.
[15:19.000 --> 15:33.000]  Если, значит, выполнены, тут я давайте уже аккуратненько два пункта напишу. Во-первых, T базовая, это вот, во-первых, базовая.
[15:33.560 --> 15:45.560]  И, внимание, T в степени K, префикс S.
[15:46.120 --> 16:08.120]  Обратите, вот сразу обращаю внимание, ну, собственно, то есть я авторы обращаю, что, обратите внимание, префиксный период строки S, при, там, периодом, прям, всей строки S быть вообще не обязан.
[16:08.680 --> 16:16.680]  То есть вот такая вот интересность.
[16:26.680 --> 16:30.680]  Ладно, будем жить в той терминологии, в которой будем жить.
[16:31.240 --> 16:41.240]  Вот, ну, например, вот тут можно еще приводить. Вот давайте, а, ну, в принципе, заметим, что это можно, то есть, на самом деле, есть эквивалентность.
[16:47.240 --> 16:51.240]  То есть, на самом деле, эквивалентное определение такое.
[16:51.240 --> 16:55.240]  То есть, эквивалентное определение такое.
[16:55.800 --> 17:09.800]  То есть, на самом деле, вот эта система эквивалентна такой, что, значит, T у нас префиксный период, если T базовая, значит, T префикс строки S.
[17:10.360 --> 17:28.360]  И, соответственно, можно, вот, терминология, это reach от модуль T, на самом деле, больше либо равен, соответственно, K модуль T.
[17:28.920 --> 17:30.920]  Чтобы, может быть, немножко поиграться.
[17:30.920 --> 17:36.920]  На самом деле, ну, я мог бы то же самое через Z функцию написать, но лучше, наверное, через reach.
[17:36.920 --> 17:38.920]  Понятно, да?
[17:40.920 --> 17:42.920]  Понятен?
[17:50.920 --> 17:52.920]  То перича.
[17:52.920 --> 17:56.920]  Ну, вот, ну, значит, что у нас тут есть?
[17:58.920 --> 18:02.920]  Значит, ну, в принципе, можно, на самом деле, еще тут тоже поиграться.
[18:02.920 --> 18:04.920]  Да, вот с этими базовыми, поняли?
[18:04.920 --> 18:06.920]  Да.
[18:06.920 --> 18:08.920]  Кстати, какие периоды вообще есть у этих строчек?
[18:08.920 --> 18:12.920]  Давайте уж, если последовать на по всем определению прибегаться.
[18:12.920 --> 18:16.920]  Какие периоды есть у строчки AB, AB, AB?
[18:20.920 --> 18:22.920]  AB?
[18:22.920 --> 18:24.920]  Так, AB.
[18:24.920 --> 18:26.920]  AB, AB.
[18:27.480 --> 18:29.480]  AB, AB, AB.
[18:29.480 --> 18:31.480]  Ну, да.
[18:31.480 --> 18:33.480]  Ну, на самом деле, это не все.
[18:33.480 --> 18:37.480]  Как вы уже выяснили, любая строчка с префиксом AB, AB, AB является периодом.
[18:37.480 --> 18:39.480]  Да.
[18:39.480 --> 18:43.480]  Вообще, можно убедиться, что вот у этих двух строчек, как это ни странно, вообще абсолютно одинаковые периоды.
[18:43.480 --> 18:49.480]  Ну, обратите внимание, потому что AB, AB, AB, AB, AB это тоже период.
[18:49.480 --> 18:51.480]  И этой строчке тоже.
[18:51.480 --> 18:55.480]  Ну, сразу у первой строчки есть период AB, AB, AB, AB.
[18:56.040 --> 18:58.040]  AB, AB, AB.
[18:58.040 --> 19:00.040]  Ладно, все, набрал, набрал.
[19:00.040 --> 19:02.040]  Неправ одинаковые нельзя сказать, да.
[19:02.040 --> 19:08.040]  Но можно отметить, что у этой строчки период AB, AB, AB, AB вполне есть.
[19:08.040 --> 19:10.040]  Хотя, да, AB, AB, AB.
[19:10.040 --> 19:12.040]  Вот.
[19:12.040 --> 19:14.040]  Ну, и тут можно действительно поразвлекаться еще.
[19:14.040 --> 19:24.040]  Потому что, вот давайте рассмотрим строчку, допустим, S равную, смотрите, AB, AB, AB, AB.
[19:24.600 --> 19:26.600]  А в степени K.
[19:26.600 --> 19:28.600]  Вот то самое K.
[19:32.600 --> 19:34.600]  Давайте попробуем поиграть в эту штуку.
[19:34.600 --> 19:40.600]  Чему равно reach относительно S от единицы?
[19:44.600 --> 19:46.600]  Единицы.
[19:48.600 --> 19:52.600]  А чему равно reach S от двойки?
[19:53.160 --> 19:55.160]  Шести.
[19:55.160 --> 19:57.160]  Шести.
[19:57.160 --> 19:59.160]  Шести.
[19:59.160 --> 20:01.160]  Даже семьи.
[20:01.160 --> 20:03.160]  Семьи совершенно верно.
[20:03.160 --> 20:05.160]  А, там же.
[20:05.160 --> 20:07.160]  Да, да, да, там А.
[20:07.160 --> 20:09.160]  Но дальше тоже А, поэтому, поэтому на этом настанавливаемся.
[20:09.160 --> 20:13.160]  Если я напишу reach, вот, семьи.
[20:15.160 --> 20:17.160]  Семь К.
[20:17.160 --> 20:19.160]  Семь К.
[20:19.720 --> 20:21.720]  Вот.
[20:23.720 --> 20:25.720]  Ну, да.
[20:25.720 --> 20:27.720]  Получается, да, с точности длина этой строчки.
[20:27.720 --> 20:29.720]  Семь.
[20:29.720 --> 20:31.720]  Да.
[20:31.720 --> 20:33.720]  Да.
[20:33.720 --> 20:35.720]  Да.
[20:35.720 --> 20:37.720]  Интересно, почему у меня написано Семь К плюс К четыре?
[20:37.720 --> 20:39.720]  Аж страшно.
[20:39.720 --> 20:41.720]  Аж страшно.
[20:41.720 --> 20:43.720]  Чего?
[20:43.720 --> 20:45.720]  Перепроверю.
[20:49.720 --> 20:51.720]  А.
[20:51.720 --> 20:53.720]  Да, все правильно.
[20:53.720 --> 20:55.720]  Потому что они еще, да.
[20:55.720 --> 20:57.720]  Думаю, что да.
[20:57.720 --> 20:59.720]  Ладно, давайте так.
[20:59.720 --> 21:01.720]  Если делать совсем как Лектора, то они тут еще А, Б, А, Б приписывали,
[21:01.720 --> 21:03.720]  тогда тут действительно плюс четыре.
[21:03.720 --> 21:05.720]  А эти не поменяются.
[21:05.720 --> 21:07.720]  Вот.
[21:07.720 --> 21:09.720]  Ну, это развлекается.
[21:09.720 --> 21:11.720]  Так.
[21:11.720 --> 21:13.720]  Ну, вот.
[21:13.720 --> 21:15.720]  Это были понятия.
[21:15.720 --> 21:17.720]  Но теперь мы с вами
[21:18.280 --> 21:20.280]  пытаемся рассмотреть вот еще что.
[21:20.280 --> 21:22.280]  Так.
[21:22.280 --> 21:24.280]  Потому что дальше нам потребуют нот.
[21:24.280 --> 21:26.280]  То есть, попробуем рассмотреть
[21:26.280 --> 21:28.280]  какую-нибудь красивую теорему.
[21:28.280 --> 21:30.280]  В роли красивой теоремы
[21:30.280 --> 21:32.280]  у нас будет
[21:32.280 --> 21:34.280]  Так, ладно.
[21:34.280 --> 21:36.280]  Пишу какую-нибудь красивую макию
[21:36.280 --> 21:38.280]  для этого использовать.
[21:38.280 --> 21:40.280]  Так.
[21:40.280 --> 21:42.280]  Ну, ладно. Давайте пусть будет
[21:42.280 --> 21:44.280]  синий макия.
[21:44.280 --> 21:46.280]  И
[21:46.840 --> 21:48.840]  есть такая вот важная
[21:48.840 --> 21:50.840]  просто мистическая теорема.
[21:50.840 --> 21:52.840]  Которая, может быть, внутри тоже
[21:52.840 --> 21:54.840]  могла бы нам помнить.
[21:54.840 --> 21:56.840]  И говорит она, называется она
[21:56.840 --> 21:58.840]  смотрите.
[21:58.840 --> 22:00.840]  Лемма
[22:00.840 --> 22:02.840]  о периодичности.
[22:03.400 --> 22:05.400]  Значит, мистическая лемма.
[22:09.400 --> 22:11.400]  Пусть
[22:11.400 --> 22:13.400]  значит, строка
[22:13.400 --> 22:15.400]  С
[22:19.400 --> 22:21.400]  и
[22:21.400 --> 22:23.400]  и
[22:23.400 --> 22:25.400]  и
[22:25.400 --> 22:27.400]  и
[22:27.400 --> 22:29.400]  и
[22:29.400 --> 22:31.400]  и
[22:31.400 --> 22:33.400]  и
[22:33.400 --> 22:35.400]  и
[22:35.400 --> 22:37.400]  имеет
[22:37.400 --> 22:39.400]  периоды.
[22:47.400 --> 22:49.400]  Ну, будем говорить так.
[22:51.400 --> 22:53.400]  Имеет
[22:53.400 --> 22:55.400]  скобочка длин
[22:55.400 --> 22:57.400]  п1
[22:57.400 --> 22:59.400]  и
[22:59.400 --> 23:00.520]  и
[23:00.520 --> 23:02.520]  п2
[23:05.480 --> 23:07.480]  с иами веду именно к числовке.
[23:07.480 --> 23:09.480]  Ну, понятно, что так как у нас
[23:09.480 --> 23:11.480]  формально, конечно, периодом строки
[23:11.480 --> 23:13.480]  является строка, но
[23:13.480 --> 23:15.480]  можно задавать строку длиной,
[23:15.480 --> 23:17.480]  потому что это все равно пресс.
[23:17.480 --> 23:19.480]  А, но
[23:19.480 --> 23:21.480]  если только эти строки не длиннее С,
[23:21.480 --> 23:23.480]  в данном случае это не так.
[23:25.480 --> 23:27.480]  Потому что в данном случае
[23:27.480 --> 23:36.480]  что модуль S должно быть больше либо равно P1 плюс P2.
[23:36.480 --> 24:01.480]  Тогда, утверждаю я, строка S имеет период длины нод P1, P2.
[24:06.480 --> 24:24.480]  Вот такая вот неожиданная интересность. Вот такая вот лемма, которая видимо считается такой важной, известной леммой.
[24:24.480 --> 24:30.480]  В этом есть они тоже ссылаются на какие-то там статьи. На этот раз попробуем без этого обойтись.
[24:30.480 --> 24:38.480]  Ну вот ваши ставки. Откуда же такое счастье, что называется это, мы взяли.
[24:38.480 --> 24:57.480]  Ну, наверное, можно взять какую-нибудь строку длины ног от P1 и P2.
[24:57.480 --> 25:12.480]  То есть жила была строка длины 12. Это 5 периодично и 7 периодично. Мы берем строку длины 35.
[25:12.480 --> 25:27.480]  Ну, получается, если мы докажем, что там будет период нод, то вот эта вот большая строка, это будет S будет под строкой этой большой строки.
[25:27.480 --> 25:40.480]  В чем общая идея? Ну вот мы знаем, что если у нас там P1 и P2, то они, понятно, на P1 и P2 тоже спадают.
[25:40.480 --> 25:46.480]  Хотелось бы нод P1 и P2 представлять как пленнее комбинации?
[25:46.480 --> 25:47.480]  Представляется.
[25:47.480 --> 25:53.480]  Вот, например, что-то он будет равен, не знаю, A P1-B P2, где A и B, допустим, положительные.
[25:53.480 --> 26:02.480]  Ну вот хотелось бы суметь, значит, показать, что мы можем от элемента, как бы до элемента плюс этот нод, пропрыгать по P1 и P2.
[26:02.480 --> 26:05.480]  Ага. Желательно не выдать на это пределы.
[26:05.480 --> 26:11.480]  Да, но кажется, что мы каждый раз хотя бы один шаг можем сделать. Из тех, которые нам остались.
[26:11.480 --> 26:12.480]  Да, из тех, которые нам остались.
[26:12.480 --> 26:15.480]  Но осталось только доказать, что это действительно так.
[26:15.480 --> 26:26.480]  Ну, понятно, потому что мы всегда можем либо, например, прыгнуть влево на P1, либо вправо на P2, хотя бы одно из них.
[26:26.480 --> 26:31.480]  Вот. Если нас не устраивает, значит, нам остались прошивки только одного вида, в одну сторону.
[26:31.480 --> 26:36.480]  Ну, тогда мы точно, как мы до конечной, конечной позиции в строке, значит, мы доплыкаем.
[26:36.480 --> 26:39.480]  Ну, можно, да. Ну да, можно так аккуратно докрутить.
[26:39.480 --> 26:45.480]  То есть, типа, взять логуную, пытаться переставлять ее звенья так, чтобы мы оставались там в нужном диапазоне.
[26:45.480 --> 26:48.480]  Да. Но, мне кажется, можно сильно проще.
[26:50.480 --> 26:56.480]  На самом деле нам достаточно доказать, что S имеет период P2-P1.
[26:59.480 --> 27:01.480]  Ну, если мы это, да, лучше все доказывать, то дальше понятно.
[27:01.480 --> 27:05.480]  Мы дадим фу по предъявлямам алгоритма Евкрида, правда?
[27:05.480 --> 27:12.480]  Но как доказать, что это строка P2-P1? Ну, допустим, давайте я присматриваю P1-P2.
[27:16.480 --> 27:17.480]  Как это доказать?
[27:18.480 --> 27:26.480]  Очень просто. Рассмотрим любые два символа на расстоянии, допустим, друг от друга.
[27:26.480 --> 27:29.480]  Действительно, вот это. Вот пусть будет P2-P1.
[27:29.480 --> 27:38.480]  Ну, тогда, если левый символ, например, находится левее этой границы, то этот символ равен вот этому символу на расстоянии P2.
[27:40.480 --> 27:45.480]  А этот символ, в свою очередь, равен вот этому символу на расстоянии P1.
[27:46.480 --> 27:47.480]  Легко, правда?
[27:49.480 --> 27:54.480]  Ну и, соответственно, второй случай автоматически, если этот символ оказался правее границы,
[27:54.480 --> 27:58.480]  то на самом деле мы...
[28:00.480 --> 28:01.480]  А граница у нас какая?
[28:02.480 --> 28:04.480]  Ну, у нас строка длины P1-P2, да?
[28:05.480 --> 28:08.480]  То есть граница, где вот, собственно, P1 и, собственно, P2.
[28:10.480 --> 28:18.480]  Теперь возникает такая идея. Если у нас это правее граница, так давайте просто сдвинемся влево на P1, а потом сдвинемся вправо на P2.
[28:19.480 --> 28:24.480]  Ну, то есть вот, если такие вот... Если двое оказались вот целиком с этой стороны.
[28:25.480 --> 28:30.480]  Ну, третий случай, конечно, если они оба оказались вот, допустим, целиком с этой стороны.
[28:33.480 --> 28:40.480]  Вот. И тогда... Ну, тогда что? Если у нас уже P1 меньше, чем P2, ну, Господи, давайте тогда можно и вот так.
[28:49.480 --> 28:57.480]  То есть таким образом мы убеждаемся, что, да, у нас есть период P2-P1, ну, хотя бы модуль.
[28:58.480 --> 29:06.480]  Ну, а после этого мы включаем алгоритмы в клид, и говорим, что ноты там, знаете, последовательными вычитаниями ГЦД, да, выколыгиваем.
[29:09.480 --> 29:15.480]  Ну, и да, здесь, конечно, есть вот интересность, потому что на самом деле... Вот давайте внимательно подумаем.
[29:15.480 --> 29:24.480]  Потому что на самом деле считать так, что... То есть авторы клянутся и бажатся, и, в общем-то, в этом смысле можно верить, что левмы в таком виде нам хватит.
[29:26.480 --> 29:34.480]  Но на самом деле, на самом деле, эту оценку можно уточнить.
[29:34.480 --> 29:44.480]  А сам, Гень, я тут еще вот эту штуку. Еще нот дополнительных модуль выключу.
[29:52.480 --> 29:58.480]  А если сейчас... Если у нас как раз получилось, что P1 столько больше, чем S? А, такое невозможно дальше?
[29:58.480 --> 30:02.480]  Нет, ну и... Ну, как сказать?
[30:03.480 --> 30:05.480]  Ну, такое невозможно.
[30:11.480 --> 30:16.480]  Ну вот, теперь давайте поймем, можно вот такую оценку поставить.
[30:16.480 --> 30:18.480]  Почему это так?
[30:21.480 --> 30:34.480]  Действительно, давайте подумаем. Действительно, заметим, что конкретно такое доказательство уже может не прокатить, потому что мы здесь прям действительно красиво пользуемся тем, что у нас именно P1 плюс P2.
[30:34.480 --> 30:48.480]  Ну вот, ну и теперь давайте думать. Если мы хотим доказать что-то более серьезное.
[30:49.480 --> 30:58.480]  То есть, допустим, у нас тут оказалось, допустим, P1, а потом оказалось P2 минус 0.
[31:01.480 --> 31:11.480]  Вот возникает тогда такой естественный вопрос. То есть, наш вот этот вот механизм, да, ну, если хотим доказать, что строка там P2 минус P1 периодично.
[31:11.480 --> 31:29.480]  Но при этом может так оказаться, что, например, что какие-нибудь правильные два скачка вот, например, там где-то вот достаточно близко вот этой границы, вот отсюда, допустим, до сюда, видимо, мы рискуем уже не сделать, правда?
[31:29.480 --> 31:46.480]  А почему мы не можем взять какую-нибудь строку длиннее S, и S будет являться ее под строкой, скажем, к Эфисам?
[31:46.480 --> 31:53.480]  Так, что значит, какое длиннее? Ну, с такими же двумя атриудами, но только длиннее.
[31:53.480 --> 32:02.480]  Потому что, а что если у тебя там какой-нибудь элемент, ну, просто нельзя добавить, потому что два разных периода дают разными элементами?
[32:07.480 --> 32:17.480]  Ну, да, вот такая проблема есть. Вот, внимание, вопрос. Что же в таком случае делать? Как это такой механизм мы не применим?
[32:17.480 --> 32:23.480]  Ну, можно пытаться сказать, что все-таки…
[32:23.480 --> 32:50.480]  Возможно, что P1, ну, как бы, что P2-P1 не будет являться, но в таком случае оно будет.
[32:50.480 --> 32:55.480]  А, нет, невозможно, это бред, да, если нот переедет, то куда-то тут пройдет.
[32:59.480 --> 33:06.480]  Нет, тут действительно, давайте посмотрим. Это у нас оказывается… Ну, тут, впрочем, действительно, смотри-ка, какой интересный плач получается.
[33:06.480 --> 33:17.480]  Что, допустим, если у нас P2-нот, то вот есть вот эта граница, если это длина, то как бы вот, то есть вот эта вот длина может оказаться, допустим, P1-нот.
[33:18.480 --> 33:25.480]  Вот P1-P2, да, то есть получается, эта длина такая, а вот эта длина у нас получается такая.
[33:25.480 --> 33:50.480]  Ну вот, тогда в чем у нас, собственно, проблема? Ну, мы замечаем, что… Ну, теперь смотрим, если у нас есть две точки, то есть у нас, допустим, две точки на состоянии P2-P1, если они обе находятся, допустим, левее вот этой границы,
[33:50.480 --> 34:02.480]  если одна из них находится левее вот этой границы, то, в общем-то, P2 и P1 вполне себе работают, правда?
[34:03.480 --> 34:12.480]  Ну и, соответственно, и наоборот, если… То есть, значит, следовательно, нас интересует только случай, когда обе точки находятся левее вот этой границы.
[34:13.480 --> 34:26.480]  Ну, с другой стороны, если у нас одна из точек находится здесь, то что мы тогда можем сделать? Ну, вот.
[34:27.480 --> 34:36.480]  Ну да, хотя наоборот. То есть теперь мы понимаем, что с другой стороны, да, в фейловом случае левая точка должна находиться как минимум здесь.
[34:36.480 --> 34:46.480]  Но с другой стороны мы замечаем, что если эта левая точка находится… То есть, левая точка находится где-то здесь, то тогда что мы получаем?
[34:47.480 --> 34:51.480]  Тогда мы получаем, что действительно мы можем сдвинуться на P1 и на P2.
[34:52.480 --> 34:53.480]  У нас, правда, только вот между ними.
[34:54.480 --> 34:57.480]  Получается, да. Видим, проблема, что левая точка должна находиться и здесь.
[34:58.480 --> 34:59.480]  Вот.
[34:59.480 --> 35:09.480]  Ну и здесь, впрочем, тоже у нас действительно, ну вот, что здесь может возникнуть.
[35:10.480 --> 35:15.480]  Да, то есть правая точка может оказаться тут практически где угодно.
[35:16.480 --> 35:20.480]  Так. Ну хотя, ладно, не где угодно, да.
[35:21.480 --> 35:25.480]  То есть мы заметим следующее, что, как вы думаете, что больше?
[35:26.480 --> 35:31.480]  Вот, действительно, как вы думаете, может ли так оказаться, что левая точка окажется здесь?
[35:33.480 --> 35:34.480]  Нет, конечно.
[35:35.480 --> 35:38.480]  Ну то есть, конечно, да. Может ли быть так, что P2-P1…
[35:40.480 --> 35:53.480]  Ну вот, допустим, P2-P1 окажется, допустим, строго даже меньше получается, чем нод от P1-P2?
[35:53.480 --> 35:54.480]  Нет.
[35:55.480 --> 35:57.480]  Самое смешное, что это неправда. Такое можно.
[35:58.480 --> 35:59.480]  Но мы знаем, что P2 больше, чем P1.
[36:00.480 --> 36:03.480]  Да, это точно так. Ну, формально говоря, лемма фамилирует из случая, когда P1 и P2 равны.
[36:04.480 --> 36:07.480]  Но тогда лемма, конечно, становится интересной.
[36:08.480 --> 36:14.480]  Да, если у нас P1 меньше, чем P2, то, значит, тогда такого, очевидно, не бывает.
[36:15.480 --> 36:17.480]  Ну максимум меньше и не поровну, правда, ну максимум.
[36:18.480 --> 36:27.480]  Поэтому получается, что для нас плохой случай – это когда одна точка лежит здесь, а вторая автоматически попадает вот сюда.
[36:30.480 --> 36:35.480]  Вот. Но, правда, заметим, что так. К этой точке мы, к сожалению, не привяжемся.
[36:35.480 --> 36:46.480]  Ну, как же не привяжемся? Мы не привяжемся в том плане, что мы к ней не можем применить плюс или минус P2.
[36:47.480 --> 36:53.480]  С другой стороны, правда, с оговоркой, что мы к ней можем применить, конечно, плюс 1.
[36:53.480 --> 37:05.480]  Но с другой стороны, проблема еще в том, что к этой точке мы можем применить только минус P1 и, возможно, плюс P1.
[37:06.480 --> 37:15.480]  Ну, хотя, с другой стороны, если бы мы могли здесь применить плюс P1, то мы бы тогда могли бы спокойненько…
[37:16.480 --> 37:19.480]  Тогда мы могли бы потом учесть P2 дать.
[37:19.480 --> 37:20.480]  Хорошо.
[37:21.480 --> 37:27.480]  Так, ну с другой стороны, видимо, почему-то не можем. Видим, там застреваем.
[37:28.480 --> 37:38.480]  Да, здесь вот это вот расстояние оказывается явно меньше, чем P1, потому что вот это расстояние у нас, напоминаю, равно P2 минус P1.
[37:41.480 --> 37:46.480]  Так, вот, получается, да, на это расстояние у нас почему-то какой-то маратур.
[37:49.480 --> 37:54.480]  Ну, что ж, тогда можете сделать.
[37:54.480 --> 38:21.480]  Ну, можно попрыгнуть туда, куда мы можем. У нас, собственно, по одному варианту есть каждый, кто отчет.
[38:21.480 --> 38:27.480]  Ну, да. Ну, в принципе, да, можно заметить, что из каждой из этих двух точек…
[38:28.480 --> 38:31.480]  Ну, во-первых, да. Ну, во-первых, да, ладно.
[38:32.480 --> 38:35.480]  То есть, действительно, мы можем действительно…
[38:36.480 --> 38:41.480]  Ну, во-первых, да. То есть, во-первых, мы действительно…
[38:42.480 --> 38:43.480]  Если у нас действительно вот…
[38:44.480 --> 38:47.480]  То есть, из каждой точки мы можем пытаться прыгать на P1.
[38:48.480 --> 38:50.480]  Вот так вот. P1, P1, P1.
[38:51.480 --> 38:53.480]  Можем пытаться так прыгать? Можем так пытаться.
[38:58.480 --> 38:59.480]  Вот.
[39:02.480 --> 39:06.480]  Ну, и можно, ну, вот, да, можем, можем так пытаться.
[39:07.480 --> 39:09.480]  Внимание, вопрос. Верно? Ну, вот.
[39:10.480 --> 39:12.480]  Ну, по-моему, да, возникает интересно.
[39:13.480 --> 39:19.480]  А верно ли, что хотя бы из одной из этих точек вот P1, P1, P1
[39:19.480 --> 39:25.480]  всегда можно прыгнуть, можно найти такую точку, из которой можно заведомо прыгнуть на P2.
[39:32.480 --> 39:33.480]  Еще раз.
[39:34.480 --> 39:39.480]  Посмотрите. Существует ли хотя бы, хотя бы одна…
[39:40.480 --> 39:45.480]  Вот, смотрите, вот, предположим, рассмотрим все точки, вот, по которым мы можем из этой точки прыгнуть на вот…
[39:46.480 --> 39:47.480]  P1.
[39:47.480 --> 39:48.480]  Слева мы на нее вообще не можем прыгнуть.
[39:49.480 --> 39:50.480]  Что-что?
[39:51.480 --> 39:53.480]  Ну, слева мы не можем прыгнуть, потому что она меньше, чем P1, у нее номер.
[39:54.480 --> 39:57.480]  А, да. Хорошо. Определенно.
[39:58.480 --> 39:59.480]  Вправо можем.
[40:00.480 --> 40:04.480]  Теперь внимание, вот мы прыгаем, прыгаем, прыгаем, и в конце, соответственно, допрыгались.
[40:05.480 --> 40:14.480]  Внимание, вопрос. Можем ли мы теперь прыгнуть из нее на P2?
[40:15.480 --> 40:16.480]  Назад.
[40:17.480 --> 40:18.480]  Ну, конечно, назад.
[40:21.480 --> 40:25.480]  Не обязательно. Что если в конце у нас осталось…
[40:30.480 --> 40:33.480]  По-моему, можем, потому что P1 всегда больше.
[40:37.480 --> 40:38.480]  Ну, P1-то больше.
[40:38.480 --> 40:39.480]  Ну и что?
[40:40.480 --> 40:41.480]  Проблема в том, что как бы…
[40:42.480 --> 40:43.480]  Нет, на самом деле кажется, что…
[40:47.480 --> 40:51.480]  На самом деле, да, кажется, что само по себе это проблемы дает.
[40:52.480 --> 40:59.480]  Потому что все, что мы знаем, и то, что расстояние между последней точкой границы, оно меньше, чем P1.
[41:08.480 --> 41:14.480]  Само по себе, из того, что оно меньше P1, то есть нам, для того, чтобы прыгнуть на P2…
[41:15.480 --> 41:17.480]  Смотрите, смотрите, как интересно.
[41:18.480 --> 41:30.480]  Для того, чтобы прыгнуть назад на P2, нам требуется, чтобы вот это расстояние должно было быть, допустим, меньше либо равно, чем P1-0.
[41:31.480 --> 41:33.480]  P1, P2.
[41:39.480 --> 41:43.480]  Вот возникает естественный вопрос. А так ли это?
[41:45.480 --> 41:49.480]  Вернулись, что если это расстояние действительно меньше…
[41:56.480 --> 41:59.480]  Я вроде бы составил систему уравнения.
[42:00.480 --> 42:02.480]  В неравенстве там вроде бы все сходится.
[42:03.480 --> 42:04.480]  Сходится? Какие же неравенства?
[42:04.480 --> 42:05.480]  Какие же неравенства?
[42:06.480 --> 42:13.480]  Ну, то, что у нас, допустим, P1-0 плюс KP1, это будет меньше, чем P2…
[42:14.480 --> 42:17.480]  А, там же P1-0. Извините, я прошу всех.
[42:19.480 --> 42:24.480]  Не, вот эти вот, даже интересно просто попытаться либо доказать это, либо попытаться еще и опроверкать.
[42:24.480 --> 42:28.480]  Мы можем, как бы, всю строку поделить на блоки по ноду.
[42:29.480 --> 42:31.480]  Ну, давайте сразу скажем.
[42:32.480 --> 42:36.480]  Пусть у нас нод P1-P2 равно…
[42:37.480 --> 42:42.480]  Ну, раз мы блоки уже сегодня обозначали режим все, давайте скажем, что оно равно D.
[42:43.480 --> 42:48.480]  То есть, допустим, там P1 равно D…
[42:48.480 --> 42:53.480]  Ну, я не знаю… L1… Нет, L плохо.
[42:54.480 --> 42:56.480]  Какую тут еще букву с индексом M1 написать?
[42:57.480 --> 42:59.480]  Q может быть… Давайте.
[43:00.480 --> 43:03.480]  Тоже не… Ну ладно. DQ2. Хорошо.
[43:04.480 --> 43:07.480]  Тоже плохо, конечно, там Q такой смысл будет иметь.
[43:08.480 --> 43:10.480]  Так, и давайте посмотрим.
[43:10.480 --> 43:14.480]  Вот у нас получается P1, вот у нас получается P2.
[43:15.480 --> 43:17.480]  Минус D.
[43:19.480 --> 43:24.480]  То есть, получается, примерно, следующее, что у нас блоки устроены как-то вот так.
[43:25.480 --> 43:29.480]  То есть, это блоки D, D, D…
[43:30.480 --> 43:34.480]  То есть, у нас блоки устроены как-то вот так.
[43:35.480 --> 43:39.480]  То есть, это вот блоки D, D, D…
[43:40.480 --> 43:42.480]  Вот.
[43:43.480 --> 43:48.480]  И тут еще, ну вот, и тут эти блоки D, D, D, D, D, D…
[43:50.480 --> 43:53.480]  Ну да, и в идеале нам что хочется показать?
[43:54.480 --> 43:59.480]  Нам хочется показать, что все эти блоки равны.
[44:00.480 --> 44:04.480]  Вот. Ну и теперь заметим, что у нас тут полгода застава заключается в том, что…
[44:05.480 --> 44:11.480]  Да, вот это количество блоков, это вот Q1, и вот это вот Q2.
[44:12.480 --> 44:16.480]  Вот. И по сути мы сверили вот нашу поприклакать слему,
[44:17.480 --> 44:19.480]  ну вот то, что мы можем прыгать, к случаю, когда взявим просты.
[44:20.480 --> 44:21.480]  То есть, что на самом деле происходит?
[44:22.480 --> 44:26.480]  Мы прыгаем вправо, например, на Q1 блоков, да, и остаемся на той же позиции в блоке.
[44:26.480 --> 44:30.480]  Ну что, всегда или так же на Q2 можем прыгать.
[44:31.480 --> 44:32.480]  Ну да.
[44:33.480 --> 44:37.480]  Вот. И мы по сути хотим показать, что если мы будем начинать из блока с номером как раз Q1 лично номерации,
[44:38.480 --> 44:43.480]  то есть последнего блока в P1, вправо на Q1 блоков,
[44:44.480 --> 44:49.480]  то мы пойдем в такой блок, что потом мы как бы не…
[44:49.480 --> 44:59.480]  У нас есть один блок, из которого мы не можем ни вправо впрыгнуть на Q1, ни влево на Q2, только один такой.
[45:00.480 --> 45:02.480]  Вот. И нужно показать, что мы в него не попадем обязательно.
[45:03.480 --> 45:07.480]  А этот блок получается с номером Q2-1, да?
[45:08.480 --> 45:11.480]  Да-да. Нет, ну туда. Давайте так.
[45:12.480 --> 45:17.480]  То есть, ну заметим, что… Да, действительно, давайте сначала скажем, что в общем-то по большому счету,
[45:17.480 --> 45:25.480]  да, если взять вот это D, то есть если рассматривать отдельные символы с индексами равными по модулю D,
[45:26.480 --> 45:30.480]  с одинаковыми остатками, да, то по сути мы будем решать ту же самую задачу,
[45:31.480 --> 45:38.480]  где у нас просто длинный строк Q1 и Q2, и Q1, Q2 взаимно просты.
[45:39.480 --> 45:44.480]  Да, вот, кстати, с этой точки зрения, давайте я вот этот блок сотру.
[45:44.480 --> 45:48.480]  Ну, чтоб было 4,7 взаимно просты, допустим.
[45:49.480 --> 45:59.480]  Вот. Так, хорошо. То есть теперь нам надо показать, по сути, следующее, что у нас есть строка длины Q1 плюс Q2 минус 1,
[46:00.480 --> 46:04.480]  и известно, что она Q1 периодично и Q2 периодично.
[46:05.480 --> 46:13.480]  Нам требуется показать, по сути, что все, или опровергнуть, что все символы в этих строках оказываются равными.
[46:15.480 --> 46:17.480]  Как же это сделать?
[46:18.480 --> 46:22.480]  Ну вот, в общем, у нас получается вот единственный как раз плохой символ, да,
[46:23.480 --> 46:28.480]  который мы там рассматривали, из пары вот с нас, по Q1,
[46:29.480 --> 46:31.480]  он как раз находится на позиции Q1 в один номерации.
[46:32.480 --> 46:38.480]  Это единственный, то есть из всех остальных можно либо сначала вправо на Q2, влево на Q1, либо сначала влево на Q1, потом вправо на Q2.
[46:39.480 --> 46:40.480]  Ну да.
[46:40.480 --> 46:45.480]  Вот. Ну, если мы будем спрыгать с него на Q1 вправо несколько раз, пока не сможем,
[46:46.480 --> 46:49.480]  то мы придем в позицию с индекса Q2 до конца строки.
[46:50.480 --> 46:54.480]  Ну, потому что у нас это как бы отрезок длины Q1.
[46:56.480 --> 46:58.480]  Вот. Но мы не можем прийти в позицию ровно Q2.
[47:05.480 --> 47:07.480]  Вот мы начали позицию в Q1.
[47:07.480 --> 47:09.480]  Так, давайте я тут даже подлиннее нарисую.
[47:10.480 --> 47:13.480]  Так, хорошо. Жила-была позиция Q1.
[47:14.480 --> 47:15.480]  Отлично.
[47:17.480 --> 47:19.480]  Ну вот. Да.
[47:22.480 --> 47:30.480]  Вот. Да. То есть заметим, это действительно, допустим, единственная позиция, из которой мы не можем пойти влево на Q1,
[47:31.480 --> 47:33.480]  ни влево на Q1, ни вправо на Q2.
[47:33.480 --> 47:34.480]  Да. Да.
[47:34.480 --> 47:35.480]  По большому счету, да.
[47:38.480 --> 47:40.480]  Вот. То есть это, ну вот.
[47:43.480 --> 47:44.480]  То есть, в общем-то, да.
[47:45.480 --> 47:53.480]  Как мы уже говорим, что любые два символа на расстоянии Q2, Q1,
[47:54.480 --> 47:58.480]  на самом деле, в любом ином случае, на самом деле, оказываются великолепно равны.
[47:58.480 --> 47:59.480]  Почему они оказываются равны?
[48:00.480 --> 48:05.480]  Ну просто потому, что если там этот символ слева, то можно там Q2, потом Q1, да.
[48:06.480 --> 48:11.480]  А если они там, скажем, левый символ оказывается правее вот этой позиции, то скачем вот так-вот так, и нас тоже вот устраивает.
[48:12.480 --> 48:14.480]  Понятно, Вадик? Да? Понятно? Ну вот.
[48:16.480 --> 48:19.480]  Ну вот. То есть единственное, когда это нас не устраивает, ну вот.
[48:20.480 --> 48:22.480]  То есть, когда конкретно из левой позиции мы не можем решить вопрос,
[48:23.480 --> 48:26.480]  когда левая позиция оказывается просто ровно в символе Q1.
[48:26.480 --> 48:28.480]  И тут у нас радость.
[48:29.480 --> 48:34.480]  Что тогда... Ну вот. Вот давайте думать. Что тогда мы могли бы про это сказать?
[48:38.480 --> 48:41.480]  Вот. Ну давайте в этой позиции, да, плохой прыгать право на Q1.
[48:42.480 --> 48:47.480]  То есть на самом деле, вот смотрите, ладно, есть такая, есть такая позиция, есть вот это вот Q1-1.
[48:48.480 --> 48:50.480]  Есть симметричная позиция, когда вот здесь Q1-1.
[48:50.480 --> 48:52.480]  Вот про эти символы как будто вообще непонятно.
[48:53.480 --> 48:56.480]  Вот про эти символы вообще непонятно. Ровные они или нет?
[48:57.480 --> 48:59.480]  Ну потому что стандартным образом мы убедиться не можем.
[49:02.480 --> 49:06.480]  Ну просто скатнуть ни с того ни с того, на самом деле мы никуда не можем.
[49:10.480 --> 49:14.480]  Сейчас, а мы просто хотим, чтобы мы могли бы про это сказать?
[49:14.480 --> 49:19.480]  Ну, скажем так, мы пытались доказать, что строка имеет период P2-P1.
[49:20.480 --> 49:22.480]  В данном случае P2-P1.
[49:23.480 --> 49:28.480]  Вот мы говорим, что наш стандартный механизм, который мы это раньше делали, когда у нас сумма была строк,
[49:29.480 --> 49:32.480]  он застопрился вот на конкретно этой паре и больше ни на какой.
[49:33.480 --> 49:37.480]  Ну, это неправда, что между ними ровно куда-нибудь сходится.
[49:37.480 --> 49:39.480]  А конкретно этой паре и больше ни на какой.
[49:40.480 --> 49:45.480]  Ну, это неправда, что между ними ровно куда-нибудь сходится. Вот эти две нарисованные точки.
[49:46.480 --> 49:48.480]  А почему?
[49:49.480 --> 49:51.480]  Сейчас, потому что... А, нет, или правда.
[50:02.480 --> 50:04.480]  Да, ладно.
[50:04.480 --> 50:06.480]  Нет, правда, правда. Ну, как сказать, да.
[50:09.480 --> 50:15.480]  То есть расстояние между ними Q2, ну да, хотя вот длина вот этой подстроки Q2 плюс 1, да.
[50:16.480 --> 50:21.480]  Получается, что композиция этих элементов это Q1 и Q2, собственно.
[50:22.480 --> 50:26.480]  Композиция этих элементов, ну да, Q1 и Q2, совершенно верно.
[50:27.480 --> 50:31.480]  Это композиция Q1, это композиция Q2.
[50:31.480 --> 50:35.480]  Ну, а теперь давайте думать, что здесь можно сказать.
[50:36.480 --> 50:39.480]  Причем напоминаю, что Q1, да.
[50:40.480 --> 50:43.480]  Как бы так, Q1 минус Q2 действительно просты.
[50:44.480 --> 50:49.480]  А, понятно. Давайте из вот этой позиции левой прыгать право на Q1 пока можем.
[50:50.480 --> 50:52.480]  Так, ну будем прыгать.
[50:53.480 --> 50:55.480]  Вот, мы попадем в последний Q1 символов, ну в один из последних.
[50:56.480 --> 50:58.480]  Ну, точнее так. Это будет вот так.
[50:58.480 --> 51:02.480]  Потом это будет вот так. И в какой-то момент это будет вот так.
[51:03.480 --> 51:09.480]  Вот. Если мы попали вот, ну как раз, в этот символ с позиции синекса Q2, то мы победили.
[51:10.480 --> 51:12.480]  Ну, это то, что сначала Q2 делится на Q1, такого не бывает.
[51:13.480 --> 51:14.480]  Ну, не бывает, но я просто в обществе говорю.
[51:15.480 --> 51:19.480]  Если не так, то мы прыгаем от него влево на Q2 и продолжаем право прыгать на Q1 до конца.
[51:20.480 --> 51:25.480]  И так далее. Ну, типа в какой-то момент мы придем в символ Q2.
[51:25.480 --> 51:27.480]  Ну да.
[51:28.480 --> 51:29.480]  Ну, ведь мы можем зациклиться иначе.
[51:30.480 --> 51:33.480]  Нет, не зациклимся. Потому что, смотрите, раз они взаимно просты.
[51:34.480 --> 51:36.480]  То, что, ну, как бы действительно, как мы скачем.
[51:37.480 --> 51:40.480]  То есть, когда мы скачем, скачем, скачем, скачем, скачем.
[51:41.480 --> 51:45.480]  То есть, рано или поздно мы будем либо в символ Q2, либо в то, что правее.
[51:46.480 --> 51:48.480]  Потому что вот этот последний блок ровно в длиной Q1, правда?
[51:49.480 --> 51:52.480]  Но если мы попадем строго правее этого Q2,
[51:52.480 --> 52:04.480]  то, значит, мы сумеем перескочить на, действительно, Q2.
[52:05.480 --> 52:12.480]  После этого, значит, раз уж мы тут, ну вот, после этого,
[52:13.480 --> 52:16.480]  ну, что у нас тогда будет получаться?
[52:16.480 --> 52:21.480]  После этого, значит, из этой позиции мы тоже будем теперь скакать,
[52:22.480 --> 52:24.480]  ну вот, и, соответственно, скакать.
[52:25.480 --> 52:31.480]  Правда, заметим, что в этом блоке мы можем прискакать как куда-то вот сюда, так и куда-то вот сюда.
[52:32.480 --> 52:34.480]  Понимаете, да?
[52:35.480 --> 52:41.480]  То есть, когда мы в следующий раз перескачем Q2, мы можем оказаться как левее Q2, так и, в общем-то, правее.
[52:42.480 --> 52:44.480]  То есть, мы могли вот так оказаться, а могли прийти вот так. Понятно, да?
[52:44.480 --> 52:45.480]  Хорошо, да.
[52:46.480 --> 52:48.480]  Но, как бы, так как Q1 и Q2 взаимопросты,
[52:49.480 --> 52:56.480]  по крайней мере, верно то, что, во-первых, конкретно в эту позицию мы точно, вот, мы точно, видимо, не прискачем.
[52:57.480 --> 52:58.480]  Да.
[52:59.480 --> 53:02.480]  И более того, для того, чтобы нам вернуться в ту же позицию, на самом деле мы будем вынуждены заключить,
[53:03.480 --> 53:06.480]  что для этого нам придется прям все остатки перебрать, перед чем мы не вернемся.
[53:07.480 --> 53:13.480]  Поэтому, ну вот, получается, что рано или поздно мы вынуждены будем ткнуться вот сюда.
[53:14.480 --> 53:16.480]  То есть, перебрав, возможно, все вот это.
[53:17.480 --> 53:19.480]  Поэтому получается, что конкретно здесь хорошо.
[53:21.480 --> 53:22.480]  Вот.
[53:23.480 --> 53:25.480]  Но тогда уже, знаете, хочется, тогда уже добивка. Интересно.
[53:26.480 --> 53:28.480]  Вот, хорошо, если минус один, это работает.
[53:29.480 --> 53:31.480]  Как вы думаете, а если минус два?
[53:32.480 --> 53:33.480]  Интересно, работает или?
[53:34.480 --> 53:39.480]  Ну, то есть, минус два, тогда доказательства не работают, потому что тогда кто-то мимо этого блока может промахнуться.
[53:40.480 --> 53:41.480]  Верно тоже неверно.
[53:42.480 --> 53:43.480]  Ага.
[53:44.480 --> 53:47.480]  Да, действительно, вероятно, что это уже неверно.
[53:48.480 --> 53:51.480]  Но давайте попробуем, знаете, вот для примера давайте попробуем составить граф.
[53:52.480 --> 54:01.480]  Вот, допустим, у меня Q1 равно, ну, я не знаю, 5, а Q2 равно 7.
[54:02.480 --> 54:07.480]  Давайте я попробую 5, 6, 7, 8, 9 символов, да?
[54:08.480 --> 54:10.480]  8, может, минус два.
[54:11.480 --> 54:12.480]  5 плюс 7, 12.
[54:12.480 --> 54:13.480]  А, ой.
[54:14.480 --> 54:15.480]  А минус два, вообще 10.
[54:16.480 --> 54:17.480]  Минус два, даже 10, вообще-то.
[54:18.480 --> 54:24.480]  Вот теперь внимание, вопрос, нужен ли нам 11 символ для того, чтобы тут обнаружился связанный граф?
[54:25.480 --> 54:29.480]  Так, ну, давайте думать.
[54:30.480 --> 54:36.480]  Вот, допустим, если вот этот символ A, да, то тогда автоматически давайте вот этот символ A и вот этот символ A.
[54:37.480 --> 54:39.480]  Ну, это проходит шестой и восьмой.
[54:39.480 --> 54:42.480]  И шестого мы деться больше никуда не можем.
[54:43.480 --> 54:46.480]  А из восьмого мы тоже...
[54:47.480 --> 54:49.480]  А, из восьмого можем деться в единичку, а можем деться в тройку.
[54:50.480 --> 54:51.480]  Вот сюда получится A.
[54:52.480 --> 54:54.480]  Так, что же у нас теперь получится?
[54:55.480 --> 54:59.480]  Из тройки я могу деться в восьмерку, а могу деться в десятку.
[55:00.480 --> 55:01.480]  Так.
[55:01.480 --> 55:09.400]  Ну из десятки я могу деться в тройку, могу деться в пятерку, то есть в пятерке я не могу деться никуда.
[55:09.400 --> 55:21.000]  Картинка называется ой, не замкнутая ли система, получилось. Они легко убедиться, что замкнутая,
[55:21.000 --> 55:27.840]  потому что вот тут 2, 4, 7, 9, для каждой для каждой штуки из них очевидно, что на 5 и 7 мы из
[55:27.840 --> 55:33.960]  пустых клеток скачем в пустые клетки. Следовательно, я могу спокойненько тут нарисовать любые символы
[55:33.960 --> 55:42.240]  B и сказать, что подходим. Так что, видимо, да, граница точная. Возможно, можно прям для любых
[55:42.240 --> 55:50.880]  P1, P2 прям действительно аккуратненько доказать, что строго меньше пример прибудется. Да, то есть
[55:50.880 --> 55:58.600]  это вот такая вот лемма о периодичности, которая нам, в принципе, очень может помочь. Ну то есть,
[55:58.600 --> 56:03.000]  на самом деле, конечно, для алгоритма нам, в общем-то, вот эта прибавка не важна, на самом деле,
[56:03.000 --> 56:09.080]  но и не будет пользоваться. Но, тем не менее, так в случае чего, помнить полезно, равно как и вот
[56:09.080 --> 56:19.320]  про вот эти вот блоки. Ну, в принципе, это такая хорошая штука, на самом деле, она очень помогает.
[56:19.320 --> 56:33.200]  Так, что там у нас дальше? Ну ладно, это вот остальные вещи, которые хотелось.
[56:33.200 --> 56:52.160]  Ну вот, что же нам еще потребуется? Лемма о периодичности A. Ну, заметим, ладно, это была лемма,
[56:52.160 --> 57:01.240]  она, на самом деле, верна в достаточно широко глобальном смысле. Ну, в том плане, что она, в общем-то,
[57:01.240 --> 57:08.840]  не привязана к нашему конкретному алгоритму, она вот просто абстрактно есть. Вот, но, значит,
[57:08.840 --> 57:20.600]  на самом деле, у нее есть мистическое следствие. Сейчас я вам его попробую, значит, расписать.
[57:20.600 --> 57:28.240]  Ладно, я тут не буду уже упишиваться. Значит, смотрите, следствие, внимание, в чем следствие,
[57:28.240 --> 57:50.680]  тут мы попытаемся прям максимально четко провести. Следствие. Вот. Различные префиксные периоды.
[57:58.240 --> 58:17.960]  Одной и той же, естественно. Строки различаются по длине.
[58:17.960 --> 58:39.680]  Строго больше, чем в х-1 раз. Вот там очень, на самом деле, будет помогать, на самом деле,
[58:39.680 --> 58:46.040]  вот эта маленькая приятная вещь, что на самом деле, как бы, да, у строки могут быть различные
[58:46.040 --> 58:53.120]  префиксные периоды, но по длине они отличаются хотя бы вот в х-1 раз. То есть, как бы там,
[58:53.120 --> 59:04.120]  ну, то есть, это будет каким-то мистическим образом нам помогать. Вот. Но мы сформулируем,
[59:04.120 --> 59:12.600]  знаете, мы назовем даже, я так скажу, вот у нас есть следствие, но мы не его будем доказывать,
[59:12.600 --> 59:24.120]  мы будем доказывать его усиленную версию. Да, может, будем писать УСЛО. Вот. Так вот,
[59:24.120 --> 59:32.600]  усиленное следствие звучит так. Значит, смотрите. Где тут у меня это усиленное следствие?
[59:32.600 --> 59:51.960]  Значит, смотрите. Пусть у строки С есть, внимание, префиксный период
[59:51.960 --> 01:00:08.280]  P1. Ну, длины давайте аккуратно писать уж тогда, когда тема сложная, лучше не подразумевать,
[01:00:08.280 --> 01:00:28.960]  что что-то понятно. Понятно. И базовый, внимание, даже более славно, базовый префикс длины, внимание,
[01:00:28.960 --> 01:00:41.440]  P2. Ну, я надеюсь, вас не будет путать понятие базовый префикс, потому что базовый префикс
[01:00:41.440 --> 01:00:47.800]  это не более чем префикс, являющийся базовой строкой. Но, правда, это небезопасно, да? Потому что
[01:00:47.800 --> 01:00:53.640]  вот видите, префиксный период, это словосочетание вообще что-то другое означает, да? Ну, то есть,
[01:00:54.000 --> 01:01:01.880]  знаете, фрезеологизм, типа, что там, то есть, типа, там go означает идти, on – идти на, go on – продолжаться.
[01:01:01.880 --> 01:01:09.840]  Ну да, префикс одно, период – другое, префиксный период – вообще треть. Но в данном случае вот
[01:01:09.840 --> 01:01:16.240]  все честно. Базовый префикс, значит, префикс, который является базовой строкой. Значит,
[01:01:16.240 --> 01:01:36.080]  причем, я так скажу, P2 больше P1 и reach с индексом s от P2 больше либо равно 2P2. То есть,
[01:01:36.080 --> 01:01:41.000]  обратите внимание, это требование к вот этой вот более длинной строке, это более слабое
[01:01:41.000 --> 01:01:45.800]  требование, чем то, что она была бы префиксным периодом. Что префиксный период бы в этом месте
[01:01:45.800 --> 01:01:54.240]  требовал вместо двойки каши, правда? Ну, базовый, базовый. Так вот, уже этого, оказывается,
[01:01:54.240 --> 01:02:11.960]  достаточно, чтобы сказать, что P2 больше, чем k-1 на P1. Вот такая вот интересная ситуация.
[01:02:15.800 --> 01:02:22.600]  Вроде понятно.
[01:02:22.600 --> 01:02:25.000]  Даже вроде понятная?
[01:02:25.000 --> 01:02:31.240]  Так, ну, давайте, конечно, все сотрую, будем разбираться, почему это понятно.
[01:02:45.800 --> 01:02:57.600]  Так, ну, поехали. Так, вот жила была, допустим, строка S. Жила была строка S. Так, что?
[01:02:57.600 --> 01:03:05.280]  Ну, мы хотим, конечно же, рассмотреть какой-нибудь ее префикс, правда? Ну, естественно, ладно,
[01:03:05.280 --> 01:03:13.480]  идем, как говорят на латыни, от абсурда. По-лативски так звучит, от абсурда, если что.
[01:03:13.480 --> 01:03:19.080]  Предположим, что P2 меньше либо равно P1 на k-1.
[01:03:19.080 --> 01:03:26.080]  Можем такое предположить, правда?
[01:03:26.080 --> 01:03:36.160]  Тогда, смотрите, что можно сделать. Рассмотрим префикс S длины P1 к.
[01:03:36.840 --> 01:03:44.840]  Ну, мы можем заметить, что эту строку можно разбить на k, в нашем случае буквально 4 блока по P1.
[01:03:44.840 --> 01:03:50.840]  И они все будут одинаковые, правда?
[01:03:50.840 --> 01:03:53.840]  Вот.
[01:03:53.840 --> 01:03:59.840]  Ну, смотрите, как интересно, что означает, что у нас P2 меньше либо равно.
[01:04:00.520 --> 01:04:07.520]  Это означает, что это P2 так жественно вписывается куда-то вот сюда.
[01:04:07.520 --> 01:04:12.520]  Под линию, правда?
[01:04:12.520 --> 01:04:16.520]  Ну, хотя бы под линию.
[01:04:16.520 --> 01:04:21.520]  Ну, теперь мы заметим вот что.
[01:04:21.520 --> 01:04:26.520]  Причем более того заметим, что эта строка, в принципе, вот в этой строке вполне себе равна, очевидно, правда?
[01:04:27.200 --> 01:04:30.200]  Почему начали по 2-х без какого-то странного места?
[01:04:30.200 --> 01:04:33.200]  Нет, это не странное место, это конец первого блока.
[01:04:33.200 --> 01:04:40.200]  Я просто хотел показать, что из неральностов следует, что оно заканчивается не правее, чем вот это.
[01:04:40.200 --> 01:04:43.200]  Вот.
[01:04:43.200 --> 01:04:46.200]  Ну, теперь заметим следующее.
[01:04:46.200 --> 01:04:51.200]  Рассмотрим префикс, вот этот вот префикс.
[01:04:57.200 --> 01:05:02.200]  Длины P1 плюс P2.
[01:05:02.200 --> 01:05:05.200]  Как легко заметить?
[01:05:05.200 --> 01:05:08.200]  Заметим, да?
[01:05:08.200 --> 01:05:21.200]  Что я утверждаю, что префикс длины P1 плюс P2, он, во-первых, P1 периодично, то есть у него есть период P1.
[01:05:21.880 --> 01:05:25.880]  Ну, это очевидно, потому что это под строка, по этим периодическим строке, правда?
[01:05:27.880 --> 01:05:30.880]  И P2 периодично.
[01:05:39.880 --> 01:05:41.880]  А почему он P2 периодично, кстати?
[01:05:41.880 --> 01:05:45.880]  Потому что P2 больше P1, а та у нас периодически больше.
[01:05:45.880 --> 01:05:47.880]  А P1 плюс P2, а не P2 P2.
[01:05:48.560 --> 01:05:55.560]  То есть, дело в том, что, да, у нас есть, действительно, можно взять префикс 2P2, но про 2P2 мы сказать ничего не можем.
[01:05:55.560 --> 01:06:01.560]  Но мы знаем, что уж, да, во-первых, P1 плюс P2 меньше, чем 2P2, это мы точно знаем.
[01:06:01.560 --> 01:06:08.560]  И мы знаем, что вот какой-то префикс, там непонятно, здесь или здесь, но это строка P2 периодично.
[01:06:14.560 --> 01:06:17.560]  Ну, и длина ее равна 2P2.
[01:06:18.560 --> 01:06:21.560]  О, я как раз примерно по удвоенную вот эту и нарисовал.
[01:06:21.560 --> 01:06:23.560]  Вот, но это неважно.
[01:06:23.560 --> 01:06:25.560]  Значит, важно другое.
[01:06:25.560 --> 01:06:36.560]  То есть, получается, раз этот префикс P1 периодично, P2 периодично, то по имеющейся у нас лемме, значит, из этого следует,
[01:06:37.240 --> 01:06:46.240]  что S от 1 P1 плюс P2 нод P1 P2 периодично.
[01:06:46.240 --> 01:06:48.240]  Мы уже с вами это выяснили.
[01:06:56.240 --> 01:06:58.240]  Вот, что из этого следует?
[01:06:58.240 --> 01:07:00.240]  А из этого следует маленькая приятная вещь.
[01:07:00.920 --> 01:07:11.920]  Что его голубой префикс этой строки в лице P2.
[01:07:11.920 --> 01:07:13.920]  Именно P2.
[01:07:15.920 --> 01:07:20.920]  Значит, нод P1 P2 периодично.
[01:07:22.920 --> 01:07:24.920]  Уже догадываетесь, к чем противоречие будет?
[01:07:24.920 --> 01:07:26.920]  С тем, что P2 базово.
[01:07:26.920 --> 01:07:27.920]  Не только.
[01:07:28.600 --> 01:07:30.600]  Во-первых, с тем, что базово, но тут еще важно уточнить.
[01:07:34.600 --> 01:07:48.600]  Важно уточнить, что P2 делится на этот нод и при этом P2 строго больше этого нода.
[01:07:48.600 --> 01:07:52.600]  Потому что, в принципе, если бы этот нод был равен P2, нас бы все устраивало.
[01:07:52.600 --> 01:07:57.600]  Но тут-то и важно, что мы пользуемся тем, что P1 строго меньше P2.
[01:07:58.600 --> 01:08:00.600]  То есть, поэтому вот так.
[01:08:00.600 --> 01:08:03.600]  Можно даже написать P2 больше P1 больше либо рабочим строк.
[01:08:06.600 --> 01:08:15.600]  Отсюда следует, что F1 P2 не базовая.
[01:08:18.600 --> 01:08:24.600]  Ну вот, доказательство от противного на этом заканчивается.
[01:08:28.600 --> 01:08:32.600]  Вот такая вот у нас получается строка.
[01:08:38.600 --> 01:08:40.600]  Это префикс нод.
[01:08:41.600 --> 01:08:43.600]  У нас была строка нод периодичную.
[01:08:43.600 --> 01:08:45.600]  Взяли префикс, она будет иметь такой же префикс.
[01:08:49.600 --> 01:08:50.600]  Да.
[01:08:50.600 --> 01:08:52.600]  Ну, оказывается, она не базовая.
[01:08:53.280 --> 01:09:01.280]  То есть, вот еще одна действительно очень-очень приятное усиленное средство.
[01:09:02.280 --> 01:09:07.280]  Ну, значит, давайте прежде чем формулировать какие-то еще леммы.
[01:09:10.280 --> 01:09:14.280]  На самом деле, я попытаюсь сейчас формулировать
[01:09:19.280 --> 01:09:20.280]  кое-что еще.
[01:09:20.960 --> 01:09:22.960]  Так, что тут нам предлагают?
[01:09:23.960 --> 01:09:25.960]  А, еще одно определение.
[01:09:29.960 --> 01:09:31.960]  Значит, на первый дат.
[01:09:32.960 --> 01:09:33.960]  Так.
[01:09:33.960 --> 01:09:34.960]  Ой.
[01:09:35.960 --> 01:09:37.960]  Где бы его написать?
[01:09:38.960 --> 01:09:40.960]  Так, давайте прямо так сделаем.
[01:09:41.960 --> 01:09:42.960]  Смотрите.
[01:09:45.960 --> 01:09:47.960]  Черный маркер, я сам думаю.
[01:09:48.640 --> 01:09:49.640]  Так.
[01:09:53.640 --> 01:09:55.640]  Значит, еще одно определение.
[01:09:59.640 --> 01:10:02.640]  Смотрите, я еще введу, значит, определение.
[01:10:06.640 --> 01:10:09.640]  Вот мы сегодня его уже утром вводили.
[01:10:11.640 --> 01:10:16.640]  То есть, пусть, действительно, 1 меньше либо равно Q меньше либо равно bs.
[01:10:18.640 --> 01:10:19.640]  Тогда, внимание.
[01:10:20.640 --> 01:10:22.640]  Тогда мы вводим такое понятие, как shift.
[01:10:25.640 --> 01:10:26.640]  Shift s от Q.
[01:10:27.640 --> 01:10:29.640]  Значит, этот shift будет равен.
[01:10:30.640 --> 01:10:32.640]  Минимальное такое l больше 0.
[01:10:33.640 --> 01:10:44.640]  Такое, что, ну, по факту, s от l плюс 1.q равно s1.q.
[01:10:45.320 --> 01:10:47.320]  Авторы предлагают вот такое.
[01:10:51.320 --> 01:10:52.320]  Да.
[01:11:04.320 --> 01:11:08.320]  Ну, очевидно, в нашей терминологии мы можем это двумя способами.
[01:11:09.320 --> 01:11:13.320]  То есть, на самом деле, заметим, что это торжественно равно минимальному такому.
[01:11:14.000 --> 01:11:21.000]  l больше 0 такому, что l плюс z с индекс ms от l плюс 1.
[01:11:24.000 --> 01:11:28.000]  Ну, получается, больше либо равно q.
[01:11:30.000 --> 01:11:31.000]  Логично, да?
[01:11:32.000 --> 01:11:33.000]  Логично.
[01:11:34.000 --> 01:11:35.000]  Логично.
[01:11:36.000 --> 01:11:40.000]  Ну да, можно было написать z от l плюс 1 больше либо равно q минус l.
[01:11:40.680 --> 01:11:47.680]  Ну, или как мы вообще знаем, что это на самом деле равно, ну, банально, я не знаю, q минус p.
[01:11:53.680 --> 01:11:59.680]  Если мы живем в слабом червящем непоительном мире префекса z функции, то можно было этот shift еще вот так определить.
[01:12:00.680 --> 01:12:01.680]  Ну, суть, в общем-то, одна.
[01:12:03.680 --> 01:12:05.680]  На самом деле, правильно написать так.
[01:12:06.360 --> 01:12:13.360]  Так, shift – это минимальный период префекса строти-ездленной пункты.
[01:12:15.360 --> 01:12:16.360]  Понимаете, да?
[01:12:17.360 --> 01:12:18.360]  Вот мы сегодня уже активны.
[01:12:19.360 --> 01:12:22.360]  Я ровно по этой повреждению этого определения, я его назвал shift сегодня.
[01:12:26.360 --> 01:12:28.360]  Так что вот такая у нас красота.
[01:12:31.360 --> 01:12:32.360]  Так что тут у нас shift.
[01:12:33.040 --> 01:12:35.040]  А-а-а-а, да.
[01:12:38.040 --> 01:12:39.040]  То есть приятный такой shift.
[01:12:40.040 --> 01:12:41.040]  Так вот.
[01:12:42.040 --> 01:12:45.040]  Значит, я вот еще определение забил, но теперь я все-таки перескорю.
[01:12:46.040 --> 01:12:50.040]  Значит, потому что в этом месте авторы начинают забавачивать некоторых философий.
[01:12:51.040 --> 01:12:58.040]  Ну, потому что как у нас вообще глобально выглядят огромное количество алкогитмов поиска под строки-в-строте?
[01:12:58.040 --> 01:13:09.720]  Значит, то есть если мы ищем, как всегда, шаблон P, строкет T, то чаще всего это выглядит так.
[01:13:09.720 --> 01:13:22.680]  Смотрите, мета алгоритм. Даже не уверен, правильно ли его называть, мета алгоритм у Галилы Сейферса,
[01:13:22.680 --> 01:13:37.000]  конечно. То, что алгоритм предлагается так устроить. Значит, во-первых, заводим пару PQ,
[01:13:37.000 --> 01:13:51.400]  которая, картриджик типа, изначально. Ну ладно, в нашей терминологии придется немножко по-другому
[01:13:51.640 --> 01:14:15.880]  1,1. Значит, говорим, while, допустим, P меньше либо равно модуль T. Ну, я давайте сразу поясню.
[01:14:15.880 --> 01:14:22.920]  Значит, вот инвариант. Будем поддерживать инвариант. Инвариант будет звучать так.
[01:14:22.920 --> 01:14:43.560]  Т значит что? Т значит PQ не включительно. Равно S отъединив сюда. То есть я хочу рассматривать какие-то подстроки,
[01:14:43.560 --> 01:15:11.480]  которые являются префиксами строки P. Ну, помните, это паттер, это текст. Мы ищем шаблон в тексте.
[01:15:11.480 --> 01:15:28.520]  И P предлагается искать примерно следующее. Вот P меньше либо равно T. Значит, что нам предлагается?
[01:15:28.520 --> 01:15:36.920]  Ну, во-первых, поддерживаем такой инвариант. Вот PQ у нас такой. Ну, во-первых, начинаем с того, что while,
[01:15:36.920 --> 01:15:50.280]  естественно, значит, PQ меньше либо равно TQ меньше либо равно P. Ну и как вы уже догадываетесь,
[01:15:50.280 --> 01:16:08.120]  что мы тут пишем? T от PQ равно PQ. Ладно, тут меньше, конечно. Ну, в общем, практически та часть кода,
[01:16:08.120 --> 01:16:21.160]  которую бы все функции там писали как в тупую. Вот. Ну, можно тут же писать что-нибудь там.
[01:16:21.160 --> 01:16:35.440]  If Q равно равно mod P, то там бла-бла-бла как-нибудь сохранить ответ. И самое интересное, почему этот
[01:16:35.440 --> 01:16:51.880]  алгоритм становится метод алгоритм, PQ присвоить P' Q3. Желательно, наверное, P' больше P1. Ну,
[01:16:51.880 --> 01:17:01.360]  скажем так, напишу вопросик, потому что лично мне так кажется, что это логично. Почему это металгоритм?
[01:17:01.360 --> 01:17:15.240]  Металгоритм это ровно из-за вот этой ситуации, потому что откуда я возьму вот это? Вот я так напишу. Вот на
[01:17:15.240 --> 01:17:22.040]  самом деле поэтому я это называю металгоритм. То есть каждый алгоритм должен просто отвечать на
[01:17:22.040 --> 01:17:33.840]  вопрос откуда я вот это возьму. Ну, по большому счёту заметим, что тут на второй начинают ссылаться
[01:17:33.840 --> 01:17:45.720]  на алгоритм кнута Мориса Пратта. А, да, мы не знаем, что алгоритм кнута Мориса Пратта. Так вот. Ну, по сути, алгоритм кнута
[01:17:45.720 --> 01:17:51.080]  Мориса Пратта это когда вы ищете подстрок в строке через префикс функции. Когда мы пишем через решетку и
[01:17:51.080 --> 01:18:00.120]  присутствует что ли? А вот тут деталей я не помню. Вот тут я не скажу. У меня почему-то жуткое
[01:18:00.120 --> 01:18:06.520]  предположение, что они всё-таки использовали олацпай дополнительной памяти. Ну, честно скажу, из какой
[01:18:06.520 --> 01:18:19.040]  логики они приходили к этому, я не знаю. Вот честно, вот их статья я не смотрел. Но, соответственно, что у нас тут
[01:18:19.040 --> 01:18:25.760]  происходит? Но давайте так, но давайте, вот прежде чем мы перейдём, пойдём на перерыв, давайте вот что мы
[01:18:25.760 --> 01:18:32.600]  представим. Скажите мне, пожалуйста, вот как устроено п штрих и q штрих, как вы думаете, в КМПшке?
[01:18:32.600 --> 01:18:55.640]  О, наверное, это индекс, а П это максимальный префикс.
[01:18:55.640 --> 01:19:01.040]  Стой близко индекс, а П это как бы значение префикс функции.
[01:19:01.040 --> 01:19:08.480]  Ну да, но по большому счёту да. Можно сказать, что q это действительно значение префикс функции.
[01:19:08.480 --> 01:19:15.440]  Обычно там можно это сформулировать так, что q присваивается, можно сказать так,
[01:19:15.440 --> 01:19:32.240]  значит П плюс П, пишу так, П плюс П1 значит q минус П1, где П1 равно чему? Ну, можно сказать, что
[01:19:32.240 --> 01:19:40.400]  действительно обычно оно равно, можно сказать, что q минус префикс функции от q минус 1, правда?
[01:19:40.400 --> 01:19:49.840]  Ну ладно, п от q у нас один индексация, правда? Ещё п с индексом П, обратите внимание данным башням.
[01:19:49.840 --> 01:20:04.320]  Ну на самом деле правильнее сказать, конечно, что П1 равно на самом деле shift, shift с индексом
[01:20:04.320 --> 01:20:15.680]  П. Потому что, давайте ещё раз вспомним, в чём заключается, вот как можно ещё интерпретировать логику кнутам
[01:20:15.680 --> 01:20:28.880]  или сопратам. Логика была примерно следующая, вот жила была строка П, мы её ищем. А может П1 это П плюс в этот shift, а П1 это индекс в строке Т, может достаточно большим, например.
[01:20:29.520 --> 01:20:36.480]  Да, поэтому я тут пишу П плюс П1, а не просто П1. А, всё П плюс П, ага. Да, смотрите, как это работает, то есть работает это так.
[01:20:36.480 --> 01:20:45.920]  Допустим, мы убедились, что какие-то все вхождения левее, чем вот эта позиция П, не путать, кстати, П маленькая, вот с этой вот строкой П, да?
[01:20:45.920 --> 01:20:57.360]  Вот, допустим, она оказалась здесь, и вот, допустим, мы на q прошли, вот тут q и тут q, но выяснилось, а дальше fail, х левый, да?
[01:20:57.440 --> 01:21:01.440]  Тогда, какую границу нам имеет смысл рассматривать следующий?
[01:21:04.720 --> 01:21:19.360]  Если мы хотим вот сдвинуться на какую-то границу, допустим, пик, там, A, то есть сказать, что вот эта позиция П плюс A, то мы обнаружим, что вот эта вот штука должна быть префиксом вот этой штуки.
[01:21:19.360 --> 01:21:21.360]  И одновременно с префиксом, правда?
[01:21:21.360 --> 01:21:32.240]  А это, как мы уже выяснили, просто эквивалентно тому, что L это, ну вот, L это что? Это фактически вот период этой строки.
[01:21:40.240 --> 01:21:48.640]  Ну что вот? Ну то есть, фактически, если у вас вот есть такие префиксов, падает с суффиксом, и префикс суффикс начинается на расстоянии L, то это означает, что строка и периодичная.
[01:21:48.640 --> 01:21:55.120]  Фактически, это означает, что надо сдвинуться на минимальное такое, чтобы это было, тогда получается, что L это просто тот самый shift.
[01:21:59.120 --> 01:22:05.120]  Еще иногда, когда у нас, типа, строка пустая, нужно что-то сдвинуть?
[01:22:05.120 --> 01:22:09.120]  Не, ну L может быть и, честно, P, это нормально.
[01:22:09.600 --> 01:22:17.600]  Тогда мы скажем, что, действительно, shift это минимальный период при префиксах LQ. Этот shift может быть равен Q.
[01:22:17.600 --> 01:22:23.600]  То есть, это означает, что у нее никаких внутренних периодов, кроме Q, нет.
[01:22:23.600 --> 01:22:27.600]  Не, ну просто, если мы пишем ровно так, у нас никогда суббописку не поменяется. Это очевидный бред.
[01:22:27.600 --> 01:22:29.600]  Чего не поменяется?
[01:22:29.600 --> 01:22:31.600]  А, сейчас.
[01:22:31.600 --> 01:22:33.600]  Q меняется вот здесь.
[01:22:39.600 --> 01:22:59.600]  Ну, в общем, все равно, если у нас, например, Q там чему-то равно, Q равно 0, то и Q не совпадает с первым Q строки P, то у нас просто, ну, не будет меняться, не паникуй.
[01:22:59.600 --> 01:23:05.600]  Нужно какой-то еще ИВ добавить, в каком случае мы прибавляем просто Q по 1.
[01:23:06.080 --> 01:23:10.080]  Нет, в смысле, не пойду. Смотри, начнем с того, что P1 0 быть не может никогда.
[01:23:12.080 --> 01:23:14.080]  Если Q равно 0, что происходит?
[01:23:20.080 --> 01:23:22.080]  Если Q равно 0...
[01:23:24.080 --> 01:23:26.080]  То, наверное, мы должны что-то другое делать.
[01:23:30.080 --> 01:23:32.080]  Например, просто Q добавлять 1.
[01:23:32.560 --> 01:23:34.560]  Ну да, или...
[01:23:34.560 --> 01:23:36.560]  Ну хорошо, хорошо, ладно.
[01:23:38.560 --> 01:23:40.560]  Ну да, давайте скажем, что...
[01:23:42.560 --> 01:23:46.560]  Или P plus 1 0, хорошо.
[01:23:50.560 --> 01:23:52.560]  Если Q совершенно случайно оказалось...
[01:23:52.560 --> 01:23:54.560]  Рабло, 0.
[01:24:02.560 --> 01:24:12.560]  Хорошо, уговорили, уговорили.
[01:24:12.560 --> 01:24:18.560]  Вот. Ну, то есть вот алгоритм, но там не супратто, как бы, со ссылкой на статью, интерпретируется вот ровно таким образом.
[01:24:22.560 --> 01:24:24.560]  Соответственно.
[01:24:25.040 --> 01:24:27.040]  Ну а на самом деле, конечно, да.
[01:24:27.040 --> 01:24:33.040]  Чтобы его, правда, это делать, нам придется в этом алгоритме параллельно эту префикс-функцию, собственно, насчитывать.
[01:24:33.040 --> 01:24:37.040]  Вот, собственно, ровно исходя из этих соображений, она, в общем-то, и взялась.
[01:24:37.040 --> 01:24:43.040]  Ну а не помните, когда мы владели префикс-функцией, мы тоже пытались двумя указателями, это, честно, находите, хэшами.
[01:24:43.040 --> 01:24:47.040]  Потом научились вычитать префикс-функцию, собственно, хэши избавляться.
[01:24:47.520 --> 01:24:53.520]  Но мы же будем здесь пытаться работать как-то сепрее.
[01:24:53.520 --> 01:24:59.520]  То есть, скакать может не настолько, насколько реально можно, может быть, иногда скакать будет чуть на поменьше.
[01:24:59.520 --> 01:25:03.520]  Но чтобы в совокупности все равно работалось за...
[01:25:03.520 --> 01:25:07.520]  Но, правда, тут, конечно, скакать надо очень-очень-очень.
[01:25:07.520 --> 01:25:11.520]  Так, ну, я думаю, пришло время сделать переговор.
[01:25:12.000 --> 01:25:14.000]  Значит, смотрите, так.
[01:25:14.000 --> 01:25:20.000]  Значит, мы тут воспроизвели вот этот алгоритм, мы его тоже себе металгоритм пририсуем.
[01:25:20.000 --> 01:25:22.000]  Ну, с КМПшкой мы все поняли.
[01:25:30.000 --> 01:25:36.000]  Значит, что мы... Ну, понятно, алгоритм будет оставаться вот на этой штуке.
[01:25:36.480 --> 01:25:40.480]  Но при этом будет пытаться, конечно... То есть, заметим, что сам по себе вот этот...
[01:25:40.480 --> 01:25:44.480]  То есть, заметим, что все, кроме вот, на самом деле, вычисления ПКПШТРИХ,
[01:25:44.480 --> 01:25:50.480]  на самом деле до памяти никакой практически не требует, правда?
[01:25:50.480 --> 01:25:52.480]  Логично, да?
[01:25:52.480 --> 01:25:54.480]  Или нет?
[01:25:56.480 --> 01:25:58.480]  Так, кто живой?
[01:25:58.480 --> 01:26:00.480]  А, вот тут вот... А, нет.
[01:26:00.960 --> 01:26:02.960]  Ну, да.
[01:26:04.960 --> 01:26:06.960]  То есть, по большому счету, вопрос только вот в этом месте.
[01:26:06.960 --> 01:26:10.960]  То есть, как бы... Ну, это, правда, самое магическое место.
[01:26:10.960 --> 01:26:16.960]  Ну, давайте попробуем... Ну, прежде всего, конечно, тут хочется немножко поиграться.
[01:26:16.960 --> 01:26:20.960]  Ну, во-первых, давайте еще пару леночек попробуем.
[01:26:22.960 --> 01:26:24.960]  Да, ничего не хочется стирать.
[01:26:26.960 --> 01:26:28.960]  Значит, смотрите, утверждение такое.
[01:26:30.960 --> 01:26:46.960]  Если оказалось, что shift с индекса S от Q меньше либо равно Q делить на K,
[01:26:46.960 --> 01:26:58.960]  то я утверждаю, что shift S от Q, а точнее S от 1 до вот этой мистической числа,
[01:26:59.440 --> 01:27:03.440]  это префиксный период S.
[01:27:19.440 --> 01:27:21.440]  Ну, вот.
[01:27:21.440 --> 01:27:23.440]  Ну, действительно.
[01:27:23.920 --> 01:27:27.920]  Если какие-то ноты...
[01:27:31.920 --> 01:27:33.920]  Ну, в принципе, да. Давайте разбираться.
[01:27:33.920 --> 01:27:35.920]  Давайте кратенько поймем.
[01:27:35.920 --> 01:27:37.920]  Ну, я сейчас тут нарисую, потом смотрю.
[01:27:39.920 --> 01:27:41.920]  Жила была вот где-то позиция Q.
[01:27:43.920 --> 01:27:47.920]  И, допустим, вот у нас shift оказался где-то индекса.
[01:27:47.920 --> 01:27:51.920]  И он оказался меньше либо равен, чем Q делить на 4.
[01:27:52.400 --> 01:27:54.400]  Еще shift я нарисую.
[01:27:54.400 --> 01:27:56.400]  Вот.
[01:27:56.400 --> 01:27:58.400]  Вот.
[01:27:58.400 --> 01:28:02.400]  Ну, заметим, что этот префикс, он на самом деле shift-опериодичен.
[01:28:02.400 --> 01:28:04.400]  Вот как мы выяснили, да?
[01:28:06.400 --> 01:28:10.400]  Могло быть и 5, и 6, но главное, он shift-опериодичен.
[01:28:10.400 --> 01:28:12.400]  Поэтому мы понимаем, что...
[01:28:14.400 --> 01:28:16.400]  То есть, как минимум, что...
[01:28:16.400 --> 01:28:18.400]  Ну, как минимум, то есть, видим, что как минимум 4 копии тут есть.
[01:28:18.400 --> 01:28:20.400]  Следовательно, это кандидат.
[01:28:22.400 --> 01:28:24.400]  В префиксной цивилизации.
[01:28:24.400 --> 01:28:26.400]  Почему он только кандидат?
[01:28:26.400 --> 01:28:28.400]  Потому что вообще надо еще установить,
[01:28:28.400 --> 01:28:30.400]  не является случайно эта строчка...
[01:28:30.400 --> 01:28:32.400]  То есть, является ли эта строчка базовой.
[01:28:34.400 --> 01:28:36.400]  Если она не базовая, то shift можно взять.
[01:28:36.400 --> 01:28:38.400]  Да, совершенно верно.
[01:28:38.400 --> 01:28:40.400]  Потому что, на самом деле, если выяснилось,
[01:28:40.400 --> 01:28:42.400]  что эту строчку еще, там скажем, на 3 строчки,
[01:28:42.400 --> 01:28:44.400]  можно распределить.
[01:28:44.880 --> 01:28:46.880]  То легко убедиться, что, на самом деле,
[01:28:46.880 --> 01:28:48.880]  не только вот этот префикс равен вот такому,
[01:28:48.880 --> 01:28:50.880]  но и, на самом деле, даже вот этот префикс
[01:28:50.880 --> 01:28:52.880]  будет, на самом деле,
[01:28:52.880 --> 01:28:54.880]  вот такому равен.
[01:28:54.880 --> 01:28:56.880]  Вот. То есть, вот такая вот красота.
[01:29:04.880 --> 01:29:06.880]  Красота? Красота.
[01:29:08.880 --> 01:29:10.880]  Вот.
[01:29:11.360 --> 01:29:13.360]  Красота? Красота.
[01:29:13.360 --> 01:29:15.360]  Гравится? Ну, вот.
[01:29:15.360 --> 01:29:17.360]  Поэтому, если эта строка, да,
[01:29:17.360 --> 01:29:19.360]  противоречия, то есть,
[01:29:19.360 --> 01:29:21.360]  с определением шифта, так что, да.
[01:29:21.360 --> 01:29:23.360]  То есть, минимальный шифт,
[01:29:23.360 --> 01:29:25.360]  то есть, минимальный шифт,
[01:29:25.360 --> 01:29:27.360]  это заведомо базовая строчка.
[01:29:27.360 --> 01:29:29.360]  Будь здоров!
[01:29:29.360 --> 01:29:31.360]  Спасибо.
[01:29:35.360 --> 01:29:37.360]  Вот.
[01:29:37.360 --> 01:29:39.360]  Ну, вот. Ну, на самом деле, сейчас
[01:29:39.360 --> 01:29:41.360]  еще будет лемма, которая, в общем-то,
[01:29:41.360 --> 01:29:43.360]  незначительно сложнее,
[01:29:43.360 --> 01:29:45.360]  но она будет немножко более навороченная,
[01:29:45.360 --> 01:29:47.360]  потому что она уже
[01:29:47.360 --> 01:29:49.360]  привязана непосредственно
[01:29:49.360 --> 01:29:51.360]  к алгоритму.
[01:29:51.360 --> 01:29:53.360]  Значит, смотрите, звучит она так.
[01:29:55.360 --> 01:29:57.360]  Значит, она будет звучать так.
[01:29:59.360 --> 01:30:01.360]  Значит, пусть,
[01:30:01.360 --> 01:30:03.360]  вот, допустим,
[01:30:03.360 --> 01:30:05.360]  s от 1l
[01:30:05.360 --> 01:30:07.360]  префиксный
[01:30:09.360 --> 01:30:13.360]  период s.
[01:30:21.360 --> 01:30:23.360]  Тогда, утверждаю я,
[01:30:23.360 --> 01:30:25.360]  для любого q,
[01:30:27.360 --> 01:30:29.360]  для любого q,
[01:30:29.360 --> 01:30:31.360]  ну, естественно,
[01:30:31.360 --> 01:30:33.360]  от одного до модулеса,
[01:30:33.360 --> 01:30:35.360]  естественно,
[01:30:35.360 --> 01:30:37.360]  верно. Внимание!
[01:30:37.360 --> 01:30:39.360]  Внимание! Следующее мистическое утверждение.
[01:30:41.360 --> 01:30:43.360]  Значит, внимание!
[01:30:43.360 --> 01:30:45.360]  Значит, l равно
[01:30:45.360 --> 01:30:47.360]  шифт
[01:30:47.360 --> 01:30:49.360]  с индекс ms откуда
[01:30:49.360 --> 01:30:51.360]  значит,
[01:30:51.360 --> 01:30:53.360]  меньше либо равно q поделить
[01:30:53.360 --> 01:30:55.360]  на k.
[01:30:55.360 --> 01:30:57.360]  И это не все, внимание.
[01:30:57.360 --> 01:30:59.360]  То есть, ну, во-первых,
[01:30:59.360 --> 01:31:01.360]  это два утверждения.
[01:31:01.360 --> 01:31:03.360]  Да, тут очень хитро
[01:31:03.360 --> 01:31:05.360]  написано, на самом деле, там утверждение.
[01:31:05.360 --> 01:31:07.360]  Но, во-первых, это два утверждения,
[01:31:07.360 --> 01:31:09.360]  что, во-первых, l равно шифта с s от q,
[01:31:09.360 --> 01:31:11.360]  и, второе, что шифт s от q
[01:31:11.360 --> 01:31:13.360]  меньше либо равен q поделить на k.
[01:31:17.360 --> 01:31:19.360]  А во-вторых, это еще не все.
[01:31:19.360 --> 01:31:21.360]  Это, если вы думаете, почему это верно,
[01:31:21.360 --> 01:31:23.360]  нет, это, конечно, не верно.
[01:31:23.360 --> 01:31:25.360]  Можно вопрос в условии?
[01:31:25.360 --> 01:31:27.360]  Тут вот s, 1,
[01:31:27.360 --> 01:31:29.360]  а, все, я,
[01:31:29.360 --> 01:31:31.360]  все, я понял.
[01:31:31.360 --> 01:31:33.360]  Отлично. Вопрос был задан не зря.
[01:31:35.360 --> 01:31:37.360]  Так вот,
[01:31:37.360 --> 01:31:39.360]  утверждается, что
[01:31:39.360 --> 01:31:41.360]  эти два утверждения верны
[01:31:41.360 --> 01:31:43.360]  тогда и только тогда,
[01:31:47.360 --> 01:31:49.360]  когда верны другие
[01:31:49.360 --> 01:31:51.360]  два утверждения.
[01:31:51.360 --> 01:31:53.360]  k умножить на l
[01:31:53.360 --> 01:31:55.360]  меньше либо равно q,
[01:31:55.360 --> 01:31:57.360]  меньше либо равно
[01:31:57.360 --> 01:31:59.360]  q поделить
[01:31:59.360 --> 01:32:01.360]  с от q.
[01:32:05.360 --> 01:32:07.360]  Вот.
[01:32:07.360 --> 01:32:09.360]  Красота.
[01:32:17.360 --> 01:32:19.360]  Вот теперь вот фаза.
[01:32:21.360 --> 01:32:23.360]  Кстати, да, никто не утверждает, что это
[01:32:23.360 --> 01:32:25.360]  верно. Ну, просто потому, что
[01:32:25.360 --> 01:32:27.360]  вообще говоря, q можно рассмотреть
[01:32:27.360 --> 01:32:29.360]  какой-нибудь, скажем, меньше, чем l,
[01:32:29.360 --> 01:32:31.360]  поэтому вот это вот, конечно, может быть
[01:32:31.360 --> 01:32:33.360]  неверно в принципе.
[01:32:35.360 --> 01:32:37.360]  Но утверждается
[01:32:37.360 --> 01:32:39.360]  на самом деле следующее.
[01:32:41.360 --> 01:32:43.360]  Ну, то есть по факту утверждается следующее.
[01:32:43.360 --> 01:32:45.360]  Видите, в обоих утверждениях
[01:32:45.360 --> 01:32:47.360]  так или иначе фигурирует, что k умножить
[01:32:47.360 --> 01:32:49.360]  на l должно быть меньше либо равно q,
[01:32:49.360 --> 01:32:51.360]  правда?
[01:32:51.360 --> 01:32:53.360]  То есть по факту
[01:32:53.360 --> 01:32:55.360]  говорится следующее, либо k умножить
[01:32:55.360 --> 01:32:57.360]  на l меньше либо равно q,
[01:32:57.360 --> 01:32:59.360]  и тогда одновременно выполнено
[01:32:59.360 --> 01:33:01.360]  и вот это, и
[01:33:01.360 --> 01:33:03.360]  вот самое главное,
[01:33:03.360 --> 01:33:05.360]  ну, самое главное вот это,
[01:33:07.360 --> 01:33:09.360]  либо q больше,
[01:33:09.360 --> 01:33:11.360]  либо q
[01:33:11.360 --> 01:33:13.360]  на самом деле строго меньше, чем
[01:33:13.360 --> 01:33:15.360]  q умножить на l, и тогда
[01:33:15.360 --> 01:33:17.360]  ни это заведомо не верно,
[01:33:17.360 --> 01:33:19.360]  ни вот это заведомо
[01:33:19.360 --> 01:33:21.360]  не верно.
[01:33:23.360 --> 01:33:25.360]  Вот такое утверждение.
[01:33:33.360 --> 01:33:35.360]  Так вот.
[01:33:35.360 --> 01:33:37.360]  Как же это?
[01:33:37.360 --> 01:33:39.360]  Вот теперь давайте думать.
[01:33:39.360 --> 01:33:41.360]  Как же это доказать?
[01:33:41.360 --> 01:33:43.360]  Ну, давайте думать.
[01:33:51.360 --> 01:33:53.360]  Если смотреть в эту сторону.
[01:33:55.360 --> 01:33:57.360]  Понятно вроде.
[01:33:57.360 --> 01:33:59.360]  Ну, вроде да.
[01:33:59.360 --> 01:34:01.360]  Ну, в эту сторону, да, что-то совсем очевидно.
[01:34:01.360 --> 01:34:03.360]  Сейчас тогда в статье так и написано,
[01:34:03.360 --> 01:34:05.360]  не тривиальное рассуждение
[01:34:05.360 --> 01:34:07.360]  требует только вот в эту сторону.
[01:34:07.360 --> 01:34:09.360]  Ну, действительно,
[01:34:09.360 --> 01:34:11.360]  потому что в эту сторону, что означает, что у нас
[01:34:11.360 --> 01:34:13.360]  вот этот вот shift,
[01:34:13.360 --> 01:34:15.360]  то есть там,
[01:34:15.360 --> 01:34:17.360]  предположим, что у нас l не просто оказался
[01:34:17.360 --> 01:34:19.360]  shift, то есть вот допустим
[01:34:19.360 --> 01:34:21.360]  вот этот вот l, ну вот, то есть
[01:34:21.360 --> 01:34:23.360]  это вот l, он еще меньше либо равно
[01:34:23.360 --> 01:34:25.360]  уподелить на k, и еще и shift оказался,
[01:34:25.360 --> 01:34:27.360]  но тогда это означает, что вот тут у нас
[01:34:27.360 --> 01:34:29.360]  k на месте,
[01:34:29.360 --> 01:34:31.360]  l, l, l, да?
[01:34:33.360 --> 01:34:35.360]  Вот.
[01:34:35.360 --> 01:34:37.360]  И не просто k, а еще
[01:34:37.360 --> 01:34:39.360]  просто эта строка еще l периодично.
[01:34:39.360 --> 01:34:41.360]  Поэтому очевидно, что
[01:34:43.360 --> 01:34:45.360]  поэтому очевидно, что rich s от l,
[01:34:45.360 --> 01:34:47.360]  а, ладно, я неправ, неправ, неправ, неправ.
[01:34:49.360 --> 01:34:51.360]  Правильное утверждение, конечно, требует
[01:34:51.360 --> 01:34:53.360]  не l, а l плюс 1.
[01:34:53.360 --> 01:34:55.360]  Так у нас же в определении
[01:34:55.360 --> 01:34:57.360]  rich от l, это как раз
[01:34:57.360 --> 01:34:59.360]  у нас,
[01:34:59.360 --> 01:35:01.360]  у нас rich
[01:35:01.360 --> 01:35:03.360]  от p, это
[01:35:03.360 --> 01:35:05.360]  z от p плюс 1,
[01:35:05.360 --> 01:35:07.360]  так что все правильно.
[01:35:07.360 --> 01:35:09.360]  Хорошо, так туда проверяйте.
[01:35:09.360 --> 01:35:11.360]  Хотя на самом деле вот определение написано.
[01:35:11.360 --> 01:35:13.360]  Нет, вспоминается
[01:35:13.360 --> 01:35:15.360]  это прямо как в телевизионной своей игре.
[01:35:15.360 --> 01:35:17.360]  Это называется, ведущий
[01:35:17.360 --> 01:35:19.360]  называется, зачитывает вопрос по своей табличке,
[01:35:19.360 --> 01:35:21.360]  хотя за его спиной вопрос на экране.
[01:35:23.360 --> 01:35:25.360]  Ну, в общем, красиво получается,
[01:35:25.360 --> 01:35:27.360]  но он тоже как раз
[01:35:29.360 --> 01:35:31.360]  вот.
[01:35:31.360 --> 01:35:33.360]  Это вот называется l, l, l, l, вот так.
[01:35:33.360 --> 01:35:35.360]  Ну и здесь очевидно, что rich от l
[01:35:35.360 --> 01:35:37.360]  как раз вот больше либора q,
[01:35:37.360 --> 01:35:39.360]  это нас устраивает.
[01:35:39.360 --> 01:35:41.360]  Вот теперь давайте думать
[01:35:41.360 --> 01:35:43.360]  в обратную сторону.
[01:35:43.360 --> 01:35:45.360]  Значит, да, тут
[01:35:45.360 --> 01:35:47.360]  в общем-то само все очевидно.
[01:35:47.360 --> 01:35:49.360]  Давайте предположим, что совершенно случайно
[01:35:49.360 --> 01:35:51.360]  выяснилось, что у нас есть префиксный период
[01:35:51.360 --> 01:35:53.360]  строки s, и неожиданно выяснилось,
[01:35:53.360 --> 01:35:55.360]  что q на l меньше либо равно q.
[01:35:55.360 --> 01:35:57.360]  То есть начало
[01:35:57.360 --> 01:35:59.360]  в общем картинке абсолютно тоже самое.
[01:35:59.360 --> 01:36:01.360]  То есть
[01:36:01.360 --> 01:36:03.360]  жило было вот это вот l.
[01:36:03.360 --> 01:36:05.360]  И выяснилось,
[01:36:05.360 --> 01:36:07.360]  что q на l меньше либо равно q.
[01:36:07.360 --> 01:36:09.360]  В принципе, это мы знаем.
[01:36:09.360 --> 01:36:11.360]  Вот, то есть
[01:36:11.360 --> 01:36:13.360]  оказывается,
[01:36:13.360 --> 01:36:15.360]  что это вот префиксная периодность,
[01:36:15.360 --> 01:36:17.360]  она заканчивается q.
[01:36:17.360 --> 01:36:19.360]  И более того, неожиданно
[01:36:19.360 --> 01:36:21.360]  выяснилось,
[01:36:21.360 --> 01:36:23.360]  то есть неожиданно выяснилось, что это строка l
[01:36:23.360 --> 01:36:25.360]  периодично прям до q.
[01:36:25.360 --> 01:36:27.360]  Да, кстати, это не вся строка,
[01:36:27.360 --> 01:36:29.360]  это нас там правильно нарисовать, чтобы вот q.
[01:36:29.360 --> 01:36:31.360]  А тут еще может быть дальше что-то.
[01:36:31.360 --> 01:36:33.360]  И тут q, и может быть дальше что-то.
[01:36:33.360 --> 01:36:35.360]  Но самое главное для нас
[01:36:35.360 --> 01:36:37.360]  это то, что rich на самом деле
[01:36:37.360 --> 01:36:39.360]  вот тоже идет
[01:36:39.360 --> 01:36:41.360]  куда-нибудь вот там.
[01:36:43.360 --> 01:36:45.360]  Вот так мы рисуем. То есть куда-нибудь дальше q.
[01:36:45.360 --> 01:36:47.360]  У нас
[01:36:47.360 --> 01:36:49.360]  в общем-то интересует до этого момента.
[01:36:49.360 --> 01:36:51.360]  Но выяснилось, что k блоков
[01:36:51.360 --> 01:36:53.360]  здесь на лицо.
[01:36:53.360 --> 01:36:55.360]  Что тогда можно сделать?
[01:36:55.360 --> 01:36:57.360]  Тогда можно заметить,
[01:36:57.360 --> 01:36:59.360]  тогда отсюда
[01:36:59.360 --> 01:37:01.360]  очевидно следует, что, что если это
[01:37:01.360 --> 01:37:03.360]  a, то отсюда
[01:37:03.360 --> 01:37:05.360]  очевидно следует, что a
[01:37:05.360 --> 01:37:07.360]  больше либо равно,
[01:37:07.360 --> 01:37:09.360]  больше либо равно
[01:37:09.360 --> 01:37:11.360]  чем что, чем шизм.
[01:37:19.360 --> 01:37:21.360]  У нас
[01:37:21.360 --> 01:37:23.360]  обязательно
[01:37:23.360 --> 01:37:25.360]  q содержит
[01:37:25.360 --> 01:37:27.360]  именно точно количество
[01:37:27.360 --> 01:37:29.360]  периодов p.
[01:37:31.360 --> 01:37:33.360]  Почему у нас
[01:37:33.360 --> 01:37:35.360]  нарисунки там
[01:37:35.360 --> 01:37:37.360]  содержат ровно
[01:37:37.360 --> 01:37:39.360]  какое-то количество периодов?
[01:37:39.360 --> 01:37:41.360]  Он же может как-бы...
[01:37:41.360 --> 01:37:43.360]  Это потому что
[01:37:43.360 --> 01:37:45.360]  нет, мы совершенно правы, но я просто не очень
[01:37:45.360 --> 01:37:47.360]  удачно нарисовал.
[01:37:47.360 --> 01:37:49.360]  На самом деле я нарисовал здесь, что ведь он заканчивается
[01:37:49.360 --> 01:37:51.360]  чуть раньше. Давайте, чтоб вас это не смущало,
[01:37:51.360 --> 01:37:53.360]  я перенесу эту границу чуть-чуть.
[01:37:55.360 --> 01:37:57.360]  Да, безусловно, конечно,
[01:37:57.360 --> 01:37:59.360]  этого никто не даёт.
[01:38:03.360 --> 01:38:05.360]  Да.
[01:38:05.360 --> 01:38:07.360]  Ладно, как говорят,
[01:38:07.360 --> 01:38:09.360]  как сказали бы очень бедонтичные
[01:38:09.360 --> 01:38:11.360]  математики, q не обязана
[01:38:11.360 --> 01:38:13.360]  быть на границе блоков, хотя
[01:38:13.360 --> 01:38:15.360]  может там находиться.
[01:38:17.360 --> 01:38:19.360]  Вот дайте это классику.
[01:38:19.360 --> 01:38:21.360]  Полином в четвёртой степени это функция вида
[01:38:21.360 --> 01:38:23.360]  ax в четвёртой плюс bx в кубе плюс
[01:38:23.360 --> 01:38:25.360]  c в квадрате плюс dx плюс e,
[01:38:25.360 --> 01:38:27.360]  где e не обязана быть основанием
[01:38:27.360 --> 01:38:29.360]  натурального логариума, но может им быть.
[01:38:33.360 --> 01:38:35.360]  Вот.
[01:38:35.360 --> 01:38:37.360]  Что мы теперь имеем?
[01:38:37.360 --> 01:38:39.360]  Что нам вообще
[01:38:39.360 --> 01:38:41.360]  мешает сказать, что мы
[01:38:41.360 --> 01:38:43.360]  победили? Ну, l меньше либо равно
[01:38:43.360 --> 01:38:45.360]  уделить на h здесь очевидно.
[01:38:45.360 --> 01:38:47.360]  А, ну не очевидно, а просто
[01:38:47.360 --> 01:38:49.360]  то было, то было. Нам надо доказать, что shift
[01:38:49.360 --> 01:38:51.360]  равен l.
[01:38:51.360 --> 01:38:53.360]  Мы знаем, что l это кандидат в shift.
[01:38:55.360 --> 01:38:57.360]  Следовательно, теперь думаем,
[01:38:57.360 --> 01:38:59.360]  а вдруг есть меньше?
[01:39:01.360 --> 01:39:03.360]  У нас вроде
[01:39:03.360 --> 01:39:05.360]  лемма есть.
[01:39:05.360 --> 01:39:07.360]  Нет, ну не совсем.
[01:39:07.360 --> 01:39:09.360]  Ну, лемма, сейчас надо ещё применить
[01:39:09.360 --> 01:39:11.360]  эту лему. Действительно так,
[01:39:11.360 --> 01:39:13.360]  предположим, что совершенно случайно оказалось,
[01:39:13.360 --> 01:39:15.360]  что у нас есть
[01:39:15.360 --> 01:39:17.360]  там, я не знаю.
[01:39:21.360 --> 01:39:23.360]  В общем, l'
[01:39:23.360 --> 01:39:25.360]  в общем, короче, сдвиг меньше.
[01:39:25.360 --> 01:39:27.360]  Ну, тут мы начинаем
[01:39:27.360 --> 01:39:29.360]  пользоваться тем, что даже
[01:39:29.360 --> 01:39:31.360]  2a меньше, чем q.
[01:39:31.360 --> 01:39:33.360]  Ну, потому что
[01:39:33.360 --> 01:39:35.360]  у нас q больше либо равно даже чем
[01:39:35.360 --> 01:39:37.360]  4, на самом деле, да.
[01:39:37.360 --> 01:39:39.360]  Но,
[01:39:39.360 --> 01:39:41.360]  но тогда, что мы знаем?
[01:39:41.360 --> 01:39:43.360]  Тогда, если, тогда уже эта строка
[01:39:43.360 --> 01:39:45.360]  заведомо длиннее, чем l
[01:39:45.360 --> 01:39:47.360]  плюс l', даже.
[01:39:47.360 --> 01:39:49.360]  А из этого следует что?
[01:39:49.360 --> 01:39:51.360]  Правильно. Что на самом деле эта строка
[01:39:51.360 --> 01:39:53.360]  тогда gcd
[01:39:53.360 --> 01:39:55.360]  от l' периодично. Правильно?
[01:39:55.360 --> 01:39:57.360]  Ну да. А значит,
[01:39:57.360 --> 01:39:59.360]  вот это gcd меньше l? Да, да, да.
[01:39:59.360 --> 01:40:01.360]  То есть, если берём gcd,
[01:40:01.360 --> 01:40:03.360]  но если вот это вот это gcd
[01:40:03.360 --> 01:40:05.360]  от l',
[01:40:05.360 --> 01:40:07.360]  даже вот давайте
[01:40:07.360 --> 01:40:09.360]  вот,
[01:40:09.360 --> 01:40:11.360]  или 4,
[01:40:11.360 --> 01:40:13.360]  или такое, то
[01:40:13.360 --> 01:40:15.360]  но тогда мы что видим?
[01:40:15.360 --> 01:40:17.360]  Ну, тогда мы видим, что и эта строка, простите,
[01:40:17.360 --> 01:40:19.360]  не базовая.
[01:40:19.360 --> 01:40:21.360]  Просто она абсолютно не базовая,
[01:40:21.360 --> 01:40:23.360]  потому что её можно распределить на
[01:40:23.360 --> 01:40:25.360]  l' поделить на gcd одинаковых
[01:40:25.360 --> 01:40:27.360]  кусочек.
[01:40:27.360 --> 01:40:29.360]  Вот. Ну, что это тогда значит?
[01:40:29.360 --> 01:40:31.360]  Ну, это значит, что это не префиксный период,
[01:40:31.360 --> 01:40:33.360]  просто потому что в определении префиксного
[01:40:33.360 --> 01:40:35.360]  периода прописано, что это ещё и
[01:40:35.360 --> 01:40:37.360]  базовая строка.
[01:40:43.360 --> 01:40:45.360]  Ну, то есть, видим, что
[01:40:45.360 --> 01:40:47.360]  леммочка тоже не сильно
[01:40:47.360 --> 01:40:49.360]  убольная, согласны?
[01:41:05.360 --> 01:41:07.360]  Значит, ну и соответственно,
[01:41:07.360 --> 01:41:09.360]  ну, в принципе,
[01:41:09.360 --> 01:41:11.360]  значит, ну, в принципе,
[01:41:11.360 --> 01:41:13.360]  на самом деле, да, эти хлеб на самом деле нам
[01:41:13.360 --> 01:41:15.360]  хватит, чтобы хотя бы попытаться
[01:41:15.360 --> 01:41:17.360]  сформулировать, ну, тоже
[01:41:17.360 --> 01:41:19.360]  ещё не полностью, но алгоритм,
[01:41:19.360 --> 01:41:21.360]  правда, который там будет,
[01:41:21.360 --> 01:41:23.360]  как всегда, некоторые данные
[01:41:23.360 --> 01:41:25.360]  запрашивать с небес по факсу.
[01:41:25.360 --> 01:41:27.360]  В какой строке мы применяем теорию?
[01:41:27.360 --> 01:41:29.360]  В какой-то абсолютно
[01:41:29.360 --> 01:41:31.360]  поиспольной строке без.
[01:41:31.360 --> 01:41:33.360]  Нет, нет, нет, вот у нас доказательствия,
[01:41:33.360 --> 01:41:35.360]  у нас же должно быть больше
[01:41:35.360 --> 01:41:37.360]  какого-то размера строка.
[01:41:37.360 --> 01:41:39.360]  А, мы применяем эту теорию
[01:41:39.360 --> 01:41:41.360]  к префиксу длины q строки s.
[01:41:45.360 --> 01:41:47.360]  А почему у нас
[01:41:47.360 --> 01:41:49.360]  q больше
[01:41:49.360 --> 01:41:51.360]  чем s плюс?
[01:41:51.360 --> 01:41:53.360]  Ну, не s, а l плюс l'.
[01:41:53.360 --> 01:41:55.360]  А, очень
[01:41:55.360 --> 01:41:57.360]  просто. Дело в том, что, во-первых, l'
[01:41:57.360 --> 01:41:59.360]  меньше, чем n,
[01:41:59.360 --> 01:42:01.360]  ну, мы же предполагаем,
[01:42:01.360 --> 01:42:03.360]  что и 4 меньше, чем n, да?
[01:42:03.360 --> 01:42:05.360]  А во-вторых, заметим,
[01:42:05.360 --> 01:42:07.360]  что q больше, чем 2.
[01:42:09.360 --> 01:42:11.360]  Потому что она даже больше, чем 4.
[01:42:11.360 --> 01:42:13.360]  А, да, да.
[01:42:13.360 --> 01:42:15.360]  Тут очень интересно получается.
[01:42:15.360 --> 01:42:17.360]  Вот тут, да.
[01:42:17.360 --> 01:42:19.360]  Вот.
[01:42:19.360 --> 01:42:21.360]  Так что вот такая
[01:42:21.360 --> 01:42:23.360]  красота.
[01:42:25.360 --> 01:42:27.360]  Есть ли тут ещё какие-то
[01:42:27.360 --> 01:42:29.360]  вопросы?
[01:42:31.360 --> 01:42:33.360]  Всё понятно?
[01:42:33.360 --> 01:42:35.360]  Всё понятно. Хорошо.
[01:42:35.360 --> 01:42:37.360]  Нет, просто я тогда это должен
[01:42:37.360 --> 01:42:39.360]  ликвидировать, потому что у меня тут
[01:42:39.360 --> 01:42:41.360]  ещё алгоритм надо писать.
[01:42:41.360 --> 01:42:43.360]  Двух досок
[01:42:43.360 --> 01:42:45.360]  недостаточно.
[01:42:47.360 --> 01:42:49.360]  То есть, с одной стороны, двух досок недостаточно,
[01:42:49.360 --> 01:42:51.360]  что с другой стороны, это не та лекция, где вот
[01:42:51.360 --> 01:42:53.360]  все эти определения леммы хочется стирать.
[01:42:53.360 --> 01:42:55.360]  Так вот.
[01:42:55.360 --> 01:42:57.360]  Итак, значит,
[01:42:57.360 --> 01:42:59.360]  леммочка есть?
[01:42:59.360 --> 01:43:01.360]  Лемма раз,
[01:43:01.360 --> 01:43:03.360]  лемма два.
[01:43:05.360 --> 01:43:07.360]  Что?
[01:43:09.360 --> 01:43:11.360]  Нет, ну, смотри,
[01:43:11.360 --> 01:43:13.360]  в том-то и смысл, что хочется,
[01:43:13.360 --> 01:43:15.360]  чтобы весь написанный текст оставался
[01:43:15.360 --> 01:43:17.360]  на доске.
[01:43:17.360 --> 01:43:19.360]  Потому что где-то так-то
[01:43:19.360 --> 01:43:21.360]  можно делать что угодно там.
[01:43:21.360 --> 01:43:23.360]  Да, доску можно повергнуть там,
[01:43:23.360 --> 01:43:25.360]  мел тут где-то и валяется, но я могу там
[01:43:25.360 --> 01:43:27.360]  сберить, раздобрить это там.
[01:43:27.360 --> 01:43:29.360]  Или вообще можно там достать экран
[01:43:29.360 --> 01:43:31.360]  и я там буду статью показывать.
[01:43:31.360 --> 01:43:33.360]  Пожалуйста.
[01:43:33.360 --> 01:43:35.360]  То есть, тем более, что, по-моему,
[01:43:35.360 --> 01:43:37.360]  надо вспомнить,
[01:43:37.360 --> 01:43:39.360]  честно это,
[01:43:39.360 --> 01:43:41.360]  на сколько в общем доступ
[01:43:41.360 --> 01:43:43.360]  это статья находить.
[01:43:43.360 --> 01:43:45.360]  Она 82 года, поэтому вполне вероятно, что
[01:43:45.360 --> 01:43:47.360]  можно и так сделать.
[01:43:47.360 --> 01:43:49.360]  Хотя, честно говоря, я вообще этот алгоритм, по-моему,
[01:43:49.360 --> 01:43:51.360]  написание даже на русском языке, если честно.
[01:43:51.360 --> 01:43:53.360]  Ну, тоже так.
[01:43:53.360 --> 01:43:55.360]  82 год, то есть алгоритм придумали не вчера,
[01:43:55.360 --> 01:43:57.360]  поэтому, возможно,
[01:43:57.360 --> 01:43:59.360]  кто-то его уже переописал.
[01:43:59.360 --> 01:44:01.360]  Так вот. И так пришло
[01:44:01.360 --> 01:44:03.360]  время алгоритма.
[01:44:03.360 --> 01:44:05.360]  А, нет,
[01:44:05.360 --> 01:44:07.360]  не пришло время алгоритма.
[01:44:07.360 --> 01:44:09.360]  А теперь придется, а теперь,
[01:44:09.360 --> 01:44:11.360]  вот вы тут говорили о теореме.
[01:44:13.360 --> 01:44:15.360]  Так вот. Ой, я ее
[01:44:15.360 --> 01:44:17.360]  даже, наверное,
[01:44:17.360 --> 01:44:19.360]  придется ввести
[01:44:19.360 --> 01:44:21.360]  новый маркер.
[01:44:21.360 --> 01:44:23.360]  Давайте введу новый маркер,
[01:44:23.360 --> 01:44:25.360]  какой-то красивый.
[01:44:25.360 --> 01:44:27.360]  Ой, так.
[01:44:27.360 --> 01:44:29.360]  Мы в этой теореме красным не пользовались.
[01:44:29.360 --> 01:44:31.360]  Да, мы пользовались только рыжим.
[01:44:31.360 --> 01:44:33.360]  Ладно, давайте
[01:44:33.360 --> 01:44:35.360]  воспользуемся красным. Внимание!
[01:44:35.360 --> 01:44:37.360]  Теорема
[01:44:37.360 --> 01:44:39.360]  о
[01:44:39.360 --> 01:44:41.360]  те композиции.
[01:44:47.360 --> 01:44:49.360]  Оп!
[01:44:57.360 --> 01:44:59.360]  Внимание!
[01:44:59.360 --> 01:45:01.360]  Любую строку П
[01:45:07.360 --> 01:45:09.360]  можно
[01:45:09.360 --> 01:45:11.360]  разбить
[01:45:15.360 --> 01:45:17.360]  Разбить
[01:45:17.360 --> 01:45:19.360]  на вот две строки.
[01:45:19.360 --> 01:45:21.360]  То есть сказать, что
[01:45:21.360 --> 01:45:23.360]  П равно УП.
[01:45:27.360 --> 01:45:29.360]  Где?
[01:45:33.360 --> 01:45:35.360]  Ну, давайте так.
[01:45:35.360 --> 01:45:37.360]  Первая.
[01:45:39.360 --> 01:45:41.360]  У В
[01:45:41.360 --> 01:45:43.360]  не
[01:45:43.360 --> 01:45:45.360]  более одного
[01:45:51.360 --> 01:45:53.360]  префиксного периода.
[01:46:09.360 --> 01:46:11.360]  И вторая.
[01:46:15.360 --> 01:46:17.360]  И вторая.
[01:46:17.360 --> 01:46:19.360]  Для нас еще будет важно,
[01:46:19.360 --> 01:46:21.360]  что длина строки У
[01:46:21.360 --> 01:46:23.360]  будет равна
[01:46:23.360 --> 01:46:25.360]  очень сметанеющей.
[01:46:25.360 --> 01:46:27.360]  О, вот.
[01:46:29.360 --> 01:46:31.360]  Шифт
[01:46:35.360 --> 01:46:37.360]  О
[01:46:39.360 --> 01:46:41.360]  Шифт
[01:46:45.360 --> 01:46:47.360]  Чего?
[01:46:47.360 --> 01:46:49.360]  Странно, конечно.
[01:46:49.360 --> 01:46:51.360]  То есть мы теперь смотрим на префиксные
[01:46:51.360 --> 01:46:53.360]  периоды суффиксов.
[01:46:55.360 --> 01:46:57.360]  У нас появляется
[01:46:57.360 --> 01:46:59.360]  Нет, смотрите, фишка такая.
[01:47:01.360 --> 01:47:03.360]  Просто, ну, утверждение
[01:47:03.360 --> 01:47:05.360]  Утверждение здесь будет такое.
[01:47:05.360 --> 01:47:07.360]  Нам просто будет
[01:47:07.360 --> 01:47:09.360]  очень удобно
[01:47:09.360 --> 01:47:11.360]  будет искать
[01:47:11.360 --> 01:47:13.360]  подстроку в строке,
[01:47:13.360 --> 01:47:15.360]  если у этой подстроки не более одного
[01:47:15.360 --> 01:47:17.360]  префиксного периода.
[01:47:19.360 --> 01:47:21.360]  И мы и будем. Значит, да, сразу
[01:47:21.360 --> 01:47:23.360]  уговорить теорему мы, пока и не сегодня, доказывать не будем.
[01:47:25.360 --> 01:47:27.360]  Да, вот, ровно тут начинается мистика.
[01:47:27.360 --> 01:47:29.360]  Но там еще два проблем.
[01:47:29.360 --> 01:47:31.360]  Во-первых, надо теорему доказать.
[01:47:31.360 --> 01:47:33.360]  Во-вторых, там самого доказательства
[01:47:33.360 --> 01:47:35.360]  будет недостаточно, надо еще
[01:47:35.360 --> 01:47:37.360]  предъявить эффективный алгоритм,
[01:47:37.360 --> 01:47:39.360]  потому что алгоритм потребует
[01:47:39.360 --> 01:47:41.360]  не только это разбиение,
[01:47:41.360 --> 01:47:43.360]  но и, собственно, желательно вот этот сдвиг.
[01:47:45.360 --> 01:47:47.360]  Не, ну ладно, там в ложке, правда,
[01:47:47.360 --> 01:47:49.360]  константом будет что-то типа
[01:47:49.360 --> 01:47:51.360]  четыре трети, на самом деле.
[01:47:51.360 --> 01:47:53.360]  Да, кстати, алгоритм
[01:47:53.360 --> 01:47:55.360]  хорошо себя рекламирует.
[01:47:55.360 --> 01:47:57.360]  Он упреждает, что сравнение символов
[01:47:57.360 --> 01:47:59.360]  будет не более чем
[01:47:59.360 --> 01:48:01.360]  что-то типа 5M.
[01:48:05.360 --> 01:48:07.360]  Вот, кстати, еще приятно.
[01:48:09.360 --> 01:48:11.360]  Ну, значит, идея
[01:48:11.360 --> 01:48:13.360]  будет заключаться в следующем.
[01:48:13.360 --> 01:48:15.360]  То есть идея будет такая, что
[01:48:15.360 --> 01:48:17.360]  давайте пытаться искать
[01:48:17.360 --> 01:48:19.360]  все вхождения строки В
[01:48:19.360 --> 01:48:21.360]  под каким-нибудь вот этим алгоритмом.
[01:48:23.360 --> 01:48:25.360]  А потом будем говорить,
[01:48:25.360 --> 01:48:27.360]  что хорошо, мы найдем
[01:48:27.360 --> 01:48:29.360]  все вхождения строки В,
[01:48:29.360 --> 01:48:31.360]  но заметим, что
[01:48:31.360 --> 01:48:33.360]  каждое вхождение,
[01:48:33.360 --> 01:48:35.360]  которое мы найдем, к каждому из них
[01:48:35.360 --> 01:48:37.360]  будем честно за О от У проверять,
[01:48:37.360 --> 01:48:39.360]  нельзя ли к нему там слева перерисовать
[01:48:39.360 --> 01:48:41.360]  еще В.
[01:48:43.360 --> 01:48:45.360]  В чем, обратите внимание, уже из этой теории
[01:48:45.360 --> 01:48:47.360]  мы следуем, почему само
[01:48:47.360 --> 01:48:49.360]  по себе перерисовывание
[01:48:49.360 --> 01:48:51.360]  вот этого У,
[01:48:51.360 --> 01:48:53.360]  вот это перерисовывание У,
[01:48:53.360 --> 01:48:55.360]  на самом деле асимптотики нам не испортят.
[01:48:57.360 --> 01:49:01.360]  Вот давайте себе представим,
[01:49:01.360 --> 01:49:03.360]  за какое время будут работать
[01:49:03.360 --> 01:49:05.360]  собственно проверки У.
[01:49:07.360 --> 01:49:09.360]  Вот смотрите.
[01:49:09.360 --> 01:49:11.360]  Жил был наш любимый
[01:49:11.360 --> 01:49:13.360]  текст Т.
[01:49:17.360 --> 01:49:19.360]  Наши вхождения в текст Т
[01:49:19.360 --> 01:49:21.360]  не больше, чем
[01:49:21.360 --> 01:49:23.360]  генотетерит на шипство В.
[01:49:23.360 --> 01:49:25.360]  Ну или, ну я вот по-другому
[01:49:25.360 --> 01:49:27.360]  немножко сформулирую,
[01:49:27.360 --> 01:49:29.360]  может быть, такую более простую мысль,
[01:49:29.360 --> 01:49:31.360]  из которой следует твоя формулировка.
[01:49:31.360 --> 01:49:33.360]  Я скажу так. Допустим,
[01:49:33.360 --> 01:49:35.360]  у меня есть
[01:49:35.360 --> 01:49:37.360]  вхождение строки П.
[01:49:39.360 --> 01:49:43.360]  Где может быть следующее?
[01:49:45.360 --> 01:49:47.360]  Ну, заметим, что
[01:49:47.360 --> 01:49:49.360]  вот эта штука обязана быть
[01:49:49.360 --> 01:49:51.360]  больше либо равна,
[01:49:51.360 --> 01:49:53.360]  чем, соответственно,
[01:49:53.360 --> 01:49:55.360]  шифт П
[01:49:55.360 --> 01:49:57.360]  от модуль П.
[01:49:59.360 --> 01:50:01.360]  Ну условно, логично, да?
[01:50:01.360 --> 01:50:03.360]  Или в нашем случае,
[01:50:03.360 --> 01:50:05.360]  если это П, это В,
[01:50:05.360 --> 01:50:07.360]  то я здесь везде пишу В.
[01:50:13.360 --> 01:50:15.360]  Логично, да?
[01:50:17.360 --> 01:50:19.360]  То есть получается
[01:50:19.360 --> 01:50:21.360]  расстояние между вхождениями,
[01:50:21.360 --> 01:50:23.360]  минимум, шифт от В.
[01:50:23.360 --> 01:50:25.360]  Следовательно, действительно,
[01:50:25.360 --> 01:50:27.360]  самих вхождений будет не более,
[01:50:27.360 --> 01:50:29.360]  чем Т поделить на шифт.
[01:50:29.360 --> 01:50:31.360]  И, как следствие,
[01:50:31.360 --> 01:50:33.360]  все сравнения У,
[01:50:33.360 --> 01:50:35.360]  потому что каждая мысль сравнивает У,
[01:50:35.360 --> 01:50:37.360]  только когда мы точно убедились, что В тут есть, да?
[01:50:37.360 --> 01:50:39.360]  То есть сравнить вот это.
[01:50:39.360 --> 01:50:41.360]  Они будут делаться за О от,
[01:50:41.360 --> 01:50:43.360]  получается, У умножить
[01:50:43.360 --> 01:50:45.360]  на Т поделить на шифт от В,
[01:50:45.360 --> 01:50:47.360]  то есть получается О от Т.
[01:50:47.360 --> 01:50:49.360]  То есть, следовательно, вот эта вот
[01:50:49.360 --> 01:50:51.360]  гарантия того, что
[01:50:51.360 --> 01:50:53.360]  достаточно искать
[01:50:53.360 --> 01:50:55.360]  только под строки В,
[01:50:55.360 --> 01:50:57.360]  и это нас застроит.
[01:50:59.360 --> 01:51:01.360]  Все?
[01:51:01.360 --> 01:51:03.360]  Значит, что я сейчас говорю?
[01:51:03.360 --> 01:51:05.360]  Я говорю, значит, еще раз попытаюсь.
[01:51:05.360 --> 01:51:07.360]  Теорию мы не доказываем, мы в нее верим.
[01:51:07.360 --> 01:51:09.360]  Но я утверждаю следующее.
[01:51:09.360 --> 01:51:11.360]  Теперь, с точки зрения алгоритма,
[01:51:11.360 --> 01:51:13.360]  я утверждаю, что все, что нам нужно,
[01:51:13.360 --> 01:51:15.360]  это найти, перечислить.
[01:51:15.360 --> 01:51:17.360]  Конечно, у нас единицы памяти,
[01:51:17.360 --> 01:51:19.360]  все вхождения мы, конечно, в В записать не можем,
[01:51:19.360 --> 01:51:21.360]  но хочется в том или ином
[01:51:21.360 --> 01:51:23.360]  виде перечислить все вхождения
[01:51:23.360 --> 01:51:25.360]  именно строки В.
[01:51:25.360 --> 01:51:27.360]  Не все строки П, но только
[01:51:27.360 --> 01:51:29.360]  такой строки В.
[01:51:29.360 --> 01:51:31.360]  Почему этого достаточно,
[01:51:31.360 --> 01:51:33.360]  если мы это за линию сделаем?
[01:51:33.360 --> 01:51:35.360]  Достаточно это
[01:51:35.360 --> 01:51:37.360]  вот почему.
[01:51:37.360 --> 01:51:39.360]  Дело в том, что мы можем заметить,
[01:51:39.360 --> 01:51:41.360]  что любые два вхождения строки В
[01:51:41.360 --> 01:51:43.360]  в тексте,
[01:51:43.360 --> 01:51:45.360]  они, между ними,
[01:51:45.360 --> 01:51:47.360]  их начало по позициям
[01:51:47.360 --> 01:51:49.360]  находится на расстоянии, как минимум,
[01:51:49.360 --> 01:51:51.360]  вот это. Правда?
[01:51:55.360 --> 01:51:57.360]  Логично, да?
[01:51:57.360 --> 01:51:59.360]  Ну, потому что shift это буквально.
[01:51:59.360 --> 01:52:01.360]  На какой минимальный число символов можно тут сдвинуть
[01:52:01.360 --> 01:52:03.360]  строку В, чтобы тот префикс совпал с суфиксом?
[01:52:03.360 --> 01:52:05.360]  Правда? Прямо по определению.
[01:52:07.360 --> 01:52:09.360]  Отсюда автоматически следует,
[01:52:09.360 --> 01:52:11.360]  что количество вхождения
[01:52:11.360 --> 01:52:13.360]  В в Т,
[01:52:13.360 --> 01:52:15.360]  количество вхождений
[01:52:21.360 --> 01:52:23.360]  В в Т
[01:52:23.360 --> 01:52:25.360]  не превосходит
[01:52:25.360 --> 01:52:27.360]  модуль Т делить на
[01:52:27.360 --> 01:52:29.360]  shift.
[01:52:31.360 --> 01:52:33.360]  Ну ладно, чтобы совсем формально было
[01:52:33.360 --> 01:52:35.360]  плюс 1, конечно.
[01:52:35.360 --> 01:52:37.360]  Потому что есть первое, а каждое следующее
[01:52:37.360 --> 01:52:39.360]  плюс shift, плюс shift, плюс shift.
[01:52:39.360 --> 01:52:41.360]  Хотя ладно.
[01:52:41.360 --> 01:52:43.360]  Скорее всего, ну давайте
[01:52:43.360 --> 01:52:45.360]  напишем плюс 1, потому что нам по барабану.
[01:52:45.360 --> 01:52:47.360]  По хорошему, конечно, если очень внимательно посмотреть,
[01:52:47.360 --> 01:52:49.360]  тогда на плюс 1 можно избавиться.
[01:52:51.360 --> 01:52:53.360]  Ну да,
[01:52:53.360 --> 01:52:55.360]  его можно избавиться, потому что
[01:52:55.360 --> 01:52:57.360]  для каждого вхождения
[01:52:57.360 --> 01:52:59.360]  существует его префикс,
[01:52:59.360 --> 01:53:01.360]  на который в качестве начала другого
[01:53:01.360 --> 01:53:03.360]  вхождения никто не посягает.
[01:53:03.360 --> 01:53:05.360]  Следовательно, плюс 1 можно даже не писать.
[01:53:05.360 --> 01:53:07.360]  Вот.
[01:53:07.360 --> 01:53:09.360]  Это мелочь.
[01:53:09.360 --> 01:53:11.360]  Вот.
[01:53:11.360 --> 01:53:13.360]  Просто дело тогда такое.
[01:53:13.360 --> 01:53:15.360]  Предположим, что у нас будет алгоритм,
[01:53:15.360 --> 01:53:17.360]  а у нас будет алгоритм,
[01:53:17.360 --> 01:53:19.360]  который перечислит
[01:53:19.360 --> 01:53:21.360]  в том или ином виде
[01:53:21.360 --> 01:53:23.360]  все вхождения строки В через Т.
[01:53:23.360 --> 01:53:25.360]  Ну представьте себе, что мы пишем алгоритм
[01:53:25.360 --> 01:53:27.360]  на питоне и пишем его
[01:53:27.360 --> 01:53:29.360]  в формате генератора.
[01:53:31.360 --> 01:53:33.360]  Понятно, о чем я говорю?
[01:53:33.360 --> 01:53:35.360]  Да, у нас был генератор.
[01:53:35.360 --> 01:53:37.360]  Может, у вас там генераторов не было,
[01:53:37.360 --> 01:53:39.360]  я не знаю.
[01:53:39.360 --> 01:53:41.360]  Ну понятно, малы вероятны, конечно,
[01:53:41.360 --> 01:53:43.360]  что у вас такой красоты не было.
[01:53:43.360 --> 01:53:45.360]  Тем более, что в питоне это святое.
[01:53:45.360 --> 01:53:47.360]  Ну то есть, предположим, что мы там
[01:53:47.360 --> 01:53:49.360]  просто в этом алгоритме каждое очередное
[01:53:49.360 --> 01:53:51.360]  вхождение, которое мы нашли, мы там
[01:53:51.360 --> 01:53:53.360]  называем, конечно, умное слово, Yield.
[01:53:55.360 --> 01:53:57.360]  Ну вот, соответственно.
[01:53:57.360 --> 01:53:59.360]  Или Yield.
[01:53:59.360 --> 01:54:01.360]  Yield.
[01:54:01.360 --> 01:54:03.360]  Игры или Yield.
[01:54:03.360 --> 01:54:05.360]  Вот.
[01:54:05.360 --> 01:54:07.360]  Так вот, теперь алгоритм такой.
[01:54:07.360 --> 01:54:09.360]  Запускаем этот генератор, и он нам Yield
[01:54:09.360 --> 01:54:11.360]  вот эти все В.
[01:54:11.360 --> 01:54:13.360]  Тогда каждой найденной В
[01:54:13.360 --> 01:54:15.360]  мы проверяем,
[01:54:15.360 --> 01:54:17.360]  а нельзя ли к этой В
[01:54:17.360 --> 01:54:19.360]  привисовать еще и ушку слева.
[01:54:19.360 --> 01:54:21.360]  Проверяем честно за U.
[01:54:21.360 --> 01:54:23.360]  И тогда получается,
[01:54:23.360 --> 01:54:25.360]  тогда сама по себе проверка
[01:54:25.360 --> 01:54:27.360]  ушек будет работать за вот это
[01:54:27.360 --> 01:54:29.360]  умножить на U.
[01:54:29.360 --> 01:54:31.360]  Но если U это O от шифта,
[01:54:31.360 --> 01:54:33.360]  то тогда тут шлеп-шлеп получается O от D.
[01:54:35.360 --> 01:54:37.360]  То есть, таким образом,
[01:54:37.360 --> 01:54:39.360]  мы с вами, пока имели идейно,
[01:54:39.360 --> 01:54:41.360]  свели задачу
[01:54:41.360 --> 01:54:43.360]  к тому, что
[01:54:43.360 --> 01:54:45.360]  вот, ну не свели задачу,
[01:54:45.360 --> 01:54:47.360]  но там вот к двум задачам.
[01:54:47.360 --> 01:54:49.360]  Во-первых, как за O от P действительно
[01:54:49.360 --> 01:54:51.360]  найти такую-нибудь композицию?
[01:54:51.360 --> 01:54:53.360]  Эту мы сегодня решать не будем.
[01:54:53.360 --> 01:54:55.360]  И второе,
[01:54:55.360 --> 01:54:57.360]  как найти все вхождения
[01:54:57.360 --> 01:54:59.360]  строки, у которой
[01:54:59.360 --> 01:55:01.360]  не более одного
[01:55:01.360 --> 01:55:03.360]  префиксного периода.
[01:55:05.360 --> 01:55:07.360]  То есть, мы как бы теперь,
[01:55:07.360 --> 01:55:09.360]  то есть, мы как бы ввели на шаблон требования.
[01:55:17.360 --> 01:55:19.360]  Ну, на самом деле, идея
[01:55:19.360 --> 01:55:21.360]  здесь очень простая.
[01:55:23.360 --> 01:55:25.360]  На самом деле, они нам говорят,
[01:55:25.360 --> 01:55:27.360]  значит, просто
[01:55:27.360 --> 01:55:29.360]  если мы в это поверим,
[01:55:29.360 --> 01:55:31.360]  если мы в это поверим,
[01:55:31.360 --> 01:55:33.360]  то сейчас будет немножко баня.
[01:55:35.360 --> 01:55:37.360]  Значит, если мы сейчас верим
[01:55:37.360 --> 01:55:39.360]  в эту,
[01:55:39.360 --> 01:55:41.360]  если мы верим в эту
[01:55:41.360 --> 01:55:43.360]  сеть,
[01:55:45.360 --> 01:55:47.360]  то получается,
[01:55:47.360 --> 01:55:49.360]  то алгоритм значит такой,
[01:55:49.360 --> 01:55:51.360]  ну, то есть,
[01:55:51.360 --> 01:55:53.360]  то значит, нас сейчас
[01:55:53.360 --> 01:55:55.360]  интересует что?
[01:55:55.360 --> 01:55:57.360]  Нас сейчас интересует,
[01:55:57.360 --> 01:55:59.360]  как мы будем
[01:55:59.360 --> 01:56:01.360]  превращать
[01:56:01.360 --> 01:56:03.360]  P Q
[01:56:03.360 --> 01:56:05.360]  в
[01:56:05.360 --> 01:56:07.360]  P' Q'
[01:56:11.360 --> 01:56:13.360]  Ну, вот. То есть, нас
[01:56:13.360 --> 01:56:15.360]  вот этот шаг будет интересовать.
[01:56:15.360 --> 01:56:17.360]  И при этом, ищем
[01:56:17.360 --> 01:56:19.360]  В
[01:56:19.360 --> 01:56:21.360]  В вот так.
[01:56:25.360 --> 01:56:27.360]  Смотрите.
[01:56:27.360 --> 01:56:29.360]  В случае номер изя.
[01:56:33.360 --> 01:56:35.360]  Видите, в случае номер изя.
[01:56:35.360 --> 01:56:37.360]  У В нет
[01:56:39.360 --> 01:56:41.360]  префиксного периода.
[01:56:47.360 --> 01:56:49.360]  Вот можем себе представить
[01:56:49.360 --> 01:56:51.360]  вот пусть у нас в легкий случай
[01:56:51.360 --> 01:56:53.360]  префиксного периода нет вообще.
[01:57:03.360 --> 01:57:05.360]  Тогда
[01:57:07.360 --> 01:57:09.360]  сейчас
[01:57:09.360 --> 01:57:11.360]  тогда решение будет
[01:57:11.360 --> 01:57:13.360]  неожиданно тупо.
[01:57:13.360 --> 01:57:15.360]  Тогда P' Q'
[01:57:17.360 --> 01:57:19.360]  равно
[01:57:19.360 --> 01:57:21.360]  вообще, просто неожиданные вещи.
[01:57:35.360 --> 01:57:37.360]  Все.
[01:57:37.360 --> 01:57:39.360]  Все.
[01:57:49.360 --> 01:57:51.360]  Ну, ладно.
[01:57:51.360 --> 01:57:53.360]  Тут, конечно, надо еще подписать кое-что.
[01:57:53.360 --> 01:57:55.360]  P плюс максимум
[01:57:55.360 --> 01:57:57.360]  из вот этой штуки
[01:57:57.360 --> 01:57:59.360]  и единицы, конечно.
[01:58:01.360 --> 01:58:03.360]  Ну, Q' может так нулемой остаться,
[01:58:03.360 --> 01:58:05.360]  как бы,
[01:58:05.360 --> 01:58:07.360]  ну, Q' может так нулемой остаться,
[01:58:07.360 --> 01:58:09.360]  как там Антон уже правильно говорил.
[01:58:15.360 --> 01:58:17.360]  Ну, вот. Внимательно
[01:58:17.360 --> 01:58:19.360]  посмотрите на доску
[01:58:19.360 --> 01:58:21.360]  и скажите мне, откуда
[01:58:21.360 --> 01:58:23.360]  я это гляну.
[01:58:23.360 --> 01:58:25.360]  То есть, мы, по сути, утверждаем,
[01:58:25.360 --> 01:58:27.360]  что у нас уже не может быть точно в хождении
[01:58:27.360 --> 01:58:29.360]  В.
[01:58:29.360 --> 01:58:31.360]  Ну, вот. Начинаешься от P
[01:58:31.360 --> 01:58:33.360]  до P плюс максимум.
[01:58:33.360 --> 01:58:35.360]  От P плюс Q'
[01:58:35.360 --> 01:58:37.360]  Ну, потому что если оно есть,
[01:58:37.360 --> 01:58:39.360]  то вот
[01:58:39.360 --> 01:58:41.360]  и префикс длины Q как раз,
[01:58:41.360 --> 01:58:43.360]  вот тот, на котором мы сейчас,
[01:58:43.360 --> 01:58:45.360]  и тот, который будет в хождении,
[01:58:45.360 --> 01:58:47.360]  у них разница между их началами
[01:58:47.360 --> 01:58:49.360]  меньше, чем Q' на K,
[01:58:49.360 --> 01:58:51.360]  ну, не больше, строго.
[01:58:51.360 --> 01:58:53.360]  А значит, тогда как раз префикс длины
[01:58:53.360 --> 01:58:55.360]  Q' на K, он, ну, как бы
[01:58:55.360 --> 01:58:57.360]  этот шифт, он
[01:58:59.360 --> 01:59:01.360]  хотя бы 4 раза подряд встречается.
[01:59:01.360 --> 01:59:03.360]  А шифт еще и базовый,
[01:59:03.360 --> 01:59:05.360]  то есть, это префиксный период, который
[01:59:05.360 --> 01:59:07.360]  существует.
[01:59:07.360 --> 01:59:09.360]  Ну, на самом деле, это рассуждение было уже
[01:59:09.360 --> 01:59:11.360]  как черный ящик зашиться вот сюда.
[01:59:13.360 --> 01:59:15.360]  Да.
[01:59:15.360 --> 01:59:17.360]  То есть, он примерно воспринимал доказательство
[01:59:17.360 --> 01:59:19.360]  этого утверждения.
[01:59:19.360 --> 01:59:21.360]  То есть, действительно. То есть, это утверждение говорит,
[01:59:21.360 --> 01:59:23.360]  то есть, если его развернуть, звучит так.
[01:59:23.360 --> 01:59:25.360]  Если у этого, значит,
[01:59:25.360 --> 01:59:27.360]  если у S нет префиксного периода,
[01:59:27.360 --> 01:59:29.360]  то шифт от Q
[01:59:29.360 --> 01:59:31.360]  заведомо, строго больше
[01:59:31.360 --> 01:59:33.360]  или больше либо равен, чем
[01:59:33.360 --> 01:59:35.360]  Q' делить на K,
[01:59:35.360 --> 01:59:37.360]  округленное вверх.
[01:59:37.360 --> 01:59:39.360]  Ну, просто больше либо равен, чем Q' делить на K,
[01:59:39.360 --> 01:59:41.360]  а значит, еще и округленное вверх.
[01:59:51.360 --> 01:59:53.360]  То есть, поэтому я тут просто приписываю
[01:59:53.360 --> 01:59:55.360]  в тупо лемма один.
[01:59:55.360 --> 01:59:57.360]  Но вот теперь самое
[01:59:57.360 --> 01:59:59.360]  интересное.
[02:00:01.360 --> 02:00:03.360]  Самое интересное.
[02:00:03.360 --> 02:00:05.360]  Хорошо.
[02:00:05.360 --> 02:00:07.360]  То есть, это, конечно, очень удобно.
[02:00:07.360 --> 02:00:09.360]  То есть, алгоритм предельно тупой.
[02:00:09.360 --> 02:00:11.360]  То есть, я беру P, насчитываю в нем
[02:00:11.360 --> 02:00:13.360]  типа Z функцию, а потом каждый раз
[02:00:13.360 --> 02:00:15.360]  скачу вперед на четвертую
[02:00:15.360 --> 02:00:17.360]  часть отнасчитанной Z функции.
[02:00:17.360 --> 02:00:19.360]  Внимание, вопрос.
[02:00:21.360 --> 02:00:23.360]  Так, теперь внимание, вопрос.
[02:00:23.360 --> 02:00:25.360]  А вот, если мы подставим такие
[02:00:25.360 --> 02:00:27.360]  P' в Q' них, будет ли это работать
[02:00:27.360 --> 02:00:29.360]  за линейное время?
[02:00:35.360 --> 02:00:37.360]  Ну, вроде должно, потому что
[02:00:37.360 --> 02:00:39.360]  на каждое тупое прибавление Q'
[02:00:39.360 --> 02:00:41.360]  один, потом
[02:00:41.360 --> 02:00:43.360]  в Q' один,
[02:00:43.360 --> 02:00:45.360]  и в Q' один,
[02:00:45.360 --> 02:00:47.360]  на каждое тупое прибавление Q' один,
[02:00:47.360 --> 02:00:49.360]  потом мы сделаем сдвиг
[02:00:49.360 --> 02:00:51.360]  на одну четверть.
[02:00:51.360 --> 02:00:53.360]  На каждое четыре прибавления в тупую,
[02:00:53.360 --> 02:00:55.360]  у нас сдвиг этого P' на один вправо.
[02:01:05.360 --> 02:01:07.360]  Ну,
[02:01:07.360 --> 02:01:09.360]  на каждое
[02:01:09.360 --> 02:01:11.360]  четыре
[02:01:11.360 --> 02:01:13.360]  сдвига Q'
[02:01:13.360 --> 02:01:15.360]  у нас будет вот
[02:01:15.360 --> 02:01:17.360]  в этом цикле.
[02:01:17.360 --> 02:01:19.360]  Каждая конкретная Q' может двигаться
[02:01:19.360 --> 02:01:21.360]  с нуля сколько угодно, но
[02:01:21.360 --> 02:01:23.360]  на каждые четыре шага, идущие подряд
[02:01:23.360 --> 02:01:25.360]  Q' мы заявляем, что P'
[02:01:25.360 --> 02:01:27.360]  хотя бы на один увеличится.
[02:01:27.360 --> 02:01:29.360]  Ну да, но если это не последний какой-то шаг.
[02:01:29.360 --> 02:01:31.360]  Ну да, кроме последнего шага,
[02:01:31.360 --> 02:01:33.360]  который мы отбрасываем.
[02:01:33.360 --> 02:01:35.360]  Получается, четверок
[02:01:35.360 --> 02:01:37.360]  Q'
[02:01:37.360 --> 02:01:39.360]  будет суммарно
[02:01:39.360 --> 02:01:41.360]  не более чем. Получается, суммарно
[02:01:41.360 --> 02:01:43.360]  и текушки будут увеличиваться не более
[02:01:43.360 --> 02:01:45.360]  чем на
[02:01:45.360 --> 02:01:47.360]  4n, ну kn.
[02:01:47.360 --> 02:01:49.360]  Ну, может там k плюс 1n.
[02:01:49.360 --> 02:01:51.360]  Так, вообще-то
[02:01:51.360 --> 02:01:53.360]  странно. Вот, кстати, те самые
[02:01:53.360 --> 02:01:55.360]  5n, в смысле 5 модуль
[02:01:55.360 --> 02:01:57.360]  t, в общем-то уже и вырезаны.
[02:01:57.360 --> 02:01:59.360]  Нет, не 5 модуль, а 5 модуль
[02:01:59.360 --> 02:02:01.360]  t.
[02:02:01.360 --> 02:02:03.360]  Так, то есть понятно,
[02:02:03.360 --> 02:02:05.360]  почему алгоритм с такими
[02:02:05.360 --> 02:02:07.360]  поштрих-пуштрих работает за лиги.
[02:02:07.360 --> 02:02:09.360]  Да, нет, наверное.
[02:02:09.360 --> 02:02:11.360]  Да-да.
[02:02:15.360 --> 02:02:17.360]  Так, если не понятно,
[02:02:17.360 --> 02:02:19.360]  если не понятно, лучше переспросить.
[02:02:19.360 --> 02:02:21.360]  Потому что зрителям тоже может быть непонятно.
[02:02:31.360 --> 02:02:33.360]  Почему мы можем применить
[02:02:33.360 --> 02:02:35.360]  Y1?
[02:02:35.360 --> 02:02:37.360]  Потому что, смотри, мы прописали,
[02:02:37.360 --> 02:02:39.360]  что у V нет
[02:02:39.360 --> 02:02:41.360]  префиксного периода вообще.
[02:02:41.360 --> 02:02:43.360]  А мы еще обхождение есть именно в F.
[02:02:43.360 --> 02:02:45.360]  Сейчас смотрим.
[02:02:45.360 --> 02:02:47.360]  Вот мы тут, теперь мы насчитаем,
[02:02:47.360 --> 02:02:49.360]  мы говорим.
[02:02:49.360 --> 02:02:51.360]  Так, вот жили-были мы,
[02:02:51.360 --> 02:02:53.360]  вот мы где-то в позиции P
[02:02:53.360 --> 02:02:55.360]  и насчитали префикс длины Q.
[02:02:55.360 --> 02:02:57.360]  То есть вот, просто
[02:02:57.360 --> 02:02:59.360]  в V-шке это вот
[02:02:59.360 --> 02:03:01.360]  префикс длины Q.
[02:03:01.360 --> 02:03:03.360]  Теперь мы можем
[02:03:03.360 --> 02:03:05.360]  сдвинуть P на
[02:03:05.360 --> 02:03:07.360]  фактически shift
[02:03:07.360 --> 02:03:09.360]  от Q. Правда?
[02:03:11.360 --> 02:03:13.360]  На shift с
[02:03:13.360 --> 02:03:15.360]  индексом V от Q можем сдвинуть.
[02:03:15.360 --> 02:03:17.360]  Правда?
[02:03:17.360 --> 02:03:19.360]  Ну как там завещали?
[02:03:19.360 --> 02:03:21.360]  Shift, да, shift причем строки V.
[02:03:23.360 --> 02:03:25.360]  Но теперь заметим следующее.
[02:03:25.360 --> 02:03:27.360]  Префиксного периода
[02:03:27.360 --> 02:03:29.360]  у строки V
[02:03:29.360 --> 02:03:31.360]  нет.
[02:03:31.360 --> 02:03:33.360]  Тогда, согласно лейме 1,
[02:03:33.360 --> 02:03:35.360]  из этого следует, что shift
[02:03:35.360 --> 02:03:37.360]  от Q тогда должен быть строго
[02:03:37.360 --> 02:03:39.360]  больше, чем Q поделить на K.
[02:03:41.360 --> 02:03:43.360]  Поэтому мы четырим
[02:03:43.360 --> 02:03:45.360]  следующим образом. Мы не знаем,
[02:03:45.360 --> 02:03:47.360]  чему равен shift, но мы знаем, что он
[02:03:47.360 --> 02:03:49.360]  больше, чем Q на K. Поэтому давайте
[02:03:49.360 --> 02:03:51.360]  тупо на Q на K сдвинем и будем
[02:03:51.360 --> 02:03:53.360]  соответственно дальше засекать
[02:03:53.360 --> 02:03:55.360]  в тупую.
[02:03:55.360 --> 02:03:57.360]  То есть видим, что мы тут
[02:03:57.360 --> 02:03:59.360]  из Q этот shift не вычитаем, а
[02:03:59.360 --> 02:04:01.360]  просто говорим, давайте с нуля и не заморачиваемся.
[02:04:03.360 --> 02:04:05.360]  Вот такая идея у нас.
[02:04:07.360 --> 02:04:09.360]  Это был вопрос
[02:04:09.360 --> 02:04:11.360]  на тему того, почему этот алгоритм
[02:04:11.360 --> 02:04:13.360]  вообще работает.
[02:04:15.360 --> 02:04:17.360]  Тут два всегда вопроса. Почему алгоритм работает
[02:04:17.360 --> 02:04:19.360]  и почему он работает быстро?
[02:04:21.360 --> 02:04:23.360]  Есть ли еще вопросы, почему этот
[02:04:23.360 --> 02:04:25.360]  алгоритм работает правильно?
[02:04:29.360 --> 02:04:31.360]  Есть вопросы?
[02:04:33.360 --> 02:04:35.360]  Нет вопросов?
[02:04:35.360 --> 02:04:37.360]  Ни у кого нет вопросов.
[02:04:37.360 --> 02:04:39.360]  А почему работает он
[02:04:39.360 --> 02:04:41.360]  быстро, тоже понятно?
[02:04:45.360 --> 02:04:47.360]  Сейчас только что был
[02:04:47.360 --> 02:04:49.360]  вопрос на тему того, почему этот
[02:04:49.360 --> 02:04:51.360]  алгоритм работает.
[02:04:51.360 --> 02:04:53.360]  Не было вопросов, что он работает
[02:04:53.360 --> 02:04:55.360]  быстро?
[02:04:55.360 --> 02:04:57.360]  Ну нет.
[02:04:57.360 --> 02:04:59.360]  Почему?
[02:04:59.360 --> 02:05:01.360]  На эту тему пока вопросов
[02:05:01.360 --> 02:05:03.360]  не было. Я пытался спрашивать, все ли понятно,
[02:05:03.360 --> 02:05:05.360]  но вместо этого
[02:05:05.360 --> 02:05:07.360]  вспомнил вопрос, почему он работает.
[02:05:07.360 --> 02:05:09.360]  Поэтому я уточняю. Есть ли еще
[02:05:09.360 --> 02:05:11.360]  вопросы на тему, понятно ли, почему
[02:05:11.360 --> 02:05:13.360]  вот предложенный алгоритм работает за
[02:05:13.360 --> 02:05:15.360]  линейное время?
[02:05:17.360 --> 02:05:19.360]  Можете еще раз это повторить?
[02:05:19.360 --> 02:05:21.360]  Почему у нас, когда мы
[02:05:21.360 --> 02:05:23.360]  сбрасываем до нуля,
[02:05:23.360 --> 02:05:25.360]  это не возвращается в какую-то большую
[02:05:25.360 --> 02:05:27.360]  связь?
[02:05:27.360 --> 02:05:29.360]  Заметим, что у нас
[02:05:29.360 --> 02:05:31.360]  в хождении, ну то есть
[02:05:31.360 --> 02:05:33.360]  давайте теперь я так порисую.
[02:05:33.360 --> 02:05:35.360]  Gил, нолт, хб. Мы начинаем
[02:05:35.360 --> 02:05:37.360]  с нуля и мы обрабатываем.
[02:05:37.360 --> 02:05:39.360]  Сначала у нас есть
[02:05:39.360 --> 02:05:41.360]  позиция х0,
[02:05:41.360 --> 02:05:43.360]  потом позиция х1,
[02:05:43.360 --> 02:05:45.360]  потом позиция х2,
[02:05:45.360 --> 02:05:47.360]  потом позиция х3,
[02:05:49.360 --> 02:05:51.360]  ну они там так куда-то
[02:05:51.360 --> 02:05:53.360]  доходят,
[02:05:53.360 --> 02:05:55.360]  так куда-то доходят и так далее.
[02:05:55.360 --> 02:05:57.360]  Так куда-то доходят,
[02:05:57.360 --> 02:05:59.360]  там их несколько.
[02:06:01.360 --> 02:06:03.360]  При этом мы
[02:06:03.360 --> 02:06:05.360]  проходим, получается
[02:06:05.360 --> 02:06:07.360]  длинные q1,
[02:06:07.360 --> 02:06:09.360]  q2, вот может
[02:06:09.360 --> 02:06:11.360]  q0,
[02:06:19.360 --> 02:06:21.360]  ну да.
[02:06:21.360 --> 02:06:23.360]  То есть мы начинаем,
[02:06:23.360 --> 02:06:25.360]  проходим q0, q1, q2
[02:06:25.360 --> 02:06:27.360]  и так далее.
[02:06:27.360 --> 02:06:29.360]  То есть получается,
[02:06:29.360 --> 02:06:31.360]  наше время работает,
[02:06:31.360 --> 02:06:33.360]  то есть наше время
[02:06:33.360 --> 02:06:35.360]  оно на самом деле
[02:06:35.360 --> 02:06:37.360]  примерно o от q0
[02:06:37.360 --> 02:06:39.360]  плюс q1, плюс q2,
[02:06:39.360 --> 02:06:41.360]  плюс и так далее,
[02:06:41.360 --> 02:06:43.360]  плюс q там какой-нибудь там
[02:06:43.360 --> 02:06:45.360]  colt, col-1,
[02:06:45.360 --> 02:06:47.360]  ну и плюс там
[02:06:47.360 --> 02:06:49.360]  mt, ну и плюс там mt.
[02:06:49.360 --> 02:06:51.360]  А q у нас же
[02:06:51.360 --> 02:06:53.360]  не больше,
[02:06:53.360 --> 02:06:55.360]  не больше чем 1п?
[02:06:55.360 --> 02:06:57.360]  Да, нет, но q,
[02:06:57.360 --> 02:06:59.360]  на самом деле, да,
[02:06:59.360 --> 02:07:01.360]  то есть каждая qt,
[02:07:01.360 --> 02:07:03.360]  оно,
[02:07:03.360 --> 02:07:05.360]  каждая qt,
[02:07:05.360 --> 02:07:07.360]  оно чему, оно
[02:07:07.360 --> 02:07:09.360]  фактически чему равно?
[02:07:09.360 --> 02:07:11.360]  Оно на самом деле не превосходит
[02:07:11.360 --> 02:07:13.360]  x и плюс 1,
[02:07:13.360 --> 02:07:15.360]  минус x иt,
[02:07:15.360 --> 02:07:17.360]  умножить на k.
[02:07:25.360 --> 02:07:27.360]  Логично, да?
[02:07:29.360 --> 02:07:31.360]  Тогда получается,
[02:07:31.360 --> 02:07:33.360]  то есть это получается
[02:07:33.360 --> 02:07:35.360]  меньше либо равно, чем o от
[02:07:35.360 --> 02:07:37.360]  значит
[02:07:37.360 --> 02:07:39.360]  x1 минус x0 на k,
[02:07:39.360 --> 02:07:41.360]  плюс x2 минус
[02:07:41.360 --> 02:07:43.360]  x1 на k,
[02:07:43.360 --> 02:07:45.360]  плюс там x3 минус
[02:07:45.360 --> 02:07:47.360]  x2 на k, там плюс
[02:07:47.360 --> 02:07:49.360]  и так далее, плюс mt.
[02:07:49.360 --> 02:07:51.360]  Но если я это все посуммирую,
[02:07:51.360 --> 02:07:53.360]  то это получается равно o от
[02:07:53.360 --> 02:07:55.360]  mt умножить на
[02:07:55.360 --> 02:07:57.360]  там что-то типа k плюс s.
[02:07:57.360 --> 02:07:59.360]  Но как-то это константа.
[02:07:59.360 --> 02:08:01.360]  Вот.
[02:08:01.360 --> 02:08:03.360]  Ну то есть вообразить
[02:08:03.360 --> 02:08:05.360]  себе можно так,
[02:08:05.360 --> 02:08:07.360]  что
[02:08:07.360 --> 02:08:09.360]  вообразить себе можно так,
[02:08:09.360 --> 02:08:11.360]  что допустим
[02:08:13.360 --> 02:08:15.360]  ну вот
[02:08:17.360 --> 02:08:19.360]  ну да, то есть по сути, да, то есть заметим,
[02:08:19.360 --> 02:08:21.360]  что
[02:08:21.360 --> 02:08:23.360]  правильно сказали, что
[02:08:23.360 --> 02:08:25.360]  каждые 4 прохода кушки
[02:08:25.360 --> 02:08:27.360]  за каждые 4 прохода кушки
[02:08:27.360 --> 02:08:29.360]  мы получается
[02:08:29.360 --> 02:08:31.360]  на каждые 4 прохода кушки мы тратим монетку
[02:08:31.360 --> 02:08:33.360]  мы тратим монетку
[02:08:33.360 --> 02:08:35.360]  сдвига
[02:08:35.360 --> 02:08:37.360]  будущего, следующего начала
[02:08:37.360 --> 02:08:39.360]  и сдвигать это начало мы можем не более,
[02:08:39.360 --> 02:08:41.360]  чем t раз.
[02:08:41.360 --> 02:08:43.360]  Ну можно еще и так, вот тут какая-то такая идея
[02:08:43.360 --> 02:08:45.360]  вот, честно говоря,
[02:08:45.360 --> 02:08:47.360]  может совсем прям красивый амортизационный
[02:08:47.360 --> 02:08:49.360]  образ придумать.
[02:08:51.360 --> 02:08:53.360]  Ну хотя, видите, в основной действительно
[02:08:53.360 --> 02:08:55.360]  каждые 4 шага кушки это как бы
[02:08:55.360 --> 02:08:57.360]  один шаг больше.
[02:08:57.360 --> 02:08:59.360]  Вот, получается красота, ну по модулю того,
[02:08:59.360 --> 02:09:01.360]  что откуда такую v взять?
[02:09:03.360 --> 02:09:05.360]  Поэтому теперь давайте попробуем
[02:09:05.360 --> 02:09:07.360]  более сложный
[02:09:07.360 --> 02:09:09.360]  что-то более сложное.
[02:09:11.360 --> 02:09:13.360]  Значит давайте
[02:09:13.360 --> 02:09:15.360]  попробуем.
[02:09:15.360 --> 02:09:17.360]  Значит это я сейчас все убираю.
[02:09:17.360 --> 02:09:19.360]  Ну, то есть
[02:09:19.360 --> 02:09:21.360]  амортизационная логика это будет более-менее
[02:09:21.360 --> 02:09:23.360]  та же,
[02:09:23.360 --> 02:09:25.360]  но теперь будет чуть-чуть более сложная.
[02:09:27.360 --> 02:09:29.360]  Значит b
[02:09:31.360 --> 02:09:33.360]  если же
[02:09:35.360 --> 02:09:37.360]  у v
[02:09:41.360 --> 02:09:43.360]  есть
[02:09:43.360 --> 02:09:45.360]  единственное, внимание,
[02:09:45.360 --> 02:09:47.360]  единственное
[02:09:51.360 --> 02:09:53.360]  префиксный период f
[02:09:57.360 --> 02:09:59.360]  и вот
[02:10:01.360 --> 02:10:03.360]  f
[02:10:03.360 --> 02:10:05.360]  1
[02:10:05.360 --> 02:10:07.360]  ну, в смысле все спало.
[02:10:11.360 --> 02:10:13.360]  То
[02:10:13.360 --> 02:10:15.360]  идея такая.
[02:10:19.360 --> 02:10:21.360]  Значит первое.
[02:10:23.360 --> 02:10:25.360]  Значит
[02:10:25.360 --> 02:10:27.360]  при
[02:10:27.360 --> 02:10:29.360]  хп1
[02:10:29.360 --> 02:10:31.360]  меньше либо равно
[02:10:33.360 --> 02:10:35.360]  f это префиксный период?
[02:10:37.360 --> 02:10:39.360]  Чего?
[02:10:39.360 --> 02:10:41.360]  хп1 это префиксный период
[02:10:41.360 --> 02:10:43.360]  или просто период?
[02:10:43.360 --> 02:10:45.360]  Префиксный, ну как бы
[02:10:45.360 --> 02:10:47.360]  все время требовалось префиксный период.
[02:10:47.360 --> 02:10:49.360]  Значит мы будем прибыть. Вот пусть мы
[02:10:49.360 --> 02:10:51.360]  знаем, что v не просто единственный
[02:10:51.360 --> 02:10:53.360]  префиксный период, но мы еще его откуда-то
[02:10:53.360 --> 02:10:55.360]  выкопали.
[02:10:55.360 --> 02:10:57.360]  Да, нам для алгоритма придется его знать.
[02:10:57.360 --> 02:10:59.360]  Тогда, смотри.
[02:10:59.360 --> 02:11:01.360]  Тогда, когда мы насчитали х,
[02:11:01.360 --> 02:11:03.360]  предложение будет следующее.
[02:11:03.360 --> 02:11:05.360]  То есть, если выяснится,
[02:11:05.360 --> 02:11:07.360]  что хп1 меньше либо равно
[02:11:07.360 --> 02:11:09.360]  проверить это легко, потому что
[02:11:09.360 --> 02:11:11.360]  хп1 мы заранее знаем,
[02:11:11.360 --> 02:11:13.360]  ричадп1 мы тоже можем заранее
[02:11:13.360 --> 02:11:15.360]  быстренько вычислить. Правда?
[02:11:17.360 --> 02:11:19.360]  Вот, поэтому это для нас
[02:11:19.360 --> 02:11:21.360]  большой проблемой не будет.
[02:11:21.360 --> 02:11:23.360]  Но, тогда, раз так,
[02:11:23.360 --> 02:11:25.360]  то тогда, в этом случае,
[02:11:25.360 --> 02:11:27.360]  что мы должны сделать?
[02:11:27.360 --> 02:11:29.360]  Ну, мы можем леммой 2, видимо, воспользоваться.
[02:11:29.360 --> 02:11:31.360]  Да, мы можем воспользоваться
[02:11:31.360 --> 02:11:33.360]  леммой 2.
[02:11:33.360 --> 02:11:35.360]  Что это верно тогда и только тогда,
[02:11:35.360 --> 02:11:37.360]  когда получается шифт ради
[02:11:37.360 --> 02:11:39.360]  чему?
[02:11:39.360 --> 02:11:41.360]  Префиксному периоду строки С,
[02:11:41.360 --> 02:11:43.360]  правда?
[02:11:43.360 --> 02:11:45.360]  То есть,
[02:11:45.360 --> 02:11:47.360]  то есть, префиксному периоду,
[02:11:47.360 --> 02:11:49.360]  но тогда, действительно,
[02:11:49.360 --> 02:11:51.360]  то есть, тогда пишем, что
[02:11:51.360 --> 02:11:53.360]  pq просто превращается
[02:11:53.360 --> 02:11:55.360]  в p плюс p1
[02:11:55.360 --> 02:11:57.360]  q минус p1.
[02:11:59.360 --> 02:12:01.360]  Заметим, что
[02:12:01.360 --> 02:12:03.360]  действительно, в этом смысле,
[02:12:03.360 --> 02:12:05.360]  то есть, в этом смысле, да,
[02:12:05.360 --> 02:12:07.360]  то есть, амортизация тут не совсем такая получается,
[02:12:07.360 --> 02:12:09.360]  но замечаем, что у нас, получается,
[02:12:09.360 --> 02:12:11.360]  правый указатель никуда не сдвинулся.
[02:12:11.360 --> 02:12:13.360]  То есть, как мы тему решим прайти.
[02:12:13.360 --> 02:12:15.360]  Вот, нашли префикс, значит,
[02:12:15.360 --> 02:12:17.360]  начинаем отсюда и знаем, что до сюда
[02:12:17.360 --> 02:12:19.360]  уж точно дойдем.
[02:12:19.360 --> 02:12:21.360]  Вот. Ну, сейчас давайте я вторую допишу,
[02:12:21.360 --> 02:12:23.360]  потом мы попробуем.
[02:12:23.360 --> 02:12:25.360]  Ну, вот.
[02:12:25.360 --> 02:12:27.360]  Ну, а если иначе?
[02:12:27.360 --> 02:12:29.360]  Ну, а
[02:12:29.360 --> 02:12:31.360]  если обнаружилось, что это
[02:12:31.360 --> 02:12:33.360]  не верно,
[02:12:35.360 --> 02:12:37.360]  то что тогда можно сказать?
[02:12:39.360 --> 02:12:41.360]  Ну, тут
[02:12:41.360 --> 02:12:43.360]  странно.
[02:12:43.360 --> 02:12:45.360]  Потому что в таком виде, конечно, утверждение
[02:12:45.360 --> 02:12:47.360]  говорит, что если вот это случается
[02:12:47.360 --> 02:12:49.360]  и не верно,
[02:12:49.360 --> 02:12:51.360]  ну, как бы, то
[02:12:51.360 --> 02:12:53.360]  тогда утверждается, что
[02:12:53.360 --> 02:12:55.360]  shift, на самом деле, будет просто строго
[02:12:55.360 --> 02:12:57.360]  больше, чем q на х.
[02:12:57.360 --> 02:12:59.360]  И все, что мы делаем тогда, это
[02:12:59.360 --> 02:13:01.360]  как всегда.
[02:13:01.360 --> 02:13:03.360]  Значит, пишем тут
[02:13:03.360 --> 02:13:05.360]  p плюс
[02:13:05.360 --> 02:13:07.360]  максимум, как всегда,
[02:13:07.360 --> 02:13:09.360]  из q на k
[02:13:09.360 --> 02:13:11.360]  1.
[02:13:11.360 --> 02:13:13.360]  Вот.
[02:13:13.360 --> 02:13:15.360]  И дальше, соответственно, пишем.
[02:13:19.360 --> 02:13:21.360]  Вот. Ну, и здесь, соответственно, пишем.
[02:13:21.360 --> 02:13:23.360]  Швы будет больше, чем q на k,
[02:13:23.360 --> 02:13:25.360]  потому что если он не больше, то по лейме 1
[02:13:25.360 --> 02:13:27.360]  это и будет как раз
[02:13:27.360 --> 02:13:29.360]  примерно так.
[02:13:29.360 --> 02:13:31.360]  Ну, получается, так. Да, действительно.
[02:13:31.360 --> 02:13:33.360]  Да.
[02:13:33.360 --> 02:13:35.360]  То есть, действительно, какой тут должен быть shift?
[02:13:35.360 --> 02:13:37.360]  Да. Если shift будет...
[02:13:37.360 --> 02:13:39.360]  Да, то есть, получается, тут пишем лемма
[02:13:39.360 --> 02:13:41.360]  2.
[02:13:41.360 --> 02:13:43.360]  Ну, а тут получается обе леммы.
[02:13:43.360 --> 02:13:45.360]  Давайте внимательно посмотрим.
[02:13:45.360 --> 02:13:47.360]  Значит, как получится?
[02:13:47.360 --> 02:13:49.360]  То есть, действительно, какой shift должен быть?
[02:13:49.360 --> 02:13:51.360]  То есть, если тут shift оказывается
[02:13:51.360 --> 02:13:53.360]  меньше либо равен, чем q делить на k,
[02:13:53.360 --> 02:13:55.360]  действительно,
[02:13:55.360 --> 02:13:57.360]  то оказывается, что это
[02:13:57.360 --> 02:13:59.360]  префиксный период s.
[02:14:01.360 --> 02:14:03.360]  И тогда надо сдвигаться на
[02:14:03.360 --> 02:14:05.360]  p1.
[02:14:07.360 --> 02:14:09.360]  Нет, хотя нет, погодите.
[02:14:09.360 --> 02:14:11.360]  А может быть, он и есть префиксный период?
[02:14:13.360 --> 02:14:15.360]  Ну, p1.
[02:14:15.360 --> 02:14:17.360]  Вдруг p1? Здесь же никто не требует.
[02:14:17.360 --> 02:14:19.360]  Может, вот это утверждение верно?
[02:14:21.360 --> 02:14:23.360]  А может быть, вот это не верно?
[02:14:23.360 --> 02:14:25.360]  Не может, потому что мы уже по лемме 1
[02:14:25.360 --> 02:14:27.360]  как раз понимаем, что shift будет обязательно
[02:14:27.360 --> 02:14:29.360]  префиксным периодом s, а у него
[02:14:29.360 --> 02:14:31.360]  единственный префиксный период p1.
[02:14:31.360 --> 02:14:33.360]  Ну, а кто сказал, что l не равно
[02:14:33.360 --> 02:14:35.360]  по стату по p1?
[02:14:37.360 --> 02:14:39.360]  Тогда, наверное, правая часть по лемме 2 же.
[02:14:45.360 --> 02:14:47.360]  Ну, так, прям полностью верно.
[02:14:47.360 --> 02:14:49.360]  Ну, еще раз. То есть, мы сейчас
[02:14:49.360 --> 02:14:51.360]  говорим, что если вот правая часть не
[02:14:51.360 --> 02:14:53.360]  верна по лемме 2, то мы хотим сказать, что shift
[02:14:53.360 --> 02:14:55.360]  больше, чем q делить на k.
[02:14:55.360 --> 02:14:57.360]  Почему? Если он не больше,
[02:14:57.360 --> 02:14:59.360]  то по лемме 1 бы замещать shift
[02:14:59.360 --> 02:15:01.360]  и будет равен
[02:15:01.360 --> 02:15:03.360]  p1. Ну, тогда по лемме 2
[02:15:03.360 --> 02:15:05.360]  будет верна правая часть.
[02:15:05.360 --> 02:15:07.360]  Ну, тут, правда, какая из них не верна?
[02:15:11.360 --> 02:15:13.360]  Так, ну давайте разбираться.
[02:15:13.360 --> 02:15:15.360]  Так, нет, нет.
[02:15:15.360 --> 02:15:17.360]  Сейчас может быть равен p1,
[02:15:17.360 --> 02:15:19.360]  но тогда он будет все равно больше q
[02:15:19.360 --> 02:15:21.360]  на q.
[02:15:21.360 --> 02:15:23.360]  Ну, shift может быть
[02:15:23.360 --> 02:15:25.360]  равен и p1,
[02:15:25.360 --> 02:15:27.360]  shift может быть равен и p1,
[02:15:27.360 --> 02:15:29.360]  и меньше p1, и больше p1.
[02:15:29.360 --> 02:15:31.360]  Нет, нет. Вроде все же работает.
[02:15:31.360 --> 02:15:33.360]  Так, ну давайте разбираться.
[02:15:33.360 --> 02:15:35.360]  Мы хотим показать, что shift от садков больше,
[02:15:35.360 --> 02:15:37.360]  чем q на q, чтобы показать,
[02:15:37.360 --> 02:15:39.360]  что мы можем на q сдвинуться. Да.
[02:15:39.360 --> 02:15:41.360]  Ну, предположим, что это не так.
[02:15:41.360 --> 02:15:43.360]  Так, пусть shift действительно
[02:15:43.360 --> 02:15:45.360]  меньше либо равно q на q.
[02:15:45.360 --> 02:15:47.360]  Тогда по лемме 1 shift
[02:15:47.360 --> 02:15:49.360]  равен линии префесного перевода s.
[02:15:49.360 --> 02:15:51.360]  То есть равен обязательно
[02:15:51.360 --> 02:15:53.360]  p1. Да.
[02:15:53.360 --> 02:15:55.360]  Да, он равен p1.
[02:15:55.360 --> 02:15:57.360]  Ну, тогда p1 равен shift
[02:15:57.360 --> 02:15:59.360]  не больше q на q. Да, по лемме 2
[02:15:59.360 --> 02:16:01.360]  p1 на q не больше q
[02:16:01.360 --> 02:16:03.360]  не больше, чем reach s от p1.
[02:16:03.360 --> 02:16:05.360]  Это вот первый случай в пункте b.
[02:16:05.360 --> 02:16:07.360]  Так, хорошо. То есть это утверждение верно.
[02:16:07.360 --> 02:16:09.360]  То есть ладно, это утверждение
[02:16:09.360 --> 02:16:11.360]  тогда в этом случае верно. Если там
[02:16:11.360 --> 02:16:13.360]  вот это верно, да?
[02:16:13.360 --> 02:16:15.360]  Ну, с другой стороны, тогда, ну вот,
[02:16:15.360 --> 02:16:17.360]  тогда нигде пока
[02:16:17.360 --> 02:16:19.360]  противоречия не вижу.
[02:16:19.360 --> 02:16:21.360]  Ну, противоречие с тем, что shift
[02:16:21.360 --> 02:16:23.360]  не больше q на q. Ну, с тем, что вот
[02:16:23.360 --> 02:16:25.360]  мы в пункте 2, вот тут внизу,
[02:16:25.360 --> 02:16:27.360]  и с тем, что shift не больше q на q.
[02:16:27.360 --> 02:16:29.360]  Ну, как бы нет.
[02:16:29.360 --> 02:16:31.360]  Ну, само в себе
[02:16:31.360 --> 02:16:33.360]  ну, как бы нет. В этом пункте
[02:16:33.360 --> 02:16:35.360]  говорится, что пока мы знаем только одно,
[02:16:35.360 --> 02:16:37.360]  что kp1 может быть меньше либо равно q
[02:16:37.360 --> 02:16:39.360]  во втором пункте, просто при этом может быть,
[02:16:39.360 --> 02:16:41.360]  что q как бы
[02:16:41.360 --> 02:16:43.360]  строго больше. Ну, да-да-да.
[02:16:43.360 --> 02:16:45.360]  То есть в первой части l2
[02:16:45.360 --> 02:16:47.360]  l2 не верно, значит первая тоже.
[02:16:47.360 --> 02:16:49.360]  Ну, а если shift не больше q на q, то первая часть верна.
[02:16:49.360 --> 02:16:51.360]  Так, хорошо.
[02:16:51.360 --> 02:16:53.360]  Значит, если это не верно,
[02:16:53.360 --> 02:16:55.360]  то это тоже не верно.
[02:16:55.360 --> 02:16:57.360]  А так как вот это верно, то получается,
[02:16:57.360 --> 02:16:59.360]  что l не равно p1.
[02:16:59.360 --> 02:17:01.360]  Так.
[02:17:01.360 --> 02:17:03.360]  Если shift не больше q на q,
[02:17:03.360 --> 02:17:05.360]  то по лейме 1 shift
[02:17:05.360 --> 02:17:07.360]  будет прежним периодом s.
[02:17:07.360 --> 02:17:09.360]  А у нас единственный прежний период
[02:17:09.360 --> 02:17:11.360]  у s, он и есть p1.
[02:17:11.360 --> 02:17:13.360]  А l2 будет равен shift не больше,
[02:17:13.360 --> 02:17:15.360]  чем q.
[02:17:15.360 --> 02:17:17.360]  Так.
[02:17:17.360 --> 02:17:19.360]  Ну, да.
[02:17:19.360 --> 02:17:21.360]  А, ну да, l.
[02:17:21.360 --> 02:17:23.360]  Да, он так...
[02:17:23.360 --> 02:17:25.360]  Ну, да, правда может быть,
[02:17:25.360 --> 02:17:27.360]  что этого...
[02:17:27.360 --> 02:17:29.360]  Ну и что? Ну, правда.
[02:17:29.360 --> 02:17:31.360]  Так, не, при l это прежний период.
[02:17:31.360 --> 02:17:33.360]  Допустим, это p1.
[02:17:33.360 --> 02:17:35.360]  Но при этом, может быть,
[02:17:35.360 --> 02:17:37.360]  так, сейчас.
[02:17:37.360 --> 02:17:39.360]  А, ну да, по лейме 1 этот shift
[02:17:39.360 --> 02:17:41.360]  еще и претекстный период.
[02:17:41.360 --> 02:17:43.360]  Поэтому они равны l меньше либо равно k.
[02:17:43.360 --> 02:17:45.360]  Да, противоречие.
[02:17:45.360 --> 02:17:47.360]  Вроде да.
[02:17:47.360 --> 02:17:49.360]  Все, нет, все еще нет?
[02:17:49.360 --> 02:17:51.360]  Так, ладно, давайте как все то же самое,
[02:17:51.360 --> 02:17:53.360]  но в текстом подпишем.
[02:17:55.360 --> 02:17:57.360]  Значит, смотрим.
[02:17:57.360 --> 02:17:59.360]  Итак.
[02:17:59.360 --> 02:18:01.360]  Значит, поехали.
[02:18:01.360 --> 02:18:03.360]  Итак, значит, вот в этом случае,
[02:18:03.360 --> 02:18:05.360]  вот во втором,
[02:18:05.360 --> 02:18:07.360]  пишем рассуждение.
[02:18:07.360 --> 02:18:09.360]  Значит, хотим показать,
[02:18:09.360 --> 02:18:11.360]  что shift,
[02:18:11.360 --> 02:18:13.360]  давайте, аккуратненько,
[02:18:13.360 --> 02:18:15.360]  хотим показать,
[02:18:15.360 --> 02:18:17.360]  что shift
[02:18:17.360 --> 02:18:19.360]  с индексом v
[02:18:19.360 --> 02:18:21.360]  от q строго больше,
[02:18:21.360 --> 02:18:23.360]  чем q поделить на.
[02:18:23.360 --> 02:18:25.360]  Ну, фактически,
[02:18:25.360 --> 02:18:27.360]  там это достаточно попадается.
[02:18:27.360 --> 02:18:29.360]  Значит, поехали.
[02:18:31.360 --> 02:18:33.360]  Значит, от абсурда.
[02:18:33.360 --> 02:18:35.360]  К
[02:18:35.360 --> 02:18:37.360]  допустим умножить
[02:18:37.360 --> 02:18:39.360]  на shift.
[02:18:39.360 --> 02:18:41.360]  В от q оказалось
[02:18:41.360 --> 02:18:43.360]  меньше либо равно.
[02:18:45.360 --> 02:18:47.360]  Вот, а лучше
[02:18:47.360 --> 02:18:49.360]  shift это
[02:18:49.360 --> 02:18:51.360]  не шли бы.
[02:18:51.360 --> 02:18:53.360]  Вот.
[02:18:53.360 --> 02:18:55.360]  По лейме
[02:18:55.360 --> 02:18:57.360]  1
[02:18:57.360 --> 02:18:59.360]  значит,
[02:18:59.360 --> 02:19:01.360]  значит, s от
[02:19:01.360 --> 02:19:03.360]  1, ладно, v
[02:19:03.360 --> 02:19:05.360]  от 1
[02:19:05.360 --> 02:19:07.360]  shift
[02:19:07.360 --> 02:19:09.360]  v
[02:19:11.360 --> 02:19:13.360]  префиксны.
[02:19:17.360 --> 02:19:19.360]  И вот.
[02:19:19.360 --> 02:19:21.360]  Ну, как минимум,
[02:19:21.360 --> 02:19:23.360]  v от 1
[02:19:27.360 --> 02:19:29.360]  и 7v.
[02:19:29.360 --> 02:19:31.360]  Ну, понятно, если он
[02:19:31.360 --> 02:19:33.360]  как бы префиксный период какой-то v-шки,
[02:19:33.360 --> 02:19:35.360]  то он и префиксный период сестры.
[02:19:35.360 --> 02:19:37.360]  Правда?
[02:19:37.360 --> 02:19:39.360]  Значит, из этого
[02:19:39.360 --> 02:19:41.360]  автоматически следует,
[02:19:41.360 --> 02:19:43.360]  ну, так как у нас
[02:19:43.360 --> 02:19:45.360]  помним, что v единственный
[02:19:45.360 --> 02:19:47.360]  допоминаем префиксный период.
[02:19:47.360 --> 02:19:49.360]  То есть, из этого следует,
[02:19:51.360 --> 02:19:53.360]  shift v
[02:19:53.360 --> 02:19:55.360]  от q
[02:19:55.360 --> 02:19:57.360]  равно тупо p1.
[02:19:59.360 --> 02:20:01.360]  Вот.
[02:20:07.360 --> 02:20:09.360]  Тогда,
[02:20:09.360 --> 02:20:11.360]  то есть, тогда
[02:20:11.360 --> 02:20:13.360]  получается
[02:20:13.360 --> 02:20:15.360]  этот p1
[02:20:15.360 --> 02:20:17.360]  равно
[02:20:17.360 --> 02:20:19.360]  shift v
[02:20:19.360 --> 02:20:21.360]  от q
[02:20:21.360 --> 02:20:23.360]  меньше либо равно q поделить на k.
[02:20:23.360 --> 02:20:25.360]  И тогда
[02:20:25.360 --> 02:20:27.360]  по лейме 2
[02:20:27.360 --> 02:20:29.360]  из этого следует,
[02:20:29.360 --> 02:20:31.360]  что k на p1,
[02:20:31.360 --> 02:20:33.360]  прям честно лему переписываю,
[02:20:33.360 --> 02:20:35.360]  меньше либо равно q,
[02:20:35.360 --> 02:20:37.360]  значит,
[02:20:37.360 --> 02:20:39.360]  меньше либо равно reach,
[02:20:41.360 --> 02:20:43.360]  значит, с индексом
[02:20:43.360 --> 02:20:45.360]  получается той же самой v
[02:20:47.360 --> 02:20:49.360]  от l.
[02:20:49.360 --> 02:20:51.360]  А l в нашем случае p1.
[02:20:53.360 --> 02:20:55.360]  Так.
[02:20:57.360 --> 02:20:59.360]  Так.
[02:20:59.360 --> 02:21:01.360]  Так.
[02:21:01.360 --> 02:21:03.360]  Ну, вот.
[02:21:03.360 --> 02:21:05.360]  Но,
[02:21:05.360 --> 02:21:07.360]  а противоречие в чем?
[02:21:07.360 --> 02:21:09.360]  А противоречие в том, что
[02:21:09.360 --> 02:21:11.360]  это другой случай.
[02:21:23.360 --> 02:21:25.360]  То есть, получается, что
[02:21:25.360 --> 02:21:27.360]  получается, что так можно.
[02:21:27.360 --> 02:21:29.360]  Получается, что так можно.
[02:21:29.360 --> 02:21:31.360]  И получается,
[02:21:31.360 --> 02:21:33.360]  мы победили.
[02:21:33.360 --> 02:21:35.360]  Остается только теперь
[02:21:35.360 --> 02:21:37.360]  более аккуратно взглянуть на это
[02:21:37.360 --> 02:21:39.360]  и посмотреть, почему вот эта теперь
[02:21:39.360 --> 02:21:41.360]  версия начинает работать за линию.
[02:21:41.360 --> 02:21:43.360]  Ну, слава богу, в случае вот этих мы можем,
[02:21:43.360 --> 02:21:45.360]  если нам p1 кто-то из кармана
[02:21:45.360 --> 02:21:47.360]  достал,
[02:21:47.360 --> 02:21:49.360]  вот кто-то взял,
[02:21:49.360 --> 02:21:51.360]  да, действительно, достал он
[02:21:51.360 --> 02:21:53.360]  из кармана, ну вот,
[02:21:53.360 --> 02:21:55.360]  мы легко можем убедиться в том,
[02:21:55.360 --> 02:21:57.360]  что мы-то как бы за вот единицы
[02:21:57.360 --> 02:21:59.360]  можем на каждом шаге проверять, какой случай реализовался.
[02:21:59.360 --> 02:22:01.360]  Правда?
[02:22:01.360 --> 02:22:03.360]  Но теперь получается следующее, что
[02:22:03.360 --> 02:22:05.360]  в первом случае получается
[02:22:05.360 --> 02:22:07.360]  каждое увеличение куб,
[02:22:07.360 --> 02:22:09.360]  то есть, по сути,
[02:22:09.360 --> 02:22:11.360]  получается так. Каждое...
[02:22:15.360 --> 02:22:17.360]  Ну, тут вот не совсем так.
[02:22:17.360 --> 02:22:19.360]  Нет, хотя нет, так.
[02:22:21.360 --> 02:22:23.360]  Тут
[02:22:23.360 --> 02:22:25.360]  хитрость такая,
[02:22:25.360 --> 02:22:27.360]  что, на самом деле,
[02:22:27.360 --> 02:22:29.360]  видите, пэшка получается
[02:22:29.360 --> 02:22:31.360]  увеличиться на...
[02:22:31.360 --> 02:22:33.360]  То есть, тут так, с одной стороны,
[02:22:33.360 --> 02:22:35.360]  пэшка увеличится на...
[02:22:35.360 --> 02:22:37.360]  всего лишь на p1.
[02:22:37.360 --> 02:22:39.360]  Ну вот.
[02:22:39.360 --> 02:22:41.360]  Но при этом кушка никуда
[02:22:41.360 --> 02:22:43.360]  не встретился.
[02:22:43.360 --> 02:22:45.360]  Понятно, да?
[02:22:45.360 --> 02:22:47.360]  Вот, поэтому...
[02:22:47.360 --> 02:22:49.360]  Ну, то есть, на самом деле,
[02:22:49.360 --> 02:22:51.360]  теперь последняя, конечно,
[02:22:51.360 --> 02:22:53.360]  на сегодня задача, это
[02:22:53.360 --> 02:22:55.360]  померить вот эту амортизацию с этой.
[02:22:55.360 --> 02:22:57.360]  То есть, если была верна только эта,
[02:22:57.360 --> 02:22:59.360]  то это были бы просто два указателя.
[02:22:59.360 --> 02:23:01.360]  Вот это работает, по принципу,
[02:23:01.360 --> 02:23:03.360]  что каждое движение,
[02:23:03.360 --> 02:23:05.360]  каждые четыре движения кушки,
[02:23:05.360 --> 02:23:07.360]  дают движение пэшки вправо.
[02:23:07.360 --> 02:23:09.360]  Здесь это как бы откровенно не так.
[02:23:09.360 --> 02:23:11.360]  Тут я открыл эту статью,
[02:23:11.360 --> 02:23:13.360]  тут гениальная просто идея,
[02:23:13.360 --> 02:23:15.360]  как это сделать.
[02:23:15.360 --> 02:23:17.360]  Вот, можно посмотреть на число
[02:23:17.360 --> 02:23:19.360]  k плюс 1p плюс q.
[02:23:19.360 --> 02:23:21.360]  K плюс 1p плюс q?
[02:23:21.360 --> 02:23:23.360]  Оно не убывает при любой
[02:23:23.360 --> 02:23:25.360]  из этих операций.
[02:23:25.360 --> 02:23:27.360]  Ну, вообще, практически каждая операция
[02:23:27.360 --> 02:23:29.360]  дает нам прибавление этой штуки.
[02:23:29.360 --> 02:23:31.360]  K плюс 1p плюс q?
[02:23:31.360 --> 02:23:33.360]  Да.
[02:23:33.360 --> 02:23:35.360]  Слушай, какая красота.
[02:23:35.360 --> 02:23:37.360]  Ну ладно, не буду сейчас
[02:23:37.360 --> 02:23:39.360]  бумажку отыскать.
[02:23:39.360 --> 02:23:41.360]  Да, действительно.
[02:23:41.360 --> 02:23:43.360]  То есть, можно действительно заметить,
[02:23:43.360 --> 02:23:45.360]  рассмотрим число,
[02:23:45.360 --> 02:23:47.360]  так сказать, псевдо-фи такое.
[02:23:47.360 --> 02:23:49.360]  Псевдо-потенциал.
[02:23:49.360 --> 02:23:51.360]  Так, ладно, давайте оруди
[02:23:51.360 --> 02:23:53.360]  псевдо-фи.
[02:23:55.360 --> 02:23:57.360]  Псевдо-фи.
[02:23:59.360 --> 02:24:01.360]  Псевдо-фи.
[02:24:01.360 --> 02:24:03.360]  Псевдо-фи.
[02:24:03.360 --> 02:24:05.360]  Псевдо-фи
[02:24:05.360 --> 02:24:07.360]  будет равно k.
[02:24:07.360 --> 02:24:09.360]  Все там k плюс 1 на p, да?
[02:24:09.360 --> 02:24:11.360]  Да, плюс q.
[02:24:11.360 --> 02:24:13.360]  Да.
[02:24:15.360 --> 02:24:17.360]  Ага.
[02:24:17.360 --> 02:24:19.360]  Ну да, заметим, что да.
[02:24:19.360 --> 02:24:21.360]  Каждое, ну,
[02:24:21.360 --> 02:24:23.360]  каждое само по себе движение q,
[02:24:23.360 --> 02:24:25.360]  конечно, увеличивает этот потенциал, да?
[02:24:27.360 --> 02:24:29.360]  Так, каждое q увеличивает.
[02:24:29.360 --> 02:24:31.360]  А теперь, когда мы делаем
[02:24:31.360 --> 02:24:33.360]  неожиданно q заменяем на вот это,
[02:24:33.360 --> 02:24:35.360]  то потенциал увеличивается.
[02:24:37.360 --> 02:24:39.360]  А когда мы делаем
[02:24:39.360 --> 02:24:41.360]  вот это,
[02:24:41.360 --> 02:24:43.360]  то потенциал тоже увеличивается.
[02:24:43.360 --> 02:24:45.360]  Да, он уменьшается на q,
[02:24:45.360 --> 02:24:47.360]  но зато сразу увеличивается на
[02:24:47.360 --> 02:24:49.360]  больше, чем на q.
[02:24:49.360 --> 02:24:51.360]  Да.
[02:24:51.360 --> 02:24:53.360]  Красивый способ.
[02:24:53.360 --> 02:24:55.360]  Но так как q у нас больше, чем
[02:24:55.360 --> 02:24:57.360]  модуль v не становится, то получается, что
[02:24:57.360 --> 02:24:59.360]  в 5v действии мы как-нибудь уложимся.
[02:25:01.360 --> 02:25:03.360]  Остается
[02:25:03.360 --> 02:25:05.360]  только, правда, один момент.
[02:25:05.360 --> 02:25:07.360]  То есть, во-первых,
[02:25:07.360 --> 02:25:09.360]  поверить в эту теорему.
[02:25:11.360 --> 02:25:13.360]  А во-вторых, что более сильно?
[02:25:15.360 --> 02:25:17.360]  Значит, во-первых, найти,
[02:25:17.360 --> 02:25:19.360]  как за линию распилить эту строку
[02:25:19.360 --> 02:25:21.360]  p на такие две строки.
[02:25:21.360 --> 02:25:23.360]  А еще желательно убедиться, есть
[02:25:23.360 --> 02:25:25.360]  любый префиксный период, и если есть,
[02:25:25.360 --> 02:25:27.360]  то кто он?
[02:25:27.360 --> 02:25:29.360]  Вот.
[02:25:29.360 --> 02:25:31.360]  По-моему, в этом месте они
[02:25:31.360 --> 02:25:33.360]  тоже начинают говорить, что мы уже писали
[02:25:33.360 --> 02:25:35.360]  статью, как что-то там делать.
[02:25:35.360 --> 02:25:37.360]  Знаете,
[02:25:37.360 --> 02:25:39.360]  подлянка такая, что обычно эту статью
[02:25:39.360 --> 02:25:41.360]  вы читать, может, особо не будете, потому что
[02:25:41.360 --> 02:25:43.360]  статья называется,
[02:25:43.360 --> 02:25:45.360]  сейчас скажу как, ссылка
[02:25:45.360 --> 02:25:47.360]  номер 8, тоже
[02:25:53.360 --> 02:25:55.360]  То есть, видимо, 80-го
[02:25:55.360 --> 02:25:57.360]  года, тоже 20-го лет. Будет выглядеть как
[02:25:57.360 --> 02:25:59.360]  просто маленькие лайфхаки, как сэкономить памяти.
[02:26:01.360 --> 02:26:03.360]  В чем? Насколько они будут принципиально
[02:26:03.360 --> 02:26:05.360]  непонятно с ледом, поэтому непонятно,
[02:26:05.360 --> 02:26:07.360]  читать или нет. Но потом, как бы они скажут,
[02:26:07.360 --> 02:26:09.360]  а мы на этих лайфхаках все по всему.
[02:26:09.360 --> 02:26:11.360]  Там, вроде бы,
[02:26:11.360 --> 02:26:13.360]  ну, все темно и видно, что они
[02:26:13.360 --> 02:26:15.360]  в этом, как раз вот эти статьи, ссылки по
[02:26:15.360 --> 02:26:17.360]  номеру 8, они уже предложили алгоритмы,
[02:26:17.360 --> 02:26:19.360]  которые используют достаточно
[02:26:19.360 --> 02:26:21.360]  мало памяти, чтобы можно было временно
[02:26:21.360 --> 02:26:23.360]  укладывать ее внутри строки, или что-то
[02:26:23.360 --> 02:26:25.360]  такое, что
[02:26:25.360 --> 02:26:27.360]  это такая ерунда.
[02:26:27.360 --> 02:26:29.360]  Ну, это да. Но, на самом деле, нет, ну, как бы
[02:26:29.360 --> 02:26:31.360]  для полного счастья будет, конечно, интересно
[02:26:31.360 --> 02:26:33.360]  просто, наверное, открыть эту штуку,
[02:26:33.360 --> 02:26:35.360]  потому что, возможно, там еще пара слоев каких-нибудь
[02:26:35.360 --> 02:26:37.360]  интересных строчек есть.
[02:26:37.360 --> 02:26:39.360]  Так что, я очень надеюсь, что
[02:26:39.360 --> 02:26:41.360]  нам удастся в какой-то момент, действительно,
[02:26:41.360 --> 02:26:43.360]  это добить, потому что, так, минимум
[02:26:43.360 --> 02:26:45.360]  интересно.
