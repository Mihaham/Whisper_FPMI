[00:00.000 --> 00:08.080]  что хотите максимум скалярное произведение ну давайте очень быстро давайте
[00:08.080 --> 00:16.800]  представьте себе такую задачу у вас и сфиксировано но что точек
[00:16.800 --> 00:28.040]  и к нему поступают такие запросы дается пара координат аб вам нужно найти максимальное
[00:28.040 --> 00:36.000]  скалярное произведение векторов аб на xy по всем точкам xy из s
[00:36.000 --> 00:46.160]  вот то есть множество точек фиксировано надо звать максимум скалярное произведение с фиксированным
[00:46.160 --> 00:56.720]  вектором аб давайте сделаем следующее давайте во-первых заметим что в качестве точек которые
[00:56.720 --> 01:00.680]  мы перебираем достаточно перебирать точки только вершины выпукло оболочки
[01:00.680 --> 01:17.440]  ну потому что вот давайте нарисуем выпукло оболочку что такое скалярное произведение с
[01:17.440 --> 01:23.600]  вектором аб ну давайте давайте на сомнение уровня
[01:23.600 --> 01:31.560]  значит что такое при фиксированной гамме и аб множество точек таких что скалярное
[01:31.560 --> 01:37.440]  произведение равно гамме но это какая-то прямая перпендикулярно вектору аб ну что-то такое вот
[01:37.440 --> 01:42.760]  напрямую скалярное произведение с вектором аб константа но если аб как раз нормальный
[01:42.760 --> 01:47.960]  вектор то это в точности просто уравнение прямой вот но дальше понятно что если в эту гамму будете
[01:47.960 --> 01:51.160]  менять то у вас прямая будет параллельно двигаться вам надо найти в ком смысле и экстремальное
[01:51.160 --> 01:56.480]  положение то есть на вот так вот всеми возможным способом параллельно сама себе двигается вам
[01:56.480 --> 02:01.400]  надо найти крайний момент когда она еще пересекает с на то есть когда на этой прямой есть какая-то
[02:01.400 --> 02:06.720]  точка ну понятно тогда что там ну в одну сторону у вас получается увеличение скалярное произведение
[02:06.720 --> 02:12.240]  другую уменьшение и также понятно что вам достаточно рассматривать только вершины выпукло оболочки
[02:12.240 --> 02:16.320]  потому что мы будем двигать двигать двигать двигать до тех пор пока можно до тех пор пока мы
[02:16.320 --> 02:20.720]  находимся хотя бы чуть-чуть внутри выпукло оболочки но так она или поздно мы начнем касаться многоугольников
[02:20.720 --> 02:25.840]  какой-то вершине не достигается оптимум но там это грубо говоря в эту сторону было увеличение
[02:25.840 --> 02:31.920]  вот сторону уменьшения значит здесь будет максим тут будет минимум понятно на картинке же
[02:31.920 --> 02:41.600]  еще раз вот это прямая прямая перпендикулярно вектору ab
[02:41.600 --> 02:51.760]  теперь если вы ее начнете параллельно само себе двигать у вас меняется гамма просто но вам
[02:51.760 --> 02:57.580]  надо найти экстремальное ее положение там в эту сторону или в эту так чтобы по крайней
[02:57.580 --> 03:02.820]  мере еще она хотя бы чуть-чуть пересекала выпукло оболочку вот но соответственно вот
[03:02.820 --> 03:06.340]  это положение это максимум вот это минимум ну или наоборот в зависимости от того куда обе смотрит
[03:06.340 --> 03:13.340]  окей ну вот а дальше давайте скажем следующий давайте мы рассмотрим отдельно независимо
[03:13.340 --> 03:23.020]  верхнюю часть выпукло оболочки и нижнюю часть выпукло оболочки тогда я утверждаю что если мы
[03:23.020 --> 03:29.820]  ну давайте сделаем так давайте мы возьмем точку xy будем ее непрерывно вот так вот ею будем
[03:29.820 --> 03:34.500]  скользить по верхней скажем выпукло оболочки ну вот так вот там какая-то ломаная на самом деле
[03:34.500 --> 03:40.420]  вот давайте возьмем точку она будет непрерывно скользить по вот этой ломаной тогда я утверждаю
[03:40.420 --> 03:45.860]  что это скалярное произведение с вот с вот этим фиксированным вектором будет грубо говоря сначала
[03:45.860 --> 03:52.660]  увеличиваться потом уменьшаться то есть если я нарисую ну давайте здесь будет п откладываться
[03:52.660 --> 03:58.420]  у меня который скользит вдоль границы верхней выпукло оболочки а сверху буду откладывать f от
[03:58.420 --> 04:04.020]  п как скалярное произведение координат точки с ну короче скалярное произведение п на б тогда
[04:04.020 --> 04:11.620]  у меня сначала увеличивается потом уменьшается ну более-менее по тем же соображению вот представьте
[04:11.620 --> 04:16.900]  вы сюда поставили прямую двигайте ее и следите как она пересекается или не пересекается верхней
[04:16.900 --> 04:22.620]  выпукло оболочкой сначала она будет пересекаться то есть при движении п по этой ломаной у вас будет
[04:22.620 --> 04:27.780]  то есть вы в каждой точке считаете рисуйте прямую и претендикулярно обе тогда новость начала
[04:27.780 --> 04:32.060]  будет двигаться в одну сторону потом потом начнет ну в другую в противоположную сторону двигаться
[04:32.060 --> 04:41.980]  вот ну понятно что она так что она так двигается сначала бывает потом
[04:42.180 --> 04:47.580]  либо наоборот у нас сначала бывает потом взрастает что-то такое
[04:56.620 --> 04:57.180]  теорема
[04:57.180 --> 05:15.260]  нет слов теоремы значит что это не сложный факт а неважно ну это правда ну это правда
[05:15.260 --> 05:25.980]  какие вы скучные все надо доказывать блин
[05:25.980 --> 05:42.460]  да смотрите смотрите потому что у вас давайте я скажу так давайте у вас
[05:42.460 --> 05:46.380]  нет это нельзя досказать сейчас сейчас сейчас сейчас
[05:46.380 --> 05:53.340]  что на ней константа если мы чуть-чуть
[05:53.340 --> 06:03.020]  уменьшается да ну да
[06:03.020 --> 06:08.620]  я не говорю слома там
[06:08.620 --> 06:22.660]  каждая прямая перпендикулярная б некоторая гамма вот вот вы грубо говоря вот это на
[06:22.660 --> 06:25.900]  самом деле график гаммы от п она сначала возрастает потом бывает
[06:25.900 --> 06:38.860]  нет конечно еще раз это грубо говоря свободный коэффициент в уравнении прямой да вот у вас
[06:38.860 --> 06:45.020]  точность написано ax плюс b y минус гамма вот минус гамма свободный коэффициент то есть я
[06:45.020 --> 06:49.300]  рисую в каждой в каждой точке границы верхней упоколоболочки я рисую прямую
[06:49.300 --> 06:55.220]  перпендикулярную ab то есть как раз вот одно из линий уровня каждый из них ну они они все имеют
[06:55.220 --> 07:00.580]  одинаковые коэффициенты ab вот у них меняется гамма как свободный коэффициент то есть я переношу
[07:00.580 --> 07:04.780]  прямую параллельно у нее меняется гамма я отвернусь сначала возрастает потом бывает
[07:04.780 --> 07:13.620]  ну или наоборот сначала бывает потом возрастает ну вот замечательно все тогда здесь можно сделать
[07:13.620 --> 07:22.980]  например бинарный поиск вот давайте посмотрим на стороны первая сторона вторая сторона третья
[07:22.980 --> 07:29.700]  сторона четвертая и так далее понятно что если мы движемся вдоль отрезка просто вот если я
[07:29.700 --> 07:37.220]  просто движусь вдоль отрезка то моя штука монотонно что-то делать возрастает или убывает ну да
[07:37.220 --> 07:48.060]  вот значит на самом деле каждый отрезок он грубо говоря мне либо увеличивает скалярные
[07:48.060 --> 07:51.900]  произведения то есть при движении вдоль него у меня либо увеличивается скалярные произведения
[07:52.200 --> 07:57.020]  либо остается неизменным либо уменьшается вот ну значит поскольку у меня сначала увелич骑 потом
[07:57.020 --> 08:00.260]  уменьшается я могу сказать след GU庫 у меня сначала в течение нескольких шагов
[08:00.260 --> 08:05.840]  оно увеличивается в течение нескольких сторон потом начинает уменьшаться как бы вдоль
[08:05.840 --> 08:11.140]  стороны оно монотонно убывает с какого-то момента мне нужно найти значит вот эту точку где
[08:11.140 --> 08:16.840]  происходит переключение до которой всё увеличилось после которой все начинает убывать здесь будет
[08:16.840 --> 08:20.240]  экстрем, очевидно, потому что все вот эти вот стороны
[08:20.240 --> 08:22.360]  при движении вдоль всех этих сторон у меня увеличивается
[08:22.360 --> 08:24.240]  скалярное произведение, при движении вдоль этих
[08:24.240 --> 08:25.240]  убывает.
[08:25.240 --> 08:29.440]  Буквально бинпоиск, да, по, ну как бы, по стороне.
[08:29.440 --> 08:43.640]  Бинпоиском находим место, находим две соседние стороны,
[08:43.640 --> 08:56.440]  так что вдоль одно скалярное произведение увеличивается
[08:56.440 --> 08:59.220]  впроходе от начала к концу, вдоль другое, при проходе
[08:59.220 --> 09:00.720]  от начала к концу, убывает.
[09:00.720 --> 09:03.640]  То есть нам надо просто посчитать скалярное произведение
[09:03.640 --> 09:06.620]  вот этой точки и вот этой на обе, вот этой и вот этой
[09:06.620 --> 09:09.480]  на обе, понять как соотносятся значения в этих 2 точках.
[09:09.480 --> 09:12.160]  Надо найти такое, что здесь увеличивается при проходе
[09:12.160 --> 09:17.160]  а здесь уменьшается. Такое находим, значит, здесь экстремум.
[09:17.160 --> 09:24.160]  Вот. Получается запрос, если мы можем быстро изначально
[09:24.160 --> 09:26.160]  насчитать выпуклооболочку, то дальше просто логарифм
[09:26.160 --> 09:30.160]  по верхней или нижней выпуклооболочке.
[09:30.160 --> 09:36.160]  Ну, если надо, да. Нормально? Кайф.
[09:36.160 --> 09:44.160]  Так, ладно. Теперь давайте к следующему перейдем.
[09:44.160 --> 09:48.160]  Значит, следующая. Давайте научимся находить диаметр множества.
[09:48.160 --> 09:53.160]  Диаметр. Ну, определение. Пусть у нас есть конечное множество точек.
[09:58.160 --> 10:03.160]  Диаметр в нем это максимальное из попарных расстояний между точками.
[10:06.160 --> 10:13.160]  Максимум по всем И, Ж, расстояние между П, И, Т и П, Ж, Т.
[10:13.160 --> 10:16.160]  Ну, обычное эвклидовое расстояние на плоскости.
[10:19.160 --> 10:22.160]  Вот. Соответственно, задача помножить, найти диаметр.
[10:22.160 --> 10:24.160]  Найти две самые далекие точки.
[10:31.160 --> 10:35.160]  Ну, замечание первое. Давайте поймем, что на самом деле
[10:35.160 --> 10:38.160]  в качестве, опять-таки, в качестве перебираемых точек
[10:38.160 --> 10:42.160]  достаточно рассматривать только вершины выпуклооболочки.
[10:42.160 --> 10:47.160]  Потому что, значит, говорю, да, достаточно рассматривать
[10:47.160 --> 10:52.160]  вершины выпуклооболочки Конватес.
[10:52.160 --> 10:55.160]  Ну, почему? Пусть не так. Давайте предположим, что
[10:55.160 --> 10:58.160]  максимум расстояния достигается на какой-то паре точек ПКУ.
[10:58.160 --> 11:00.160]  Давайте как-то так нарисую.
[11:00.160 --> 11:02.160]  Вот этот отрезок, да, эти две точки лежат В,
[11:02.160 --> 11:04.160]  и тут достигается максимальное расстояние.
[11:04.160 --> 11:07.160]  Давайте, скажем, продолжим этот отрезок в прямую,
[11:07.160 --> 11:09.160]  ну, или там, в луч.
[11:09.160 --> 11:12.160]  Если эта штука лежала внутри выпуклооболочки,
[11:12.160 --> 11:16.160]  то рано или поздно этот луч пересечет какую-то сторону.
[11:16.160 --> 11:19.160]  Понятно, что до нее расстояние только выросло, да,
[11:19.160 --> 11:21.160]  то есть, поскольку я продлил отрезок, у меня это расстояние
[11:21.160 --> 11:22.160]  стало только больше.
[11:22.160 --> 11:24.160]  Ну и дальше я утверждаю, что если из этой точки
[11:24.160 --> 11:27.160]  начать двигаться вдоль стороны, хотя бы, ну, как бы,
[11:27.160 --> 11:30.160]  в одну из двух сторон, то у меня расстояние тоже будет увеличиваться.
[11:30.160 --> 11:32.160]  То есть, по крайней мере, один из двух этих отрезков
[11:32.160 --> 11:34.160]  будет иметь строго большую длину.
[11:34.160 --> 11:35.160]  Ну, почему?
[11:35.160 --> 11:37.160]  Потому что как ведет себя вообще расстояние
[11:37.160 --> 11:39.160]  от точки до прямой.
[11:39.160 --> 11:41.160]  Вот у меня есть точка П,
[11:41.160 --> 11:43.160]  вот у меня есть какая-то прямая,
[11:43.160 --> 11:45.160]  то есть, я провел прямую через сторону,
[11:45.160 --> 11:47.160]  давайте опустим перпендикуляр.
[11:47.160 --> 11:49.160]  Понятно, что наименьшее расстояние достигается
[11:49.160 --> 11:52.160]  как раз вот до этой точки, до проекции точки на прямую.
[11:52.160 --> 11:54.160]  А дальше, если вы начнете эту точку двигать
[11:54.160 --> 11:57.160]  в любую из двух сторон от останования перпендикуляра,
[11:57.160 --> 12:00.160]  у вас будет расстояние расти строго монотонно.
[12:00.160 --> 12:03.160]  Ну, а то есть, чем дальше точка от основания перпендикуляра,
[12:03.160 --> 12:05.160]  тем больше это расстояние.
[12:05.160 --> 12:07.160]  Ну, потому что просто гипотенуза
[12:07.160 --> 12:09.160]  в прямоголем треугольнике с растущим катетом.
[12:09.160 --> 12:11.160]  То же самое здесь.
[12:11.160 --> 12:13.160]  Когда вы двигаетесь от основания перпендикуляра,
[12:13.160 --> 12:15.160]  у вас расстояние только увеличивается.
[12:15.160 --> 12:17.160]  Вот, значит, на этой прямой,
[12:17.160 --> 12:19.160]  на прямой задерживающей сторону есть какая-то точка,
[12:19.160 --> 12:21.160]  такая, что при движении от нее в любую сторону
[12:21.160 --> 12:23.160]  часто не увеличивается.
[12:23.160 --> 12:25.160]  Ну, а вы встали в какую-то произвольную точку
[12:25.160 --> 12:27.160]  и двигаетесь в обе стороны от нее,
[12:27.160 --> 12:29.160]  тогда обязательно хотя бы в одной из двух сторон
[12:29.160 --> 12:31.160]  будет увеличение.
[12:31.160 --> 12:33.160]  Ну, то есть, там где-то есть перпендикуляр,
[12:33.160 --> 12:35.160]  скажем, перпендикуляр где-то вот здесь,
[12:35.160 --> 12:37.160]  значит, при движении туда расстояние увеличивается.
[12:37.160 --> 12:39.160]  Если, наоборот, перпендикуляр здесь,
[12:39.160 --> 12:41.160]  то при движении туда расстояние увеличивается.
[12:41.160 --> 12:43.160]  Ну, все, значит, вместо этой Q
[12:43.160 --> 12:45.160]  можно было бы рассматривать одну из вершин
[12:45.160 --> 12:47.160]  выпуклооболочек. То же самое с P.
[12:49.160 --> 12:51.160]  Хорошо?
[12:51.160 --> 12:53.160]  Вот, значит, нам достаточно
[12:53.160 --> 12:55.160]  вершин выпуклооболочки.
[12:59.160 --> 13:05.480]  Окей, мне нужна будет такая лемма еще.
[13:05.480 --> 13:18.720]  Значит, пусть диаметр вот с достигается на паре
[13:18.720 --> 13:19.720]  точек пп.
[13:19.720 --> 13:38.320]  Я утверждаю, что все множество с, давайте картинку нарисую
[13:38.320 --> 13:39.320]  сначала.
[13:39.320 --> 13:57.320]  Я утверждаю, что если провести вот такую полоску со сторонами
[13:57.320 --> 14:01.320]  перпендикулярными отрезку ПКУ, то есть ПКУ это диаметр,
[14:01.320 --> 14:02.800]  ПКУ это отрезок, на котором максимальное расстояние
[14:02.800 --> 14:05.640]  достигается между точками С.
[14:05.640 --> 14:08.360]  Дальше я провожу такую полоску со сторонами перпендикулярными
[14:08.360 --> 14:12.080]  отрезками ПКУ, ограниченную как раз таки отрезками
[14:12.080 --> 14:13.080]  ПКУ.
[14:13.080 --> 14:14.960]  Тогда я утверждаю, что С целиком лежит внутри этой
[14:14.960 --> 14:15.960]  полосы.
[14:15.960 --> 14:30.360]  Значит, тогда С целиком лежит внутри полосы, стороны
[14:31.360 --> 14:40.800]  отрезку ПКУ и при этом опирающийся на точке ПИКУ, то есть одна
[14:40.800 --> 14:42.640]  опорная прямая проходит через П, вторая опорная
[14:42.640 --> 14:43.720]  прямая проходит через К.
[14:43.720 --> 14:50.160]  Значит, внутри полосы опирающийся на ПИКУ.
[14:50.160 --> 14:56.760]  Вот, надо доказать, что это действительно элементарно.
[14:56.760 --> 14:59.360]  Если это неверно, если я искаю эту точку вне полосы,
[14:59.360 --> 15:02.800]  скажем, вот здесь вот, тогда расстояние от П до нее больше
[15:02.800 --> 15:03.800]  чем ПКУ.
[15:03.800 --> 15:07.600]  То есть вот это вот расстояние строго больше чем ПКУ, потому
[15:07.600 --> 15:13.620]  что ПКУ это минимальное из всех расстояний до прямой,
[15:13.620 --> 15:15.540]  потому что это основание перпендикуляра.
[15:15.540 --> 15:19.400]  Если я ухожу куда-то за прямую, то у меня расстояние может
[15:19.400 --> 15:20.400]  только вырасти.
[15:20.400 --> 15:22.000]  То есть у меня вот это вот расстояние, скажем, до
[15:22.000 --> 15:26.640]  пересечения с полосой больше, чем ПКУ и потом еще куда-то
[15:26.640 --> 15:27.640]  я дальше ухожу.
[15:27.640 --> 15:28.640]  Еще больше получается.
[15:28.640 --> 15:34.160]  Ну, по факту, просто противно, да?
[15:34.160 --> 15:37.160]  Противно, иначе диаметр можно было бы увеличить.
[15:37.160 --> 15:53.400]  Нормально?
[15:53.400 --> 16:09.440]  Вот, ну теперь давайте на основе этой леммы мы сделаем
[16:09.440 --> 16:10.440]  алгоритм.
[16:10.440 --> 16:13.840]  Смотрите, вот мы поняли, что чтобы найти диаметр,
[16:13.840 --> 16:16.440]  нам достаточно как-то зажать наш многоугольник, наш
[16:16.440 --> 16:18.440]  выпуклоблочек между двумя параллельными прямыми
[16:18.440 --> 16:19.440]  с двух сторон.
[16:19.440 --> 16:22.000]  Так что с обеих сторон эти прямые как бы опираются
[16:22.000 --> 16:27.000]  на одну из вершин выпуклоблочек, по факту.
[16:27.000 --> 16:28.680]  Ну, давайте тогда сделаем следующее.
[16:28.680 --> 16:30.820]  Давайте всеми возможными способами эти две прямые
[16:30.820 --> 16:31.820]  нарисуем.
[16:31.820 --> 16:33.520]  То есть вот так вот их всеми возможными способами
[16:33.520 --> 16:34.520]  проворачиваем.
[16:34.520 --> 16:37.280]  Найдем все вот такие вот полоски, содержащие целиком
[16:37.280 --> 16:42.200]  внутри себя все S, ну и найдем среди таких конфигураций
[16:42.200 --> 16:43.960]  то, при котором вот это расстояние между опорными
[16:43.960 --> 16:44.960]  точками максимально.
[16:44.960 --> 16:48.520]  То есть я просто переберу все возможные вот эти вот
[16:48.520 --> 16:50.120]  опорные прямые параллельные.
[16:50.120 --> 16:55.200]  В частности, в какой-то момент я рассмотрю и такое
[16:55.200 --> 16:58.200]  положение моих опорных прямых, если я посчитаю расстояние
[16:58.200 --> 17:00.480]  между теми точками, на которые они опираются, я найду как
[17:00.480 --> 17:01.480]  раз диаметр.
[17:01.480 --> 17:04.480]  То есть среди всех возможных таких пар я найду максимальное
[17:04.480 --> 17:09.480]  расстояние, это будет диаметр.
[17:09.480 --> 17:10.480]  Алгоритм.
[17:10.480 --> 17:19.920]  Ну, на уровне идеи мы вращаем пару опорных прямых L1,
[17:19.920 --> 17:37.960]  что они будут параллельными у меня, и находим расстояние
[17:37.960 --> 17:39.680]  между опорными точками.
[17:39.680 --> 17:52.240]  То есть L1 и L2 касаются угольников какой-то точки, L1 здесь,
[17:52.240 --> 17:55.200]  L2 здесь, посчитаем между ними расстояние, провращаем
[17:55.200 --> 17:58.160]  дальше L1 и L2, они начнут опираться на какую-то другую пару
[17:58.160 --> 18:00.080]  точек, посчитаем между ними расстояние и так далее.
[18:00.080 --> 18:04.720]  Так все конфигурации вот этих ограничивающих полосок
[18:04.720 --> 18:07.480]  мы переберем, значит мы в частности найдем вот
[18:07.480 --> 18:09.200]  эти самые две ПК на максимальном расстоянии.
[18:09.200 --> 18:13.920]  Вот такая идея.
[18:13.920 --> 18:16.600]  Теперь надо понять как это вращать.
[18:16.600 --> 18:24.280]  Мы хобби тогда учтем.
[18:24.280 --> 18:29.800]  Значит, смотрите, понятно, что нам можно не рассматривать
[18:29.800 --> 18:32.680]  довольно много положений прямых.
[18:32.680 --> 18:34.520]  Понятно, что, например, вот если у меня есть такое
[18:34.520 --> 18:36.760]  положение прямых, если я его чуть-чуть провращаю
[18:36.760 --> 18:39.040]  и у меня ничего не изменится, то есть вот так чуть-чуть
[18:39.040 --> 18:43.560]  поверну, то у меня будут те же самые две опорные точки.
[18:43.560 --> 18:46.720]  И более того, если начну вращать обе эти прямые,
[18:46.720 --> 18:49.120]  поскольку они параллельно, я их должен вращать синхронно,
[18:49.120 --> 18:52.200]  то есть как бы на один тот же угол проворачивать,
[18:52.200 --> 18:55.240]  то следующее изменение, изменение опорных точек
[18:55.240 --> 18:58.320]  произойдет только в момент, когда одна из прямых будет
[18:58.320 --> 19:00.200]  совпадать с одной из сторон.
[19:00.200 --> 19:02.040]  То есть, ну иначе я просто вращаю, вращаю, у меня ничего
[19:02.040 --> 19:05.280]  не меняется, у меня ничто не мешает вращать дальше.
[19:05.600 --> 19:08.440]  Происходит изменение только когда у меня, скажем, ну
[19:09.960 --> 19:13.480]  как быть, когда у меня одна из прямых начинает быть,
[19:13.480 --> 19:14.880]  начинает содержать одну из сторон.
[19:16.160 --> 19:17.320]  Вот.
[19:17.320 --> 19:19.880]  Ну и в этот момент мы приводим переключения, мы говорим,
[19:19.880 --> 19:22.360]  что ок, ага, раньше у меня вращения были относительно
[19:22.360 --> 19:24.720]  по Яку, теперь вращение относительно этой точки
[19:24.720 --> 19:25.840]  и вот этой.
[19:25.840 --> 19:27.620]  Дальше продолжаем вращать точно так же, то есть,
[19:27.640 --> 19:30.720]  завершаем вращать вот это вот, рано или поздно
[19:30.720 --> 19:33.080]  происходит новое переключение, у меня, скажем, новое опорное
[19:33.080 --> 19:38.080]  Вот здесь вот. Ну, окей, тогда будет вот это и вот это. Я начну вращать относительно вот этой точки и вот этой точки.
[19:39.080 --> 19:41.080]  Вот. И все такие пары переберу.
[19:44.080 --> 19:46.080]  Значит, давайте это напишем как-то.
[19:47.080 --> 19:53.080]  Ну, начало такое. Давайте я, чтобы долго не думать, выберу изначально просто вертикальные положения обеих прямых.
[19:54.080 --> 19:59.080]  Давайте найдем самую левую вертикальную прямую, самую правую вертикальную прямую в нашем многоугольнике.
[19:59.080 --> 20:01.080]  Что-то вот такое.
[20:02.080 --> 20:08.080]  То есть по факту просто точку с минимальным х и точку с максимальным х я нахожу, через них провожу такие вертикальные прямые l1, l2.
[20:09.080 --> 20:16.080]  Значит, дальше начинаем их вращать. Ну, окей, давайте напишем, да, что l1, l2. Изначально вертикальные.
[20:22.080 --> 20:24.080]  Да, конечно, конечно, конечно, да.
[20:30.080 --> 20:33.080]  Вот. Значит.
[20:36.080 --> 20:38.080]  Да, провели вертикальные прямые.
[20:39.080 --> 20:45.080]  Дальше мы поддерживаем те точки, на которые опираются мои две прямые l1, l2. Давайте, скажем, их назову i и j.
[20:46.080 --> 20:51.080]  То есть у меня все точки вдоль этого многоугольника, вдоль выпуклоболочка, занумерованы. Пусть это i и пусть это j.
[20:52.080 --> 20:56.080]  Давайте начнем их потихонечку вращать вокруг этих двух точек. На маленькие углы.
[20:57.080 --> 21:03.080]  Ну, опять понятно, что в течение какого-то времени, пока углы маленькие, ничего не происходит. Они продолжают вращаться вокруг тех же самых точек.
[21:04.080 --> 21:11.080]  Значит, мне нужно понять, когда произойдет переключение. Какое переключение будет раньше, грубо говоря? Вот из-за этой стороны или из-за этой стороны?
[21:12.080 --> 21:20.080]  Ну, понятно, у кого угол меньше, там и надо переключиться. То есть, грубо говоря, мне хотелось бы померить вот эти два угла, вот этот и вот этот.
[21:21.080 --> 21:24.080]  Тот, кто из них меньше, там раньше переключение, и там надо переключиться.
[21:25.080 --> 21:31.080]  Потому что при вращении как раз следующее препятствие, следующее препятствие, это та сторона, до которой угол меньше, чем до другой.
[21:34.080 --> 21:39.080]  Ну, естественно, углы мы мерить не хотим. Мы вместо этого давайте просто посчитаем какие-то векторные произведения.
[21:40.080 --> 21:44.080]  Значит, вот давайте я скажу, что это вектор У, это вектор В.
[21:46.080 --> 21:59.080]  Вот, тогда я утверждаю, что если векторное произведение У на В кажется меньше нуля, сейчас подумаю.
[21:59.080 --> 22:13.080]  Давайте по выразительной картинке. Вот, например, здесь пусть сторона такая какая-то, а здесь вот такая.
[22:14.080 --> 22:17.080]  Вот, например, пусть здесь И, пусть здесь Ж.
[22:18.080 --> 22:22.080]  Тогда у меня У вот такой вот, а В вот такой вот.
[22:23.080 --> 22:28.080]  И понятно, что если у меня изначально прямые и вертикальные, то раньше поворот происходит вот здесь.
[22:29.080 --> 22:31.080]  Ну, потому что В более близко к вертикальной прямой, чем это.
[22:32.080 --> 22:39.080]  Вот, но если я нарисую В вот здесь же, из той же точки исходящей, что это У, это В.
[22:40.080 --> 22:48.080]  Тогда у меня, ну как раз знак векторного произведения говорит, какой из поворотов раньше.
[22:49.080 --> 22:56.080]  Вот здесь поворот получается положительный. Значит, надо увеличивать Ж, иначе плюс плюсы.
[23:09.080 --> 23:13.080]  То есть мы еще пропустили его или нет?
[23:18.080 --> 23:19.080]  Мне, честно говоря, нет.
[23:22.080 --> 23:24.080]  Ну вот, давайте я здесь просто картинки порисую.
[23:25.080 --> 23:30.080]  Вот, смотрите, когда угол от В до вертикальной прямой меньше, чем от У до вертикальной прямой,
[23:31.080 --> 23:35.080]  то поворот между ними как раз от У до В идет в ближайший поворот против часовой.
[23:35.080 --> 23:40.080]  А если бы у меня В была более наклонной, какая-то вот такая, скажем, если бы эта сторона была вот такой.
[23:41.080 --> 23:42.080]  Вот такой вот.
[23:43.080 --> 23:45.080]  Тогда у меня поворот был бы уже по часовой.
[23:46.080 --> 23:50.080]  Ну, просто потому что как раз, то есть вот этот угол больше вот этого, значит у меня ближайший направлений поворота вот в эту сторону,
[23:51.080 --> 23:52.080]  и здесь было бы больше, чем П просто.
[23:53.080 --> 23:55.080]  Вот. Значит, тогда нужно было бы, наоборот, и увеличивать.
[23:57.080 --> 23:58.080]  Ну все.
[23:59.080 --> 24:03.080]  Значит, алгоритм такой. Мы нашли самую левую точку, самую правую точку, сказали, что это и Ж.
[24:03.080 --> 24:06.080]  Дальше рассматриваем, в каждое время рассматриваем две стороны.
[24:07.080 --> 24:10.080]  Сторона начинается в точке И, сторона начинается в точке Ж.
[24:11.080 --> 24:12.080]  Рассматриваем их как векторы.
[24:13.080 --> 24:17.080]  Берем их векторное произведение, и по знаку векторное произведение понимаем, какое из переключений следующее.
[24:18.080 --> 24:23.080]  То есть какая из прямых меняет свою опорную точку раньше, чем другая, L1 или L2.
[24:24.080 --> 24:29.080]  Ну и в зависимости от этого я сдвигаю одну из опорных точек Ж сюда или И сюда.
[24:30.080 --> 24:31.080]  Да.
[24:31.080 --> 24:32.080]  Если углы одинаковые, то не важно.
[24:33.080 --> 24:35.080]  Если углы одинаковые, то не важно. Сейчас это докажем.
[24:36.080 --> 24:42.080]  Вот. Но если, скажем, у меня никогда здесь не возникает нулей, то я вот делаю ровно то, что надо.
[24:43.080 --> 24:48.080]  Я перебираю опорные прямые, я их потихоньку вращаю, понимаю, когда впервые, ну то есть, при каком угле,
[24:49.080 --> 24:51.080]  происходит переключение опорной точки, и переключаю опорную точку.
[24:52.080 --> 24:55.080]  Да, то есть тогда, если тут никогда не бывает района, что все у меня однозначно,
[24:56.080 --> 24:58.080]  я тем самым переберу всевозможные конфигурации вот этих двух прямых параллельных.
[24:58.080 --> 25:03.080]  Вот. Ну и в каждый момент, давайте напишем, что в каждый момент времени обновляем анс
[25:04.080 --> 25:07.080]  через расстояние между упытой и пожитой.
[25:11.080 --> 25:15.080]  То есть всегда, когда нашли новую пару опорных прямых, прорелаксировали ответ расстояния между опорными точками.
[25:18.080 --> 25:23.080]  Вот. Ну и да, теперь давайте нарисуем картинку, что происходит, когда здесь знак равенства,
[25:23.080 --> 25:28.080]  то есть когда у меня стороны параллельны, поймем, что алгоритм можно ставить таким же, ровно таким же, все, все будет хорошо.
[25:41.080 --> 25:44.080]  Значит, что происходит с параллельными сторонами?
[25:54.080 --> 26:03.080]  То есть представьте, что в какой-то момент у меня такая дилемма, что у меня, вот если у меня, например, были вот такие, да, вертикальные прямые,
[26:04.080 --> 26:09.080]  то следующее переключение, оно как бы одновременно проходит через вот эти вот две стороны.
[26:10.080 --> 26:12.080]  И вот здесь вот, и вот здесь вот, углы одинаковые, то есть эти две стороны параллельны,
[26:13.080 --> 26:18.080]  у меня прямые как бы одновременно должны переключиться и по и и по жи, грубо говоря.
[26:18.080 --> 26:24.080]  А я делаю это постепенно, сначала и переключаю, да, ну то есть у меня как бы вот эти вот два вектора параллельные,
[26:25.080 --> 26:30.080]  у меня у них векторное произведение нулевое, поэтому я сначала переключу, скажем, одну координату, ну в этом случае, видимо, и,
[26:31.080 --> 26:35.080]  то есть я сдвину и, потом посчитаю векторное вот этого на вот это и сдвину жи.
[26:36.080 --> 26:44.080]  Вот. Ну в каком-то смысле я перебрал, на самом деле не все, то есть мне по факту в идеале мне нужно было бы перебрать 4 точки, да,
[26:44.080 --> 26:52.080]  4, точнее, отрезка, вот эти два и вот эти два, потому что когда у меня опорные прямые параллельные и содержат по две точки,
[26:53.080 --> 26:55.080]  ну не понятно, что такое опорная точка вообще, да, их как бы две.
[26:56.080 --> 27:01.080]  И в идеале мне нужно было бы перебрать все 4 отрезка, значит давайте их напишу как-то, A, B, C, D,
[27:02.080 --> 27:07.080]  мне нужно перебрать все вот эти вот отрезки A, D, A, C и B, D, B, C.
[27:07.080 --> 27:08.080]  И B, D, B, C.
[27:09.080 --> 27:14.080]  Вот. Ну понятно, что там максимум, максимальное из расстояния это один из этих четырех чисел.
[27:15.080 --> 27:22.080]  Вот. Ну а мой алгоритм перебирать не все, но он точно переберет A, D, perdон, A, C и B, D.
[27:25.080 --> 27:27.080]  Он точно переберет диагональ, я утверждаю.
[27:28.080 --> 27:36.080]  Ну потому что сначала он находится в этом положении, в вертикальном, когда мы еще не дошли до вот этих параллельных сторон,
[27:37.080 --> 27:39.080]  тогда мы как раз задеваем какую-то диагональ.
[27:40.080 --> 27:44.080]  Потом мы начинаем вращаться, приходим в состояние, когда мы параллельны обеим сторонам,
[27:45.080 --> 27:49.080]  переключаем сначала одну вершину в другой конец, потом другую вершину в другой конец,
[27:50.080 --> 27:51.080]  и тем самым просматриваем вторую диагональ.
[27:52.080 --> 27:55.080]  По пути, да, еще заодно B, C просмотрим, но не важно, главное, что мы просмотрим обе диагонали.
[27:55.080 --> 28:02.080]  И вот я утверждаю тогда, что если у меня в четырехугольнике A, B, C, D два основания параллельны, A, B, C, D параллельны,
[28:03.080 --> 28:08.080]  тогда максимальный из диагонали больше, чем максимальный из сторон, поэтому мне будет достаточно рассмотреть только диагонали.
[28:09.080 --> 28:13.080]  Что алгоритм точно рассмотрит обе диагонали,
[28:19.080 --> 28:21.080]  и этого будет достаточно.
[28:26.080 --> 28:29.080]  Ну, потому что можно доказать следующее утверждение.
[28:30.080 --> 28:38.080]  Пусть в четырехугольнике A, B, C, D основания параллельны, то есть A, B параллельны от C, D,
[28:39.080 --> 28:45.080]  тогда максимальный из диагонали больше, чем максимальный из боковых сторон, я утверждаю.
[28:46.080 --> 28:54.080]  Максимальный из диагонали от C, B, D больше, чем максимальный из боковых сторон.
[28:55.080 --> 28:57.080]  A, D, B, C.
[29:01.080 --> 29:05.080]  Это как раз значит, что из вот этих четырех отрезков мне не нужно перебирать обязательно все четыре,
[29:06.080 --> 29:09.080]  мне достаточно перебирать те два, которые так алгоритм переберет.
[29:21.080 --> 29:23.080]  Ну, давайте докажем.
[29:26.080 --> 29:30.080]  Давайте трапецию нарисую, раз два параллельных основания, то это трапеция или параллелограмма.
[29:31.080 --> 29:34.080]  Давайте трапеция, A, B, C, D.
[29:36.080 --> 29:39.080]  Давайте рассмотрим вот сторону, какую-то боковую сторону A, D, например.
[29:42.080 --> 29:47.080]  Сумма углов при ней 180 градусов, потому что эти две стороны параллельны,
[29:48.080 --> 29:52.080]  значит сумма этих двух углов 180, значит какой-то из них больше равен 90.
[29:52.080 --> 29:54.080]  Например, вот этот.
[29:55.080 --> 29:57.080]  Этот угол больше равен 90 градусов.
[29:58.080 --> 30:03.080]  Значит, в этом треугольнике A, C наибольшая сторона, потому что лежит против наибольшего угла,
[30:04.080 --> 30:06.080]  поэтому A, C больше, чем A, D.
[30:07.080 --> 30:09.080]  Значит, A, D точно меньше, чем какая-то из диагоналей.
[30:10.080 --> 30:12.080]  То же самое со второй стороной.
[30:13.080 --> 30:15.080]  Профит.
[30:16.080 --> 30:19.080]  Значит, рассмотрим боковую сторону A, D.
[30:23.080 --> 30:25.080]  Боковую сторону A, D.
[30:26.080 --> 30:31.080]  Один из углов при ней больше или равен 90 градусов,
[30:32.080 --> 30:38.080]  значит, A, D меньше диагонали того треугольника.
[30:43.080 --> 30:46.080]  Меньше противолежащей стороны в том треугольнике.
[30:47.080 --> 30:51.080]  Меньше противолежащей стороны в том треугольнике.
[31:01.080 --> 31:03.080]  Кажется, все.
[31:04.080 --> 31:06.080]  Нормально?
[31:07.080 --> 31:09.080]  Ну вот.
[31:10.080 --> 31:12.080]  Значит, как бы весь наш алгоритм корректный.
[31:12.080 --> 31:14.080]  Давайте еще раз проговорю.
[31:15.080 --> 31:17.080]  Я сначала построю выпуклую оболочку за NLGN,
[31:18.080 --> 31:21.080]  потом нахожу крайние вот эти вот опорные прямые вертикальные слева справа,
[31:22.080 --> 31:24.080]  говорю, что они опираются на точке IJ.
[31:25.080 --> 31:27.080]  Дальше начинаю вращать.
[31:28.080 --> 31:30.080]  То есть я храню опорные точки, смотрю на два исходящих вектора,
[31:31.080 --> 31:33.080]  понимаю, какой из них менее крутой,
[31:34.080 --> 31:36.080]  в какой из них раньше происходит переключение,
[31:37.080 --> 31:39.080]  ну и делаю переключение, скажем, я сравню, какой из векторов меньше,
[31:39.080 --> 31:41.080]  и говорю, что окей, теперь мое состояние вот такое.
[31:42.080 --> 31:44.080]  То есть у меня опорная точка вот эта и вот эта.
[31:45.080 --> 31:47.080]  Дальше опять смотрю, какой из векторов вот этот или вот,
[31:48.080 --> 31:50.080]  ну короче, опять два следующих вектора смотрю,
[31:51.080 --> 31:53.080]  понимаю, кто из них менее крутой, поворачиваю относительно него.
[31:54.080 --> 31:56.080]  И каждый раз, когда сделал поворот, когда сделал проворачивание,
[31:57.080 --> 31:59.080]  обновляю ответ через текущее расстояние между опорными точками.
[32:00.080 --> 32:02.080]  То есть после того, как я построю выпуклую оболочку,
[32:03.080 --> 32:05.080]  остается просто O от N, потому что мне нужно проворачивать прямые
[32:06.080 --> 32:08.080]  от такого положения до, ну короче,
[32:09.080 --> 32:12.080]  прохождение по сторонам будет линейное количество,
[32:13.080 --> 32:14.080]  поэтому будет линия после этого.
[32:15.080 --> 32:18.080]  Почему максимальный диаметр не пропустим?
[32:19.080 --> 32:24.080]  Потому что максимальный диаметр всегда порождает вот такие две опорные прямые.
[32:25.080 --> 32:27.080]  А мы перебираем вообще все опорные прямые, опорные пары.
[32:28.080 --> 32:29.080]  Почему?
[32:30.080 --> 32:36.080]  Ну, мы не перебираем те, которые не отличаются парами опорных точек.
[32:36.080 --> 32:40.080]  То есть да, грубо говоря, вот, опять же, на этой картинке,
[32:42.080 --> 32:48.080]  я, то есть у меня вот такая пара опорных прямых не отличается вот от такой.
[32:49.080 --> 32:51.080]  Ну, вот от такой.
[32:52.080 --> 32:57.080]  Потому что я просматриваю только пары опорных точек.
[33:00.080 --> 33:01.080]  Вот.
[33:01.080 --> 33:05.080]  Ну и как бы, что, неправдоподобно что ли?
[33:08.080 --> 33:11.080]  Ну и там, где очевидно, как раз может быть что-то зарыто.
[33:31.080 --> 33:32.080]  Не, ну как, еще раз, смотрите.
[33:33.080 --> 33:36.080]  У нас есть в каждом момент времени, по факту, у нас неявно есть какие-то прямые,
[33:37.080 --> 33:43.080]  которые, то есть по факту, у меня есть полоса в каждом момент времени вот такая,
[33:44.080 --> 33:46.080]  которая внутри себя целиком строит многоугольник.
[33:52.080 --> 33:55.080]  Ну вот, тогда ответ больше бы равно, чем это расстояние точно.
[33:56.080 --> 33:58.080]  И в какой-то момент, поскольку есть полоса,
[34:00.080 --> 34:04.080]  для которой опорные точки это концы диаметра, я их тоже когда-то найду,
[34:05.080 --> 34:07.080]  потому что я все положения перебираю.
[34:11.080 --> 34:15.080]  Ну, расскажете в чем проблема, потому что я не вижу, чтобы здесь было что-то не точно, на самом деле.
[34:17.080 --> 34:22.080]  Что? Хорошо. Не, ну я знаю, что правда, может доказать неполное просто.
[34:26.080 --> 34:29.080]  Ну, еще раз, мы перебираем как бы не все, а те, которые...
[34:30.080 --> 34:33.080]  А? По факту все, да, по факту все.
[34:35.080 --> 34:37.080]  Ну ладно, поговорим еще тогда.
[34:39.080 --> 34:41.080]  Так. Окей.
[34:42.080 --> 34:45.080]  Тогда идем дальше. Мне нужен будет такой технический факт.
[34:46.080 --> 34:50.080]  Значит, давайте определение. Все, с диаметром покончили, мы его научились находить, забыли.
[34:51.080 --> 34:53.080]  Дальше, определение.
[34:54.080 --> 34:56.080]  Пусть у меня есть какое-то конечное количество точек, не знаю, там,
[34:57.080 --> 34:59.080]  P1 и так далее, PkT.
[35:01.080 --> 35:03.080]  Значит, тогда их выпуклой комбинацией...
[35:07.080 --> 35:09.080]  комбинацией...
[35:10.080 --> 35:12.080]  называется сумма вот такого вида.
[35:13.080 --> 35:15.080]  Сумма лямбда ИТ, ПИТ,
[35:16.080 --> 35:18.080]  где все лямбды не отрицательные,
[35:18.080 --> 35:20.080]  то есть И от 1 до К.
[35:21.080 --> 35:23.080]  То есть это такая линейная комбинация П-шек
[35:24.080 --> 35:26.080]  с не отрицательными коэффициентами, сумма которых один.
[35:33.080 --> 35:35.080]  Выпухлая комбинация.
[35:36.080 --> 35:38.080]  То есть это ограниченный случай
[35:39.080 --> 35:41.080]  линейной комбинации, да, только с не отрицательными коэффициентами, сумма единиц.
[35:44.080 --> 35:46.080]  Ну, по координатно.
[35:46.080 --> 35:48.080]  Вот как мы там делаем, векторы, точки, я их смешиваю всегда.
[35:49.080 --> 35:51.080]  Ну, векторы складываю, да.
[35:52.080 --> 35:54.080]  Ну, типа, блин, по координатным точке складываю.
[35:55.080 --> 35:57.080]  То есть векторы. У меня точка равно векторам.
[35:58.080 --> 36:00.080]  Можете меня булить, но...
[36:01.080 --> 36:03.080]  Для меня точка это вектор, и наоборот.
[36:04.080 --> 36:06.080]  А? Да, конечно.
[36:07.080 --> 36:09.080]  Ну, то есть эта пара, как бы каждая P, это пара х за 5y.
[36:10.080 --> 36:12.080]  Я по координатным все складываю, получаю пару, там,
[36:13.080 --> 36:15.080]  х большое за 5y большое.
[36:16.080 --> 36:18.080]  То есть пусть есть, конечно, множество точек.
[36:19.080 --> 36:21.080]  Тогда...
[36:22.080 --> 36:24.080]  Эм...
[36:25.080 --> 36:27.080]  Выпуклая оболочка
[36:28.080 --> 36:30.080]  это в точности множество всех линейных комбинаций,
[36:31.080 --> 36:33.080]  выпуклых комбинаций и точек из С.
[36:34.080 --> 36:36.080]  Ладно.
[36:37.080 --> 36:39.080]  Множество
[36:40.080 --> 36:42.080]  всех выпуклых комбинаций,
[36:47.080 --> 36:49.080]  точек из С.
[37:10.080 --> 37:12.080]  Нет, тут проще.
[37:13.080 --> 37:15.080]  Тихо, тихо.
[37:16.080 --> 37:18.080]  Тихо, тихо. Базы данных, что?
[37:19.080 --> 37:21.080]  А, я понял. Бесплатно, да, бесплатно.
[37:22.080 --> 37:24.080]  Бесплатно.
[37:25.080 --> 37:27.080]  Так.
[37:28.080 --> 37:30.080]  Давайте начнем куда-нибудь, неважно.
[37:31.080 --> 37:33.080]  Я утверждаю, что здесь происходит равенство.
[37:34.080 --> 37:36.080]  Давайте начнем, например, с такого вложения.
[37:37.080 --> 37:39.080]  То есть что любая точка из выпуклой оболочки
[37:40.080 --> 37:42.080]  обязательно представляется в виде линейной комбинации.
[37:43.080 --> 37:45.080]  Вложение слева направо значит, что любая точка выпуклой оболочки
[37:46.080 --> 37:48.080]  обязательно представляется в виде линейной комбинации.
[37:49.080 --> 37:51.080]  Вот. Но мы с вами знаем вроде более-менее,
[37:52.080 --> 37:54.080]  что выпуклая оболочка это обязательно выпуклый многоугольник.
[37:55.080 --> 37:57.080]  Ну, типа того, да.
[37:58.080 --> 38:00.080]  Вот.
[38:01.080 --> 38:03.080]  Ну, догадываемся, по крайней мере, об этом.
[38:04.080 --> 38:06.080]  Давайте его триангулируем.
[38:06.080 --> 38:08.080]  Тогда любая точка выпуклой оболочки
[38:09.080 --> 38:11.080]  любая точка изạмон��жта
[38:12.080 --> 38:14.080]  попадает по крайней мере в один из треугольников.
[38:15.080 --> 38:17.080]  А, ну и что, тогда
[38:18.080 --> 38:20.080]  любая точка
[38:21.080 --> 38:23.080]  из конвесс
[38:24.080 --> 38:26.080]  попадает в один из треугольников.
[38:36.080 --> 38:41.480]  Ну, там не знаю, например, ABC, какая-то точка Q попала
[38:41.480 --> 38:43.680]  в треугольник ABC.
[38:43.680 --> 38:46.960]  Вот, я тогда утверждаю, что Q является выпуклой комбинацией
[38:46.960 --> 38:47.960]  точек ABC.
[38:47.960 --> 38:52.680]  Ну, это простой факт, потому что давайте, например, ну,
[38:52.680 --> 38:56.400]  если Q совпадает там с, если Q лежит, неважно, пофиг.
[38:56.400 --> 39:00.360]  Значит, пусть Q внутри треугольников, тогда давайте проведем прямую
[39:00.360 --> 39:02.560]  CQ до перещения с A-B.
[39:02.560 --> 39:05.680]  Давайте, это какая-то точка будет X.
[39:05.800 --> 39:08.840]  Тогда поскольку X лежит на отрезке А-Б, то понятно,
[39:08.840 --> 39:10.700]  что X-ка это какая-то их выпуклая комбинация.
[39:10.700 --> 39:13.700]  Ну, то есть, как бы, вот у меня есть отрезок, да, мне
[39:13.700 --> 39:16.320]  нужно взять B с каким-то коэффициентом, а с каким-то
[39:16.320 --> 39:18.400]  коэффициентом сложить, чтобы получить точку Х.
[39:19.740 --> 39:20.720]  Тип-того.
[39:20.720 --> 39:21.720]  Тип-того, да.
[39:21.720 --> 39:24.440]  Т.е., мне нужно посмотреть на длины этих отрезков и
[39:24.440 --> 39:27.060]  взять-то ... если тут длина А, то здесь нужно повесить
[39:27.060 --> 39:29.840]  вес А, и если тут Б, то тут нужно повесить вес Б.
[39:29.840 --> 39:31.480]  Там, деленная на А плюс B.
[39:31.480 --> 39:32.480]  Вот.
[39:32.480 --> 39:33.700]  Тогда у меня получится, что какая-то выпуклая комбинация
[39:33.700 --> 39:34.740]  А и Б – это X.
[39:34.740 --> 39:40.180]  То же самое с отрезком c и x. Мне нужно взять выпуклую комбинацию c и x, у меня получится точка q.
[39:41.140 --> 39:43.380]  Вот, ну и понятно, что выпуклая точка. То есть, если x это
[39:44.140 --> 39:47.660]  какая-то там, не знаю, лямбда a, плюс 1 минус лямбда b.
[39:48.300 --> 39:52.740]  И мне еще нужно взять q, равную, скажем, mu c, плюс 1 минус mu x.
[39:53.140 --> 39:57.220]  Но если я сюда вместо x поставлю вот это, у меня как раз получится выражение q через a b c.
[39:59.100 --> 40:01.100]  Значит q это выпуклая комбинация
[40:02.700 --> 40:04.700]  a b c.
[40:04.740 --> 40:06.740]  Сейчас q из оболочки?
[40:07.220 --> 40:13.860]  Нет, q это произвольная точка внутри треугольника. То есть, я беру следующее, я говорю, что пусть q это произвольная точка отсюда.
[40:14.500 --> 40:21.700]  Ну, внутри выпуклая оболочка, в смысле, да. Она, в частности, внутри какого-то треугольника. Вот она является выпуклой комбинацией его вершин.
[40:21.700 --> 40:23.700]  На самом деле, утверждение-то сильнее?
[40:24.940 --> 40:26.940]  Нет, ну не важно.
[40:26.940 --> 40:32.340]  Вот, ну а раз она выпуклая комбинация этих трех, то она выпуклая комбинация всех n, потому что можно все остальные взять с нулеми процента.
[40:32.340 --> 40:33.540]  Но ведь неправда.
[40:33.780 --> 40:37.980]  Вроде доказали, давайте в обратную. Тут будет чуть больше возни.
[40:40.420 --> 40:46.580]  Значит, я хочу сказать, что если какая-то точка является выпуклой комбинацией точек из s, то она обязательно лежит в выпуклой оболочке.
[40:47.900 --> 40:52.780]  Давайте докажем это индукцией по количеству не нулевых коэффициентов.
[40:53.780 --> 40:55.780]  Значит, пусть
[40:55.940 --> 40:57.940]  Q это...
[40:57.940 --> 41:02.180]  Давайте я... Смотрите, у меня в выпуклой комбинации какие-то коэффициенты нулевые, давайте нулевые сразу выброшу.
[41:02.740 --> 41:04.740]  Давайте оставлю только положительные.
[41:04.740 --> 41:11.900]  Значит, пусть Q это какой-нибудь лямбда и первая, p и первая, плюс и так далее, плюс лямбда и kt, p и kt.
[41:12.500 --> 41:17.820]  Значит, все лямбды больше нуля, потому что нулевые я могу выбросить, они не влияют на сумму.
[41:18.580 --> 41:21.660]  Вот, докажем индукции по k.
[41:26.780 --> 41:31.620]  Не, n, n количество точек, k это количество активных выпуклых комбинаций.
[41:31.620 --> 41:36.460]  Значит, индукция. Пока докажем, что Q лежит внутри выпуклой оболочки s.
[41:39.140 --> 41:41.140]  База k равна 1.
[41:42.220 --> 41:45.900]  Тривиально, потому что в этом случае, если у меня есть только один коэффициент, только одна точка,
[41:46.100 --> 41:52.380]  то единственный способ получить сумму равно 1, это чтобы тот коэффициент был единицей.
[41:52.620 --> 41:58.940]  В этом случае просто Q равно какой-то там, p и первая, а это, понятное дело, лежит в выпуклой оболочке.
[41:58.940 --> 42:00.940]  Каждая точка лежит в выпуклой оболочке.
[42:01.220 --> 42:03.220]  Вот, ну переход.
[42:08.220 --> 42:10.220]  Давайте мы
[42:11.460 --> 42:18.180]  представим Q как выпуклые комбинации. Ну, давайте я рассмотрю вот первые k-1 слагаемые.
[42:18.180 --> 42:24.900]  И их, вот эту вот сумму превращу в выпуклых комбинаций.
[42:25.900 --> 42:27.580]  Значит, пусть
[42:27.580 --> 42:32.060]  лямбда, это сумма первых k-1 коэффициента, лямбда и первая, плюс и так далее,
[42:32.940 --> 42:35.740]  то есть лямбда и k-1.
[42:37.060 --> 42:39.060]  Значит, пусть
[42:40.860 --> 42:45.700]  лямбда и первая штрих, это лямбда и первая делить на лямбда и
[42:45.700 --> 42:47.700]  так далее.
[42:47.700 --> 42:54.220]  Лямбда и k-1 штрих, это лямбда и k-1 делить на лямбда.
[42:57.580 --> 43:04.100]  Ну, я просто взял первый коэффициент, сложил, получил какую-то сумму лямбда, и теперь все эти коэффициенты поделил на ту самую лямбду.
[43:05.300 --> 43:07.300]  Тогда, если я определяю Q-штрих
[43:08.060 --> 43:11.140]  как сумма лямбда и первая штрих, p и первая,
[43:11.740 --> 43:13.380]  плюс и так далее,
[43:13.380 --> 43:15.380]  плюс лямбда и k-1 штрих,
[43:16.180 --> 43:18.180]  p и k-1,
[43:18.580 --> 43:20.580]  то это выпугла комбинация каких-то точек.
[43:27.980 --> 43:31.340]  Почему? Потому что все коэффициенты остались по-прежнему не отрицательными,
[43:31.860 --> 43:35.220]  потому что я их просто поделил на какую-то положительную константу лямбда.
[43:35.860 --> 43:37.300]  И при этом их сумма
[43:37.300 --> 43:42.220]  стала равной единице, потому что как раз я их все нормировал, так что теперь, если я просуммиру все штрихованные лямбды,
[43:42.380 --> 43:45.580]  у меня как раз получится сумма вот этих штук делить на лямбду, это 1.
[43:47.180 --> 43:52.140]  Вот, значит это выпугла комбинация. Значит, она по предложению индукции лежит в конватес.
[44:05.660 --> 44:10.340]  Ну и все, теперь осталось выразить Q через Q-штрих и вот эту последнюю точку по икате.
[44:11.340 --> 44:13.340]  Значит, что такое Q?
[44:13.660 --> 44:16.140]  Я утверждаю, что это вот такая вот линейная комбинация
[44:18.300 --> 44:22.060]  точки Q-штрих и по икате.
[44:29.340 --> 44:31.340]  Просто потому что вот это вот лямбда.
[44:40.620 --> 44:42.620]  Вот.
[44:42.620 --> 44:48.220]  Ну это лямбда, потому что лямбда это сумма всех, кроме последнего. Значит, это как раз 1 минус лямбда икате.
[44:48.460 --> 44:53.860]  Теперь, когда я Q-штрих домножу на лямбда, у меня как раз все эти знаменатели пропадут. Останутся просто первые камни с одной слагаемой и
[44:54.100 --> 44:56.460]  плюс последние слагаемые. Ну, просто определение Q.
[44:57.620 --> 45:00.540]  Вот. При этом я знаю, что вот эти две точки
[45:01.380 --> 45:03.380]  лежат у меня в конватес.
[45:05.140 --> 45:07.140]  Лежат в конватес.
[45:07.540 --> 45:10.900]  Ну а потом я беру их в выпуклую комбинацию с коэффициентами таким и таким.
[45:12.500 --> 45:15.900]  Вот. То есть у меня были какие-то две точки Q-штрих и по икате.
[45:17.740 --> 45:25.220]  Я знаю, что эти два конца отрезка лежат в выпуклой оболочке, а потом я рассматриваю какую-то их выпуклую комбинацию. Потому что сумма коэффициентов
[45:25.540 --> 45:28.540]  равна единице и они оба нетрицательны.
[45:29.180 --> 45:34.340]  Ну как раз, да, выпуклая комбинация точек, двух точек, это какая точка на отрезке?
[45:37.140 --> 45:39.140]  Какое утверждение мы доказывали для точек из набора?
[45:41.420 --> 45:43.420]  Какое утверждение мы доказывали для точек из набора?
[45:46.980 --> 45:48.980]  Смотрите.
[45:49.180 --> 45:55.420]  Нет, нет, ничего не надо такого делать. Еще раз, смотрите. Вот здесь я мог это сделать, что Q-штрих в конватес?
[45:57.060 --> 46:00.820]  Вот это правильный переход? Дальше. Вот это правильно, что эта точка лежит в конватес?
[46:01.340 --> 46:06.980]  А дальше что? У меня написано, что Q-это выпуклая комбинация точек лежащих в конватес. Дальше я не пользуюсь.
[46:07.140 --> 46:11.420]  Индукцией. Дальше пользуюсь здравым смыслом. Что есть у меня две точки внутри выпуклой оболочки и
[46:12.540 --> 46:18.540]  какая-то точка на отрезке между ними, то эта точка Q тоже лежит в выпуклой оболочке. Потому что выпуклая оболочка и выпуклая множество.
[46:19.260 --> 46:25.340]  Значит все точки на отрезке между ними лежат в конватес. А Q-это как раз, потому что это выглобинация двух точек, лежит на отрезке между ними.
[46:25.860 --> 46:27.860]  Отсюда следует, что Q тоже лежит в конватес.
[46:30.820 --> 46:32.820]  Чего? Да.
[46:34.500 --> 46:36.500]  Нет. Нормально?
[46:37.820 --> 46:39.820]  Хорошо.
[46:42.260 --> 46:45.060]  Вот. Хорошо. Вот есть у нас такая, получается,
[46:45.780 --> 46:47.940]  эквалентная интерпретация выпуклой оболочки, если надо.
[46:50.900 --> 46:52.900]  Наверное, будет надо.
[47:07.140 --> 47:09.140]  Так, давайте ехать дальше.
[47:10.500 --> 47:14.500]  Определение. Сумма Минковского.
[47:21.380 --> 47:25.380]  Множеств, произвольных множеств. А и Б.
[47:26.580 --> 47:28.580]  Называется
[47:29.540 --> 47:33.540]  Следующее множество. Мы его будем обозначать просто А плюс Б.
[47:34.500 --> 47:42.500]  Значит это всего лишь сумма всех точек. Таких, что одна в А, другая в Б.
[47:50.020 --> 47:52.020]  Так, вот.
[47:52.020 --> 47:56.020]  Если у меня есть два множества на плоскости, я, грубо говоря,
[47:56.740 --> 48:00.740]  одной точкой итерируюсь по всему множеству А, пробегаю всю множество А,
[48:01.460 --> 48:05.460]  второй точкой пробегаю всю множество Б, рассматриваю всевозможные такие попарные суммы.
[48:05.860 --> 48:07.860]  Ну, все, что получается, это А плюс Б.
[48:07.860 --> 48:11.860]  В точности множества всех сумм точки из А, точки из Б.
[48:13.460 --> 48:15.460]  Вот.
[48:15.700 --> 48:19.700]  Ну и задача найти сумму Минковского для каких-то двух выпуклых многоугольников.
[48:27.700 --> 48:29.700]  Значит, где я мытый, это выпуклые многоугольники.
[48:35.700 --> 48:37.700]  Вот.
[48:37.940 --> 48:39.940]  Значит, где я мытый, это выпуклые многоугольники.
[48:47.940 --> 48:51.940]  Ну, давай сначала, например, скажем, зачем это вообще может быть нужно.
[48:53.940 --> 48:57.940]  Ну, к сожалению, контеста вставлял не я, потому что поэтому я не знаю, что там.
[48:57.940 --> 48:59.940]  Вот.
[48:59.940 --> 49:01.940]  Я буду не рад.
[49:02.180 --> 49:08.180]  Значит, например, через сумму Минковского можно научиться находить,
[49:08.180 --> 49:12.180]  научиться проверять, можно ли, фу ты, пересекаются ли два многоугольника.
[49:14.180 --> 49:18.180]  Вопрос, пересекаются ли М1 и М2.
[49:20.180 --> 49:24.180]  У вас есть два выпуклых многоугольника, вы хотите понять, есть ли у них общие точки.
[49:26.180 --> 49:28.180]  Ну, тогда, например, можно сделать следующее.
[49:28.180 --> 49:30.180]  Давайте мы посчитаем вот такую вот сумму Минковского.
[49:32.180 --> 49:34.180]  А сколько будет сказать сумму?
[49:34.180 --> 49:36.180]  За линию.
[49:36.180 --> 49:38.180]  М1 плюс М2.
[49:40.180 --> 49:44.180]  Ну, то есть, с иными словами, это все, как бы, все разности, точка отсюда, минус точка отсюда.
[49:46.180 --> 49:52.180]  Тогда, если эта штука, ну, как бы, точнее, это критерий, да, вот эта сумма содержит ноль,
[49:52.180 --> 49:54.180]  если и только если многоугольники пересекаются.
[50:02.180 --> 50:04.180]  Нет, с мясом, многоугольник с мясом у меня всегда.
[50:08.180 --> 50:10.180]  Что? Ну, в смысле, с внутренностью.
[50:14.180 --> 50:16.180]  С внутренностью, с внутренностью.
[50:16.180 --> 50:18.180]  Вот.
[50:18.180 --> 50:20.180]  Значит, что значит, что они пересекаются?
[50:20.180 --> 50:22.180]  Значит, есть какая-то общая точка Х, и здесь, и здесь.
[50:22.180 --> 50:26.180]  Ну, соответственно, когда я вычту Х из Х, вот здесь у меня как раз получится ноль.
[50:26.180 --> 50:28.180]  Ну и обратно, если здесь получился ноль, значит,
[50:28.180 --> 50:30.180]  можно взять какую-то точку отсюда, вычесть точку отсюда,
[50:30.420 --> 50:32.420]  чтобы получить ноль, значит, есть как раз
[50:32.420 --> 50:34.420]  одинаковая точка там и там.
[50:34.420 --> 50:36.420]  Вот.
[50:36.420 --> 50:38.420]  Более того, можно научиться находить расстояние между M1 и M2.
[50:46.420 --> 50:48.420]  Расстояние между фигурами как минимальное из расстояния
[50:48.420 --> 50:50.420]  между точками фигур.
[50:50.420 --> 50:52.420]  Вот.
[50:52.420 --> 50:54.420]  Ну а это просто мы строим ту же самую фигуру
[50:54.420 --> 50:56.420]  и находим наиболее
[50:56.420 --> 50:58.420]  близкую точку к нулю.
[50:58.660 --> 51:00.660]  То есть опять я рассматриваю тот же многоугольник
[51:02.660 --> 51:04.660]  и нахожу в нём точку самую близкую к нулю.
[51:04.660 --> 51:06.660]  Ну, потому что как раз разности
[51:06.660 --> 51:08.660]  это всевозможные вот эти вот там точки по required Q.
[51:08.660 --> 51:10.660]  Мне нужно, чтобы найти расстояние
[51:10.660 --> 51:12.660]  нужно минимизировать
[51:12.660 --> 51:14.660]  вот такую разность по всем P из M1
[51:14.660 --> 51:16.660]  по всем Q из M2.
[51:16.660 --> 51:18.660]  Но как раз если я найду
[51:18.660 --> 51:20.660]  такую разность, то дальше
[51:20.660 --> 51:22.660]  мне нужно будет просто, ну на самом деле, это будет
[51:22.660 --> 51:24.660]  какой-то выпукло многоугольник,
[51:24.660 --> 51:26.660]  дальше мне нужно будет выпукло многоугольник и найти
[51:26.660 --> 51:28.980]  Ну это как-то делается, это просто совсем.
[51:28.980 --> 51:54.260]  Ну это как раз мотан, потому что, ну типа расстояние
[51:54.260 --> 51:56.460]  между фигурами, если они замкнуты, достигается
[51:56.460 --> 51:57.460]  на точках границы.
[51:57.460 --> 51:58.460]  Это мотан.
[51:58.460 --> 52:05.100]  Вот эту задачу вы как-нибудь сами решите, ладно?
[52:05.100 --> 52:07.260]  Ну типа да, может быть расстояние.
[52:07.260 --> 52:08.260]  То есть еще раз.
[52:08.260 --> 52:11.260]  Я утверждаю, что когда вы рассмотрите такую сумму,
[52:11.260 --> 52:12.260]  это будет обязательно многоугольник.
[52:12.260 --> 52:16.060]  Вот, ну какой-то такой многоугольник.
[52:16.060 --> 52:18.780]  Дальше вам надо найти самую близкую к нулю какую-то
[52:18.780 --> 52:21.940]  точку из вот этого многоугольника.
[52:21.940 --> 52:22.940]  Ну сделайте как-нибудь, пожалуйста.
[52:22.940 --> 52:26.300]  Достаточно, на самом деле, рассматривать стороны,
[52:26.300 --> 52:28.940]  но расстояние с точки до отрезка как-нибудь найдешь.
[52:28.940 --> 52:29.940]  Давайте.
[52:29.940 --> 52:30.940]  Слушаю.
[52:30.940 --> 52:46.180]  Смотрите, многоугольник, в моем понимании, это всегда
[52:46.180 --> 52:48.380]  не только граница, но и то, что все внутри границы.
[52:49.380 --> 52:54.820]  Ну вот именно с мясом.
[52:54.820 --> 52:58.980]  Ну типа все, смотрите, вот тут вот все, что заштриховано,
[52:58.980 --> 52:59.980]  это все многоугольник.
[52:59.980 --> 53:00.980]  Вот все, что внутри тоже многоугольник.
[53:00.980 --> 53:07.100]  Ну то есть M1, M2 это многоугольники с мясом.
[53:07.100 --> 53:09.820]  Каждая из них это вот такая фигурка заштрихованная
[53:09.820 --> 53:10.820]  внутри.
[53:10.820 --> 53:11.820]  M2.
[53:11.820 --> 53:26.140]  Мы описываем границу и все, что внутри, говорим,
[53:26.140 --> 53:27.620]  что лежит в многоугольнике.
[53:27.620 --> 53:35.740]  Ну типа вот вы нарисовали границу, вот вся внутренность
[53:35.740 --> 53:39.060]  границы это многоугольник, включая границу, все это
[53:39.060 --> 53:40.060]  многоугольник.
[53:40.060 --> 53:41.060]  Отлично.
[53:41.060 --> 53:51.380]  Так, ну что, давайте разбираться теперь с Минковским, как
[53:51.380 --> 53:52.380]  его строить.
[53:52.380 --> 54:08.620]  Ой, утверждение, значит, если M1, M2 выпуклые многоугольники,
[54:08.620 --> 54:14.740]  то утверждается, что их сумма Минковского записывается,
[54:14.740 --> 54:17.340]  ну в частности равна следующему множеству.
[54:17.340 --> 54:25.620]  Это выпуклая оболочка всех попарных сумм P1 плюс P2,
[54:25.620 --> 54:29.020]  где P1 это вершина M1, P2 это вершина M2.
[54:29.020 --> 54:39.660]  Я напишу обобщенно, P1 это вершина M1.
[54:39.660 --> 54:42.660]  В отличие от определения, я рассматриваю не все возможные
[54:42.660 --> 54:46.700]  суммы точка из одного, точка из другого, а только
[54:46.700 --> 54:47.700]  вершины оставляю.
[54:47.700 --> 54:50.420]  То есть я беру вершину одного, вершину другого складываю
[54:50.420 --> 54:52.180]  и по всем ним беру выпуклую оболочку.
[54:52.180 --> 54:55.700]  То есть в обычном определении я рассматриваю просто сумму
[54:55.700 --> 55:03.420]  точек из МИ, а здесь сумма вершин из МИ.
[55:03.420 --> 55:05.620]  И потом выпукляю с помощью выпуклой оболочки.
[55:05.620 --> 55:14.900]  Чего вы орёте?
[55:14.900 --> 55:15.900]  Хейтеры блин, жесть.
[55:15.900 --> 55:21.540]  Так, давайте сначала заметим, первое, что я хочу сделать,
[55:21.540 --> 55:25.180]  это докажем, что M1 плюс M2 выпуклая фигура.
[55:25.180 --> 55:29.380]  Выпуклая фигура.
[55:29.380 --> 55:31.900]  Определение.
[55:31.900 --> 55:45.780]  Вот это сумма Минковского.
[55:45.780 --> 55:46.780]  Это множество точек.
[55:46.780 --> 55:50.540]  Множество становится выпуклым, если при взятии любых двух
[55:50.540 --> 55:51.540]  точек.
[55:51.540 --> 55:52.540]  Окей.
[55:52.540 --> 55:53.540]  Да, хорошо.
[55:53.540 --> 55:57.620]  Ну, сложили вот в обычном понимании по определению
[55:57.620 --> 55:58.620]  просто.
[55:58.620 --> 55:59.620]  Дальше.
[55:59.620 --> 56:01.620]  Почему это выпуклая штука?
[56:01.620 --> 56:03.620]  Ну давайте просто, типа, возьмём какие-то две точки
[56:03.620 --> 56:05.980]  и докажем, что отредок между ними целиком лежит.
[56:05.980 --> 56:12.220]  Вот пусть у меня, скажем, какая-то точка P1 плюс P2
[56:12.220 --> 56:17.300]  взялась в M1 плюс M2 и какая-то другая точка Q1 плюс Q2 взялась
[56:17.300 --> 56:18.300]  в M1 плюс M2.
[56:18.300 --> 56:21.380]  То есть, это какая-то точка из M1, это какая-то точка
[56:21.380 --> 56:25.460]  из M2, это из M1, это из M2.
[56:25.460 --> 56:27.340]  Мне достаточно доказать, что весь отрезок лежит
[56:27.340 --> 56:29.380]  целиком в M1 плюс M2.
[56:29.380 --> 56:31.940]  Ну, это сделать несложно.
[56:31.940 --> 56:34.820]  Я знаю, что любая точка на отрезке представляется
[56:34.820 --> 56:36.940]  выпуклой комбинацией вот этого и вот этого.
[56:36.940 --> 56:41.460]  Любая точка, скажем, Z, это вот такая вот, например,
[56:41.780 --> 56:44.380]  выпуклая комбинация своих концов.
[56:44.380 --> 56:47.380]  Вот.
[56:47.380 --> 56:53.380]  Ну, это можно спокойно расписать.
[56:53.380 --> 56:56.340]  Значит, можно писать, что это лямбда P1 плюс один
[56:56.340 --> 57:01.340]  минус лямбда Q1 плюс то же самое с индексами 2.
[57:01.340 --> 57:06.460]  Просто скобки раскрыл, перегруппировал.
[57:06.460 --> 57:11.340]  Дальше первая слагаемая лежит точно в M1, потому что
[57:11.340 --> 57:14.020]  мы знаем, что P1 и Q1 лежат в M1.
[57:14.020 --> 57:17.100]  Значит, выпуклая комбинация, ну, короче, это какая-то
[57:17.100 --> 57:19.940]  точка на отрезке между P1 и Q1, эта штука лежит обязательно
[57:19.940 --> 57:20.940]  в M1.
[57:20.940 --> 57:24.500]  То же самое здесь, P2 и Q2 лежат в M2, поэтому их выпуклая
[57:24.500 --> 57:28.060]  комбинация лежит в M2, потому что M1 и M2 выпуклые по предположению.
[57:28.060 --> 57:34.500]  Значит, мы показали, что любая Z-лигращая на отрезке
[57:34.500 --> 57:37.140]  представляется в виде суммы двух точек из M1 и M2, значит,
[57:37.140 --> 57:38.140]  доказали то, что нужно.
[57:38.500 --> 57:39.500]  Лежит в M1 плюс M2.
[57:44.900 --> 57:45.900]  Да?
[57:45.900 --> 57:46.900]  Кайф.
[57:46.900 --> 57:51.900]  А вот это то, что вы получили, это всего выпуклая комбинация
[57:51.900 --> 57:52.900]  для суммы?
[57:52.900 --> 57:53.900]  Что?
[57:53.900 --> 57:54.900]  Вот.
[57:54.900 --> 57:57.900]  А то, что вы получили, это всего выпуклая комбинация
[57:57.900 --> 57:58.900]  для суммы?
[57:58.900 --> 57:59.900]  Я не пойму вопроса, извините.
[57:59.900 --> 58:00.900]  А почему всё ещё?
[58:00.900 --> 58:03.900]  Почему она лежит?
[58:03.900 --> 58:04.900]  Почему вот это в M1 понятно?
[58:04.900 --> 58:05.900]  Да.
[58:05.900 --> 58:06.900]  Почему вот это в M2 понятно?
[58:07.660 --> 58:08.660]  Ну, выпуклая комбинация.
[58:08.660 --> 58:09.660]  Да.
[58:09.660 --> 58:10.660]  Ну а дальше, что такое M1 плюс M2?
[58:10.660 --> 58:14.660]  Это все возможные суммы, точка из M1 плюс точка из M2.
[58:14.660 --> 58:16.660]  В частности, вот эти две.
[58:16.660 --> 58:17.660]  То есть, вот это плюс вот это.
[58:23.660 --> 58:25.660]  Так, теперь мы знаем выпуклость.
[58:25.660 --> 58:27.660]  Будем доказывать вот это вот равенство.
[58:32.660 --> 58:34.660]  Давайте вот в такую сторону сначала докажу.
[58:35.420 --> 58:37.420]  Теперь будет доказывать, что вот это вложено сюда.
[58:45.420 --> 58:48.420]  Ну, возьмём произвольную точку из M1 плюс M2.
[58:48.420 --> 58:50.420]  Давайте опять её назову Z.
[58:53.420 --> 58:55.420]  Раз точка лежит в сумме M1 плюс M2,
[58:55.420 --> 58:57.420]  значит, она представляется в виде какой-то суммы,
[58:57.420 --> 58:59.420]  ну, скажем, X и Y.
[59:00.420 --> 59:02.420]  Z равно X плюс Y,
[59:03.180 --> 59:05.180]  где X пришло из M1, Y пришло из M2.
[59:05.180 --> 59:07.180]  Потому что по определению M1 плюс M2,
[59:07.180 --> 59:08.180]  это все вот такие суммы,
[59:08.180 --> 59:10.180]  поэтому для Z есть какое-то такое представление.
[59:13.180 --> 59:14.180]  Дальше сделаем следующее.
[59:14.180 --> 59:16.180]  Поскольку M1 и M2 это многоугольники,
[59:16.180 --> 59:18.180]  давайте их треангулируем.
[59:18.180 --> 59:20.180]  И поймём, в каких треугольниках лежат X и Y.
[59:20.180 --> 59:22.180]  Скажем, X попал куда-то в треугольник A1, A2, A3.
[59:24.180 --> 59:26.180]  Это всё лежит целиком в M1.
[59:26.180 --> 59:28.180]  А Y попал в треугольник B1, B2, B3.
[59:30.180 --> 59:32.180]  И это всё целиком лежит в M2.
[59:34.180 --> 59:36.180]  А поскольку это точки из M1, M2,
[59:36.180 --> 59:38.180]  то они лежат в каких-то таких треугольниках.
[59:38.180 --> 59:40.180]  А в М2?
[59:40.180 --> 59:42.180]  В М1, в М2, в М3.
[59:42.180 --> 59:44.180]  А в М4?
[59:44.180 --> 59:46.180]  В М4?
[59:46.180 --> 59:48.180]  В М4?
[59:48.180 --> 59:51.180]  В М3?
[01:00:18.180 --> 01:00:24.260]  отрицательность суммы 1, а у — это сумма межитая
[01:00:24.260 --> 01:00:28.580]  бежитая, где межитая неотрясательность суммы 1.
[01:00:28.580 --> 01:00:31.700]  Ну, потому что они в треугольниках, да, мы знаем, что начинка
[01:00:31.700 --> 01:00:33.180]  треугольника — это все выпуклые комбинации.
[01:00:33.180 --> 01:00:34.180]  Вот.
[01:00:34.180 --> 01:00:38.780]  Мне надо понять что-то про х плюс у.
[01:00:38.780 --> 01:00:46.500]  Ну, смотрите, давайте заметим, что z равный х плюс у.
[01:00:46.500 --> 01:00:53.500]  Я могу записать в следующем видео.
[01:00:53.500 --> 01:00:59.220]  Сумма по и, сумма по ж, лямбда и плюс межи, аи плюс бжи.
[01:00:59.220 --> 01:01:02.220]  Я вот ожидаю, что выполняется такое равенство.
[01:01:02.220 --> 01:01:10.700]  Ну почему, потому что, если я здесь просто раскрою
[01:01:10.700 --> 01:01:13.100]  все скобки, давайте, например, посмотрим, с каким коэффициентом
[01:01:13.100 --> 01:01:14.100]  идет у меня аит.
[01:01:14.980 --> 01:01:19.660]  Аит в эту сумму входит с коэффициентом лямбда ит плюс мя 1, плюс мя 2,
[01:01:19.660 --> 01:01:20.660]  плюс мя 3.
[01:01:20.660 --> 01:01:21.660]  Ну, то есть, три таких слагаемых.
[01:01:21.660 --> 01:01:28.500]  Извините, не плюс, умножить, виноват, умножить здесь,
[01:01:28.500 --> 01:01:29.500]  умножить.
[01:01:29.500 --> 01:01:30.500]  Иначе было бы плохо.
[01:01:30.500 --> 01:01:34.500]  Лямбда ит умножить на межитая, виноват.
[01:01:34.500 --> 01:01:35.500]  Вот.
[01:01:35.500 --> 01:01:37.580]  Теперь, еще раз, да, почему это верно, раскрываем здесь
[01:01:37.580 --> 01:01:39.540]  все скобки, смотрим на коэффициент при аи.
[01:01:40.460 --> 01:01:43.460]  Коэффициент при аи будет лямбда ит умножить на мя 1,
[01:01:43.460 --> 01:01:45.100]  плюс лямбда ит умножить на мя 2, плюс лямбда ит умножить
[01:01:45.100 --> 01:01:46.100]  на мя 3.
[01:01:46.100 --> 01:01:49.860]  Но мы знаем, что сумма мюшек это 1, значит, как раз коэффициент
[01:01:49.860 --> 01:01:51.460]  при аи будет просто лямбда ит.
[01:01:51.460 --> 01:01:54.500]  То же самое при бжи, коэффициент будет мюжитая, то есть, мы
[01:01:54.500 --> 01:01:56.620]  получаем, что при раскрытии у меня получается в точности
[01:01:56.620 --> 01:01:58.540]  х плюс у, а это z по определению.
[01:01:58.540 --> 01:01:59.540]  Да?
[01:01:59.540 --> 01:02:00.540]  Ферштейн.
[01:02:00.540 --> 01:02:01.540]  Хорошо.
[01:02:01.540 --> 01:02:08.300]  Ну, это вроде все, что нужно.
[01:02:08.300 --> 01:02:09.300]  Почему?
[01:02:09.300 --> 01:02:14.460]  Потому что мы на самом деле доказали в частности следующее.
[01:02:14.460 --> 01:02:15.460]  А что нам надо было?
[01:02:15.460 --> 01:02:19.300]  Нам надо сказать, что z лежит внутри выпуклой оболочки
[01:02:19.300 --> 01:02:20.300]  вот таких вот штук.
[01:02:20.300 --> 01:02:25.180]  Но мы показали даже более сильную вещь.
[01:02:25.180 --> 01:02:30.780]  Мы показали, что z лежит в выпуклой оболочке множество
[01:02:30.780 --> 01:02:31.780]  следующих точек.
[01:02:31.780 --> 01:02:37.460]  Ну, давайте так не пишу, просто аи ит, плюс бжи ит, по всем
[01:02:37.460 --> 01:02:44.140]  и от 1 до 3, ж от 1 до 3.
[01:02:44.140 --> 01:02:45.700]  Ну, потому что вот здесь как раз написано выпуклая
[01:02:45.700 --> 01:02:48.140]  комминация этих точек, потому что все эти коэффициенты
[01:02:48.140 --> 01:02:50.860]  не отрицательные, их сумма равна 1, ну, потому что если
[01:02:50.860 --> 01:02:52.860]  просуммировать, то у вас как раз получится, там, сумма
[01:02:52.860 --> 01:02:55.140]  лямбда иты на 1 будет 1.
[01:02:55.140 --> 01:02:59.620]  Значит, z, вот эта вот запись означает, что z лежит в выпуклой
[01:02:59.620 --> 01:03:02.580]  оболочке, является выпуклой комминацией вот этих точек,
[01:03:02.580 --> 01:03:06.540]  ну а все эти точки в частности были вершинами наших многоугольников.
[01:03:06.620 --> 01:03:08.620]  Значит, мы доказали все, что хотели.
[01:03:08.620 --> 01:03:14.820]  А эта штука уже вложена в p1 плюс p2, где p это вершина
[01:03:14.820 --> 01:03:15.820]  митра.
[01:03:15.820 --> 01:03:24.820]  То есть, мне даже для вот этого доказательства, что
[01:03:24.820 --> 01:03:27.780]  z лежит здесь, мне достаточно перебрать не все возможные
[01:03:27.780 --> 01:03:31.020]  p1 и p2, а вершины многоугольников, а в качестве p1 достаточно
[01:03:31.020 --> 01:03:34.540]  взять вот эти вот 3, любую из этих трех, в качестве
[01:03:34.540 --> 01:03:37.260]  2, любую из этих трех, и даже если ограничу так,
[01:03:37.260 --> 01:03:39.140]  то у меня получится, что z лежит в этой выпуклой
[01:03:39.140 --> 01:03:40.140]  оболочке.
[01:03:40.140 --> 01:03:41.140]  Значит, и в этой.
[01:03:41.140 --> 01:03:42.140]  А?
[01:03:42.140 --> 01:03:45.140]  Думаю, что нет.
[01:03:45.140 --> 01:03:54.140]  Ну, это слишком громоздкое было бы просто определение.
[01:03:54.140 --> 01:03:55.140]  Понятно?
[01:03:55.140 --> 01:04:06.620]  Ну, типа, если фиксировать i и просуммировать пожи, то
[01:04:06.620 --> 01:04:09.340]  у меня получится, то есть, если я лямбда и т вынесу,
[01:04:09.340 --> 01:04:11.900]  у меня будет сумма пожи мюжи, это 1, а останется сумма
[01:04:11.900 --> 01:04:15.340]  лямбда и умножить на 1, это 1.
[01:04:15.340 --> 01:04:18.620]  Так, хорошо, в одну сторону доказали, надо в другую
[01:04:18.620 --> 01:04:19.620]  теперь.
[01:04:19.620 --> 01:04:37.300]  Так, а другую это вот так вот, что если взять любую
[01:04:37.300 --> 01:04:44.300]  точку отсюда, то она лежит в m1 плюс m2.
[01:04:44.980 --> 01:04:52.980]  Ну, здесь я утверждаю, достаточно доказать, что для любой п1,
[01:04:52.980 --> 01:05:04.820]  для любой вершины m1, для любой вершины m2, их сумма
[01:05:04.820 --> 01:05:11.300]  лежит в m1 плюс m2.
[01:05:11.300 --> 01:05:13.100]  Потому что если я, то есть, смотрите, я говорю, что мне
[01:05:13.100 --> 01:05:14.980]  достаточно только для вот этих вот порождающих,
[01:05:14.980 --> 01:05:17.500]  то есть, смотрите, у меня выпукла оболочка какого-то
[01:05:17.500 --> 01:05:18.900]  множества точек порождающего.
[01:05:18.900 --> 01:05:21.740]  Вот я рассматриваю все вот эти точки, если я так говорю,
[01:05:21.740 --> 01:05:24.780]  что все они лежат здесь, то значит, выпуклая оболочка
[01:05:24.780 --> 01:05:27.340]  на них натянутая тоже лежит здесь, потому что мы доказали,
[01:05:27.340 --> 01:05:28.340]  что эта штука выпукла.
[01:05:28.340 --> 01:05:31.340]  А это тривиально, да.
[01:05:31.340 --> 01:05:34.260]  То есть, еще раз, я про каждую точку из вот этого множества
[01:05:34.260 --> 01:05:37.700]  говорю, что они не лежат в m1 плюс m2, каждая такая точка
[01:05:37.700 --> 01:05:38.700]  лежит в m1 плюс m2.
[01:05:38.700 --> 01:05:42.260]  Дальше, если я это выпукляю, строю выпуклую оболочку,
[01:05:42.260 --> 01:05:44.260]  то поскольку вот эта фигура выпуклая, то и выпуклая
[01:05:44.260 --> 01:05:46.660]  оболочка тоже полностью содержит, потому что выпуклая
[01:05:46.660 --> 01:05:48.460]  оболочка это минимальная выпуклая содержащая данное
[01:05:48.460 --> 01:05:49.460]  множество точек.
[01:05:49.460 --> 01:05:50.460]  А это какое-то.
[01:05:50.460 --> 01:05:52.060]  Значит, это содержит выпуклая оболочка, и мы победили.
[01:05:52.060 --> 01:05:55.620]  Но это тривиально, да, мы знаем, что если взять любую
[01:05:55.620 --> 01:05:58.660]  точку из m1, любую точку из m2, то их сумма лежит в m1
[01:05:58.660 --> 01:05:59.660]  плюс m2 по определению.
[01:05:59.660 --> 01:06:02.660]  Что это тривиально.
[01:06:02.660 --> 01:06:06.660]  Все, доказали.
[01:06:06.660 --> 01:06:22.060]  Ну, следствие, если m1 и m2 выпуклые многоугольники,
[01:06:22.060 --> 01:06:32.860]  то их сумма тоже выпуклая многоугольник, потому что
[01:06:33.860 --> 01:06:34.860]  конечно множество точек.
[01:06:34.860 --> 01:06:35.860]  Вот.
[01:06:35.860 --> 01:07:01.860]  Ну, я не буду доказать, я говорю, что это тривиально
[01:07:02.860 --> 01:07:04.860]  то есть м1 и м2 это выпуклая оболочка, конечно множество
[01:07:04.860 --> 01:07:06.860]  точек, то в частности это выпуклая многоугольник.
[01:07:06.860 --> 01:07:11.860]  Мы пользуемся только выпуклостью.
[01:07:11.860 --> 01:07:12.860]  Да.
[01:07:12.860 --> 01:07:15.860]  Мы пользуемся только выпуклостью, а теперь я еще навешу, что
[01:07:15.860 --> 01:07:18.860]  это еще и многоугольник.
[01:07:18.860 --> 01:07:20.860]  Можно, сейчас мы как раз это сделаем.
[01:07:20.860 --> 01:07:22.860]  У нас алгоритм как раз будет это делать.
[01:07:22.860 --> 01:07:23.860]  Вот.
[01:07:23.860 --> 01:07:25.860]  Значит, давайте теперь сразу строить алгоритм, потом
[01:07:25.860 --> 01:07:28.860]  поймем, почему он корректен.
[01:07:28.860 --> 01:07:30.860]  Значит, сделаем следующее.
[01:07:30.860 --> 01:07:33.860]  Дело, как обычно, выберем левые нижние точки в обоих
[01:07:33.860 --> 01:07:34.860]  многоугольниках.
[01:07:34.860 --> 01:07:44.860]  Ну, если, то есть выбираем самую левую, если таких
[01:07:44.860 --> 01:07:47.860]  несколько, среди них самую низкую.
[01:07:47.860 --> 01:07:48.860]  Вот.
[01:07:48.860 --> 01:07:51.860]  Дальше, ну понятно, это какие-то вершины, не знаю,
[01:07:51.860 --> 01:07:53.860]  p1 и p2.
[01:07:53.860 --> 01:07:56.860]  Понятно, что их сумма является вершиной сумм Минковского.
[01:07:56.860 --> 01:07:58.860]  Ну, потому что эти точки экстремальные по иксу, их
[01:07:58.860 --> 01:08:00.860]  сумма будет экстремальная по иксу, это обязательно
[01:08:00.860 --> 01:08:01.860]  будет вершина.
[01:08:01.860 --> 01:08:03.860]  Значит, я могу нарисовать сразу на плоскости где-то
[01:08:03.860 --> 01:08:04.860]  точку p1, p2.
[01:08:04.860 --> 01:08:06.860]  Это будет одна из вершин выпуклой оболочки, одна из
[01:08:06.860 --> 01:08:08.860]  вершин суммы Минковского.
[01:08:08.860 --> 01:08:11.860]  А дальше идея очень похожа на то, что мы делали вот
[01:08:11.860 --> 01:08:12.860]  с этими вращающимися прямыми.
[01:08:12.860 --> 01:08:15.860]  Значит, давайте рассмотрим вот эти две стороны, следующие
[01:08:15.860 --> 01:08:18.860]  две стороны, сходящие из текущих точек.
[01:08:18.860 --> 01:08:21.860]  Давайте поймем, какая из них менее крутая.
[01:08:21.860 --> 01:08:25.860]  И пририсуем ее, начиная из этой точки.
[01:08:25.860 --> 01:08:29.860]  Вот, ну, видимо, вот это вот, ну, то есть, как бы, опять,
[01:08:29.860 --> 01:08:34.860]  я измеряю какой-то угол, вот этот будет меньше, чем
[01:08:34.860 --> 01:08:35.860]  вот этот.
[01:08:35.860 --> 01:08:38.860]  Значит, я тогда рисую просто вот эту стрелку.
[01:08:38.860 --> 01:08:41.860]  Да, я к уже нарисованной точке пририсовываю вот этот
[01:08:41.860 --> 01:08:42.860]  вот вектор.
[01:08:42.860 --> 01:08:45.860]  И дальше сдвигаю вот здесь вот индекс вот сюда, то
[01:08:45.860 --> 01:08:47.860]  есть, теперь следующий рассматриваемый вектор будет
[01:08:47.860 --> 01:08:48.860]  вот такой.
[01:08:48.860 --> 01:08:50.860]  Теперь опять, у меня есть точка здесь, точка здесь,
[01:08:50.860 --> 01:08:54.860]  я рассматриваю сходящие стороны из них, смотрю,
[01:08:54.860 --> 01:08:57.860]  какой из них менее крутой, ну, то есть, какой более,
[01:08:57.860 --> 01:09:01.860]  то есть, грубо говоря, если я, то есть, я хочу понять,
[01:09:01.860 --> 01:09:03.860]  какая страна будет следующая, какую сторону нужно
[01:09:03.860 --> 01:09:05.860]  нарисовать следующую, вот это или вот это.
[01:09:05.860 --> 01:09:07.860]  Но если я их нарисую из одной точки, у меня будет вот
[01:09:07.860 --> 01:09:09.860]  этот сюда, а этот куда-то вот сюда.
[01:09:09.860 --> 01:09:12.860]  Но мне нужен тот, который, как бы, ну, вот, против
[01:09:12.860 --> 01:09:14.860]  часовой обходит весь мой многоугольник.
[01:09:14.860 --> 01:09:16.860]  Поэтому я беру вот эту сторону.
[01:09:16.860 --> 01:09:20.860]  Я ее рисую и приношу указатель вот сюда вот.
[01:09:20.860 --> 01:09:23.860]  Потом опять, есть две стороны, я выбираю, ну, там,
[01:09:23.860 --> 01:09:25.860]  если они параллельные, то я любую из них рисую
[01:09:25.860 --> 01:09:28.860]  и сдвигаю указатель вдоль этой стороны.
[01:09:28.860 --> 01:09:30.860]  И так далее.
[01:09:30.860 --> 01:09:32.860]  То есть, у меня есть опять, у меня есть две стороны,
[01:09:32.860 --> 01:09:35.860]  в каждый момент времени я выбираю, какая из них менее
[01:09:35.860 --> 01:09:38.860]  крутая, то есть, ну, вот как раз лежит на выпуклооболочке,
[01:09:38.860 --> 01:09:41.860]  да, то есть, вот здесь я могу нарисовать два таких вектора,
[01:09:41.860 --> 01:09:44.860]  я рисую из них самый, ну, самый внешний.
[01:09:44.860 --> 01:09:48.860]  Рисую его и сдвигаю указатель вдоль той стороны,
[01:09:48.860 --> 01:09:50.860]  по которой я прошелся.
[01:09:51.860 --> 01:09:55.860]  Ничего не надо.
[01:09:55.860 --> 01:09:57.860]  А, в смысле, удалить точку посередине?
[01:09:57.860 --> 01:10:00.860]  Ну, можно, ну, можно, да, да.
[01:10:00.860 --> 01:10:03.860]  Ну, это уже, это уже тонкость совсем.
[01:10:03.860 --> 01:10:05.860]  Да.
[01:10:05.860 --> 01:10:07.860]  Да.
[01:10:07.860 --> 01:10:09.860]  Мы по факту просто сторону пририсовываем.
[01:10:09.860 --> 01:10:11.860]  Ну, потому что, смотрите, вот мы P1 плюс P2 нарисовали
[01:10:11.860 --> 01:10:14.860]  правильно, вот это какая-то точка здесь.
[01:10:14.860 --> 01:10:18.860]  Дальше я говорю, что, ну, если я буду двигаться, скажем,
[01:10:18.860 --> 01:10:21.860]  вот этой точкой вдоль стороны, то у меня, на этой картинке,
[01:10:21.860 --> 01:10:24.860]  да, когда у меня P2 скользит вдоль этого отрезка,
[01:10:24.860 --> 01:10:27.860]  сумма P1 плюс P2 скользит вдоль того же параллельного отрезка.
[01:10:27.860 --> 01:10:31.860]  Вот. Ну, давайте тогда я просто открис hour сюда перерисую.
[01:10:31.860 --> 01:10:35.860]  Потом, у меня, скажем, выбор новый.
[01:10:35.860 --> 01:10:37.860]  Я могу либо этой точкой скользить вдоль такого отрезка
[01:10:37.860 --> 01:10:40.860]  и получить вот такой отрезок в результате,
[01:10:40.860 --> 01:10:42.860]  либо этой точкой скользить вдоль этого отрезка
[01:10:42.860 --> 01:10:43.860]  и получить вот этот отрезок.
[01:10:43.860 --> 01:10:46.860]  Ну, понятно, что это более внешнее, да,
[01:10:46.860 --> 01:10:50.860]  Я это рисую, сдвигаю указатель вот сюда.
[01:10:50.860 --> 01:10:52.860]  Ну и так далее.
[01:10:52.860 --> 01:10:56.860]  Так далее обхожу оба многоугольника, как-то вот там он так все прорисовывает,
[01:10:56.860 --> 01:10:59.860]  пока не вернусь обеими точками в начало.
[01:10:59.860 --> 01:11:01.860]  Да, я вот это буду рисовать.
[01:11:01.860 --> 01:11:04.860]  Не понятно, что я обязательно вернусь в конце в ту же точку, откуда начал.
[01:11:04.860 --> 01:11:07.860]  Ну, потому что я этот многоугольник обошел, этот обошел.
[01:11:07.860 --> 01:11:10.860]  У меня сумма векторов нулевая, значит я вернулся туда же, откуда начал.
[01:11:10.860 --> 01:11:14.860]  Правда ли, что если вы пришли одной из точек изначально,
[01:11:14.860 --> 01:11:17.860]  то больше мы до конца алгоритма и уже не вернемся?
[01:11:17.860 --> 01:11:18.860]  Да.
[01:11:18.860 --> 01:11:20.860]  А, потому что мы выбрали две точки при точке нажат?
[01:11:20.860 --> 01:11:21.860]  Да, нажат.
[01:11:26.860 --> 01:11:27.860]  Вот.
[01:11:29.860 --> 01:11:32.860]  Ну и соответственно тогда понятно, если такой алгоритм корректен,
[01:11:32.860 --> 01:11:35.860]  то он работает за, ну за линейное время.
[01:11:35.860 --> 01:11:39.860]  Если здесь была n вершина, здесь m, то мы за время n плюс m все нарисовали,
[01:11:39.860 --> 01:11:42.860]  потому что у меня хранится указатель на вершину здесь, указатель на вершину здесь.
[01:11:42.860 --> 01:11:46.860]  Я рассматриваю две стороны, понимаю там по знаку векторного напряжения между ними,
[01:11:46.860 --> 01:11:50.860]  понимаю, какую из них нужно нарисовать дальше и сдвигаю указатель на единичку
[01:11:50.860 --> 01:11:53.860]  в том многоугольнике, откуда пришла сторона.
[01:11:53.860 --> 01:11:57.860]  Вот, ну и так делаю, пока не пройду все вершины по одному разу слева и справа.
[01:12:01.860 --> 01:12:03.860]  Такой алгоритм линейный.
[01:12:04.860 --> 01:12:05.860]  Почему он корректен?
[01:12:06.860 --> 01:12:07.860]  Давайте подумаем.
[01:12:10.860 --> 01:12:12.860]  Значит, ну давайте про корректность.
[01:12:15.860 --> 01:12:19.860]  Во-первых, я отражаю, что то, что мы нарисовали гарантированно вложено в m1 плюс m2.
[01:12:32.860 --> 01:12:33.860]  Ну потому что что мы сделали?
[01:12:33.860 --> 01:12:36.860]  Мы взяли какую-то точку, равную сумме двух вершин.
[01:12:36.860 --> 01:12:38.860]  Понятно, что это лежит в m1 плюс m2.
[01:12:38.860 --> 01:12:40.860]  Дальше вот я делаю ровно это.
[01:12:40.860 --> 01:12:43.860]  Я одну точку зафиксировал, а второй скольжу вдоль отрезка.
[01:12:43.860 --> 01:12:46.860]  Сумма их скольжит вдоль отрезка.
[01:12:46.860 --> 01:12:49.860]  Поэтому я нарисовал что-то, что точно лежит в m1 плюс m2.
[01:12:50.860 --> 01:12:52.860]  Вот это все литово m1 плюс m2, я взянул эту точку сюда.
[01:12:52.860 --> 01:12:56.860]  Теперь я скольжу здесь по этому отрезку и здесь по этому.
[01:12:56.860 --> 01:12:58.860]  У меня сумма будет либо это, либо это.
[01:12:58.860 --> 01:13:00.860]  Я нарисовал вот это, это лежит в m1 плюс m2.
[01:13:00.860 --> 01:13:03.860]  Все стороны, которые я рисую, гарантированно лежат в m1 плюс m2,
[01:13:03.860 --> 01:13:06.860]  просто потому что они являются суммами каких-то там,
[01:13:06.860 --> 01:13:08.860]  точка плюс сторона.
[01:13:08.860 --> 01:13:11.860]  Значит все, что я нарисовал, точно вложено в m1 плюс m2.
[01:13:13.860 --> 01:13:15.860]  Почему это ровно m1 плюс m2?
[01:13:30.860 --> 01:13:32.860]  Ну давайте думать.
[01:13:32.860 --> 01:13:34.860]  Так что давайте, предположено, мы как-то шли-шли-шли,
[01:13:34.860 --> 01:13:37.860]  давайте какой-то префикс, что мы нарисовали правильно, в какой-то момент ошиблись.
[01:13:38.860 --> 01:13:40.860]  То есть например, вот эти стороны правильные
[01:13:40.860 --> 01:13:42.860]  это реально стороны m1 плюс m2.
[01:13:42.860 --> 01:13:44.860]  А дальше мы нарисовали какую-то чушь.
[01:13:44.860 --> 01:13:47.860]  То есть, например, я шел-шел-шел, и там что-то нарисовал.
[01:13:47.860 --> 01:13:49.860]  Потом нарисовал, скажем, вот это вот.
[01:13:49.860 --> 01:13:51.860]  Это то, что мы нарисовали.
[01:13:52.860 --> 01:13:56.860]  А настоящая правильная сторона m1 плюс m2 какая-то другая?
[01:13:57.860 --> 01:14:00.860]  Например какая-то такая, да, настоящая сторона.
[01:14:00.860 --> 01:14:14.780]  просто сторона. Да. Такой картинки быть не может. То есть не может быть такое, что мы нарисовали
[01:14:14.780 --> 01:14:20.660]  вектор более выпуклый, да, смотрящий вовне по сравнению со стороной m1 плюс m2. Поэтому такой
[01:14:20.660 --> 01:14:26.300]  картинки не бывает. Плохое, что могло произойти, это наоборот, когда мы нарисовали более внутренний
[01:14:26.300 --> 01:14:36.100]  угол по сравнению с правильной стороной m1 плюс m2. Давайте докажем, что такого тоже быть не
[01:14:36.100 --> 01:14:44.420]  может. То есть внутри этот вектор лежать не может, потому что как раз мы только какую-то вложенность
[01:14:44.420 --> 01:14:50.060]  рисуем. То есть мы нарисовали алгоритмом, нарисовали что-то вложенное в m1 плюс m2. Значит может быть только
[01:15:20.060 --> 01:15:26.460]  то же самое. Нет, правильный вопрос на самом деле, но по той же причине. Смотрите, вот если мы
[01:15:26.460 --> 01:15:34.580]  нарисовали что-то вот такое, то смотрите, если вот где-то здесь, если в правильном ответе где-то
[01:15:34.580 --> 01:15:39.540]  здесь сторона, то значит мы нарисовали что-то не лежащее внутри. Такого быть не может. А если
[01:15:39.540 --> 01:15:44.580]  правильная сторона куда-то вот туда уходит, то это не выпуклый ногоугольник. Ну гипотетически,
[01:15:44.580 --> 01:15:49.300]  если вдруг правильная m1 плюс m2 содержит вершину где-то на стороне, то есть она уходит либо туда,
[01:15:49.300 --> 01:15:54.500]  либо сюда, то это бред сразу. Потому что внутри она быть не может, а вне нарушилась бы выпуклость.
[01:15:54.500 --> 01:16:01.620]  То есть мы по сути смотрим первое расхождение, пересечение m1 плюс m2 с тем, что мы получили,
[01:16:01.620 --> 01:16:11.260]  и говорим, что это должна быть вершина вот из этого. Да. И дальше вершина. Да, да, да, да, да. Вот,
[01:16:11.260 --> 01:16:14.860]  значит, вот картинка, например, такая. Давайте поймем откуда все вот это взялось. Давайте
[01:16:14.860 --> 01:16:21.900]  рассмотрим предыдущий вектор. Он будет не нужен, но неважно. Значит, вот эта точка мы ее нарисовали
[01:16:21.900 --> 01:16:27.660]  как сумму чего-то из m1 плюс m2. Пусть это была точка какая-то p плюс q. То есть у меня был
[01:16:27.660 --> 01:16:37.060]  какой-то вектор, какой-то угол в ногоугольнике m1, был какой-то угол в ногоугольнике m2. Я нарисовал
[01:16:37.060 --> 01:16:42.420]  сумму этих двух точек вот здесь вот, и дальше в алгоритме нарисовал вот эту сторону. Ну что это
[01:16:42.420 --> 01:16:49.180]  за сторона? Это наименее крутая из вот этих двух. Ну давайте как-то более явно это выражу. Пусть
[01:16:49.180 --> 01:16:56.660]  вот здесь такая сторона, здесь такая. Да. Ну и наш алгоритм нарисовал соответственно что-то вот такое.
[01:16:56.660 --> 01:17:01.740]  Поскольку я в качестве стороны выбираю одну из следующих сторон, да, в качестве стороны
[01:17:01.740 --> 01:17:08.700]  результат выбираю одну из следующих сторон, понятно, я выбрал вот эту вот. Давайте назовем
[01:17:08.700 --> 01:17:17.260]  вот эти стороны. Пусть это будет u, вектор u, это вектор v. Поскольку я нарисовал u, а не v, то в
[01:17:17.260 --> 01:17:27.180]  частности это означает, что векторное произведение u на v, да, положительно, ну не отрицательно,
[01:17:27.180 --> 01:17:34.140]  потому что поворот как раз, поворот от u к v идет против часовой, то есть положительный,
[01:17:34.140 --> 01:17:42.700]  поэтому я сначала рисую u, потом когда-то в будущем нарисую v. Так, хорошо, значит вот этот вектор
[01:17:42.700 --> 01:17:49.700]  это вектор u. Мы его вот тут нарисовали. Окей, но при этом мы считаем, что есть какая-то сторона в
[01:17:49.700 --> 01:17:54.340]  правильном m1,2, здесь есть какая-то сторона. Но давайте скажем, что вот эта точка это x плюс y,
[01:17:54.340 --> 01:18:00.740]  где x точка где-то внутри вот этого многоугольника, y точка где-то внутри вот этого многоугольника. Ну
[01:18:00.740 --> 01:18:08.740]  потому что это сумма двух точек из m1,2, значит x где-то в этом углу, y где-то в этом углу. Вот,
[01:18:08.740 --> 01:18:17.300]  ну и тогда вроде понятно, что раз v это самый крайний угол, ну как бы самый крайний вектор в том
[01:18:17.300 --> 01:18:21.980]  направлении, здесь u самый крайний вектор в том направлении, то сумма вот этих двух векторов,
[01:18:21.980 --> 01:18:33.380]  она не может выходить правее, чем u. Формально более-менее. Почему? Значит смотрите, поскольку
[01:18:33.380 --> 01:18:45.060]  у меня x лежит внутри m1, то в частности я могу написать, что векторное произведение px на v. Нет,
[01:18:45.060 --> 01:18:53.780]  это не хочу, давайте вот здесь нарисую. Вот здесь qy на u, здесь поворот идет почасовой,
[01:18:53.780 --> 01:18:58.900]  поэтому штука отрицательна. Ну потому что y лежит внутри такого угла, поэтому направление
[01:18:58.900 --> 01:19:05.700]  на этот вектор идет почасовой. Более того, если я здесь же нарисовал бы вектор u, то у меня здесь
[01:19:05.700 --> 01:19:14.220]  было бы тоже самое, потому что v еще левее, чем u, поэтому векторное с px на u тоже меньше оно нуля.
[01:19:14.220 --> 01:19:18.740]  Ну и дальше, поскольку у меня векторное произведение на самом деле линейно,
[01:19:18.740 --> 01:19:25.220]  чего мы не доказывали, но это верно, можно просто по определению расписать. Тогда можно написать,
[01:19:25.220 --> 01:19:34.500]  что векторное произведение суммы тоже меньше оно нуля. Ну а это как раз вот этот вектор,
[01:19:34.500 --> 01:19:41.140]  значит он лежит где-то вот здесь вот, он не может быть правее, чем u. То есть вот тот как раз вектор
[01:19:41.140 --> 01:19:46.260]  px плюс qy, вот этот вот вектор, он обязательно лежит левее, чем u, потому что векторное произведение такое.
[01:19:46.260 --> 01:19:54.420]  Все. Ну все, спасибо. Мы доказали, поэтому наш алгоритм корректен, за n плюс m умеем
[01:19:54.420 --> 01:19:55.660]  строить Минковского. Конец.
