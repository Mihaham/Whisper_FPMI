[00:00.000 --> 00:10.000]  Но на этот раз обратите внимание, что интересно, стоимость бывает отрицательной.
[00:10.000 --> 00:18.000]  Да, то есть иногда некоторые дороги очень хотят, чтобы по ним кто-то ехал.
[00:18.000 --> 00:23.000]  То есть типа я труба, я хочу, чтобы у меня текла вода, я готов за это доплачивать.
[00:23.000 --> 00:29.000]  Вот, такая вот типичная ситуация тоже вполне возможна.
[00:29.000 --> 00:34.000]  Но она, в общем-то, в перспективе будет для нас и неиспешной.
[00:34.000 --> 00:40.000]  Итак, теперь о каждом ребре пока будет писаться 5 и соответственно еще стоимость.
[00:40.000 --> 00:44.000]  То есть получается, что ограничение на прописную способность никто не отменял.
[00:44.000 --> 00:48.000]  То есть мы говорим, что по этой трубе может течь не более чем 5 единиц жидкости,
[00:48.000 --> 00:52.000]  но за каждую единицу жидкости, которая течет, мы будем платить 7.
[00:52.000 --> 00:56.000]  Ну, каких-то там условных единиц.
[00:57.000 --> 01:03.000]  Ну, то есть если по этой трубе будет течь, скажем, 3 единицы потока, то мы заплатим 21 конкретно за эту трубу.
[01:03.000 --> 01:11.000]  Если 2, то 14. Если 3,5, то, соответственно, там сколько? 24,5.
[01:11.000 --> 01:15.000]  Ну, если будет течь там 3,5 машины.
[01:15.000 --> 01:20.000]  Ну, здесь прописные способности у нас все такие.
[01:20.000 --> 01:25.000]  Но вполне вероятно, что иногда за каждую машину будут доплачивать, но верхние ограничения никто не отменял.
[01:26.000 --> 01:29.000]  Вот, 4.
[01:29.000 --> 01:31.000]  Ну, тут если вот так.
[01:31.000 --> 01:33.000]  То есть 4,2,1,3,4.
[01:33.000 --> 01:35.000]  1,2,3.
[01:35.000 --> 01:38.000]  И стоимости тут может быть абсолютно какие-то.
[01:38.000 --> 01:40.000]  2,3,5.
[01:40.000 --> 01:45.000]  1,5,3,2,1.
[01:45.000 --> 01:47.000]  Ну да.
[01:47.000 --> 01:49.000]  Вот.
[01:51.000 --> 01:53.000]  Вот.
[01:54.000 --> 01:56.000]  15.
[01:58.000 --> 02:00.000]  Вот.
[02:00.000 --> 02:04.000]  Что нам теперь, какую задачу нам теперь хочется решить?
[02:04.000 --> 02:12.000]  Ну, конечно, оставая задачу, которую обычно хочется решать, это максимальный поток минимальной стоимости.
[02:13.000 --> 02:19.000]  То есть, как бы формировку, то есть, или вот формировка называется mean cost max load.
[02:20.000 --> 02:23.000]  То есть, что это означает?
[02:23.000 --> 02:27.000]  Мы хотим найти максимальный поток.
[02:27.000 --> 02:31.000]  Но, как мы помним, максимальный поток, он один только по величине.
[02:31.000 --> 02:37.000]  Но самих по себе максимальных потоков, как функции, их может быть огромное количество.
[02:37.000 --> 02:44.000]  Поэтому из них нам надо выбрать тот, который имеет минимальную скорость.
[02:45.000 --> 02:49.000]  Да, правда, сразу возникает естественный вопрос.
[02:49.000 --> 02:51.000]  А он существует вообще?
[02:51.000 --> 02:52.000]  Да.
[02:52.000 --> 02:54.000]  Почему?
[02:54.000 --> 02:56.000]  А почему нет?
[02:56.000 --> 02:58.000]  Потому что не может быть.
[02:58.000 --> 03:05.000]  А вдруг существует, а вдруг это там что-нибудь типа недостижимая точная нижняя край?
[03:05.000 --> 03:11.000]  Ну, то есть, понятно, что стоимости потоков ограничены снизу, безусловно?
[03:11.000 --> 03:12.000]  Да.
[03:12.000 --> 03:19.000]  Да, но вдруг существует какая-то точная нижняя край, и как бы сколь угодно близко к ней поток существует такой стоимости, а вот само этой нижней край не существует.
[03:19.000 --> 03:26.000]  Потому что если у нас есть функции потоков, то можно этим пределы взять.
[03:26.000 --> 03:29.000]  Это, короче, замкнутая множество.
[03:29.000 --> 03:32.000]  Ну да, как всегда.
[03:32.000 --> 03:35.000]  Или просто начать ругаться какими-то словами типа compact.
[03:35.000 --> 03:37.000]  Ну да.
[03:37.000 --> 03:40.000]  Да, совершенно верно.
[03:40.000 --> 03:44.000]  Не искать, что если нашли сточности депсовум, то дальше не надо.
[03:44.000 --> 03:46.000]  Думаю, нет, хватит.
[03:46.000 --> 03:48.000]  Ну, как-то так.
[03:48.000 --> 03:51.000]  Если поток сточности депсовум может не совсем, то оно не существует.
[03:51.000 --> 03:52.000]  Вот, хорошо.
[03:52.000 --> 03:53.000]  Ну, теперь вот весь такой вопрос.
[03:53.000 --> 03:54.000]  Как его найти?
[03:54.000 --> 03:57.000]  На самом деле, тут начинаются подлянки.
[03:57.000 --> 04:06.000]  Вот, как бы очень часто, вот когда говорят о декомпозиции потока на пути, забывают, что вообще поток декомпозируется на пути и циклы.
[04:06.000 --> 04:11.000]  Конечно, когда вы пишете декомпозицию на пути, то цикла вам не сильно принципиальна.
[04:11.000 --> 04:18.000]  Потому что, в общем-то, если вы циклы этих забыли, то стой, то величина потока не поменялась.
[04:18.000 --> 04:21.000]  Теперь это не так.
[04:21.000 --> 04:30.000]  Потому что здесь оказывается, что иногда по циклу пустить поток очень вполне себе выбирано.
[04:30.000 --> 04:36.000]  Потому что оказывается, казалось бы, какой оптимальный поток будет величиной 0?
[04:36.000 --> 04:38.000]  Казалось бы, просто никого не трогай.
[04:38.000 --> 04:40.000]  Но нет, это не так.
[04:40.000 --> 04:54.000]  Потому что оказывается, что если я вот здесь пущу поток вот такого рода, то у меня получился вполне себе цикл, и у него будет суммарная стоимость минус 9.
[04:54.000 --> 05:07.000]  То есть, на каждый прокат по этому циклу, собственно, одной машины в холостую, мы будем получать 9 условных единиц.
[05:07.000 --> 05:13.000]  Ну вот, получать поток это минус 9, это круче, чем ничего не делать.
[05:13.000 --> 05:21.000]  Поэтому оказывается, что циклы действительно такое могут быть.
[05:21.000 --> 05:31.000]  Правда, забегая вперед, скажем, что мы этот минимальный поток все равно будем искать в предположении, что, по крайней мере, изначально циклов отрицательного веса нет.
[05:41.000 --> 05:47.000]  Но тем не менее, даже в этом случае, да, обычно алгоритм, который это делает, он на самом деле всем известен.
[05:47.000 --> 05:49.000]  Скорее всего, вы его даже писали.
[05:49.000 --> 05:52.000]  Ну, кто хоть раз в жизни Минхоз писал хоть в каком-нибудь виде?
[05:52.000 --> 05:55.000]  Нет, я сейчас не претендую на ДДХ с потенциалами.
[05:55.000 --> 05:57.000]  А, не все, да?
[05:57.000 --> 05:59.000]  Окей, а кто о нем слышал?
[05:59.000 --> 06:01.000]  Я слышал.
[06:01.000 --> 06:03.000]  Нет, просто не слышал.
[06:03.000 --> 06:05.000]  Да, в смысле, да только что, или?
[06:05.000 --> 06:09.000]  Слишком долгомучно в отмоге пить.
[06:09.000 --> 06:11.000]  Обысками.
[06:11.000 --> 06:13.000]  Понятно.
[06:13.000 --> 06:15.000]  Ну вот.
[06:15.000 --> 06:17.000]  Правда, в любом случае, хорошо.
[06:17.000 --> 06:28.000]  Но, действительно, классический алгоритм поиска Минхоз говорит, что, если у вас изначально в графе нет циклов отрицательного веса, то идея очень простая.
[06:28.000 --> 06:38.000]  То есть, мы просто запускаем поток, ищем формы Фолкерсона, но на каждом шаге находим от СТ кратчайший путь, на этот раз по стоимости.
[06:39.000 --> 06:41.000]  Не пихай.
[06:41.000 --> 06:43.000]  Все, нужно отрицать.
[06:43.000 --> 06:45.000]  Почему это работает?
[06:45.000 --> 06:48.000]  У нас было важно, чтобы он был кратчайший.
[06:48.000 --> 06:50.000]  Нет, это не было важно.
[06:50.000 --> 06:55.000]  Нет, сейчас важно, что не по кратчайшему количеству ребра, теперь важно, чтобы он был именно минимальной пастой.
[06:55.000 --> 07:01.000]  Ну, то есть, это будет максимальный поток, потому что метод Фолкерсона предполагает, что вы можете пихать вообще как угодно.
[07:01.000 --> 07:10.000]  Ну, конечно же, имеете в виду остаточное сеть, то есть, если вы пихнули, у вас течет вода вот сюда, то вы имеете право в следующий раз пройти по этому ребру в обратную сторону за стоимость минус 5.
[07:10.000 --> 07:14.000]  Разве что метод Форда Фолкерсона не работает?
[07:14.000 --> 07:15.000]  Не работает.
[07:15.000 --> 07:16.000]  Не исходится.
[07:18.000 --> 07:19.000]  Проблема.
[07:19.000 --> 07:21.000]  Вот утверждается...
[07:21.000 --> 07:25.000]  Но придется нам остановиться в этот раз до утверждения, что если он сойдется,
[07:25.000 --> 07:26.000]  если он сойдется,
[07:26.000 --> 07:30.000]  то тогда он найдет, ну, в данном случае, минимальный, максимальный поток.
[07:30.000 --> 07:32.000]  Мы просмотрели, что он сойдется.
[07:32.000 --> 07:33.000]  Нормально.
[07:33.000 --> 07:34.000]  Нормально.
[07:34.000 --> 07:35.000]  Существенно, это все всегда понятно.
[07:35.000 --> 07:38.000]  Правда ли, что он может не сойтись?
[07:40.000 --> 07:45.000]  При том, что мы ищем минимальный по стоимости путь.
[07:46.000 --> 07:49.000]  Искали минимальное по стоянии, нам это помогло, спасло.
[07:49.000 --> 07:51.000]  Ну да, ну, не знаю, не знаю.
[07:53.000 --> 07:54.000]  Будем думать.
[07:55.000 --> 07:57.000]  Ну, в данном случае, смотрите, так.
[07:58.000 --> 08:01.000]  Ну, тут надо говорить о том, что на самом деле существует этот кратчайший путь.
[08:03.000 --> 08:04.000]  В смысле?
[08:04.000 --> 08:06.000]  Да еще, просто интересный факт.
[08:06.000 --> 08:08.000]  У него в всяком графе существует кратчайший путь?
[08:08.000 --> 08:09.000]  Да!
[08:09.000 --> 08:10.000]  Прикинь?
[08:10.000 --> 08:12.000]  В смысле, ассоциация цикла?
[08:12.000 --> 08:13.000]  Да.
[08:13.000 --> 08:14.000]  Ну, нет.
[08:14.000 --> 08:16.000]  Ну, если не будем создавать.
[08:16.000 --> 08:17.000]  Это из отчаяния?
[08:17.000 --> 08:18.000]  Нет.
[08:18.000 --> 08:19.000]  Вот, мы их не будем создавать.
[08:19.000 --> 08:20.000]  Появиться не могут.
[08:20.000 --> 08:21.000]  Вот.
[08:21.000 --> 08:22.000]  Нет, не могут.
[08:22.000 --> 08:23.000]  Вот.
[08:23.000 --> 08:24.000]  Не могут.
[08:24.000 --> 08:25.000]  Ну, в смысле...
[08:25.000 --> 08:27.000]  Да, на самом деле, да, не могут.
[08:27.000 --> 08:28.000]  Но это не трибиальный путь.
[08:28.000 --> 08:30.000]  Ну, конечно, но это не то, что нам мешает.
[08:30.000 --> 08:37.000]  Да, просто интерес будет в том, что мистическая свойство будет заключаться в том, что цикл отрицательного веса просто не будет появляться.
[08:39.000 --> 08:40.000]  Ну, вот.
[08:40.000 --> 08:42.000]  То есть, мы этим будем даже пользоваться.
[08:43.000 --> 08:45.000]  То есть, можно было пройтись по нему.
[08:47.000 --> 08:53.000]  То есть, увольте, что если нет циклов отрицательного веса, то можно вообще там ввести потенциалы, искать, как я шикую путь, потом дэкстрить.
[08:57.000 --> 08:58.000]  Помните потенциалы Джонсонов?
[09:00.000 --> 09:01.000]  Я помню, но...
[09:03.000 --> 09:06.000]  Ты сейчас как-то очень резко скакнулся.
[09:06.000 --> 09:09.000]  Сразу до самого нормального, самого крутого гритма.
[09:09.000 --> 09:10.000]  Ну, это...
[09:10.000 --> 09:11.000]  Ну, как?
[09:11.000 --> 09:13.000]  Ну нет, то есть, самый крутой, как минимум, полиномя или...
[09:13.000 --> 09:15.000]  Потому что то, что мы ищем, оно работает за, как бы...
[09:16.000 --> 09:17.000]  Условно, там...
[09:17.000 --> 09:22.000]  Называется размер, это величину максимального потока, на, там, за сколько вы там ищете, короче, ошибок.
[09:22.000 --> 09:23.000]  Я ищу он еще раз.
[09:23.000 --> 09:24.000]  Вообще?
[09:24.000 --> 09:25.000]  Ну, проталкиваю.
[09:25.000 --> 09:26.000]  Проталкиваю, вроде чего.
[09:26.000 --> 09:27.000]  Проталкиваю, да.
[09:27.000 --> 09:29.000]  Мне так кто-то сказал.
[09:29.000 --> 09:30.000]  Может быть.
[09:30.000 --> 09:31.000]  Ну, может быть.
[09:31.000 --> 09:33.000]  Мне он, по крайней мере, не известен.
[09:33.000 --> 09:34.000]  Нет, ну понятно, что есть.
[09:34.000 --> 09:40.000]  То есть, я знаю, что, как минимум, есть алгоритм, который ищет этот Минкос за полинома ТВЕ.
[09:41.000 --> 09:42.000]  Как вы разговариваете?
[09:42.000 --> 09:43.000]  А вот его я не знаю.
[09:45.000 --> 09:47.000]  Я знаю, что он существует.
[09:48.000 --> 09:49.000]  Да, вот не все следует.
[09:49.000 --> 09:50.000]  Ну, хотя вот я не знаю.
[09:50.000 --> 09:51.000]  Чем бы закончилось, еще месяц...
[09:51.000 --> 09:53.000]  Ну, черта месяца надо заниматься, можно и есть.
[09:53.000 --> 10:00.000]  То есть, мы сейчас вообще не умеем искать поток минимальной скорости на нецелочистных играх.
[10:01.000 --> 10:02.000]  Нет, на нецелочистых...
[10:02.000 --> 10:05.000]  Ну, по модулю сходимости.
[10:05.000 --> 10:09.000]  Нет, даже если сходится, мы можем с нецелочистской скоростью проделать.
[10:10.000 --> 10:11.000]  Ну, получается, да.
[10:11.000 --> 10:13.000]  Ну, в смысле, для F все нормально.
[10:13.000 --> 10:15.000]  Вопрос в том, что у нас зависит от увеличения потока.
[10:15.000 --> 10:17.000]  Это плохо, может быть.
[10:17.000 --> 10:18.000]  Ну, нет, не совсем.
[10:18.000 --> 10:21.000]  Но, как вы помните, поток может не сходиться к максимуму.
[10:22.000 --> 10:24.000]  Это отдельно для меня, да.
[10:26.000 --> 10:28.000]  Так что, увы, да, не все так просто.
[10:28.000 --> 10:32.000]  То есть, нас в этом смысле начинает выручать только то, что в подавляющем большинстве случаев,
[10:32.000 --> 10:35.000]  конечно же, попустые способности все целые.
[10:36.000 --> 10:38.000]  Ну вот, поэтому все как всегда.
[10:40.000 --> 10:42.000]  Ну а теперь, значит, это было краткое содержание...
[10:42.000 --> 10:45.000]  Да, это было краткое содержание того, что мы сегодня представили.
[10:46.000 --> 10:48.000]  Значит, теперь подробнее.
[10:49.000 --> 10:54.000]  На самом деле, конечно, в первую очередь, конечно, математически удобнее искать, конечно, не мелкост,
[10:54.000 --> 10:59.000]  а такое понятие как циркуляция.
[11:00.000 --> 11:02.000]  То есть, минимальная.
[11:03.000 --> 11:09.000]  Вот нам будет интересно найти минимальную циркуляцию.
[11:10.000 --> 11:12.000]  А мы знаем, что это?
[11:13.000 --> 11:16.000]  Первое, что нужно для этого сделать, это узнать, что это.
[11:19.000 --> 11:22.000]  Определение очень простое. Циркуляция – это поток величины 0.
[11:23.000 --> 11:24.000]  Все.
[11:28.000 --> 11:30.000]  Минимальная циркуляция – это что?
[11:30.000 --> 11:34.000]  Минимальная циркуляция – это поток величины 0 минимальной стоимости.
[11:35.000 --> 11:36.000]  Все.
[11:36.000 --> 11:40.000]  Не путаем величину потока и стоимость потока.
[11:41.000 --> 11:43.000]  Мы же отказались от циркуляции.
[11:44.000 --> 11:46.000]  Да, мы отказались.
[11:47.000 --> 11:53.000]  Но минимальную циркуляцию как раз мы будем искать произгонно.
[11:55.000 --> 11:57.000]  Почему стрелочек двойные нарисованы?
[11:57.000 --> 11:59.000]  Ну, это потому, что они взаимосвязаны.
[12:00.000 --> 12:03.000]  Нет, дело в том, что я утверждаю, а это даже не важно,
[12:03.000 --> 12:06.000]  я утверждаю, что даже не важно, отказались мы от циклов или нет,
[12:06.000 --> 12:11.000]  на самом деле утверждается так, что если мы научимся искать минимальную циркуляцию
[12:13.000 --> 12:15.000]  каким-то мистическим образом,
[12:17.000 --> 12:21.000]  то мы научимся искать максимальный поток минимальной стоимости.
[12:21.000 --> 12:22.000]  В любом грани уже.
[12:22.000 --> 12:23.000]  Абсолютно в любом.
[12:23.000 --> 12:24.000]  Абсолютно в любом.
[12:26.000 --> 12:27.000]  Светение очень простое.
[12:28.000 --> 12:29.000]  Я его могу даже просто показать.
[12:31.000 --> 12:35.000]  То есть мы просто проводим, как скрести поток в циркуляцию.
[12:39.000 --> 12:40.000]  Бесконечная пропускная способность.
[12:41.000 --> 12:43.000]  И бесконечная стоимость.
[12:44.000 --> 12:48.000]  Да, но важно, смотрите, пропускная способность плюс бесконечность.
[12:50.000 --> 12:51.000]  Плюс бесконечность.
[12:51.000 --> 12:52.000]  Да.
[12:54.000 --> 12:56.000]  Самая выгодная ребра на призовании.
[12:56.000 --> 13:00.000]  Потому что нам нужно, чтобы поток был сначала максимальный, а потом все остальное.
[13:00.000 --> 13:01.000]  Да.
[13:02.000 --> 13:05.000]  То есть нам нужно, чтобы по этому ребру цикло как можно больше.
[13:07.000 --> 13:11.000]  Понятно, что вместо минус бесконечность надо подобрать достаточно большое число,
[13:11.000 --> 13:16.000]  настолько большое, чтобы оно перевесило все, что тут может быть.
[13:17.000 --> 13:20.000]  У меня там в презентации были оценки какие-то.
[13:20.000 --> 13:22.000]  Минус три на е, на пост.
[13:24.000 --> 13:26.000]  Это вы сами можете подогнать.
[13:26.000 --> 13:28.000]  Я думаю, суть уже и так, парни.
[13:31.000 --> 13:32.000]  Вот такая красота.
[13:32.000 --> 13:35.000]  То есть действительно видим, что поток так сводится к циркуляции.
[13:35.000 --> 13:38.000]  То есть теперь, по сути, любая машина, которая ехала из СТ,
[13:38.000 --> 13:41.000]  быстренько открывает окно,
[13:41.000 --> 13:44.000]  соответственно, спускается по пожарной лестнице,
[13:44.000 --> 13:48.000]  поднимается к себе, открывает окно, вылезает и приветит к тете Любу.
[13:49.000 --> 13:52.000]  Ну, то есть, если какая-то вредная консьержка не пускает крестей,
[13:52.000 --> 13:54.000]  то можно таким образом выйти.
[13:55.000 --> 13:59.000]  Но для этого вам нужна там эта добрая девочка, живущая в этом поместье.
[14:00.000 --> 14:02.000]  Ну, видели эту кириллашу, я думаю?
[14:02.000 --> 14:03.000]  Нет.
[14:03.000 --> 14:04.000]  Смотрите.
[14:04.000 --> 14:05.000]  Вам понравится.
[14:06.000 --> 14:07.000]  Ну, вот.
[14:08.000 --> 14:09.000]  Ну, вот.
[14:10.000 --> 14:11.000]  Ну, вот.
[14:11.000 --> 14:12.000]  Ну, вот.
[14:12.000 --> 14:13.000]  По принципу.
[14:14.000 --> 14:15.000]  Это интеллектуально, да?
[14:16.000 --> 14:17.000]  Вот.
[14:20.000 --> 14:21.000]  Значит, вот.
[14:22.000 --> 14:23.000]  Так что таким образом.
[14:24.000 --> 14:27.000]  То есть, если мы сейчас научимся искать минимальную циркуляцию,
[14:27.000 --> 14:32.000]  то мы найдем и максимальный поток минимальной стоимости автоматически.
[14:34.000 --> 14:39.000]  Итак, давайте, как минимум, в принципе, искать минимальную циркуляцию.
[14:39.000 --> 14:40.000]  Каким образом?
[14:40.000 --> 14:43.000]  Мы просто добавим такое ребро и найдем поток уже в этом игре.
[14:43.000 --> 14:44.000]  Не только циркуляцию.
[14:44.000 --> 14:45.000]  Циркуляцию.
[14:46.000 --> 14:47.000]  Ну, вот.
[14:47.000 --> 14:48.000]  Нет.
[14:48.000 --> 14:51.000]  Если мы знаем циркуляцию, как мы найдем минимальную?
[14:52.000 --> 14:54.000]  Возьмем эту циркуляцию и выкинем вот это ребро.
[14:55.000 --> 14:56.000]  Утверждение.
[14:56.000 --> 14:57.000]  Это и будет максимальный.
[14:57.000 --> 14:59.000]  Останется поток, и он будет максимальным.
[15:01.000 --> 15:02.000]  Хорошо.
[15:05.000 --> 15:07.000]  Так что нам тут будет вот это максимально.
[15:10.000 --> 15:12.000]  Ну, а теперь у нас есть какой-то вопрос.
[15:12.000 --> 15:14.000]  А что такое минимальная циркуляция вообще?
[15:15.000 --> 15:16.000]  Ну, и что такое, понятно?
[15:17.000 --> 15:18.000]  Вопрос.
[15:18.000 --> 15:19.000]  Какая она?
[15:20.000 --> 15:21.000]  Она минимальная.
[15:22.000 --> 15:23.000]  Да.
[15:23.000 --> 15:25.000]  А есть ли у нее еще какие-то свойства?
[15:28.000 --> 15:29.000]  Ну, вот.
[15:29.000 --> 15:30.000]  Ну, есть у нее приятные свойства.
[15:31.000 --> 15:32.000]  Нет.
[15:32.000 --> 15:33.000]  Цельного цикла достаточно.
[15:33.000 --> 15:34.000]  Да.
[15:34.000 --> 15:36.000]  В, значит, циркуляция минимальна.
[15:37.000 --> 15:38.000]  Да?
[15:38.000 --> 15:41.000]  То есть, вот, есть ли у нас циркуляция минимальна, да?
[15:44.000 --> 15:49.000]  То, оказывается, то, значит, из этого следует, что в остаточной сети...
[15:53.000 --> 15:54.000]  сети
[15:55.000 --> 15:56.000]  нет
[15:58.000 --> 16:00.000]  цикла отрицательного веса.
[16:05.000 --> 16:06.000]  Ну, очевидно.
[16:06.000 --> 16:11.000]  А если такой цикл есть, пустим по нему машинку и получим более, меньше циркуляции.
[16:12.000 --> 16:13.000]  Понимаете?
[16:19.000 --> 16:20.000]  Ну, вот.
[16:20.000 --> 16:22.000]  Так вот, собственно, мистическое утверждение.
[16:31.000 --> 16:32.000]  Ну, действительно, как-то логично.
[16:32.000 --> 16:37.000]  Причем у нас в форде-форке Sony тоже оказывалось, что если в остаточной сети нет пути, то поток оказывается максимальный, да?
[16:38.000 --> 16:39.000]  Значит, возьмем к слову о цикле.
[16:40.000 --> 16:42.000]  Ну, в состоимости они-то тоже самые.
[16:43.000 --> 16:45.000]  Ведь, действительно, рассмотрим...
[16:46.000 --> 16:49.000]  То есть, действительно, рассмотрим какую-нибудь циркуляцию, пусть она не минимальна, да?
[16:51.000 --> 16:53.000]  Тогда, значит, в ней...
[16:54.000 --> 16:59.000]  Тогда внутри этой остаточной сети можно запустить циркуляцию отрицательной стоимости.
[17:00.000 --> 17:02.000]  Ну, это не очевидно.
[17:03.000 --> 17:04.000]  Ну, точнее так.
[17:05.000 --> 17:06.000]  Смотрите.
[17:07.000 --> 17:09.000]  Жила была циркуляция A, жила была циркуляция B.
[17:10.000 --> 17:11.000]  И была минимальна.
[17:12.000 --> 17:16.000]  То есть, в сети G у нас была циркуляция A и циркуляция B.
[17:17.000 --> 17:24.000]  Тогда я утверждаю, что в циркуляции G-A, то есть в остаточной сети относительно циркуляции A,
[17:24.000 --> 17:30.000]  существует, так сказать, вот я, может быть, в кавычах напишу, B-A.
[17:33.000 --> 17:35.000]  Ну, может быть, так сказать.
[17:36.000 --> 17:37.000]  Ну, скорее, минус.
[17:38.000 --> 17:41.000]  Только если A и B, это, что, это ли буквы?
[17:42.000 --> 17:43.000]  A и B, это циркуляция.
[17:44.000 --> 17:45.000]  Так, ну ладно.
[17:46.000 --> 17:47.000]  Какие-то, любые пока.
[17:48.000 --> 17:49.000]  Я пока говорю просто по любые циркуляции.
[17:50.000 --> 17:51.000]  Вот.
[17:52.000 --> 17:53.000]  То есть, что такое B-A?
[17:54.000 --> 17:58.000]  Это, значит, по каждому ребру должно течь воды, равная, сколько течет тут, минус, сколько течет тут.
[18:00.000 --> 18:03.000]  Ну, легко показать, что действительно это корректно.
[18:04.000 --> 18:05.000]  Ну, очевидно, что, во-первых, это циркуляция.
[18:06.000 --> 18:10.000]  Ну, значит, эта циркуляция, это корректная циркуляция именно в этой сети, правда?
[18:13.000 --> 18:14.000]  Это понятно?
[18:15.000 --> 18:16.000]  Ну да.
[18:17.000 --> 18:18.000]  Это вот с ребром или без ребра?
[18:19.000 --> 18:20.000]  Нет, циркуляция, это поток.
[18:21.000 --> 18:22.000]  Мы забыли про то сведение.
[18:23.000 --> 18:24.000]  Все, все, забыли.
[18:25.000 --> 18:26.000]  Мы просто живем про циркуляцию.
[18:27.000 --> 18:28.000]  Все, про поток мы забыли.
[18:29.000 --> 18:30.000]  Время-то, конечно.
[18:31.000 --> 18:32.000]  Про поток мы забыли.
[18:33.000 --> 18:34.000]  Мы говорим просто про абстрактных циркуляций.
[18:35.000 --> 18:42.000]  И мы говорим, что если у нас есть циркуляция A и циркуляция B, то в остаточной сети же A, относительно циркуляции A, есть циркуляция B-A.
[18:44.000 --> 18:46.000]  А мы вот тоже сверху, в правую сторону уже доказали?
[18:47.000 --> 18:48.000]  Ну, это очевидно.
[18:49.000 --> 18:55.000]  Потому что, смотри, представь себе, что у тебя была циркуляция, а в остаточной сети образовался цикл отрицательного веса.
[18:56.000 --> 19:00.000]  Остаточная сеть в том же смысле, в котором раньше.
[19:01.000 --> 19:02.000]  Да, абсолютно.
[19:03.000 --> 19:05.000]  Но тогда ты можешь пустить по этому циклу еще поток.
[19:06.000 --> 19:09.000]  Да, но если как бы была циркуляция, то ты еще в циклу поток пустил.
[19:10.000 --> 19:11.000]  Циркуляция осталась циркуляцией, правда?
[19:12.000 --> 19:13.000]  Да.
[19:14.000 --> 19:16.000]  Ну и стоимость ее строго уменьшилась.
[19:17.000 --> 19:23.000]  Отрицательного веса отрицательной стоимости.
[19:24.000 --> 19:26.000]  Отрицательного поста.
[19:27.000 --> 19:29.000]  А пропуск на инстинкту?
[19:30.000 --> 19:31.000]  Ну, как всегда, там должно быть положительное, конечно.
[19:32.000 --> 19:36.000]  Ладно, давайте так, циклов отрицательного веса на ненасыщенных ребрах.
[19:37.000 --> 19:40.000]  Хорошо, давайте, раз уж у нас так принято писать, давайте так писать.
[19:41.000 --> 19:47.000]  Ну и мы же считаем, что если у нас есть ребро в обратную сторону, ребро вес минус ц.
[19:48.000 --> 19:49.000]  Да, безусловно.
[19:50.000 --> 19:58.000]  Ну, конечно же, если вы хотите, если стоимость проезда какой-то машинки была 5 и вы хотите ее отменить, то, наверное, стоимость отмены должна быть минус 5.
[19:59.000 --> 20:01.000]  Конечно, конечно, конечно.
[20:05.000 --> 20:06.000]  Вот.
[20:07.000 --> 20:12.000]  Итак, понятно, что такое циркуляция б минус а?
[20:13.000 --> 20:14.000]  Да.
[20:15.000 --> 20:17.000]  Понятно, почему она восточность не существует, да?
[20:18.000 --> 20:19.000]  Да.
[20:20.000 --> 20:21.000]  Вот.
[20:22.000 --> 20:23.000]  Ну теперь интерес такой.
[20:24.000 --> 20:33.000]  А теперь предположим, что b минимальная циркуляция, а a не минимальная.
[20:37.000 --> 20:41.000]  Тогда заметим, что вот у этой циркуляции стоимость меньше нуля.
[20:42.000 --> 20:45.000]  Ну она потому что у нее стоимость будет тоже по стоимости b минус а, правда?
[20:46.000 --> 20:47.000]  Да.
[20:48.000 --> 20:50.000]  А теперь детическое утверждение.
[20:51.000 --> 20:55.000]  Любую циркуляцию можно декомпозировать на циклы.
[20:55.000 --> 21:14.000]  Ну, можем, конечно, вылить воду из чайников, доказать, что любой поток можно декомпозировать на пути и цикла, а пути и не будет, потому что у нас от циркуляции поток вылечены ноль, значит, декомпозиция на цикле.
[21:15.000 --> 21:16.000]  Ну вот.
[21:17.000 --> 21:31.000]  Ну, на самом деле, а можно и просто, как всегда, с чайником, если хоть по какому-то ребру что-то течет, значит, мы тут говорим, что так, раз текло, значит, вытекло, значит, вот сюда, раз текло, то вытекло и так далее, идем-идем, пока не зациклимся, а мы зациклимся, потому что у нас количество, это совершенно конечное.
[21:32.000 --> 21:37.000]  Вот, все, нашли цикл, по которому течет вода, отменили поток по нему, повторили операцию.
[21:37.000 --> 21:48.000]  Ну, смотрите, и так мы декомпозировали поток на, то есть декомпозировали нашу цикуляцию на циклы, видите, да?
[21:49.000 --> 22:03.000]  Декомпозировали поток на циклы, но так как их суммарная стоимость этих циклов меньше нуля, то мы вынуждены заключить, что у одного из этих циклов стоимость меньше нуля.
[22:07.000 --> 22:08.000]  Все.
[22:09.000 --> 22:20.000]  То есть следовательно мы показали, что если цикуляция не минимальна, то в остаточной сети найдется цикл отрицательного, в смысле отрицательной стоимости.
[22:23.000 --> 22:24.000]  Вот, примете, да?
[22:27.000 --> 22:28.000]  Вот.
[22:29.000 --> 22:38.000]  Сейчас, а можно еще раз повторить, что у нас такое бэминса? Это мы просто взяли вот цикуляцию В и...
[22:39.000 --> 22:40.000]  У бэминса, ну то есть...
[22:42.000 --> 22:51.000]  Ну, это, ну смотрите, вот у нас были ребра изначально, да? И были обратно еще ребра в второй пропускной способности ноль, да?
[22:52.000 --> 22:53.000]  Вот.
[22:53.000 --> 22:55.000]  Ну да, там, конечно, немножко удвоение получится, но не суть.
[22:56.000 --> 22:57.000]  Вот.
[22:57.000 --> 23:06.000]  И, значит, мы говорим, что если у нас, допустим, было ребро какое-нибудь, ну то есть в остатке, то есть если у нас было ребро, допустим, один...
[23:07.000 --> 23:16.000]  Так, ладно, давайте, допустим, было три, пропускная способность была, там, я не знаю, 57, да?
[23:16.000 --> 23:24.000]  И если мы решили пустить по нему неожиданно поток величины два, то что у нас тогда получается?
[23:25.000 --> 23:37.000]  Тогда у нас остается, тогда в остаточной сети у нас остается следующее, что у нас тут есть один и, соответственно, 57, но есть обратное ребро.
[23:37.000 --> 23:42.000]  Пропускной способности, соответственно, два и стоимости минус 57.
[23:42.000 --> 23:44.000]  Это вот та самая отмена потока.
[23:49.000 --> 23:51.000]  То есть это вот как у нас строится остаточная сеть.
[23:52.000 --> 23:53.000]  Вот.
[23:54.000 --> 23:56.000]  Ну вот, а теперь говорим следующее.
[23:57.000 --> 24:00.000]  Это вот как у нас строится остаточная сеть.
[24:01.000 --> 24:02.000]  Вот.
[24:03.000 --> 24:05.000]  А теперь говорим следующее.
[24:07.000 --> 24:08.000]  Ну вот.
[24:08.000 --> 24:09.000]  Ну это строится остаточная сеть.
[24:10.000 --> 24:15.000]  Ну а теперь заметим следующее, что вот чем отличается циркуляция А от циркуляции B?
[24:16.000 --> 24:17.000]  Они отличаются в следующем.
[24:17.000 --> 24:18.000]  Что?
[24:18.000 --> 24:23.000]  Может быть так, что по какому-то ребру, например, в циркуляции A течет две единицы потока,
[24:23.000 --> 24:28.000]  а в циркуляции B по этому же ребру течет три единицы потока.
[24:28.000 --> 24:35.000]  Значит, в остаточной сети в циркуляции B- будет, вот поэтому ребру течет та самая одна единица потока.
[24:35.000 --> 24:43.000]  А может быть, наоборот, поэтому ребру в циркуляции A течет две единицы потока, а в циркуляции B одна.
[24:43.000 --> 24:46.000]  Или даже наоборот, ноль давайте, ноль.
[24:46.000 --> 24:53.000]  Тогда наоборот, тогда в этой циркуляции B- в A у нас по вот этому ребру будут течь две единицы потока.
[24:53.000 --> 24:56.000]  Вот что такое циркуляция B-.
[25:01.000 --> 25:04.000]  Ну если тут один и тут два, то тут должно течь один.
[25:04.000 --> 25:08.000]  А если тут два, тут ноль, то тут вот здесь течь два.
[25:08.000 --> 25:11.000]  Именно вот здесь течь два.
[25:11.000 --> 25:13.000]  Так что вот такая красота.
[25:16.000 --> 25:20.000]  Но как вы скажете, если она не минимальна, то...
[25:20.000 --> 25:27.000]  Ну если не минимальна, то тогда в остаточной сети A найдется циркуляция отрицательной стоимости.
[25:27.000 --> 25:32.000]  Ну потому что берем минимальную циркуляцию и вот у них по имени Саш считаем, да?
[25:32.000 --> 25:34.000]  Ну вот, это циркуляция отрицательной стоимости.
[25:34.000 --> 25:44.000]  Мы ее декомпозируем на циклы и говорим, что стоимость этой циркуляции это сумма стоимости этих циклов.
[25:44.000 --> 25:48.000]  Ну нормированная, там умножить на сколько там потока по этим циклам текет.
[25:48.000 --> 25:52.000]  Но раз сумма отрицательна, значит какое-то слагаемое отрицательное.
[25:52.000 --> 25:54.000]  Хотя бы одно.
[25:54.000 --> 25:59.000]  Следовательно, найдется цикл, у которого стоимость отрицательна.
[25:59.000 --> 26:04.000]  Ну стоимость умножить на поток, но поток положительный, поэтому отрицательный.
[26:04.000 --> 26:08.000]  Так что вот такая красота.
[26:08.000 --> 26:11.000]  Да, тут пока все просто, да?
[26:11.000 --> 26:13.000]  Вот.
[26:16.000 --> 26:27.000]  Ну тогда на самом деле получается, получается на самом деле, называется такой аналог метода forDefault300.
[26:30.000 --> 26:33.000]  То есть, которая предлагает, то есть идея говорит следующее.
[26:33.000 --> 26:39.000]  А давайте просто, то есть как искать теперь минимальную циркуляцию?
[26:39.000 --> 26:46.000]  А искать ее так, берем первый попавший, там есть, так думаем, есть ли в графе цикл отрицательного веса?
[26:46.000 --> 26:50.000]  Если есть, находим его, пускаем по нему поток, повторяем операцию.
[26:50.000 --> 26:53.000]  И так делаем пока такой цикл найдется.
[26:53.000 --> 26:56.000]  Если не найдется, то значит ура.
[26:56.000 --> 26:59.000]  Мы победили, мы нашли минимальную циркуль.
[27:02.000 --> 27:05.000]  То есть как это можно делать?
[27:05.000 --> 27:09.000]  На самом деле, то есть есть на самом деле метод клея, да?
[27:09.000 --> 27:13.000]  Который предлагает это делать достаточно аккуратно.
[27:20.000 --> 27:24.000]  Значит предлагается это делать вот аккуратно.
[27:27.000 --> 27:34.000]  Вот давайте пока, допустим, для простоты, предположим, что все ребра единичной пропускной способности.
[27:36.000 --> 27:40.000]  Да, да, да, да, вот.
[27:40.000 --> 27:43.000]  И делать будем тогда так.
[27:43.000 --> 27:55.000]  Изначально, значит у нас изначально, изначально, изначально, изначально.
[27:55.000 --> 27:57.000]  Есть в графе.
[27:57.000 --> 28:00.000]  И мы удалим все ребра.
[28:01.000 --> 28:05.000]  И будем добавлять ребра по одному.
[28:05.000 --> 28:08.000]  И пропускать, возможно, какие-то циклы.
[28:08.000 --> 28:16.000]  С той целью, чтобы у нас были пропускные, чтобы у нас не было в остатке сети циклов отрицательной весы.
[28:18.000 --> 28:20.000]  Ну, изначально база выполнена.
[28:20.000 --> 28:24.000]  Тут циклов отрицательной стоимости нет, потому что нет ребра.
[28:26.000 --> 28:27.000]  Вот.
[28:30.000 --> 28:32.000]  Идея теперь будет следующей.
[28:32.000 --> 28:36.000]  Представим себе, что у нас есть какая-то сеть.
[28:36.000 --> 28:41.000]  А точнее, у этой остаточной сети есть пропускная способность.
[28:41.000 --> 28:47.000]  Пропускная способность.
[28:47.000 --> 28:51.000]  Вот такая какая-то.
[28:51.000 --> 28:52.000]  Вот.
[28:55.000 --> 28:56.000]  Это остаточная сеть.
[28:56.000 --> 28:57.000]  Да.
[28:57.000 --> 28:59.000]  Пусть это именно остаточная сеть.
[28:59.000 --> 29:01.000]  Это, так сказать, GF.
[29:02.000 --> 29:06.000]  И мы в нее добавляем новое ребро УВ.
[29:06.000 --> 29:08.000]  То есть способности 1.
[29:10.000 --> 29:12.000]  Допустим, вот.
[29:13.000 --> 29:15.000]  Не, не допустим.
[29:16.000 --> 29:18.000]  Ждать на прицетном и еще обратно.
[29:18.000 --> 29:20.000]  Ой, да, да, да.
[29:22.000 --> 29:23.000]  Так.
[29:23.000 --> 29:25.000]  Ну давайте, ну я не знаю.
[29:26.000 --> 29:28.000]  Вот добавили новое ребро.
[29:34.000 --> 29:38.000]  Мог ли появиться от добавления этого ребра циклов отрицательной стоимости?
[29:38.000 --> 29:39.000]  Да.
[29:39.000 --> 29:41.000]  Ну да, вполне что бы и нет.
[29:43.000 --> 29:44.000]  В данном случае нет.
[29:44.000 --> 29:46.000]  Да, в данном случае нет.
[29:46.000 --> 29:48.000]  Ну давайте, хорошо, давайте.
[29:48.000 --> 29:50.000]  Это-то мы проблему решим.
[29:52.000 --> 29:53.000]  Вот.
[29:54.000 --> 29:55.000]  А мог появиться.
[29:56.000 --> 29:58.000]  Но что для нас сейчас приятно?
[29:59.000 --> 30:01.000]  Приятно для нас сейчас то,
[30:02.000 --> 30:06.000]  что если у нас такой цикл отрицательной стоимости появился,
[30:07.000 --> 30:11.000]  то он обязан проходить через это ребро.
[30:13.000 --> 30:15.000]  Ну, возможно, через еще как-то.
[30:17.000 --> 30:18.000]  А как же нам это понять?
[30:19.000 --> 30:22.000]  Существует ли такой цикл, проходящий через УВ и отрицательный?
[30:23.000 --> 30:25.000]  Можно хоть алгоритм, но в пути.
[30:25.000 --> 30:27.000]  Но идея очень простая.
[30:27.000 --> 30:30.000]  Ведь действительно, вот в черном вот этом графе,
[30:30.000 --> 30:32.000]  в том, что было до добавления ребра, да,
[30:32.000 --> 30:34.000]  не было циклов отрицательной стоимости.
[30:34.000 --> 30:36.000]  Так, естественно, когда я говорю о расстоянии,
[30:36.000 --> 30:38.000]  я имею в виду расстояние только по не насыщенным ребрам.
[30:38.000 --> 30:40.000]  Я думаю, вы понимаете.
[30:41.000 --> 30:42.000]  Понимаете?
[30:42.000 --> 30:43.000]  Угу.
[30:43.000 --> 30:44.000]  Да переча.
[30:44.000 --> 30:45.000]  Ничего.
[30:45.000 --> 30:46.000]  Идем.
[30:46.000 --> 30:47.000]  Находим.
[30:47.000 --> 30:48.000]  Расстояние.
[30:51.000 --> 30:52.000]  Ну вот, то есть теперь идея такая.
[30:54.000 --> 30:57.000]  Давайте, ну вот, то есть у нас нет циклов, но есть расстояние.
[30:57.000 --> 30:59.000]  Так вот, давайте попробуем найти в этом графе
[30:59.000 --> 31:03.000]  расстояние между вершинами В и У.
[31:04.000 --> 31:07.000]  Расстояние не в количестве ребра, а в сумме стоимости.
[31:07.000 --> 31:08.000]  Конечно.
[31:09.000 --> 31:10.000]  То есть минимальный путь.
[31:11.000 --> 31:16.000]  То есть если этот путь плюс наше ребро оказался больше либо равно нуля,
[31:16.000 --> 31:18.000]  то цикл отрицательного веса не появился.
[31:19.000 --> 31:24.000]  Ну потому что то, что мы нашли, это вообще минимальный цикл с участием этого ребра.
[31:27.000 --> 31:28.000]  Вот.
[31:28.000 --> 31:29.000]  Ну вот.
[31:29.000 --> 31:31.000]  Ну могло так оказаться, что нет.
[31:31.000 --> 31:33.000]  Это все-таки оказался цикл отрицательного веса.
[31:35.000 --> 31:36.000]  Ну тогда идея такая.
[31:36.000 --> 31:41.000]  А давайте тогда по этому циклу, эту единицу потока и пустим.
[31:41.000 --> 31:43.000]  Теперь эта ребра насыщена?
[31:43.000 --> 31:46.000]  Ну не совсем, не совсем.
[31:46.000 --> 31:50.000]  Тут как бы хочется сказать, что мы победили, других циклов не появилось.
[31:50.000 --> 31:56.000]  Но с другой стороны заметим, да, что допустим пока можем гарантировать, что убилось это ребро.
[32:00.000 --> 32:02.000]  Да, это обратное появилось.
[32:02.000 --> 32:03.000]  Да.
[32:03.000 --> 32:06.000]  Но помимо него появились еще вот эти вот обратные ребра.
[32:06.000 --> 32:07.000]  Ну что?
[32:07.000 --> 32:13.000]  А вдруг с их помощью неожиданно появились какие-то циклы отрицательного веса уже в другой части игры?
[32:13.000 --> 32:14.000]  Нет.
[32:14.000 --> 32:15.000]  Не запущаю.
[32:15.000 --> 32:16.000]  Да?
[32:16.000 --> 32:17.000]  А почему?
[32:20.000 --> 32:22.000]  Вот почему они не появились?
[32:22.000 --> 32:25.000]  Иначе мы в начальном графе не были.
[32:25.000 --> 32:26.000]  А почему это?
[32:26.000 --> 32:29.000]  В изначальном графе этих ребер не было, теперь они появились.
[32:29.000 --> 32:30.000]  Там могло появиться ликро?
[32:30.000 --> 32:31.000]  Нет.
[32:31.000 --> 32:32.000]  А почему они не появились?
[32:32.000 --> 32:34.000]  Иначе мы в начальном графе не были.
[32:34.000 --> 32:35.000]  А почему они не появились?
[32:35.000 --> 32:37.000]  Там могло появиться ликро?
[32:37.000 --> 32:45.000]  Ну, через него не будет цикл, потому что если через него сейчас нет цикл, то существует более короткий путь от Ведаума.
[32:47.000 --> 32:48.000]  Ну, условно...
[32:48.000 --> 32:50.000]  Нет, погодите, погодите, погодите.
[32:50.000 --> 32:52.000]  Нет, сейчас вот, я...
[32:52.000 --> 32:53.000]  Вот этого ребра не было.
[32:53.000 --> 32:54.000]  А сейчас она есть.
[32:54.000 --> 32:55.000]  И чего?
[32:55.000 --> 33:01.000]  То есть если сейчас, может быть конкретно сейчас существует более короткий путь от Ведаума, но без черных ребер?
[33:02.000 --> 33:06.000]  Нет, пусть у нас появился какой-то путь...
[33:06.000 --> 33:08.000]  Пусть появился цикл.
[33:08.000 --> 33:11.000]  Пусть появился какой-то цикл отрицательного веса.
[33:11.000 --> 33:12.000]  Да.
[33:12.000 --> 33:15.000]  Да, он должен был задействовать в какой-то забратной графе.
[33:15.000 --> 33:16.000]  А не УВ.
[33:16.000 --> 33:17.000]  Так, обязательно.
[33:17.000 --> 33:18.000]  Ну, допустим, да, вот.
[33:18.000 --> 33:19.000]  Давайте его влезем в цикл.
[33:19.000 --> 33:20.000]  Давайте.
[33:22.000 --> 33:24.000]  И как-то там ушел цикл.
[33:24.000 --> 33:26.000]  Да, как-то шел.
[33:26.000 --> 33:30.000]  Как какой-то вот такой цикл, и вот это красненькая ребра.
[33:31.000 --> 33:36.000]  Вот тогда существует более минимальный по весу цикл, чем тот, который у нас есть у УВ.
[33:36.000 --> 33:37.000]  По идее.
[33:37.000 --> 33:42.000]  Да, но может быть в нем задействованы еще несколько красных ребер?
[33:56.000 --> 33:58.000]  Давайте.
[34:01.000 --> 34:26.000]  Ну, если только одно красное ребро задействовалось в этом цикле.
[34:26.000 --> 34:39.000]  Если только одно окрасное веково, то у вас существует путь от В до нижней части, до нижней вершины, это веревра.
[34:39.000 --> 34:45.000]  Путь, напоминаю, у нас там шел как-то вот так.
[34:45.000 --> 34:49.000]  Вот сюда, вера тут была.
[34:49.000 --> 34:53.000]  Правда, вот это пересевщение вот этого и вот этого может быть и более.
[34:53.000 --> 35:02.000]  Да, но если оно такое-то реальное, то вот этот путь, который есть центральная веревра совсем, он лучше, чем, который мы нашли его.
[35:02.000 --> 35:12.000]  Ну да, ну да, то есть действительно мы обнаружим, что если это цикл отрицательного веса, то есть мы знаем, что это ребро тогда по стоимости меньше, чем сумма вот этого всего.
[35:12.000 --> 35:16.000]  Если осматривать эти ребра вот в эту сторону.
[35:16.000 --> 35:20.000]  Тогда непосредственно перед проталкиванием, да?
[35:20.000 --> 35:25.000]  То есть мы по этому пути явно могли пройти в другую сторону, правда?
[35:25.000 --> 35:33.000]  Почему? Ну потому что он состоит из тех ребер, которые не трогались, то есть по которым вода не протекла и так далее, ну вот.
[35:33.000 --> 35:35.000]  Нет, хотя нет. Сейчас, погодите.
[35:35.000 --> 35:37.000]  А что с красными-то?
[35:37.000 --> 35:40.000]  Нет, ну я, нет, тут хочется сказать, что...
[35:40.000 --> 35:41.000]  Можно же по-другому это сказать.
[35:41.000 --> 35:42.000]  Как, давай.
[35:42.000 --> 35:47.000]  Вот мы пихнули первый путь от VEDA-U, первый цикл от VEDA-U.
[35:47.000 --> 35:49.000]  Да, и после этого нашелся вот этот.
[35:49.000 --> 35:52.000]  И после этого оно уменьшилось, наша стоимость и меньшность.
[35:52.000 --> 35:56.000]  Потом мы пихнули вот этот правый цикл. Стоимость еще уменьшилась.
[35:56.000 --> 35:57.000]  И что?
[35:57.000 --> 36:01.000]  Значит, ну когда мы его пихнули, мы по сути отменили отрибро.
[36:01.000 --> 36:11.000]  То есть итоговая стоимость и квалентно, ну квалентно нашими ногами.
[36:11.000 --> 36:13.000]  И она меньше, чем то, что мы взяли.
[36:13.000 --> 36:15.000]  Ну да.
[36:15.000 --> 36:23.000]  Ну да, то есть действительно заметим, что если пихнуть поток VEDA вот этот путь и этот цикл,
[36:23.000 --> 36:33.000]  то у вас получится какой-то поток величины 1, вы можете декомпозировать на то ли путь, то ли путь и цикл.
[36:33.000 --> 36:37.000]  Но если, причем в исходной сети, обратите внимание, да?
[36:37.000 --> 36:42.000]  И тогда, если вы можете декомпозировать на путь, то получается путь не был как чаще.
[36:42.000 --> 36:47.000]  А если декомпозировать на путь и цикл, то получается, что цикл отрицательного веса там все-таки будет.
[36:47.000 --> 36:51.000]  Это если у нас нескольких красных ребер на цепле или это неважно?
[36:51.000 --> 36:52.000]  Что-что?
[36:52.000 --> 36:54.000]  Цикл нескольких красных ребер на цепле.
[36:54.000 --> 36:56.000]  Не важно, какой поток меньшего.
[36:56.000 --> 36:58.000]  Не, а нам неважно поток.
[36:58.000 --> 37:04.000]  Нам, ну вот, то есть мы говорим, что мы его пустили, предположим, что нашелся цикл отрицательного веса.
[37:04.000 --> 37:05.000]  Просто вообще.
[37:05.000 --> 37:09.000]  Даже не важно, что он там прицеплен к этому пути, не прицеплен, не важно.
[37:09.000 --> 37:15.000]  То есть, допустим, что после того, как мы по этому пути пустили поток, у нас все еще есть цикл отрицательного, ну вот.
[37:15.000 --> 37:18.000]  Ну вот, по этому циклу пустили поток, да?
[37:18.000 --> 37:26.000]  Пусть неожиданно выяснилось, что в графе все еще есть цикл отрицательного веса.
[37:26.000 --> 37:29.000]  Тогда что получается?
[37:29.000 --> 37:33.000]  Получается, оказывается, следующая штука.
[37:33.000 --> 37:42.000]  Значит, что, действительно, что этот путь может декомпозировать на, видимо, не более чем два цикла.
[37:42.000 --> 37:43.000]  Путь какой?
[37:43.000 --> 37:45.000]  Ну, цикуляцию, короче.
[37:45.000 --> 37:46.000]  Надо про суме в две цикляции.
[37:46.000 --> 37:48.000]  Ну вот, один цикл, вот этот, через УВ.
[37:48.000 --> 37:55.000]  А второй через, ну второй, да, заметим, что он, заметим, что как бы, ребро от УВ первый цикл убил.
[37:55.000 --> 37:56.000]  Да.
[37:56.000 --> 38:00.000]  Поэтому, может быть, второй цикл, конечно, отменил этот, это УВ, да?
[38:00.000 --> 38:01.000]  Это ВУ.
[38:01.000 --> 38:05.000]  Но тогда, но вот, но тогда это будет немножко странно.
[38:05.000 --> 38:09.000]  Не может, если убил, то раньше тоже спел цикл отрицательного веса.
[38:09.000 --> 38:12.000]  Ну вот, тогда получается, что да, действительно, нот как тот.
[38:12.000 --> 38:15.000]  Грайс существовал.
[38:15.000 --> 38:18.000]  Да.
[38:18.000 --> 38:19.000]  Да, придет нот.
[38:19.000 --> 38:22.000]  Ну, хотя, я не знаю, но...
[38:22.000 --> 38:24.000]  Нет, тут другая подлянка.
[38:24.000 --> 38:28.000]  Может быть, вот это и есть отрицательный цикл, они друг друга тупо отменят?
[38:28.000 --> 38:30.000]  Вот это просто...
[38:30.000 --> 38:32.000]  А, ну, хотя с другой стороны, да.
[38:32.000 --> 38:36.000]  Ну вот, просто, ну да, тут, нет, у нас есть просто доказательства, тут аккуратно,
[38:36.000 --> 38:39.000]  просто если совсем формализовывать, то просто приводится к следующему.
[38:39.000 --> 38:44.000]  Что, допустим, после того, как мы пустили вот по этому циклу, нашелся еще один цикл, да?
[38:44.000 --> 38:47.000]  И тогда объединение и бомба, да?
[38:47.000 --> 38:51.000]  И тогда объединение и двух циклов, это циркуляция, которая декомпозируется на,
[38:51.000 --> 38:55.000]  вот почему-то нам кажется, не более чем два цикла.
[38:55.000 --> 38:59.000]  Да, отдельно, просто почему не более чем два?
[38:59.000 --> 39:00.000]  Ну вот.
[39:00.000 --> 39:01.000]  Ну, это вообще...
[39:01.000 --> 39:02.000]  Не важно.
[39:02.000 --> 39:04.000]  Ну да, на самом деле не важно.
[39:04.000 --> 39:05.000]  Ну, не важно.
[39:05.000 --> 39:06.000]  Для нас просто нет.
[39:06.000 --> 39:09.000]  Возникает такой интересный случай, а не декомпозируется ли она на ноль циклов?
[39:09.000 --> 39:12.000]  Нет, потому что иначе это циклы обратные.
[39:12.000 --> 39:15.000]  Да, потому что нет, потому что заметим, что важно, что циклы обратные,
[39:15.000 --> 39:19.000]  потому что нет, потому что заметим, что важно, что оба цикла отрицательного веса.
[39:19.000 --> 39:22.000]  То есть это означает, что циркуляция не тривиальная.
[39:23.000 --> 39:24.000]  Вот.
[39:27.000 --> 39:28.000]  Ну вот.
[39:28.000 --> 39:31.000]  А теперь замечаем, что, да, есть ли эти циркуляции...
[39:36.000 --> 39:37.000]  Ну да.
[39:37.000 --> 39:40.000]  То есть, конечно, эти два цикла могли, конечно...
[39:40.000 --> 39:44.000]  То есть теперь вот на секретный вопрос, у нас вот по этому ребру В вода течет или не течет?
[39:46.000 --> 39:51.000]  Если вода не течет, то получается, мы и без этого ребра нашли циркуляцию,
[39:51.000 --> 39:55.000]  отрицательную циркуляцию, то есть отрицательный цикл третьего речи.
[39:56.000 --> 39:57.000]  Вот.
[39:58.000 --> 39:59.000]  Ну правда, с другой стороны нам...
[39:59.000 --> 40:00.000]  Ну вот.
[40:00.000 --> 40:02.000]  Но тогда получается, что...
[40:02.000 --> 40:03.000]  Значит, так как у нас...
[40:03.000 --> 40:04.000]  Ну вот.
[40:04.000 --> 40:06.000]  Тогда получается, что по этому ребру вода течет.
[40:07.000 --> 40:08.000]  Понимаете, да?
[40:09.000 --> 40:13.000]  Но тогда у нас итоговый цикл получается либо один, либо несколько.
[40:13.000 --> 40:17.000]  И заметим, что только в одном из этих циклов по этому ребру течет вода,
[40:17.000 --> 40:20.000]  потому что у нас единичные стоимости напоминаем, да?
[40:21.000 --> 40:26.000]  И тогда отсюда получается, что если цикл больше, чем один, значит мы нашли цикл отрицательной стоимости,
[40:26.000 --> 40:30.000]  а если эти два цикла дали один цикл,
[40:30.000 --> 40:34.000]  то тогда получается, что мы там от В до У, видимо, нехорчайший путь нашли.
[40:34.000 --> 40:36.000]  Все это было, да?
[40:37.000 --> 40:38.000]  Ага.
[40:38.000 --> 40:39.000]  А что мы делали?
[40:39.000 --> 40:41.000]  Что-то вообще все забылось абсолютно.
[40:41.000 --> 40:43.000]  Что-то мы что-то строили, что-то добавляли.
[40:43.000 --> 40:46.000]  Это было бы лектик смотреть, чтобы не забыть, что мы вообще делали.
[40:46.000 --> 40:48.000]  А что мы вообще делали?
[40:48.000 --> 40:50.000]  На совершенном мы по очереди рёбом добавляли,
[40:50.000 --> 40:54.000]  и каждый раз пытаемся через рего найти цикл отрицательной стоимости.
[40:54.000 --> 40:58.000]  Причем мы еще поняли, что все циклы отрицательной стоимости,
[40:58.000 --> 41:00.000]  они не были в том числе, как у нас были.
[41:01.000 --> 41:05.000]  Мы еще поняли, что все рёбра имеют этот цикл отрицательной стоимости.
[41:05.000 --> 41:07.000]  Но зачем на самом деле?
[41:07.000 --> 41:09.000]  Нет, это другой вопрос.
[41:09.000 --> 41:11.000]  Ну, пока для простоты.
[41:13.000 --> 41:16.000]  А у тебя будет стоимость такая же, как и изначально?
[41:16.000 --> 41:19.000]  Ну, что лишается, что это могут быть и обратные книги,
[41:19.000 --> 41:21.000]  что это остаточная сеть.
[41:21.000 --> 41:22.000]  А так, так, конечно.
[41:22.000 --> 41:24.000]  Значит, еще раз.
[41:24.000 --> 41:26.000]  А то как это было?
[41:26.000 --> 41:28.000]  Намы фор намы, Гжекаш прежвеждекеич.
[41:29.000 --> 41:31.000]  Класс.
[41:32.000 --> 41:34.000]  Ну, знаете, как называется?
[41:34.000 --> 41:36.000]  Называется Допрос польского пленного.
[41:38.000 --> 41:40.000]  И вот каждый раз спрашивают там имя, фамилия.
[41:40.000 --> 41:42.000]  Гжекаш прежвеждекеич.
[41:43.000 --> 41:45.000]  Чего?
[41:46.000 --> 41:48.000]  Гжекаш?
[41:49.000 --> 41:51.000]  Классика на самом деле. Популярно было.
[41:52.000 --> 41:54.000]  Вот.
[41:54.000 --> 41:57.000]  Ну, по этому слову, вот это вот АЧФ это мне как-то напомнило.
[41:59.000 --> 42:00.000]  Значит, смотрите, еще раз.
[42:00.000 --> 42:02.000]  Краткое содержание предыдущих серий.
[42:02.000 --> 42:04.000]  Значит, смотрите.
[42:04.000 --> 42:06.000]  Как мы пытаемся искать минимальную циркуляцию?
[42:06.000 --> 42:08.000]  Мы пытаемся говорить так.
[42:08.000 --> 42:10.000]  Мы добавляем ребра по одному.
[42:12.000 --> 42:20.000]  И поддерживаем инвариант, что у нас никогда нет в ненасыщенных ребрах цикла отрицательной стоимости.
[42:22.000 --> 42:25.000]  Добиваемся, мы пытаемся добиться этого так.
[42:26.000 --> 42:29.000]  Значит, вот у нас есть остаточная сеть, в которой циклов отрицательной стоимости нет.
[42:30.000 --> 42:32.000]  Мы добавляем новое ребро УВ.
[42:33.000 --> 42:36.000]  И пытаемся из него привести цикл отрицательной стоимости.
[42:36.000 --> 42:38.000]  Делаем мы это так.
[42:38.000 --> 42:40.000]  Мы находим кратчайший путь от В до У.
[42:42.000 --> 42:49.000]  Если вместе с этим кратчайшим путем цикл не получился отрицательной стоимости, значит циклы и не появились, очевидно.
[42:50.000 --> 42:54.000]  А если он появился, то тогда мы по этому циклу упускаем единицу потока.
[42:56.000 --> 42:57.000]  Утверждение.
[42:57.000 --> 42:59.000]  После этого инвариант выполнен.
[42:59.000 --> 43:03.000]  То есть цикл отрицательной стоимости в этой остаточной сети больше нет.
[43:05.000 --> 43:08.000]  То есть вся остальная мистика – это доказательство этого абсурдения.
[43:11.000 --> 43:12.000]  Вот до этого момента понятно?
[43:12.000 --> 43:13.000]  Да.
[43:13.000 --> 43:14.000]  Отлично.
[43:14.000 --> 43:15.000]  До этого момента понятно.
[43:17.000 --> 43:18.000]  Играем дальше.
[43:18.000 --> 43:19.000]  Теперь доказательство.
[43:21.000 --> 43:22.000]  Доказательство звучит так.
[43:23.000 --> 43:25.000]  Итак, мы пустили вот этот цикл.
[43:26.000 --> 43:28.000]  Заметьте, циркуляция от этого уменьшилась.
[43:30.000 --> 43:38.000]  Предположим, что у нас где-то в этом графе, абсолютно неважно где, цикл отрицательной стоимости все еще нашелся.
[43:38.000 --> 43:40.000]  Значит, тогда у нас получилась какая-то…
[43:41.000 --> 43:42.000]  Ну, суммарно эти два…
[43:42.000 --> 43:43.000]  Ну, пропихнем тоже.
[43:44.000 --> 43:50.000]  И тогда у нас в исходной сети, вот до того, как мы вдоль ув пропихивали, получилась какая-то циркуляция отрицательной стоимости.
[43:50.000 --> 43:53.000]  Суммарно, которую можно декомпозировать на несколько циклов.
[43:56.000 --> 43:57.000]  Ну вот.
[43:57.000 --> 43:58.000]  Но возникает вопрос.
[43:59.000 --> 44:00.000]  Из скольких циклов она состоит?
[44:00.000 --> 44:02.000]  Ну, как минимум, больше, чем из нуля.
[44:03.000 --> 44:06.000]  Потому что у нас есть циркуляция отрицательной стоимости.
[44:06.000 --> 44:07.000]  Больше, чем из нуля.
[44:08.000 --> 44:09.000]  Потому что она отрицательная.
[44:11.000 --> 44:12.000]  Вот.
[44:13.000 --> 44:21.000]  Но, если существует хотя бы два цикла, то тогда хотя бы в одном из этих циклов не присутствует вот это ребро.
[44:25.000 --> 44:26.000]  Логично, да?
[44:26.000 --> 44:27.000]  УВ.
[44:27.000 --> 44:28.000]  Да, УВ.
[44:29.000 --> 44:30.000]  Ну, она…
[44:31.000 --> 44:32.000]  Ну, логично, да.
[44:33.000 --> 44:34.000]  Вот.
[44:34.000 --> 44:36.000]  То есть, нет, это верно именно потому, что это единичный ребро.
[44:36.000 --> 44:38.000]  Чтобы было бы не единичное, кстати, это могло бы быть неправдой.
[44:40.000 --> 44:41.000]  Ну, там какой-нибудь тупой пример.
[44:41.000 --> 44:45.000]  В духе, что вот была у вас остаточная сеть, вот такая единичная, да?
[44:48.000 --> 44:51.000]  А потом, бам-бам, и появилось ребро прописной способности 2.
[44:53.000 --> 44:54.000]  Видите, да?
[44:55.000 --> 45:03.000]  Ну, это именно прописной способности, а вот по стоимости, вот зелененькой, тут оказывалось, что это там минус 5, а тут все красиво.
[45:03.000 --> 45:04.000]  1.1, там 1.2.
[45:05.000 --> 45:08.000]  Тогда одного цикла, одного пропуска не хватит.
[45:10.000 --> 45:18.000]  То есть, как бы забирая вперед, то есть, когда стоимости будут бывать целыми, но больше, чем 1, нам, мы будем просто добавлять прописной способности прямо по единичке.
[45:18.000 --> 45:19.000]  Это для нас будет важно.
[45:24.000 --> 45:25.000]  Вот.
[45:27.000 --> 45:28.000]  Вот.
[45:28.000 --> 45:29.000]  Ну, пока единичка.
[45:29.000 --> 45:36.000]  Значит, у нас все циклы, которые мы декомпозируем, имеют, собственно, по ним течет вода один.
[45:36.000 --> 45:40.000]  И, как следствие, то есть, это означает, что эти циклы не пересекаются поредом.
[45:41.000 --> 45:42.000]  Понимаете, да?
[45:42.000 --> 45:48.000]  Значит, если циклов хотя бы два, то хотя бы в одном из них этого вибра нет, а это означает, что это цикл отрицательного, ну вот.
[45:49.000 --> 45:50.000]  Нет, хотя нет.
[45:50.000 --> 45:51.000]  Не так.
[45:59.000 --> 46:00.000]  Сейчас.
[46:00.000 --> 46:01.000]  Вот давайте так.
[46:01.000 --> 46:03.000]  Вот в этой декомпозиции мы знаем, что эта декомпозиция у нас...
[46:03.000 --> 46:05.000]  У нас эта декомпозиция сейчас отрицательной стоимости.
[46:06.000 --> 46:07.000]  Вот мы ее декомпозировали на циклы.
[46:11.000 --> 46:12.000]  Вот.
[46:14.000 --> 46:19.000]  И, соответственно, давайте из этих декомпозиции выкинем все циклы...
[46:21.000 --> 46:25.000]  То есть, и эта новая декомпозиция, она меньше, чем вот вес вот этого цикла, который мы изнасиловали.
[46:25.000 --> 46:26.000]  Вот.
[46:26.000 --> 46:27.000]  Тогда идея теперь такая.
[46:28.000 --> 46:37.000]  Берем эту декомпозицию, и из нее выкидываем ноты, и из нее выкидываем все циклы не отрицательной стоимости.
[46:40.000 --> 46:41.000]  Остается декомпозиции еще меньше.
[46:42.000 --> 46:43.000]  Уже не строго, но меньше.
[46:44.000 --> 46:45.000]  Ну вот.
[46:46.000 --> 46:47.000]  Ну вот.
[46:47.000 --> 46:48.000]  И тогда возникает такое.
[46:49.000 --> 46:52.000]  Тогда вот у нас возникает в этой декомпозиции цикл отрицательной стоимости.
[46:53.000 --> 46:54.000]  Если...
[46:55.000 --> 47:04.000]  Если он не проходит через это ребро, значит он проходит только через черные ребра, и получается, что у нас в исходной циркуляции уже был цикл отрицательного веса противоречия.
[47:05.000 --> 47:06.000]  Правильно?
[47:06.000 --> 47:07.000]  Да, нет.
[47:09.000 --> 47:10.000]  Сейчас черные это...
[47:11.000 --> 47:12.000]  Которые были.
[47:12.000 --> 47:15.000]  Перед добавлением красного ребра и проталкиваем вот этой воды.
[47:20.000 --> 47:31.000]  Если цикл не проходит через ребро в В, то он проходит только через черные ребра, и получается, что у нас в исходной циркуляции уже был цикл отрицательного веса противоречия.
[47:33.000 --> 47:34.000]  Да, нет.
[47:36.000 --> 47:37.000]  И имеет отрицательный вес.
[47:38.000 --> 47:39.000]  Имеет отрицательный вес, то...
[47:40.000 --> 47:42.000]  Он был там и перед добавлением красного ребра.
[47:47.000 --> 47:49.000]  Нет, не только через В, еще и через обратную.
[47:50.000 --> 47:51.000]  А причем туда обратную?
[47:52.000 --> 47:53.000]  Нет, мы же уже декомпозицию рассматриваем.
[47:54.000 --> 47:55.000]  То есть мы добавили ребро в В, да?
[47:56.000 --> 48:04.000]  И сказали, что вот этот синий цикл плюс еще какой-то найденный цикл отрицательного веса образуют в нем циркуляцию отрицательной стоимости.
[48:05.000 --> 48:07.000]  А, стоп. Мы не пустили пока еще по...
[48:08.000 --> 48:09.000]  Нет, ну как бы пустили.
[48:10.000 --> 48:11.000]  А, пустили.
[48:12.000 --> 48:16.000]  Пустили, но рассматриваем ее с точки зрения той сети, которая была сразу после добавления в В.
[48:24.000 --> 48:25.000]  Ну как бы была сдаточная сеть.
[48:26.000 --> 48:27.000]  Вот эта черная, да?
[48:28.000 --> 48:29.000]  Мы в нее добавили ребро в В, пока ничего не сделали.
[48:30.000 --> 48:31.000]  Да?
[48:31.000 --> 48:35.000]  Потом после этого мы запустили поток сначала вот по этому циклу, а потом еще по какому-то циклу, да?
[48:38.000 --> 48:42.000]  Это можно интерпретировать как вот в этой исходной сети мы запустили циркуляцию.
[48:45.000 --> 48:46.000]  Понятно, да?
[48:47.000 --> 48:48.000]  Именно эту циркуляцию...
[48:49.000 --> 48:51.000]  Ну вот в этой циркуляции вот этого ребра...
[48:52.000 --> 48:54.000]  То есть в этой сети вот этого ребра не существует.
[48:55.000 --> 48:56.000]  Точнее не существует, но оно насыщенно.
[48:57.000 --> 48:58.000]  В битоне, да?
[48:59.000 --> 49:00.000]  Ну исходно.
[49:02.000 --> 49:06.000]  Ну сразу после добавления ребра у В в сеть вот этого ребра не появилось.
[49:07.000 --> 49:08.000]  Ну да.
[49:09.000 --> 49:10.000]  Оно было насыщенно.
[49:11.000 --> 49:16.000]  Поэтому, когда мы будем рассматривать эту нашу циркуляцию, вот этого ребра ни в одном из этих циклов не будет.
[49:21.000 --> 49:22.000]  Вот этого, обратного.
[49:23.000 --> 49:24.000]  Вот этого, обратного, да?
[49:25.000 --> 49:30.000]  То есть вообще, на самом деле, циркуляция для нас, то есть более того, вот этих красных там тоже не будет.
[49:32.000 --> 49:33.000]  То есть как бы, как в потоках, да?
[49:34.000 --> 49:35.000]  То есть мы нашли поток, да?
[49:36.000 --> 49:37.000]  То есть там остаточная сеть в данном случае...
[49:38.000 --> 49:40.000]  Остаточность это была там какое-то какое-то свойство.
[49:41.000 --> 49:45.000]  Ну да, не свойство, а там просто какой-то хак, который мы использовали для чего-то там.
[49:46.000 --> 49:47.000]  А так мы просто нашли поток сети.
[49:48.000 --> 49:49.000]  Все.
[49:50.000 --> 49:53.000]  То есть мы вообще забываем это вместе даже о концепции обратной сети.
[49:54.000 --> 49:55.000]  Так, забыли.
[49:56.000 --> 49:57.000]  Значит, пока мы просто говорим...
[49:58.000 --> 50:06.000]  Значит, пока мы просто говорим, что предположим, что у нас нашелся вот цикл, а потом, когда мы тут по нему пропустили, в остаточной сети еще там нашелся какой-то цикл, да?
[50:07.000 --> 50:11.000]  То есть это означает, что мы говорим, что у этого цикла стоимость была, допустим...
[50:13.000 --> 50:16.000]  Ну там, допустим, минус w, буду писать, минус для подчеркивания, что...
[50:17.000 --> 50:18.000]  Ну ладно, не минус w, а минус там...
[50:19.000 --> 50:20.000]  Минус х, да?
[50:23.000 --> 50:31.000]  А если то, что у нас там нашелся еще цикл отрицательного веса в остаточной сети, это означает, что у нас образовалась циркуляция минус х и еще минус y.
[50:34.000 --> 50:35.000]  Типа меньше, чем минус х.
[50:38.000 --> 50:40.000]  То есть в этом графе есть циркуляция.
[50:42.000 --> 50:44.000]  Еще меньше, чем минус х.
[50:45.000 --> 50:47.000]  Вот мы сейчас... вот я утверждаю, что это неправда.
[50:50.000 --> 50:51.000]  Вот я это доказываю сейчас.
[50:53.000 --> 50:56.000]  Я окончательно запутался, что там ребра обратные, не обратные.
[50:57.000 --> 50:59.000]  Сейчас, у нас же в остаточной сети есть обратные ребра?
[51:02.000 --> 51:05.000]  Сейчас, у нас же в остаточной сети два цикла, один через w и второй.
[51:06.000 --> 51:09.000]  Если мы их сложим, то там точно не будет по остаточным... ну по обратным ребрам идти.
[51:11.000 --> 51:14.000]  Ну, тут скажем так, тут остаточная относительность чего?
[51:15.000 --> 51:19.000]  То есть как бы в любой момент эта сеть является остаточная относительность чего-то, но давайте так.
[51:20.000 --> 51:22.000]  Давайте считать, да приступим, будем говорить, что вот...
[51:23.000 --> 51:26.000]  То есть у нас назовем g сеть, которая была перед добавлением uv.
[51:27.000 --> 51:29.000]  Вот будем называть ее g и будем считать, что она не остаточная.
[51:30.000 --> 51:31.000]  Вот, все.
[51:32.000 --> 51:33.000]  Все, вот это сеть g.
[51:34.000 --> 51:40.000]  Тогда у нас остаточная сеть g там какая-то появляется, только когда мы вот добавляем ребро uv и пускаем вот тут.
[51:41.000 --> 51:43.000]  Тогда появляются эти обратные ребра, они лежат в этой остаточной сети.
[51:44.000 --> 51:46.000]  И в этой остаточной сети еще цикл есть.
[51:47.000 --> 51:49.000]  Отрицательного веса мы по нему пропустили.
[51:50.000 --> 51:51.000]  Что это значит?
[51:52.000 --> 51:59.000]  Тогда суммарно получается, что если как бы с этими манипуляциями, то в исходной сети g мы пропустили какую-то циркуляцию.
[52:01.000 --> 52:03.000]  Только там ребра uv, вы сказали, не было?
[52:04.000 --> 52:07.000]  Ну, да, ну это, ну можно сказать, что...
[52:08.000 --> 52:11.000]  Ну, можно сказать, когда ребро uv было, но это не обратное ребро, это просто новое ребро.
[52:12.000 --> 52:14.000]  Мы добавили ребро и пропустили циркуляцию.
[52:14.000 --> 52:17.000]  Все, забыли о всех остаточностях.
[52:18.000 --> 52:20.000]  Теперь, у нас есть циркуляция.
[52:21.000 --> 52:24.000]  Она отрицательной в стоимости, следовательно, она нетривиальна.
[52:25.000 --> 52:28.000]  То есть ее можно декомпозировать на больше, чем ноль цирков.
[52:31.000 --> 52:34.000]  Вот, ну может быть один, может два, может три, может там сто пятьсот.
[52:35.000 --> 52:38.000]  Ну, скорее всего, не более, чем два, но это другой вопрос.
[52:38.000 --> 52:40.000]  Значит, у нас есть какой-то набор циклов.
[52:41.000 --> 52:43.000]  То есть в итоге, в этой циркуляции вот.
[52:45.000 --> 52:48.000]  Какие-то из них, по стоимости, меньше нуля, какие-то больше нуля.
[52:49.000 --> 52:50.000]  Ну, могут быть и равные нули.
[52:51.000 --> 52:52.000]  Но давайте лишнее уберем.
[52:53.000 --> 52:55.000]  То есть от этого циркуляция станет еще меньше, правда?
[52:58.000 --> 53:00.000]  Значит, останутся циклы меньше нуля.
[53:01.000 --> 53:04.000]  Значит, останутся циклы меньше нуля.
[53:07.000 --> 53:10.000]  Но заметим, что если хоть у какого-то из этих циклов,
[53:11.000 --> 53:14.000]  в каком-то из этих циклов не присутствует ребро УВ,
[53:16.000 --> 53:19.000]  то тогда получается, что мы и до добавления УВ,
[53:20.000 --> 53:22.000]  у нас существовал цикл отрицательного веса.
[53:23.000 --> 53:24.000]  Противоречие.
[53:26.000 --> 53:28.000]  То есть следовательно, вчера?
[53:28.000 --> 53:29.000]  Вчера?
[53:34.000 --> 53:36.000]  Ну нет, я просто по-другому переформулировал.
[53:39.000 --> 53:40.000]  Хорошо.
[53:41.000 --> 53:42.000]  Но пока, к сожалению, это еще не все доказательства.
[53:44.000 --> 53:47.000]  Потому что означает следующее, что в каждом из этих циклов
[53:48.000 --> 53:52.000]  мы говорим, что в каждом из этих циклов присутствует красное ребро.
[53:53.000 --> 53:54.000]  Вот это УВ.
[53:55.000 --> 53:59.000]  Ну, но так как у нас ребро в своей способности один,
[54:00.000 --> 54:02.000]  то на самом деле такой цикл существует ровно один.
[54:03.000 --> 54:04.000]  Да.
[54:05.000 --> 54:06.000]  Тогда.
[54:07.000 --> 54:10.000]  Но тогда получается, то есть у нас существует цикл,
[54:11.000 --> 54:12.000]  то есть видите, все вот это мы убили,
[54:13.000 --> 54:14.000]  и тогда у нас получается существует цикл,
[54:15.000 --> 54:17.000]  проходящий через ребро УВ,
[54:18.000 --> 54:22.000]  и у него стоимость меньше либо равно, чем минус Х минус Х.
[54:22.000 --> 54:25.000]  То есть она минус Х, минус И, как и еще минус вот это вот все.
[54:27.000 --> 54:30.000]  Но этого просто не существует, а этим мы просто выкинули.
[54:31.000 --> 54:32.000]  А это противоречие.
[54:34.000 --> 54:36.000]  Потому что что такое цикл между У и В?
[54:37.000 --> 54:40.000]  Это ребро УВ, к которому добавили путь от В до У.
[54:41.000 --> 54:43.000]  А ведь минус Х откуда брался, помните?
[54:44.000 --> 54:46.000]  Мы же взяли этот путь от В до У кратчайший.
[54:47.000 --> 54:51.000]  А тут получается, что мы нашли еще меньше.
[54:52.000 --> 54:53.000]  То есть это противоречие.
[54:57.000 --> 54:58.000]  Вот такая.
[54:59.000 --> 55:01.000]  А минус И как это стоимость пути от В до У, да?
[55:02.000 --> 55:03.000]  Нет.
[55:04.000 --> 55:06.000]  Нет, минус И как это стоимость второго цикла,
[55:07.000 --> 55:08.000]  вот того самого отрицательного цикла,
[55:09.000 --> 55:11.000]  по которому мы там достаточно сети пустили потом.
[55:12.000 --> 55:13.000]  Еще.
[55:14.000 --> 55:16.000]  То есть здесь сначала первое, потом ребро УВ,
[55:17.000 --> 55:18.000]  через него.
[55:19.000 --> 55:20.000]  Это минус Х, его стоимость была.
[55:20.000 --> 55:21.000]  А потом мы сказали,
[55:22.000 --> 55:23.000]  пусть появилась еще одна,
[55:24.000 --> 55:26.000]  ну еще один цикл отрицательного веса.
[55:27.000 --> 55:29.000]  И он же минус И.
[55:30.000 --> 55:31.000]  Ага.
[55:32.000 --> 55:33.000]  Мы говорим, что если он появился,
[55:34.000 --> 55:35.000]  то на самом деле слева путь короче.
[55:36.000 --> 55:37.000]  Ну то есть и так, мы доказали,
[55:38.000 --> 55:39.000]  рассмотрели эту цикляцию,
[55:40.000 --> 55:42.000]  рассмотрели все циклы отрицательного веса в ней,
[55:43.000 --> 55:45.000]  а их суммарная стоимость еще меньше, чем минус Х минус И.
[55:46.000 --> 55:47.000]  Ну меньше не правда.
[55:48.000 --> 55:49.000]  Сказали, что все эти циклы,
[55:50.000 --> 55:51.000]  может быть только один цикл,
[55:52.000 --> 55:53.000]  и тот должен проходить через УВ,
[55:54.000 --> 55:55.000]  потому что в противном случае
[55:56.000 --> 55:57.000]  был цикл отрицательного веса в исходной сети.
[55:58.000 --> 55:59.000]  Вот, и все.
[56:00.000 --> 56:01.000]  А тогда получилось, что,
[56:02.000 --> 56:03.000]  а этого быть не могло,
[56:04.000 --> 56:05.000]  потому что мы нашли исходно,
[56:06.000 --> 56:07.000]  мы пропустили единичку
[56:08.000 --> 56:09.000]  по минимальному циклу,
[56:10.000 --> 56:11.000]  проходящему через УВ.
[56:12.000 --> 56:13.000]  Почему сейчас мы получили меньше,
[56:14.000 --> 56:15.000]  чем минус Х, в принципе?
[56:16.000 --> 56:17.000]  Потому что мы выкинули циклы,
[56:18.000 --> 56:19.000]  которые не отрицательные стоимости.
[56:20.000 --> 56:21.000]  Сказали, что после этого у нас остался
[56:22.000 --> 56:23.000]  только цикл отрицательный,
[56:24.000 --> 56:25.000]  один цикл отрицательной стоимости,
[56:26.000 --> 56:27.000]  проходящих через УВ,
[56:28.000 --> 56:29.000]  других быть не могло.
[56:30.000 --> 56:31.000]  Мы получили меньше рабочих.
[56:32.000 --> 56:33.000]  Да.
[56:34.000 --> 56:35.000]  Их могло не быть просто.
[56:36.000 --> 56:37.000]  Да, могло не быть.
[56:38.000 --> 56:39.000]  Вот так.
[56:40.000 --> 56:41.000]  Да.
[56:42.000 --> 56:43.000]  Так что вот это да.
[56:44.000 --> 56:45.000]  То есть на самом деле вот таким вот образом
[56:46.000 --> 56:47.000]  это можно доказать,
[56:48.000 --> 56:49.000]  если вы поставите цель себе
[56:50.000 --> 56:51.000]  на этот цикл.
[56:53.000 --> 56:54.000]  Но на самом деле сейчас целесообразно
[56:55.000 --> 56:56.000]  будет рассмотреть другое доказательство.
[56:57.000 --> 56:59.000]  А, можно про него забыть.
[57:00.000 --> 57:01.000]  Ну нет, его полезно дать,
[57:02.000 --> 57:03.000]  потому что знаете, это доказательство
[57:04.000 --> 57:05.000]  оно как бы позволяет вот собственно это
[57:06.000 --> 57:07.000]  прошарить, вот ощутить происходящее.
[57:08.000 --> 57:09.000]  Потому что то, что я сейчас расскажу,
[57:10.000 --> 57:11.000]  оно будет немножко заклинанием.
[57:12.000 --> 57:13.000]  То есть знаете, вот как в Шторм Вакнере,
[57:14.000 --> 57:15.000]  да, то есть в Шторм Вакнере, да,
[57:16.000 --> 57:17.000]  вот как эта задача такая,
[57:18.000 --> 57:19.000]  рецепт делайте вот так.
[57:20.000 --> 57:21.000]  Ну если какой-то придумал,
[57:22.000 --> 57:23.000]  с какой черной магией не понятно,
[57:24.000 --> 57:25.000]  но вот доказательство, что это работает.
[57:26.000 --> 57:27.000]  Ну как числа в Рибанаке, да.
[57:28.000 --> 57:29.000]  Что?
[57:30.000 --> 57:31.000]  Да, терема.
[57:32.000 --> 57:34.000]  Ну там, допустим, у нас есть последовательства,
[57:35.000 --> 57:36.000]  допустим вот это вот,
[57:37.000 --> 57:38.000]  один, один, два, три, пять,
[57:39.000 --> 57:40.000]  это восемь и так далее, да.
[57:41.000 --> 57:42.000]  Ну вот.
[57:43.000 --> 57:44.000]  Ну я же прям приехал.
[57:45.000 --> 57:46.000]  Ну вот, терема fn равно
[57:47.000 --> 57:49.000]  там что-то там, там один плюс корень
[57:50.000 --> 57:51.000]  в степени m на что-то там,
[57:52.000 --> 57:53.000]  плюс там что-то там.
[57:54.000 --> 57:55.000]  Нормально.
[57:56.000 --> 57:57.000]  Один из пять пополам.
[57:58.000 --> 58:00.000]  А такого в том, что когда вы с этим знакомитесь,
[58:01.000 --> 58:02.000]  вы говорите, как говорится,
[58:03.000 --> 58:04.000]  откуда это, как это придумать непонятно,
[58:05.000 --> 58:06.000]  но просто честно по индукции доказываем,
[58:07.000 --> 58:08.000]  что это действительно так.
[58:09.000 --> 58:10.000]  Прямо арифметикой занимаемся.
[58:11.000 --> 58:12.000]  Мы так не делали.
[58:13.000 --> 58:14.000]  Да, нет, это другой вопрос,
[58:15.000 --> 58:16.000]  что вы там знаете уже про производящие функции,
[58:17.000 --> 58:18.000]  там знаете, там более черноманический алгоритм,
[58:18.000 --> 58:19.000]  находить формулы, да, это другой вопрос.
[58:20.000 --> 58:21.000]  Но, как говорили, наверное,
[58:22.000 --> 58:23.000]  когда вы впервые в жизни знакомились с этим,
[58:24.000 --> 58:25.000]  то есть это было подобного рода черноманический алгоритм.
[58:26.000 --> 58:27.000]  Нет.
[58:28.000 --> 58:29.000]  Ну, значит я как-то подругу научу.
[58:30.000 --> 58:31.000]  Ну ладно, значит я как-то подругу научу.
[58:32.000 --> 58:34.000]  Потому что обычно производящие функции
[58:35.000 --> 58:36.000]  узнают сильно позже, чем узнают вообще,
[58:37.000 --> 58:38.000]  что такое число фибоначи.
[58:39.000 --> 58:40.000]  Не важно знать производящие функции,
[58:41.000 --> 58:42.000]  чтобы уметь раскладывать.
[58:43.000 --> 58:44.000]  Не, мы делали с помощью декурятных.
[58:45.000 --> 58:46.000]  Это мы здесь делали,
[58:46.000 --> 58:47.000]  как-будто за первый раз формулу увидел бы вы все.
[58:48.000 --> 58:49.000]  Да.
[58:50.000 --> 58:51.000]  Ну, это такой результат.
[58:52.000 --> 58:53.000]  Ну, может быть, другой алгоритм штурмар.
[58:54.000 --> 58:55.000]  Хорошо.
[58:56.000 --> 58:57.000]  Там вот непонятно, как это придумать.
[58:58.000 --> 58:59.000]  Значит, мы сидим на одном утверждении.
[59:00.000 --> 59:01.000]  Два часа?
[59:02.000 --> 59:03.000]  Ну, нет.
[59:04.000 --> 59:05.000]  Вообще не два.
[59:06.000 --> 59:07.000]  Нет, ну один слишком.
[59:08.000 --> 59:09.000]  Да не волнуйтесь, не волнуйтесь.
[59:10.000 --> 59:11.000]  Так.
[59:14.000 --> 59:15.000]  Значит, смотрите.
[59:16.000 --> 59:17.000]  Так вот, на самом деле,
[59:18.000 --> 59:19.000]  то есть, как это еще теперь,
[59:20.000 --> 59:21.000]  как это доказать по-другому
[59:22.000 --> 59:23.000]  и заодно придумать, как это сделать.
[59:24.000 --> 59:25.000]  Вопрос, как вы будете искать корчайший путь,
[59:26.000 --> 59:27.000]  кстати, от Вайда?
[59:28.000 --> 59:29.000]  Туда его.
[59:30.000 --> 59:31.000]  Только даже если изначально у вас не было
[59:32.000 --> 59:33.000]  ребер отрицательной стоимости,
[59:34.000 --> 59:35.000]  то как бы потом как обратное не появится.
[59:36.000 --> 59:37.000]  Блин.
[59:38.000 --> 59:39.000]  Поэтому вообще, значит,
[59:40.000 --> 59:41.000]  можно сделать форда Велмана,
[59:42.000 --> 59:43.000]  а можно сделать потенциалы.
[59:44.000 --> 59:45.000]  Ура.
[59:46.000 --> 59:47.000]  В этом другое реальство.
[59:48.000 --> 59:50.000]  А оно сейчас заодно и будет.
[59:51.000 --> 59:52.000]  Отлично.
[59:53.000 --> 59:54.000]  Потому что наша будет цель,
[59:55.000 --> 59:56.000]  потому что мы знаем, да,
[59:57.000 --> 59:58.000]  у нас есть мистическая теорема,
[59:59.000 --> 01:00:00.000]  там мистическая теорема о том,
[01:00:01.000 --> 01:00:02.000]  что в графе не существует циклов
[01:00:03.000 --> 01:00:04.000]  отрицательной стоимости тогда и только тогда,
[01:00:05.000 --> 01:00:06.000]  когда можно ввести потенциалы так,
[01:00:07.000 --> 01:00:08.000]  что все приведенные стоимости
[01:00:09.000 --> 01:00:10.000]  оказываются не отрицательными.
[01:00:11.000 --> 01:00:12.000]  Было такое.
[01:00:13.000 --> 01:00:14.000]  Было в прошлом году такое, помните?
[01:00:14.000 --> 01:00:15.000]  В прошлом году?
[01:00:16.000 --> 01:00:17.000]  Было, было.
[01:00:18.000 --> 01:00:19.000]  В прошлом году не было.
[01:00:20.000 --> 01:00:21.000]  В прошлом полугоду.
[01:00:22.000 --> 01:00:23.000]  Ну, в календардах, кстати, в прошлом году было.
[01:00:24.000 --> 01:00:25.000]  Сейчас мы скажем,
[01:00:26.000 --> 01:00:27.000]  что в графе нет отрицательных циклов,
[01:00:28.000 --> 01:00:29.000]  если можно ввести потенциалы.
[01:00:30.000 --> 01:00:31.000]  Ну, просто потенциал.
[01:00:32.000 --> 01:00:33.000]  Любый.
[01:00:34.000 --> 01:00:35.000]  Просто существует такой массив П,
[01:00:36.000 --> 01:00:37.000]  что для любого ребра В,
[01:00:38.000 --> 01:00:39.000]  века что П от У плюс вес В минус П от В
[01:00:40.000 --> 01:00:41.000]  больше ребра В.
[01:00:45.000 --> 01:00:46.000]  Вот это вот.
[01:00:47.000 --> 01:00:48.000]  Вот В у В, я напоминаю,
[01:00:49.000 --> 01:00:50.000]  переходит в П от У
[01:00:51.000 --> 01:00:52.000]  плюс В в В минус П от У.
[01:00:53.000 --> 01:00:55.000]  Обычно число П называется потенциал.
[01:00:56.000 --> 01:00:57.000]  Если все такие положительные.
[01:00:58.000 --> 01:00:59.000]  То есть утверждается,
[01:01:00.000 --> 01:01:03.000]  что в графе не существует циклов отрицательного веса
[01:01:04.000 --> 01:01:05.000]  тогда и только тогда,
[01:01:06.000 --> 01:01:07.000]  когда можно ввести такие массивы П,
[01:01:08.000 --> 01:01:09.000]  что все вот такие веса будут не отрицательными.
[01:01:10.000 --> 01:01:11.000]  Хорошо.
[01:01:12.000 --> 01:01:13.000]  Не обязательно положительные.
[01:01:15.000 --> 01:01:16.000]  Вот.
[01:01:17.000 --> 01:01:18.000]  Нет, суть в том,
[01:01:19.000 --> 01:01:20.000]  что мы будем поддерживать потенциалы.
[01:01:21.000 --> 01:01:22.000]  Нет, ну да.
[01:01:23.000 --> 01:01:24.000]  Доказательство того движения тогда было так.
[01:01:25.000 --> 01:01:27.000]  Понятно, что если все такие ребра не отрицательные,
[01:01:28.000 --> 01:01:30.000]  то заметим, что вес цикла и приведенная вес цикла
[01:01:31.000 --> 01:01:32.000]  это одно и то же.
[01:01:33.000 --> 01:01:34.000]  Вот.
[01:01:35.000 --> 01:01:36.000]  Теперь.
[01:01:37.000 --> 01:01:38.000]  Теперь какая ситуация?
[01:01:40.000 --> 01:01:41.000]  Теперь тут аккуратная технология.
[01:01:42.000 --> 01:01:43.000]  Во-первых, заметим,
[01:01:44.000 --> 01:01:47.000]  что с помощью потенциалов ДХ3 теперь кратчайший путь от ВДО.
[01:01:49.000 --> 01:01:50.000]  Можем?
[01:01:51.000 --> 01:01:52.000]  Можем, конечно.
[01:01:53.000 --> 01:01:54.000]  С помощью потенциалов ДХ3.
[01:01:55.000 --> 01:01:57.000]  Потенциалы ввели, в итоге вам в графе нашли путь ДХ3,
[01:01:58.000 --> 01:01:59.000]  потому что теперь можно.
[01:02:00.000 --> 01:02:01.000]  Вот, нашли теперь путь от ВДО.
[01:02:02.000 --> 01:02:03.000]  Так вот.
[01:02:04.000 --> 01:02:05.000]  А теперь финту шаги.
[01:02:06.000 --> 01:02:07.000]  Мы подменим потенциал теперь.
[01:02:11.000 --> 01:02:12.000]  Потому что,
[01:02:12.000 --> 01:02:13.000]  ну раз мы нашли,
[01:02:14.000 --> 01:02:15.000]  потому что когда мы запустили ДХ3,
[01:02:16.000 --> 01:02:17.000]  мы нашли на самом деле расстояние от вершины В,
[01:02:18.000 --> 01:02:19.000]  не только до вершины У, но и до других вершин.
[01:02:20.000 --> 01:02:21.000]  Правда?
[01:02:22.000 --> 01:02:24.000]  И один из красивых таких нот,
[01:02:25.000 --> 01:02:26.000]  и как бы если забыть время на прокрасное ребро,
[01:02:27.000 --> 01:02:28.000]  то на самом деле один из способов ввести потенциал
[01:02:29.000 --> 01:02:31.000]  это просто объявить, что новый потенциал
[01:02:32.000 --> 01:02:33.000]  это расстояние кратчайшее от вершины В.
[01:02:38.000 --> 01:02:39.000]  Будет ли это и правдой?
[01:02:40.000 --> 01:02:41.000]  Последовольение ребра?
[01:02:42.000 --> 01:02:43.000]  Нет.
[01:02:44.000 --> 01:02:45.000]  Но самое главное, правда ли это до добавления ребра?
[01:02:46.000 --> 01:02:47.000]  Да.
[01:02:48.000 --> 01:02:49.000]  Ну казалось бы,
[01:02:50.000 --> 01:02:52.000]  действительно, жило было расстояние от вершины В.
[01:02:53.000 --> 01:02:56.000]  Мы знаем, расстояние существует, оно корректно.
[01:02:57.000 --> 01:02:59.000]  Вот оно У, вот оно В.
[01:03:01.000 --> 01:03:02.000]  Теперь давайте рассмотрим,
[01:03:03.000 --> 01:03:04.000]  что такое вот это вот П от У,
[01:03:05.000 --> 01:03:09.000]  такие вот, как ВП, мы теперь ДИСТ от ВУ,
[01:03:12.000 --> 01:03:16.000]  плюс вес этого ребра, так сказать, у В.
[01:03:17.000 --> 01:03:18.000]  Ой, как плохо.
[01:03:19.000 --> 01:03:21.000]  Давайте все-таки крестик напишем.
[01:03:22.000 --> 01:03:23.000]  Вот.
[01:03:24.000 --> 01:03:27.000]  И минус ДИСТ от ВИХ.
[01:03:29.000 --> 01:03:31.000]  Это, очевидно, больше ли правда у нуля?
[01:03:32.000 --> 01:03:33.000]  Почему?
[01:03:34.000 --> 01:03:36.000]  Да потому что ДИСТ от ВИХ это длина кратчайшего пути,
[01:03:37.000 --> 01:03:41.000]  а ДИСТ от ВУ плюс ВУХ это длина какого-то пути до Х.
[01:03:42.000 --> 01:03:45.000]  А какой-то путь всегда больше либо равен минимального,
[01:03:46.000 --> 01:03:47.000]  как что у нас сегодня был уже этот путь, да?
[01:03:48.000 --> 01:03:49.000]  Вот.
[01:03:51.000 --> 01:03:52.000]  Вот.
[01:03:53.000 --> 01:03:55.000]  Такая вот штука.
[01:03:56.000 --> 01:03:59.000]  Так что получается, так что смотрите, теперь фишка.
[01:04:00.000 --> 01:04:03.000]  Мы сейчас, значит, нашли эти кратчайшие пути и подменили потенциал.
[01:04:04.000 --> 01:04:06.000]  По строям нашли, да.
[01:04:07.000 --> 01:04:08.000]  Со старыми потенциалами нашли, с новыми подменили.
[01:04:09.000 --> 01:04:10.000]  Подменили на новые.
[01:04:10.000 --> 01:04:12.000]  Что делать с вершинами, которые не достижены из В?
[01:04:13.000 --> 01:04:14.000]  Потенциал ноль.
[01:04:15.000 --> 01:04:19.000]  Не ноль, там может быть отрицательные ребра, может не получиться.
[01:04:20.000 --> 01:04:21.000]  Сейчас.
[01:04:22.000 --> 01:04:24.000]  Да, на самом деле есть подлянка, что этот новый потенциал,
[01:04:25.000 --> 01:04:26.000]  он может оказаться определён не для всех,
[01:04:27.000 --> 01:04:28.000]  потому что не до всех можно дотянуться из вершины В.
[01:04:29.000 --> 01:04:30.000]  Их можно не менять.
[01:04:31.000 --> 01:04:32.000]  Можно ли?
[01:04:33.000 --> 01:04:35.000]  Нет, может их и потребуется менять.
[01:04:36.000 --> 01:04:38.000]  Но идея на самом деле следующая.
[01:04:39.000 --> 01:04:42.000]  Смотрите, что такое эти, вот смотрите, жила была вершина В,
[01:04:43.000 --> 01:04:46.000]  и есть вот граф, вот всё, до чего она дотянулась.
[01:04:47.000 --> 01:04:48.000]  Здесь вот потенциал определили, да.
[01:04:49.000 --> 01:04:50.000]  Есть все остальные вершины.
[01:04:51.000 --> 01:04:53.000]  Между ними тоже есть какие-то ребра, может быть даже циклы.
[01:04:54.000 --> 01:04:55.000]  Вот всё остальное.
[01:04:56.000 --> 01:04:59.000]  Но заметим, что все ребра между ними теперь идут вот отсюда сюда.
[01:05:00.000 --> 01:05:01.000]  То есть вот туда нет ребра.
[01:05:02.000 --> 01:05:03.000]  Так вот, тогда идея такая.
[01:05:04.000 --> 01:05:07.000]  У них же были старые потенциалы, с которыми было вот этим ребром хорошо, правда?
[01:05:08.000 --> 01:05:11.000]  Тогда у нас был, вот смотрите, у нас вот на этом множестве есть потенциал, с которым всё хорошо.
[01:05:12.000 --> 01:05:14.000]  И на этом множестве был потенциал, с которым всё хорошо.
[01:05:15.000 --> 01:05:16.000]  Так вот, идея такая.
[01:05:17.000 --> 01:05:20.000]  А давайте прибавим вот ко всем этим вершинам одинаковое число.
[01:05:21.000 --> 01:05:22.000]  Ладно.
[01:05:23.000 --> 01:05:26.000]  То есть тогда с этими ребрами будет всё в порядке, а у этих ребр стоимость будет увеличиваться.
[01:05:27.000 --> 01:05:29.000]  И можем и увеличить на столько, на сколько нам.
[01:05:30.000 --> 01:05:31.000]  А это необходимо?
[01:05:32.000 --> 01:05:33.000]  Нельзя, конечно, ознакомиться.
[01:05:34.000 --> 01:05:35.000]  Ээээ...
[01:05:36.000 --> 01:05:37.000]  Ну мы тут меняем какие-то потенциалы.
[01:05:38.000 --> 01:05:39.000]  Вдруг-то понятно, что...
[01:05:40.000 --> 01:05:41.000]  Вдруг нет.
[01:05:42.000 --> 01:05:43.000]  Не, ну как-то...
[01:05:44.000 --> 01:05:45.000]  Ну а наблюдаем ноль.
[01:05:46.000 --> 01:05:49.000]  Не, ну в реальности этот алгоритм просто никто не пишет, потому что никому обычно не надо искать циркуляцию.
[01:05:52.000 --> 01:05:57.000]  То есть обычно все ищут МинКост, а в МинКосте просто можно показать, что всё, что вам нужно, это искать пути через СТ.
[01:05:58.000 --> 01:05:59.000]  То есть, в смысле, какие же пути из СТ.
[01:06:00.000 --> 01:06:01.000]  Понял.
[01:06:02.000 --> 01:06:03.000]  Ну и так, забегаем.
[01:06:03.000 --> 01:06:05.000]  Вперед мы уже сильными, и вперед мы уже близки.
[01:06:06.000 --> 01:06:07.000]  Так вот.
[01:06:08.000 --> 01:06:09.000]  Хорошо, подогнали новый потенциал.
[01:06:10.000 --> 01:06:11.000]  Значит, зачем мы это сделали?
[01:06:12.000 --> 01:06:15.000]  Конечно же, всё равно относительно этого потенциала вот это ребро может оказаться отрицательным.
[01:06:17.000 --> 01:06:20.000]  Более того, оно кажется отрицательным относительно этого потенциала.
[01:06:21.000 --> 01:06:26.000]  Тогда и только тогда, когда вот кратчайший путь плюс это ребро дают действительно отрицательный цирк, правда?
[01:06:27.000 --> 01:06:28.000]  Согласны?
[01:06:29.000 --> 01:06:30.000]  А на СТ нет, то всё хорошо?
[01:06:30.000 --> 01:06:34.000]  Ну если да, если его нет, то да, действительно да, всё.
[01:06:36.000 --> 01:06:37.000]  Вот.
[01:06:40.000 --> 01:06:41.000]  Ну единственное, ну вот.
[01:06:42.000 --> 01:06:44.000]  Ну а если он появился, значит у нас есть путь от В до У.
[01:06:45.000 --> 01:06:46.000]  Ну ладно, это тоже неправда.
[01:06:47.000 --> 01:06:53.000]  Видите, наша технология допускает такое, что может даже так случиться, что от В до У пути не было вообще.
[01:06:54.000 --> 01:06:59.000]  Но мы подогнали потенциал так, что относительно этого потенциала это ребро всё-таки стало отрицательным.
[01:07:01.000 --> 01:07:02.000]  Ещё раз.
[01:07:04.000 --> 01:07:05.000]  Ну могло так получиться.
[01:07:06.000 --> 01:07:13.000]  Ну смотрите, ну я вот решаю, что могло так получиться, что как бы цикла нет, а ребро относительно нового потенциала стало отрицательным.
[01:07:14.000 --> 01:07:15.000]  Ну мелкая подлянка.
[01:07:16.000 --> 01:07:17.000]  А катаблятор может быть.
[01:07:18.000 --> 01:07:24.000]  Но правда я тут, нет, на самом деле просто идея такая, если до У пути не было, то надо просто вот это красное ребро учесть вот в числе прочего.
[01:07:25.000 --> 01:07:26.000]  Ну даже да.
[01:07:27.000 --> 01:07:28.000]  Вот.
[01:07:28.000 --> 01:07:34.000]  Но если до У пути был, и этот цикл отрицательной стоимости нашёлся, то что делать?
[01:07:36.000 --> 01:07:39.000]  Ну тогда я утверждаю, что надо просто пропустить значит этот поток.
[01:07:42.000 --> 01:07:43.000]  По вот этому циклу.
[01:07:44.000 --> 01:07:51.000]  И тогда утверждается, что относительно этого потенциала у нас все выжившие ребра будут не отрицательной стоимостью.
[01:07:53.000 --> 01:07:54.000]  Почему?
[01:07:55.000 --> 01:07:56.000]  Это всё ещё верно только С1.
[01:07:56.000 --> 01:07:57.000]  Да.
[01:07:58.000 --> 01:07:59.000]  Мы всё по единичке делаем.
[01:08:00.000 --> 01:08:01.000]  Почему так?
[01:08:02.000 --> 01:08:04.000]  Ну потому что, что у нас произошло?
[01:08:05.000 --> 01:08:08.000]  У нас появились в остаточной сети вот эти вот обратные ребра.
[01:08:10.000 --> 01:08:11.000]  А также появился вот это ребро.
[01:08:12.000 --> 01:08:19.000]  Ну заметим, что это ребро убилось, а появился вот это ребро, и оно, так как это ребро было отрицательной стоимостью, то это стало положительным.
[01:08:20.000 --> 01:08:21.000]  Правда?
[01:08:22.000 --> 01:08:23.000]  Да.
[01:08:24.000 --> 01:08:25.000]  Так работает нормально, да?
[01:08:27.000 --> 01:08:28.000]  Вот.
[01:08:32.000 --> 01:08:33.000]  А переча.
[01:08:35.000 --> 01:08:37.000]  А что касается вот этих ребр?
[01:08:38.000 --> 01:08:41.000]  Ведь здесь могло быть так, что эти ребра были положительные, а стали отрицательные.
[01:08:43.000 --> 01:08:47.000]  Но на самом деле фишка в том, и мы уже, по-моему, возможно даже с чем-то подобным уже сталкивались,
[01:08:47.000 --> 01:08:55.000]  я утверждаю, что учётная стоимость этих ребр, приведённая, она равна нулю.
[01:08:58.000 --> 01:08:59.000]  Ну приведённая вот это вот.
[01:09:00.000 --> 01:09:02.000]  Потому что они были в нашем кратчайшем пути.
[01:09:03.000 --> 01:09:10.000]  Да, потому что они были в кратчайшем пути, тогда получалось, что кратчайший путь до сюда плюс это ребро равно кратчайшем пути.
[01:09:11.000 --> 01:09:12.000]  И тогда получалось, что эти ребра были нулевые.
[01:09:15.000 --> 01:09:16.000]  Относительно.
[01:09:17.000 --> 01:09:19.000]  Именно, понимаете, вот именно за этим мы ввели новый потенциал.
[01:09:20.000 --> 01:09:24.000]  А в том, мы в потенциале, вот к началу кенсельбра, мы вычитаем из начала конец.
[01:09:25.000 --> 01:09:26.000]  Да.
[01:09:27.000 --> 01:09:29.000]  Ну для того, чтобы вот это доказательство прокатывало.
[01:09:30.000 --> 01:09:33.000]  Может быть третье, мы сказали, что это обратная игра, но вот для всех остальных.
[01:09:34.000 --> 01:09:37.000]  Для вот этих вот, да. У них стоимость будет ноль.
[01:09:39.000 --> 01:09:41.000]  Ну потому что и для этих ребр она была ноль.
[01:09:42.000 --> 01:09:45.000]  Стоимость или потенциальный стоимость?
[01:09:45.000 --> 01:09:46.000]  Потенциальный стоимость.
[01:09:47.000 --> 01:09:48.000]  Ну приведенный стоимость, конечно, да.
[01:09:49.000 --> 01:09:50.000]  Почему?
[01:09:51.000 --> 01:09:54.000]  На самом деле это по построению нового потенциала.
[01:09:56.000 --> 01:10:01.000]  Потому что новый потенциал вы построили так, что потенциал это расстояние от вершины В.
[01:10:02.000 --> 01:10:03.000]  В общем расстояние в исходном графе, да?
[01:10:06.000 --> 01:10:07.000]  Да.
[01:10:08.000 --> 01:10:09.000]  Ну без потенциала.
[01:10:09.000 --> 01:10:15.000]  Ну там просто есть фишка, что если вы нашли кратчайшее расстояние по приведенным стоимостиам, то вы можете легко найти расстоянии по обычному.
[01:10:16.000 --> 01:10:20.000]  Потому что, там надо что-то при body потенциал в конце и вычитать потенциал в начале.
[01:10:21.000 --> 01:10:22.000]  Вот.
[01:10:24.000 --> 01:10:31.000]  Смотрите, то acá утверждение следующее. Расстояние от вершины В до сюда, плюс вот это ребро равно расстояние от вершины В до сюда.
[01:10:32.000 --> 01:10:34.000]  Но расстояние это чтобы BRAZ-17.
[01:10:35.000 --> 01:10:36.000]  Да, но по стоимостиам.
[01:10:37.000 --> 01:10:38.000]  По приведенным стоимостиам.
[01:10:39.000 --> 01:10:45.240]  но и потом да нет почему это расстояние на этот раз по обычным стоимости а мне по
[01:10:45.240 --> 01:10:47.640]  приведен
[01:10:49.440 --> 01:10:58.720]  новый потенциал какой новый потенциал это обычное расстояние но расстояние плюс
[01:10:58.720 --> 01:11:03.120]  ребро равно на этот раз расстояние следовательно по новому потенциалу
[01:11:03.120 --> 01:11:10.640]  приведенная стоимость равна 0 но тогда и обратного тогда тоже будет 0 то есть
[01:11:10.640 --> 01:11:16.480]  следовательно мы ухитрились построить потенциал то есть пропустить поток и
[01:11:16.480 --> 01:11:20.160]  построить потенциал так чтобы серебра стали не отрицательными относительно
[01:11:20.160 --> 01:11:22.160]  этого потенциала
[01:11:22.160 --> 01:11:24.160]  как вы нашли тист?
[01:11:24.160 --> 01:11:26.160]  какой?
[01:11:26.160 --> 01:11:28.160]  новый потенциал
[01:11:28.160 --> 01:11:30.160]  помните?
[01:11:30.160 --> 01:11:32.160]  нет, это реально часть алгоритма
[01:11:32.160 --> 01:11:34.160]  потому что смотрите как мы его нашли
[01:11:34.160 --> 01:11:39.160]  перед добавлением этой ребра у нас в качестве варианта мы говорили что у нас просто есть хороший потенциал
[01:11:39.160 --> 01:11:44.160]  относительно этого потенциала мы нашли кратчайшее расстояние от вершины ВЭДа в всех остальных
[01:11:44.160 --> 01:11:49.160]  потом мы воспользуемся тем что найти кратчайший путь относительно потенциала
[01:11:49.160 --> 01:11:51.160]  и просто найти кратчайший путь это одно и то же
[01:11:51.160 --> 01:11:57.160]  мы их нашли и объявили что новый потенциал это кратчайшее расстояние от вершины ВЭД
[01:11:57.160 --> 01:12:01.160]  и теперь оказалось что относительно этого нового потенциала все хорошо
[01:12:01.160 --> 01:12:03.160]  и мы это реально делаем
[01:12:03.160 --> 01:12:09.160]  то есть очень важная технология, важно здесь именно подменять потенциалы
[01:12:09.160 --> 01:12:11.160]  это часть алгоритма
[01:12:11.160 --> 01:12:13.160]  чем она нам помогает?
[01:12:13.160 --> 01:12:17.160]  то есть мало того что она упрощает доказательства мы теперь не должны рассуждать что-то там про циркуляции вот эти все
[01:12:17.160 --> 01:12:21.160]  хотя упихивать жадность мы могли и так
[01:12:21.160 --> 01:12:24.160]  но теперь у нас просто есть потенциал
[01:12:24.160 --> 01:12:28.160]  то есть мы поддерживаем что у нас есть потенциал такой что
[01:12:28.160 --> 01:12:32.160]  относительно которого все существующие ребра не отрицают
[01:12:32.160 --> 01:12:37.160]  существующие в смысле не насыщенные потому что вот это ребро
[01:12:37.160 --> 01:12:45.160]  отсюда и следует что циклов отрицательной стоимости нет
[01:12:45.160 --> 01:12:49.160]  так что вот так, то есть можно по идее это доказывать просто напрямую так
[01:12:49.160 --> 01:12:53.160]  что делать со своими большими единицами?
[01:12:53.160 --> 01:12:56.160]  о, а если еще не целыми, ну проблем
[01:12:56.160 --> 01:13:00.160]  боюсь что все что я могу предложить это приблизить их рациональными числами
[01:13:00.160 --> 01:13:04.160]  да множить их на правильный простанту чтобы сделать их целыми
[01:13:04.160 --> 01:13:07.160]  и вперед приблизили
[01:13:07.160 --> 01:13:10.160]  это был метод клеина чтобы...
[01:13:10.160 --> 01:13:14.160]  то есть это такой метод построения минимальной циркуляции
[01:13:14.160 --> 01:13:18.160]  то есть работает он конечно за суммарную
[01:13:18.160 --> 01:13:23.160]  для целых... ну то есть так, понятно что если у вас целая пропускная способность
[01:13:23.160 --> 01:13:26.160]  но не единичная, значит вы их просто как бы представляете
[01:13:26.160 --> 01:13:30.160]  как много-много ребр с единичной простой способностью
[01:13:30.160 --> 01:13:39.360]  и тогда получается что эта работа
[01:13:39.360 --> 01:13:43.160]  суммарная пропускная способность этих ребр умножить на dx
[01:13:43.160 --> 01:13:50.160]  А мы новый потенциал считаем после добавления ребра или до?
[01:13:50.160 --> 01:13:54.160]  Новый... Нет, секундочку. До?
[01:13:54.160 --> 01:13:55.160]  До.
[01:13:55.160 --> 01:13:58.160]  Ну, в общем, непосредственно перед.
[01:13:58.160 --> 01:14:00.160]  Умножить на dx3.
[01:14:00.160 --> 01:14:01.160]  Ага.
[01:14:01.160 --> 01:14:03.160]  Это громко сказано.
[01:14:03.160 --> 01:14:12.160]  Потому что раз у нас ребра теперь е, в смысле максимальный поток, в смысле, господи, сумма это сумма ц, а dx работает за е.
[01:14:12.160 --> 01:14:15.160]  А, ну это не проблема для нас.
[01:14:15.160 --> 01:14:22.160]  Потому что в реальности, конечно же, вы, то есть реально расслоять эти ребра на единички не надо.
[01:14:22.160 --> 01:14:23.160]  Ну просто...
[01:14:23.160 --> 01:14:31.160]  В реальности вы просто в каждом, в каком-то ребре вы будете увеличивать пропускную способность на единичку.
[01:14:31.160 --> 01:14:35.160]  То есть знаете, как это...
[01:14:36.160 --> 01:14:38.160]  А теперь добавили триби в сериал.
[01:14:38.160 --> 01:14:42.160]  И сад у нас умирает глава семейства.
[01:14:42.160 --> 01:14:47.160]  Ну вот, и биолог там, соответственно, в какую-то клетку с бактериями, что-то там.
[01:14:47.160 --> 01:14:52.160]  Вот мы будем делать дальше.
[01:14:52.160 --> 01:14:54.160]  Сложная ассоциация, да?
[01:14:54.160 --> 01:14:56.160]  Ладно.
[01:14:56.160 --> 01:14:58.160]  Вот.
[01:15:02.160 --> 01:15:04.160]  Так вот.
[01:15:04.160 --> 01:15:09.160]  Ну, на самом деле, заметим, что, конечно, это нужно делать не всегда.
[01:15:09.160 --> 01:15:14.160]  Ну, вы можете заметить, что иногда это можно пытаться оптимизировать, то есть не симпатическая оптимизация,
[01:15:14.160 --> 01:15:22.160]  что если вы добавили ребро относительно старого потенциала, оно не отрицательно, то, в общем-то, зачем dx запускать?
[01:15:22.160 --> 01:15:28.160]  То есть только когда у нас проблемы, вот тогда мы, давайте, начнём переписывать потенциал.
[01:15:28.160 --> 01:15:31.160]  В смысле? dx сейчас запускать надо.
[01:15:32.160 --> 01:15:36.160]  Когда мы добавляем новый ребро, нужно dx запускать из начала этого ребра.
[01:15:36.160 --> 01:15:42.160]  Нет, если у тебя добавилось ребро и относительно того потенциала, который у тебя уже есть, оно не отрицательно,
[01:15:42.160 --> 01:15:45.160]  то не надо запускать dx.
[01:15:45.160 --> 01:15:49.160]  А, мы dx запускаем после вот этого ребро, хорошо, да.
[01:15:49.160 --> 01:15:52.160]  Ну, вместе.
[01:15:52.160 --> 01:15:54.160]  Ну, это не важно, но я бы так сказал.
[01:15:54.160 --> 01:16:00.160]  Лучше не надо, потому что при добавлении этого ребра, формально говоря, у вас нет понятия кратчайший путь в этом графе.
[01:16:01.160 --> 01:16:06.160]  Мы пытаемся его добавить, если понимаем, что можно добавить, то запускаем dx.
[01:16:06.160 --> 01:16:09.160]  Нет, если понимать, что можно добавить, то всё, добавляем.
[01:16:09.160 --> 01:16:18.160]  Если нельзя, точно будет плохо, то тогда мы перепиливаем потенциал, добавляем ребро, пропускаем, вот. Вот так мы делаем.
[01:16:18.160 --> 01:16:25.160]  То есть если оно уже почту ля, без кучи потенциалов, то цикл мы не обведём?
[01:16:25.160 --> 01:16:28.160]  Ну, потом, в смысле, мы будем закрываться.
[01:16:28.160 --> 01:16:30.160]  Чего-чего ещё раз?
[01:16:30.160 --> 01:16:32.160]  Если цикл некого взява отрицать через это ребро.
[01:16:32.160 --> 01:16:33.160]  Если что?
[01:16:33.160 --> 01:16:35.160]  Если ребро положительно.
[01:16:35.160 --> 01:16:36.160]  Ну да.
[01:16:36.160 --> 01:16:42.160]  Ну да, тогда у вас просто окажется, что у вас всё ещё есть сеть, в которой все ребра не отрицательные, значит цикл отрицательный.
[01:16:42.160 --> 01:16:44.160]  Очень удобно.
[01:16:44.160 --> 01:16:47.160]  Есть потенциал, значит цикла нет, всё хорошо.
[01:16:47.160 --> 01:16:49.160]  Нет потенциала, цикла есть.
[01:16:49.160 --> 01:16:53.160]  Цикла нет, потенциал есть, цикла нет.
[01:16:54.160 --> 01:16:56.160]  Вот это всё.
[01:16:56.160 --> 01:16:58.160]  Вот.
[01:16:58.160 --> 01:17:00.160]  Так вот.
[01:17:00.160 --> 01:17:05.160]  Но на самом деле можно заметить, что, можно обнаружить ещё маленькую приятную вещь.
[01:17:05.160 --> 01:17:11.160]  Заметим, что в каждый момент времени у нас в сети есть минимальная циркуляция.
[01:17:11.160 --> 01:17:17.160]  Ну, минимальная относительно тех ребр, которые туда были добавлены.
[01:17:17.160 --> 01:17:20.160]  Вот, понимаете, да?
[01:17:21.160 --> 01:17:23.160]  А теперь заметим следующее.
[01:17:23.160 --> 01:17:27.160]  И тогда это приводит к классическому случаю Минхоза.
[01:17:27.160 --> 01:17:30.160]  К классическому случаю Минхоза.
[01:17:30.160 --> 01:17:36.160]  То есть мы предположим, что у нас изначально в сети нет циклов отрицательного венца.
[01:17:36.160 --> 01:17:38.160]  Тогда как можно искать?
[01:17:38.160 --> 01:17:42.160]  Ну то есть мы ищем минимальную циркуляцию в этом графе.
[01:17:42.160 --> 01:17:44.160]  Добавляем все вот эти ребра.
[01:17:44.160 --> 01:17:49.160]  А изначально у нас потенциал 0,0,0,0,0 и не заворачиваемся.
[01:17:49.160 --> 01:17:53.160]  Ну ладно, не 0, ладно, там какой-то другой потенциал, но он существует, мы это знаем.
[01:17:53.160 --> 01:17:55.160]  Знаем, что циклов отрицательного венца тут нет.
[01:17:55.160 --> 01:17:57.160]  Можем найти при желании.
[01:17:57.160 --> 01:17:59.160]  То есть мы потенциал с ним.
[01:17:59.160 --> 01:18:01.160]  А после этого, что мы делаем?
[01:18:01.160 --> 01:18:03.160]  Мы начинаем добавлять по единичке.
[01:18:06.160 --> 01:18:09.160]  То есть у нас есть какой-то потенциал тут уже.
[01:18:09.160 --> 01:18:14.160]  И мы начинаем добавлять по единичке проблестную способность к вот этому вот дополнительному ребру.
[01:18:15.160 --> 01:18:20.160]  То есть добавляем единичку, находим цикл, пропускаем.
[01:18:20.160 --> 01:18:25.160]  Добавляем еще единичку, еще пропускаем и так далее.
[01:18:25.160 --> 01:18:32.160]  И так далее, пока в какой-то момент добавление еще одной единички не приведет нас к тому, что...
[01:18:32.160 --> 01:18:38.160]  Не заявит, что добавили, ну и добавляете все с потенциалом в порядке.
[01:18:38.160 --> 01:18:42.160]  Хорошо, а что с минус бесконечности?
[01:18:42.160 --> 01:18:45.160]  Нет, минус бесконечность нужна для того...
[01:18:45.160 --> 01:18:47.160]  Значит теперь смотрите, как это работает.
[01:18:47.160 --> 01:18:52.160]  Нет, то минус бесконечность нужна была для того, чтобы, напоминаю, мы тут пустили как можно больше поток.
[01:18:56.160 --> 01:19:02.160]  Чтобы мы тут не ходили, а пустить по такому циклу поток было бы выгодно.
[01:19:02.160 --> 01:19:04.160]  Вот.
[01:19:04.160 --> 01:19:06.160]  Но тогда...
[01:19:06.160 --> 01:19:08.160]  Ну вот.
[01:19:08.160 --> 01:19:16.160]  То есть получается, видите, что мы применили просто метод клеина, но просто только к этому ребру, потому что добавить вот эти ребра у нас было все в порядке.
[01:19:16.160 --> 01:19:18.160]  Понимаете, да?
[01:19:18.160 --> 01:19:19.160]  Да.
[01:19:19.160 --> 01:19:25.160]  Но по факту-то, да, то есть мы говорили о том, что надо тут поддерживать какой-то потенциал, вот этот вот, да?
[01:19:25.160 --> 01:19:28.160]  Но на самом деле, то что мы делали?
[01:19:28.160 --> 01:19:31.160]  По сути мы делали следующее.
[01:19:31.160 --> 01:19:33.160]  То есть по сути, на самом деле, мы заметим, что если у нас...
[01:19:33.160 --> 01:19:38.160]  По сути, каждый раз, когда мы ищем, вот добавляем новую единичку, мы ищем кратчайший путь по остаточной сети.
[01:19:38.160 --> 01:19:41.160]  От S до T, правда?
[01:19:41.160 --> 01:19:43.160]  Просто ищем кратчайший путь.
[01:19:43.160 --> 01:19:51.160]  И заметим, что пока он существует, вот этот цикл будет отрицательным, потому что у нас тут минус бесконечность, правда?
[01:19:52.160 --> 01:20:02.160]  И тогда это будет означать, что если эта новая единичка не дала циклу отрицательного веса, значит в остаточной сети у нас больше пути от S до T тупо нет.
[01:20:02.160 --> 01:20:06.160]  А это и означает, что поток максимальный.
[01:20:06.160 --> 01:20:12.160]  Следовательно, мы действительно нашли максимальный поток минимальной стоимости.
[01:20:13.160 --> 01:20:21.160]  Мы нашли циркуляцию минимальной стоимости, и мы знаем, что в ней заведомо будет...
[01:20:21.160 --> 01:20:28.160]  Здесь пройдет воды равно вот этому вот F очке.
[01:20:35.160 --> 01:20:37.160]  Это вот F очке.
[01:20:37.160 --> 01:20:40.160]  Ну и тут минус бесконечность, но это какое-то фиксированное число.
[01:20:40.160 --> 01:20:47.160]  И тогда отсюда автоматически... Если его убрать, то получится просто поток этой вот максимальной величины F, причем он очевидно минимальный в возможность стоимости.
[01:20:52.160 --> 01:20:58.160]  То есть тем самым мы доказали, что действительно на самом деле все, что нам нужно, это искать...
[01:20:58.160 --> 01:21:05.160]  То есть оказывается, что когда вычислим максимальный поток минимальной стоимости, вам нужно в каждый момент времени искать кратчайший путь от S до T.
[01:21:05.160 --> 01:21:09.160]  Искать, пока этот путь существует. Если существует, найти путь кратчайшей стоимости.
[01:21:11.160 --> 01:21:17.160]  Но более того, на самом деле можно еще два уточнения сделать.
[01:21:17.160 --> 01:21:29.160]  Во-первых, если это в тупую, то самое тупое, там по-моему 80% задач, на самом деле вы можете в тупую искать Фордом Белманом этого хватит.
[01:21:29.160 --> 01:21:38.160]  Ну там просто проблема в том, что тут будет еще сложнее искать контрпримеры, то есть искать примеры, когда T extra будет заходить, а Форд Белман нет.
[01:21:38.160 --> 01:21:42.160]  Особенно с какими-то оптимизациями.
[01:21:42.160 --> 01:21:49.160]  А в задачах чаще всего бывает, что там не произвольная сеть строится, а какая-то очень экзотически конкретная.
[01:21:49.160 --> 01:21:52.160]  Поэтому там сложно.
[01:21:52.160 --> 01:21:58.160]  В этом смысле самая крутая задача на Минкос, которую я так встречал, была конечно в 2015 году на четвертой финале.
[01:21:58.160 --> 01:22:01.160]  Ладно, у вас будет она тоже появится.
[01:22:01.160 --> 01:22:05.160]  Я так понимаю, все мы тут четвертые листы.
[01:22:05.160 --> 01:22:09.160]  Ну вот 15-го года.
[01:22:09.160 --> 01:22:13.160]  Кстати, тогда ее решил только Чемпион.
[01:22:13.160 --> 01:22:19.160]  Жаль, такая задача, по-моему, ее должно доставлять удовольствие просто решать.
[01:22:19.160 --> 01:22:22.160]  Вы не условия не видели.
[01:22:22.160 --> 01:22:24.160]  И что?
[01:22:24.160 --> 01:22:28.160]  Там такая задача красивая.
[01:22:28.160 --> 01:22:32.160]  Петя ездил в командировку, бегался домой.
[01:22:32.160 --> 01:22:36.160]  А его дома ждала девушка.
[01:22:36.160 --> 01:22:38.160]  Она ревнивая.
[01:22:38.160 --> 01:22:43.160]  Отлично. Поэтому нужно найти минимальный поток на смартфоне.
[01:22:43.160 --> 01:22:46.160]  Не-не-не. Ему нужна...
[01:22:46.160 --> 01:22:49.160]  Она, значит, он ей показывает фотографии.
[01:22:49.160 --> 01:22:55.160]  На фотографиях, значит, он, его какие-то друзья и еще какие-то девушки.
[01:22:55.160 --> 01:22:58.160]  И она спрашивает, а это кто?
[01:22:58.160 --> 01:23:00.160]  Ну чтобы...
[01:23:00.160 --> 01:23:03.160]  Ему нужно объяснять, соответственно, что...
[01:23:03.160 --> 01:23:06.160]  Это кто? Это Катя.
[01:23:06.160 --> 01:23:09.160]  Это девушка Жорика.
[01:23:09.160 --> 01:23:12.160]  Вот Катя, вот Жорик, да.
[01:23:12.160 --> 01:23:14.160]  А это кто? Ну вот.
[01:23:14.160 --> 01:23:17.160]  А это что? А это что такое?
[01:23:17.160 --> 01:23:20.160]  Ну вот. А это Аня.
[01:23:20.160 --> 01:23:25.160]  Это там, это усложно, это девушка Вася.
[01:23:25.160 --> 01:23:26.160]  Так, окей.
[01:23:27.160 --> 01:23:28.160]  А это что?
[01:23:28.160 --> 01:23:30.160]  Ну вот, это Ианна.
[01:23:30.160 --> 01:23:34.160]  Это девушка Вода Нот.
[01:23:34.160 --> 01:23:36.160]  Это девушка вот этого товарища.
[01:23:36.160 --> 01:23:37.160]  А это кто?
[01:23:37.160 --> 01:23:38.160]  О, это Катя.
[01:23:38.160 --> 01:23:40.160]  Так, не понял.
[01:23:40.160 --> 01:23:42.160]  А где Жорик?
[01:23:42.160 --> 01:23:45.160]  А, они тогда расстались с Жориком.
[01:23:45.160 --> 01:23:47.160]  А, нет, точнее так.
[01:23:47.160 --> 01:23:49.160]  Нет, там было условие...
[01:23:49.160 --> 01:23:50.160]  Это Юля.
[01:23:50.160 --> 01:23:53.160]  Это девушка Жорика.
[01:23:53.160 --> 01:23:54.160]  Так, Жорика.
[01:23:54.160 --> 01:23:55.160]  Чего?
[01:23:55.160 --> 01:23:58.160]  Ты же сказал, что Жорик встречался с Катей.
[01:23:58.160 --> 01:24:01.160]  Так, нет, это потом было.
[01:24:01.160 --> 01:24:03.160]  А ныне с Катей расстались.
[01:24:03.160 --> 01:24:04.160]  Ну вот это...
[01:24:04.160 --> 01:24:06.160]  Так, он ушел от Катей.
[01:24:06.160 --> 01:24:08.160]  Вот к этой вот мымре, ну сомнительно.
[01:24:08.160 --> 01:24:10.160]  Ну, допустим, значит, в чем?
[01:24:10.160 --> 01:24:12.160]  А задача в следующем.
[01:24:12.160 --> 01:24:15.160]  Значит, Катя рассыпкает.
[01:24:15.160 --> 01:24:18.160]  А Петя уже так побежает и досветит уже самолет.
[01:24:18.160 --> 01:24:22.160]  Он знает, что девушка устроит ему допрос.
[01:24:22.160 --> 01:24:25.160]  Значит, это во-первых.
[01:24:25.160 --> 01:24:30.160]  Во-вторых, он знает, в каком порядке будут рассматриваться фотографии.
[01:24:30.160 --> 01:24:40.160]  И еще знает, что если выяснится, что какой-то парень бросил там, допустим, девушку X ради девушки игр,
[01:24:40.160 --> 01:24:46.160]  то тогда подозрительность Лены увеличится на F от X игр.
[01:24:46.160 --> 01:24:48.160]  Не, она очень подозрительная.
[01:24:48.160 --> 01:24:55.160]  И надо, собственно, придумать легенду так, чтобы суммарная подозрительность была как можно меньше.
[01:24:55.160 --> 01:24:57.160]  Вот.
[01:24:57.160 --> 01:25:01.160]  Я думаю, замечательная задача, особенно когда ее начать решать.
[01:25:01.160 --> 01:25:04.160]  Я не знаю, честно скажу, у меня там вообще кошмар начинался.
[01:25:04.160 --> 01:25:07.160]  То есть давайте там, на каждой фотографии, каждой девушке найдем вершину.
[01:25:07.160 --> 01:25:09.160]  Там какие-то вот тут ребра.
[01:25:09.160 --> 01:25:12.160]  Ну, там ребра просто способности ноль, если там...
[01:25:12.160 --> 01:25:16.160]  Ну, там что-то там, что-то типа, там каждый парень...
[01:25:16.160 --> 01:25:18.160]  Или там каждый, там сейчас как там было?
[01:25:18.160 --> 01:25:21.160]  Каждый там по паре идет как-то через девушку, но там что-то такое.
[01:25:21.160 --> 01:25:27.160]  Причем для того, чтобы оптимизировать, приходится на каждом уровне вводить понятие, там, фиктивная девушка там, ну и так далее.
[01:25:27.160 --> 01:25:31.160]  То есть я очень рекомендую порешать что-то в районе задачи.
[01:25:33.160 --> 01:25:35.160]  Вон.
[01:25:35.160 --> 01:25:36.160]  Да, то это вот шедевр.
[01:25:36.160 --> 01:25:38.160]  На самом контесте решили только чемпионы.
[01:25:38.160 --> 01:25:40.160]  Но там, правда, это вообще редкий был случай.
[01:25:40.160 --> 01:25:44.160]  Чемпион решил все 12 задач, а второе место решил 8.
[01:25:46.160 --> 01:25:47.160]  Ну, вот.
[01:25:47.160 --> 01:25:49.160]  Ну, там эпическая ситуация была.
[01:25:49.160 --> 01:25:51.160]  Но, правда, это было только в Москве.
[01:25:52.160 --> 01:25:54.160]  Ну, в Москве там это просто...
[01:25:54.160 --> 01:25:57.160]  Потому что конкретно питерцы там порешали, все там порешали.
[01:25:57.160 --> 01:26:00.160]  Ну, 12 задач не решил никто, но там все так порешали.
[01:26:00.160 --> 01:26:02.160]  Там нормально решили, там 10 задач, 11.
[01:26:02.160 --> 01:26:07.160]  Сказали, так, дорогая Москва, вы что там все спали там все в это время, что ли?
[01:26:07.160 --> 01:26:09.160]  Амбамаха ламаха, молодцы.
[01:26:09.160 --> 01:26:10.160]  Вот.
[01:26:10.160 --> 01:26:12.160]  Ну, так вот, по-моему, пока они знали эту задачу, если я правильно.
[01:26:13.160 --> 01:26:15.160]  Ну, там была просто проблема в другом.
[01:26:15.160 --> 01:26:18.160]  Там куча умного народа в Москве деморализовала задача К.
[01:26:18.160 --> 01:26:20.160]  Ну, там это, жюри считал ее самой сложной.
[01:26:22.160 --> 01:26:23.160]  Ну, вот.
[01:26:23.160 --> 01:26:27.160]  Но почему-то команды Фистеха вслед за одной ее просто быстро порешали.
[01:26:28.160 --> 01:26:33.160]  А быстро они ее порешали, потому что там просто на 20-й минуте одна команда ее сдала Жадником.
[01:26:35.160 --> 01:26:38.160]  Нет, как потом оказалась доказательно правильным Жадником.
[01:26:38.160 --> 01:26:40.160]  Просто жюри его не придумала.
[01:26:40.160 --> 01:26:41.160]  Вот.
[01:26:41.160 --> 01:26:42.160]  Надо будет загуглить.
[01:26:42.160 --> 01:26:44.160]  Так что будет?
[01:26:44.160 --> 01:26:47.160]  Да, я говорю, Рикмеду, вы порешайте весь четверть финал.
[01:26:47.160 --> 01:26:49.160]  Не пожалеете, там вообще крутой четверть финал.
[01:26:49.160 --> 01:26:51.160]  И при этом очень сложный.
[01:26:51.160 --> 01:26:52.160]  Вот.
[01:26:52.160 --> 01:26:55.160]  То есть, соответственно, вот это решали, остальные наши команды просто посмотрели, так, сдали они.
[01:26:55.160 --> 01:26:56.160]  Так.
[01:26:56.160 --> 01:27:00.160]  Так, если это сдал Мипдзимул, значит, так, на 20-й минуте, значит, наверное, что-то не миросложно.
[01:27:00.160 --> 01:27:02.160]  Что они вообще могли сдать?
[01:27:02.160 --> 01:27:03.160]  Ну, вот.
[01:27:03.160 --> 01:27:04.160]  Наверное, что-то это.
[01:27:04.160 --> 01:27:05.160]  И в результате Жадник придумал.
[01:27:05.160 --> 01:27:06.160]  Ну, вот.
[01:27:06.160 --> 01:27:08.160]  И в результате, так, еще три команды сдали.
[01:27:08.160 --> 01:27:11.160]  Хотя, там, ну, какие-нибудь топовые команды, так, естественно, не мыслят.
[01:27:11.160 --> 01:27:13.160]  Поэтому они оказались просто в панике.
[01:27:13.160 --> 01:27:15.160]  Хотя нет, наши еще так, наши еще так мыслят.
[01:27:15.160 --> 01:27:18.160]  Там, по-моему, Дженатего, будущий финалист, собственно, так затупило.
[01:27:18.160 --> 01:27:21.160]  Там это, там, там главный фаворит полуфинала.
[01:27:21.160 --> 01:27:23.160]  Эмису Тринити зависла в этом месте.
[01:27:23.160 --> 01:27:24.160]  Ну, вот.
[01:27:24.160 --> 01:27:31.160]  То есть, вообще, то есть, на самом деле, это, то есть, вообще, это выглядит, конечно, так, что как находятся задачи, которые толпой решает весь пистех, а все остальные молчали.
[01:27:31.160 --> 01:27:32.160]  То есть, вообще интрига.
[01:27:32.160 --> 01:27:35.160]  Сидим мы такие, смешив, тихо бегаем, не знаю, и думаем.
[01:27:35.160 --> 01:27:37.160]  И где утечка?
[01:27:38.160 --> 01:27:41.160]  Ну, то есть, как сказать, мы, ну, как бы там, условно говоря.
[01:27:41.160 --> 01:27:43.160]  Ну, то есть, понятно, Миша уже вели, я участвовал в прорешке.
[01:27:43.160 --> 01:27:45.160]  То есть, все задачи знали, конечно.
[01:27:45.160 --> 01:27:47.160]  Но, как бы, Миша вроде не.
[01:27:47.160 --> 01:27:49.160]  Но забавно, в общем, было.
[01:27:49.160 --> 01:27:51.160]  Ладно.
[01:27:52.160 --> 01:27:54.160]  Так вот.
[01:27:54.160 --> 01:27:58.160]  Так что это вот, как говорится, к вопросу о веселых задачах на Минкоз.
[01:27:58.160 --> 01:28:00.160]  Вот.
[01:28:00.160 --> 01:28:02.160]  Смотрите.
[01:28:02.160 --> 01:28:05.160]  И так вот, то есть, вот таким образом мы доказали.
[01:28:05.160 --> 01:28:11.160]  Ну, во-первых, теперь, как это искать Минкоз быстрее, чем за размер потока на, соответственно, форму Белла?
[01:28:13.160 --> 01:28:19.160]  Ну, как следует из предыдущего механизма, на самом деле, можно просто поводить доэксперс потенциалами, правда?
[01:28:19.160 --> 01:28:28.160]  Потому что, просто, все, что вам на каждом шаге нужно, это, когда вы находите расстояние от СДТ, быстренько переписать потенциал.
[01:28:28.160 --> 01:28:34.160]  Ну, переписать потенциал на расстояние от СДТ, причем реально.
[01:28:34.160 --> 01:28:36.160]  Понимаете, да?
[01:28:36.160 --> 01:28:38.160]  То есть, нашли расстояние.
[01:28:38.160 --> 01:28:40.160]  Нашли расстояние в исходном графе.
[01:28:40.160 --> 01:28:42.160]  Заменили потенциал.
[01:28:42.160 --> 01:28:46.160]  И то и пропустили по оптимальному пути потом.
[01:28:48.160 --> 01:28:54.160]  Да, в качестве добивки, кстати, если на какой-то вершины, вершины С не дошли, то, как вы уже знаете, вы уже не дойдете до нее никогда.
[01:28:54.160 --> 01:28:58.160]  Поэтому, что там будет у нее потенциалом, вам вообще все равно.
[01:28:58.160 --> 01:29:03.160]  В смысле, у нас изменение потенциалов, это просто твой потенциал и расстояние от С.
[01:29:03.160 --> 01:29:05.160]  Все, очень просто. Прикольно.
[01:29:05.160 --> 01:29:07.160]  В чем здесь даже заморачиваться не надо.
[01:29:07.160 --> 01:29:10.160]  То есть, если плюс бесконечность, значит плюс бесконечность начать.
[01:29:10.160 --> 01:29:14.160]  Потому что вас и эти вершины уже волновать не будут.
[01:29:14.160 --> 01:29:17.160]  А если у нас в начале есть это удовлетворительное весо?
[01:29:17.160 --> 01:29:19.160]  То, что у нас нет.
[01:29:19.160 --> 01:29:21.160]  Тогда придется их каким-то образом...
[01:29:21.160 --> 01:29:24.160]  Нужно как минимум найти минимальную циркуляцию.
[01:29:24.160 --> 01:29:25.160]  То есть, уже решить не будешь.
[01:29:25.160 --> 01:29:27.160]  Знаешь, на них можно дать ребро и не заворачиваться.
[01:29:27.160 --> 01:29:28.160]  Да, увы, увы, увы.
[01:29:28.160 --> 01:29:33.160]  Ну, чаще всего бывает, что там большинство задач, там даже не то, что циклы потрицентного веса,
[01:29:33.160 --> 01:29:35.160]  там, скорее всего, и стоимости все изначально отложены.
[01:29:35.160 --> 01:29:38.160]  Поэтому даже первую фазу можно сделать дэйкстером.
[01:29:38.160 --> 01:29:40.160]  Да, в общем, в случае, обратите внимание,
[01:29:40.160 --> 01:29:45.160]  вам самую первую фазу для первонахождения качающих расстояний, по-любому, придется Фордно Белломана запускать.
[01:29:46.160 --> 01:29:48.160]  Ну, помните, в алгоритме Джонсона то же самое было.
[01:29:48.160 --> 01:29:51.160]  Вы делали один Форд Белломан, а потом дальше куча дэйкстеров.
[01:29:52.160 --> 01:29:54.160]  А алгоритм Джонсона вообще что делал?
[01:29:54.160 --> 01:29:57.160]  Искал качающие расстояния между всеми парами вершин.
[01:29:57.160 --> 01:29:59.160]  Которые NM% отлог?
[01:29:59.160 --> 01:30:00.160]  Да.
[01:30:00.160 --> 01:30:03.160]  Ну, если дэйкстер услышит Фибоначчи, то да.
[01:30:08.160 --> 01:30:10.160]  Так что, если вы еще напишите кучу Фибоначчи,
[01:30:10.160 --> 01:30:13.160]  алгоритм будет работать, возможно, еще медленнее по факту.
[01:30:15.160 --> 01:30:17.160]  Ну, кому вообще нужна скорость работалегии?
[01:30:17.160 --> 01:30:18.160]  Главное себе тостика.
[01:30:18.160 --> 01:30:20.160]  Ну, а на самом деле нет.
[01:30:20.160 --> 01:30:21.160]  Смотрите, тут еще.
[01:30:21.160 --> 01:30:22.160]  Какой тонкий?
[01:30:23.160 --> 01:30:24.160]  Ну, не тонкий.
[01:30:24.160 --> 01:30:27.160]  На самом деле, еще важное замечание тоже в задачах помогает.
[01:30:28.160 --> 01:30:31.160]  Отсюда, на самом деле, из этой теории еще есть ответный факт.
[01:30:31.160 --> 01:30:34.160]  Вы не только находите максимальный поток минимальной стоимости,
[01:30:34.160 --> 01:30:43.160]  но на каждом шаге вы находите поток заданной величины и минимальной стоимости.
[01:30:44.160 --> 01:30:45.160]  Прикольно.
[01:30:45.160 --> 01:30:52.160]  После одного пути вы нашли поток величины 1 минимальной стоимости.
[01:30:52.160 --> 01:30:57.160]  После того как вы запустили два потока, вы нашли поток величины 2 минимальной стоимости.
[01:30:58.160 --> 01:31:00.160]  Это вот, на самом деле, полезное замечание.
[01:31:00.160 --> 01:31:02.160]  То есть, на каждом шаге вы получили.
[01:31:02.160 --> 01:31:05.160]  Т.е. иногда, действительно, это шагик хорошо помогает.
[01:31:05.160 --> 01:31:12.160]  Если ваша задача найти поток величины K минимальной стоимости,
[01:31:12.160 --> 01:31:30.560]  запустить кайф лиц потом. Вот такая красота. Вот такая нот. Так что это вот, важная эта ручка. Вот, значит, что тут еще хочется сказать.
[01:31:35.560 --> 01:31:40.240]  Формально говоря, конечно, вас надо до перерыва пускать, но так не хочется. Через 20 минут мы должны
[01:31:40.240 --> 01:31:50.240]  будет у нас последний перерыв, и следующая пара будет мещерина. Нет, погоди, пара E будет с 15-20 по-любому.
[01:31:50.240 --> 01:32:08.240]  Просто у нас через 25 минут закончится третья пара. Нет, я вам просто, смотрите, какая ситуация. Дело в том, что из, ну вот, я очень, ну скажем так, я пересмотрю, ничего ли я не забыл, но вообще, из обязательной программы про потоки, я на самом деле сказал все, кроме венгевского алгоритма.
[01:32:08.240 --> 01:32:36.240]  Вот, и, ну вот, ну и на самом деле есть еще один развлекательный алгоритм про любовь. Ну это так, знаете, очень хочется закончить эту теорию про потоки именно им будет. Так вот, поэтому, то есть, в идеале, просто хотелось бы так, может быть, я бы вам рассказал этот венгевский алгоритм и пошел бы. И у вас тогда был бы уже глобальный перерыв на, в принципе, паре. Сегодня или? Сегодня, сегодня. Прямо сейчас. Сколько нам на этом можно ориентировать? Думаю, немного. Думаю, немного.
[01:32:38.240 --> 01:32:55.240]  Ну максимум, думаю, за полчаса отправимся. Можно тогда все про все. Можно сейчас дослушать и отправиться. Ну да. Если не слишком голодные люди, конечно. Нет, просто вы сейчас пойдете кушать, потом придете полчаса и еще будете там это ходить. Я думаю, мы потянулись.
[01:32:55.240 --> 01:33:07.240]  Если я седу кушать, я больше не рожу. Ну... Нет, тут начинаются тактические маневры в духе, а не знаешь ли ты случаи венгевский алгоритм? Нет, конечно. Зачем? Можно просто так сказать.
[01:33:07.240 --> 01:33:20.240]  Ну, а смысл как... Нет, вопрос, на самом деле, из того же цыпла, а зачем нужно дерево отрезков, если, там, скажем, сплей дерева умеет делать то же самое? Или, там, AVL умеет делать то же самое? Вот.
[01:33:20.240 --> 01:33:37.240]  Вот. Ну, знаете, пока я стираю... Ну, тут по-разному. Знаете, пока рассказываю, Тридцать Петров жаловались, что в Америке в 30-е годы, на самом деле, были... То есть, просветали очень крутые способы, как продать людям электрическую плиту.
[01:33:37.240 --> 01:33:47.240]  Ну, казалось бы, вот это... То есть, там, кучу денег, чтобы они потратили, хотя, казалось бы, у них есть газовая плита, она нормально работает. Но, значит, механизм очень простой.
[01:33:47.240 --> 01:33:55.240]  Значит, звонок в дверь, ну или, там, стук. Вы открываете на пару часов, и товарищ говорит, «Здрасте, я пришел установить вам новую электрическую плиту».
[01:33:55.240 --> 01:34:04.240]  Ну, у меня же есть газовая, она работает. Электрическая плита гораздо удобнее, но, впрочем, я не буду вас убеждать. Я сейчас просто ее вам тут поставлю, настрою и уйду.
[01:34:04.240 --> 01:34:13.240]  Вот. Она будет стоять у вас месяц. Можете делать с ней что хотите. Я приду через месяц. Если она вам все еще будет не нужна, я ее просто заберу.
[01:34:13.240 --> 01:34:21.240]  Вот. А если она вам понравится, то тогда у нас очень удобные условия. Кредит на первый взнос 25 долларов, а потом...
[01:34:21.240 --> 01:34:33.240]  Ну, давайте. Вот все. Это ошибка. Почему? Потому что, значит, первые два дня у вас стоит какая-то плита, что-то там, ну, что-то там стоит, и вы думаете, ну ладно, давайте попробуем что-то.
[01:34:33.240 --> 01:34:43.240]  Вы начинаете пробовать. Да, понимаете, что что-то на ней лучше получается. Прямо тут удобнее. То есть, она там с какими-то дополнительными функциями там, и какие-то продвинутыми.
[01:34:44.240 --> 01:34:52.240]  И, к концу месяца, вы реально понимаете, что вы уже привыкли жить без нее и не можете. И соглашайтесь там, называйте любой кредит, который вам предложат. Все.
[01:34:52.240 --> 01:34:55.240]  Это к тому, что эти первые все задачи будут с плей-теремом писать?
[01:34:57.240 --> 01:35:01.240]  Нет, это как к тому, что вместо плей-терема, вы что, будете деревоотреском писать?
[01:35:01.240 --> 01:35:03.240]  Не, вы так писали. Это моя газовая плита.
[01:35:03.240 --> 01:35:16.240]  Да, потому что, да. Нет, это просто к тому, что, как бы, теористов нет. Проблема в том, что деревоотреском вообще не надо, потому что теоретически это мухновые деревья, все то же самое. Но оно гораздо удобнее.
[01:35:18.240 --> 01:35:20.240]  Как оно раньше появилось почему-то.
[01:35:20.240 --> 01:35:27.240]  Вот. Но правда, там, видите, там, почему это реплама? Основой это за что он работал? За счет того, что электрическая плита действительно не удобнее пользоваться, чем газовая.
[01:35:28.240 --> 01:35:29.240]  Погнали есть хочу.
[01:35:30.240 --> 01:35:31.240]  Кажется сейчас...
[01:35:31.240 --> 01:35:34.240]  У нас есть хорошее условие. Стартовый КД 25...
[01:35:35.240 --> 01:35:36.240]  Так, да, это не то.
[01:35:36.240 --> 01:35:38.240]  Нет, есть 25 дуров, я не буду.
[01:35:41.240 --> 01:35:43.240]  Ну да, может когда-нибудь.
[01:35:43.240 --> 01:35:47.240]  Ладно, значит, смотрите. На чем вообще у нас Венгельский алгоритм?
[01:35:49.240 --> 01:35:51.240]  Венгельский алгоритм у нас вот о чем.
[01:35:51.240 --> 01:35:52.240]  Хорошо, смотрите.
[01:35:53.240 --> 01:36:01.240]  Он о том, как искать максимальное совершенное просочетание минимальной стоимости в двудольном графе.
[01:36:03.240 --> 01:36:05.240]  Прям задача обычно даже так и формулируется.
[01:36:07.240 --> 01:36:08.240]  Дан двудольный граф.
[01:36:09.240 --> 01:36:10.240]  Все ребра взвешены.
[01:36:10.240 --> 01:36:12.240]  Причем, что самое интересное, граф полный.
[01:36:15.240 --> 01:36:17.240]  Причем задаются прям вот матрицы смежности.
[01:36:18.240 --> 01:36:19.240]  1n, 1n.
[01:36:19.240 --> 01:36:20.240]  Это важно, что 1n.
[01:36:23.240 --> 01:36:28.240]  И известно, что все, давайте так, все-таки, все a и t, g, t больше либо равно 0.
[01:36:29.240 --> 01:36:30.240]  Да, это тоже важно.
[01:36:31.240 --> 01:36:33.240]  А, ну хотя, в общем-то, не сильно важно, но...
[01:36:34.240 --> 01:36:36.240]  Мы можем ко всем реабилитировать одно и то же число.
[01:36:36.240 --> 01:36:37.240]  На самом деле, да, да, да.
[01:36:38.240 --> 01:36:41.240]  Согласен, согласен, согласен, да, не сильно важно. Не заморачиваемся.
[01:36:43.240 --> 01:36:47.240]  Наша задача найти совершенное просочетание минимальной стоимости.
[01:36:48.240 --> 01:36:49.240]  Как это сделать?
[01:36:50.240 --> 01:36:59.240]  Ну, с высоты той теории, которая у нас есть, мы, конечно, могли бы тут просто построить вот, как всегда, s, t, сеть, поток, правда?
[01:37:00.240 --> 01:37:05.240]  А работало бы это у нас за либо nln, либо n на...
[01:37:06.240 --> 01:37:07.240]  А зачем?
[01:37:07.240 --> 01:37:08.240]  Все гораздо проще.
[01:37:08.240 --> 01:37:13.240]  Если ты делаешь ndx на графе с 2mершиной в квадрат рынка,
[01:37:13.240 --> 01:37:14.240]  то у тебя получается nd.
[01:37:15.240 --> 01:37:16.240]  Ура!
[01:37:16.240 --> 01:37:17.240]  Да, заметил, что да.
[01:37:18.240 --> 01:37:23.240]  Все, то есть, поэтому я и приводил аналогию с ovel и ndx.
[01:37:24.240 --> 01:37:25.240]  Лучше не будет.
[01:37:26.240 --> 01:37:27.240]  Асимпатически.
[01:37:28.240 --> 01:37:31.240]  Но, тем не менее, у того, что я сейчас расскажу, константа как-то и обновлюсь.
[01:37:34.240 --> 01:37:35.240]  Вот.
[01:37:35.240 --> 01:37:37.240]  Ну, вот алгоритм альтернативный, то есть там...
[01:37:38.240 --> 01:37:41.240]  Как его называется, да, он там бенгерский, потому что...
[01:37:41.240 --> 01:37:45.240]  Сначала какие-то два венгра придумали, как решать эту задачу за этот четвертый.
[01:37:46.240 --> 01:37:47.240]  Причем это были какие-то 50-е годы еще.
[01:37:48.240 --> 01:37:51.240]  Там теория потока зарождалась, а то и раньше еще было.
[01:37:52.240 --> 01:37:53.240]  Но задача уже сама по себе была.
[01:37:54.240 --> 01:37:57.240]  Ну, потому что она формулируется без потоков, просто по рассочетанию.
[01:37:59.240 --> 01:38:00.240]  Вот.
[01:38:00.240 --> 01:38:04.240]  А потом пришел кун, еще кто-то, по-моему, возможно даже, не венгр.
[01:38:05.240 --> 01:38:07.240]  И они допилили тот же алгоритм.
[01:38:07.240 --> 01:38:08.240]  Вот.
[01:38:08.240 --> 01:38:09.240]  Сейчас это с вами сделаем.
[01:38:10.240 --> 01:38:11.240]  И мы.
[01:38:12.240 --> 01:38:13.240]  Сделаем мы это вот.
[01:38:14.240 --> 01:38:15.240]  Вот, смотрите.
[01:38:16.240 --> 01:38:17.240]  Основная технология будет такая.
[01:38:18.240 --> 01:38:20.240]  Да, нам не важно, что ребра бывают положительные отрицелами.
[01:38:22.240 --> 01:38:25.240]  Но нам важно, что у нас есть...
[01:38:30.240 --> 01:38:32.240]  Значит, у нас есть...
[01:38:33.240 --> 01:38:34.240]  У нас есть...
[01:38:35.240 --> 01:38:40.240]  Значит, соответственно, наши веса, и у нас есть потенциалы.
[01:38:41.240 --> 01:38:42.240]  У и В.
[01:38:46.240 --> 01:38:47.240]  У и В это потенциалы.
[01:38:48.240 --> 01:38:49.240]  Массивы потенциалы.
[01:38:50.240 --> 01:38:52.240]  И мы будем поддерживать...
[01:38:53.240 --> 01:38:56.240]  Значит, это не совсем тот потенциал, который у нас был обычно.
[01:38:57.240 --> 01:39:00.240]  У нас будет мистический инвариант.
[01:39:05.240 --> 01:39:22.240]  Для любых ИЖ будет верно, что УИТ плюс ВШИТ меньше либо равно, чем АИТ.
[01:39:24.240 --> 01:39:25.240]  Смотрите немножко по-другому.
[01:39:26.240 --> 01:39:29.240]  Да, слово потенциал, но как бы забудьте о предыдущих потенциалах.
[01:39:31.240 --> 01:39:32.240]  Тут слово только совпало.
[01:39:33.240 --> 01:39:35.240]  Например, минус бесконечность.
[01:39:36.240 --> 01:39:40.240]  Ну, да, изначально так и будет.
[01:39:41.240 --> 01:39:43.240]  Но только изначально.
[01:39:46.240 --> 01:39:55.240]  Потому что, смотрите, еще мы ведем такое понятие, как жесткое ребро.
[01:39:55.240 --> 01:40:06.240]  Будем говорить, что ребро ИЖ жесткое, если вот это неравенство обращается в равенство.
[01:40:25.240 --> 01:40:26.240]  Вот.
[01:40:27.240 --> 01:40:28.240]  Теперь мистическое утверждение.
[01:40:28.240 --> 01:40:29.240]  Почему нам важно именно НН?
[01:40:29.240 --> 01:40:40.240]  Я утверждаю, то есть наша цель отгонять потенциалы, не нарушая их вариант, таким образом, чтобы у нас нашлось совершенное просочетание на жестких ребрах.
[01:40:45.240 --> 01:40:48.240]  Я утверждаю, что оно и будет ответным.
[01:40:49.240 --> 01:40:50.240]  Понимаете?
[01:40:51.240 --> 01:40:53.240]  Я утверждаю, что оно и будет ответным.
[01:40:54.240 --> 01:40:55.240]  Понимаете, почему?
[01:40:58.240 --> 01:40:59.240]  Нет?
[01:41:00.240 --> 01:41:01.240]  Ну, идея такая.
[01:41:02.240 --> 01:41:07.240]  Предположим, что у вас нашлось совершенное просочетание на жестких ребрах.
[01:41:08.240 --> 01:41:20.240]  Тогда, смотрите, если вы просуммируете все веса ребра, то у вас с этой стороны равенства получится просто сумма всех потенциалов.
[01:41:21.240 --> 01:41:29.240]  Но тогда получается, что по той же причине вы можете заметить, что у любого совершенного просочетания суммальный вес не меньше, чем сумма всех потенциалов.
[01:41:30.240 --> 01:41:33.240]  То есть получается, она не меньше, но ровно столько вы уже нашли на жестких ребрах.
[01:41:34.240 --> 01:41:38.240]  То есть, заметьте, видите, потенциалы мы сейчас будем подгонять аккуратно, видите, да?
[01:41:40.240 --> 01:41:43.240]  Сейчас мы будем вот очень-очень-очень аккуратно подгонять.
[01:41:45.240 --> 01:41:49.240]  И смотрите, как мы это будем делать.
[01:41:50.240 --> 01:41:53.240]  Ну да, все-таки понятно, делаем как бы жестко.
[01:42:00.240 --> 01:42:01.240]  Да.
[01:42:02.240 --> 01:42:03.240]  Значит, идея будет такая.
[01:42:04.240 --> 01:42:05.240]  Значит, так предположим.
[01:42:06.240 --> 01:42:09.240]  Ну, изначально понятно, у нас потенциал – это какая-нибудь минус бесконечность, минус бесконечность.
[01:42:10.240 --> 01:42:12.240]  Ну, или если в серию брони отрицательно изначально, то ноль.
[01:42:13.240 --> 01:42:14.240]  Это, в общем-то, неважно.
[01:42:15.240 --> 01:42:16.240]  Важно другое.
[01:42:16.240 --> 01:42:18.240]  Значит, давайте скажем, до какого-то предпол...
[01:42:19.240 --> 01:42:20.240]  Значит, у нас будет вариант такой.
[01:42:21.240 --> 01:42:22.240]  Мы будем идти тут по очереди.
[01:42:25.240 --> 01:42:26.240]  Вот.
[01:42:27.240 --> 01:42:28.240]  И будем говорить, пусть мы до какой-то вершины наконец-то дошли.
[01:42:29.240 --> 01:42:30.240]  Да?
[01:42:31.240 --> 01:42:32.240]  Ну вот.
[01:42:33.240 --> 01:42:40.240]  У нас есть какие-то потенциалы, и они подогнаны таким образом, что у нас есть просочетания на жестких ребрах, покрывающие все вот эти вершины.
[01:42:41.240 --> 01:42:42.240]  Ну, вот какой-нибудь.
[01:42:43.240 --> 01:42:44.240]  Вот такое, например.
[01:42:44.240 --> 01:42:45.240]  Ну, я отболтываю, пожалуйста.
[01:42:46.240 --> 01:42:48.240]  То есть первые несколько левых, и все правые.
[01:42:49.240 --> 01:42:50.240]  Сколько это правые?
[01:42:51.240 --> 01:42:53.240]  Первая вот, жесткая первая вот эта левая, и какие-то правые.
[01:42:54.240 --> 01:42:56.240]  Ну, понятно, что не все, но какие-то.
[01:42:57.240 --> 01:43:02.240]  То есть теперь наша задача на следующей итерации сделать так же, только чтобы помимо этих вершин была покрыта еще и...
[01:43:03.240 --> 01:43:06.240]  Просочетание нам нужно в явном виде.
[01:43:07.240 --> 01:43:08.240]  Как же мы это будем делать?
[01:43:09.240 --> 01:43:10.240]  А очень просто.
[01:43:11.240 --> 01:43:15.240]  Мы будем делать это методом поиска удлиняющих цепей.
[01:43:18.240 --> 01:43:22.240]  А именно мы из этой вершины запустим DFS по жестким ребрам.
[01:43:23.240 --> 01:43:26.240]  Все ребра ориентированы вправо, ребра с просочетанием ориентированы влево.
[01:43:28.240 --> 01:43:30.240]  Но нас интересует только, напоминаю, жесткие ребра.
[01:43:31.240 --> 01:43:36.240]  Если мы в процессе DFS отойдем до какой-нибудь вершины правой доли,
[01:43:37.240 --> 01:43:41.240]  то, поздравляю, удлиняющая цепь по рассочетанию улучшилась.
[01:43:42.240 --> 01:43:43.240]  Победили.
[01:43:44.240 --> 01:43:45.240]  Логично, да?
[01:43:46.240 --> 01:43:47.240]  Да.
[01:43:50.240 --> 01:43:52.240]  Но может так случиться, что так не произошло.
[01:43:53.240 --> 01:43:55.240]  Почему ребра жесткие ориентированы?
[01:43:56.240 --> 01:43:57.240]  Потому что потенциал не поменяли?
[01:43:58.240 --> 01:43:59.240]  Нет, ребра поменяли.
[01:44:00.240 --> 01:44:01.240]  Нет.
[01:44:02.240 --> 01:44:05.240]  Какая разница? Жесткость, не жесткость, ребра никак не связаны с собой ориентация.
[01:44:06.240 --> 01:44:07.240]  Мы DFS только по-жестки пускаем.
[01:44:08.240 --> 01:44:10.240]  И сейчас. Наши удлиняющие цепи раксовали по ней.
[01:44:11.240 --> 01:44:13.240]  Получили какое-то абсолютно другое множество ребра.
[01:44:14.240 --> 01:44:17.240]  Мы выбрали другое просочетание. Мы ничего не меняли, ни веса, ничего.
[01:44:18.240 --> 01:44:19.240]  Ну и что у нас? Ребра другие стали теперь.
[01:44:20.240 --> 01:44:21.240]  Я не понимаю, что мы сделали. Можно еще раз?
[01:44:22.240 --> 01:44:23.240]  Еще раз.
[01:44:24.240 --> 01:44:26.240]  В DFS он все ребра ориентировал.
[01:44:27.240 --> 01:44:28.240]  То есть он их не создал и не ударил.
[01:44:28.240 --> 01:44:29.240]  Без проблем, без проблем.
[01:44:30.240 --> 01:44:31.240]  Он их ориентировал.
[01:44:32.240 --> 01:44:35.240]  И теперь он их ориентировал. Все ребра из просочетания влево, все остальные вправо.
[01:44:36.240 --> 01:44:37.240]  Он запустил с DFS из этой вершины.
[01:44:38.240 --> 01:44:39.240]  Отлично.
[01:44:40.240 --> 01:44:41.240]  По-жестким ребрам.
[01:44:42.240 --> 01:44:43.240]  В смысле?
[01:44:44.240 --> 01:44:45.240]  Только по-жестким.
[01:44:46.240 --> 01:44:47.240]  Только по-жестким.
[01:44:48.240 --> 01:44:49.240]  Это важно.
[01:44:50.240 --> 01:44:51.240]  DFS мы пускаем только по-жестким ребрам.
[01:44:52.240 --> 01:44:57.240]  И если бы нам удалось найти удлиняющую цель в процессе этого DFS, то поздравляю.
[01:44:58.240 --> 01:45:01.240]  Ну а то тогда мы победили и улучшаем просочетание радовицы.
[01:45:02.240 --> 01:45:07.240]  То есть в этой картинке красные обозначенные ребра из просочетания и они еще и жесткие.
[01:45:08.240 --> 01:45:09.240]  Да.
[01:45:10.240 --> 01:45:13.240]  У нас это прописано в инварианте, что в каждый момент времени у нас то просочетание...
[01:45:14.240 --> 01:45:16.240]  Нет, потому что у нас никак не обозначены просто жесткие ребра на графе.
[01:45:17.240 --> 01:45:18.240]  Это меня просто выпило.
[01:45:19.240 --> 01:45:20.240]  Да, да, да.
[01:45:22.240 --> 01:45:23.240]  Так вот.
[01:45:24.240 --> 01:45:25.240]  Идем дальше.
[01:45:26.240 --> 01:45:31.240]  Значит, что же делать, если мы из вершины В запустили DFS и очень вот...
[01:45:32.240 --> 01:45:37.240]  То есть запустили DFS и каким-то мистическим чудом до какой-то свободной вершины правой доли мы не нашли.
[01:45:38.240 --> 01:45:39.240]  Не дошли.
[01:45:40.240 --> 01:45:42.240]  Вот бабах такой случился, например, в самом начале.
[01:45:43.240 --> 01:45:46.240]  Когда у вас тут минус бесконечность, минус бесконечность была, да?
[01:45:47.240 --> 01:45:48.240]  Что делать?
[01:45:49.240 --> 01:45:50.240]  Изменить потенциалы.
[01:45:51.240 --> 01:45:52.240]  Значит, как?
[01:45:53.240 --> 01:45:54.240]  Увеличивать или уменьшить?
[01:45:55.240 --> 01:45:56.240]  Изменить потенциалы всего множества слева.
[01:45:57.240 --> 01:45:58.240]  А теперь смотрите.
[01:45:59.240 --> 01:46:00.240]  Логика следующая.
[01:46:01.240 --> 01:46:04.240]  Значит, давайте посмотрим, докуда мы дошли.
[01:46:05.240 --> 01:46:06.240]  Вот DFS докуда-то дошел.
[01:46:08.240 --> 01:46:10.240]  Можно так сказать L плюс и R плюс объявить доля.
[01:46:11.240 --> 01:46:12.240]  Все остальное L минус и R минус.
[01:46:13.240 --> 01:46:14.240]  Помните, мы этим уже занимались в свое время, да?
[01:46:15.240 --> 01:46:16.240]  Угу.
[01:46:17.240 --> 01:46:21.240]  Ну L, R это слева вправо, плюс типа обойти над DFS, минус необычно.
[01:46:24.240 --> 01:46:25.240]  Что мы можем сказать?
[01:46:26.240 --> 01:46:31.240]  Мы можем сказать, если мы рассмотрим все ребра из доли L плюс, из L плюса в R минус, да?
[01:46:33.240 --> 01:46:36.240]  То мы замечаем, что все эти ребра не жесткие, правда?
[01:46:37.240 --> 01:46:38.240]  Да.
[01:46:41.240 --> 01:46:42.240]  Так вот.
[01:46:43.240 --> 01:46:45.240]  Из L плюс в R минус.
[01:46:46.240 --> 01:46:47.240]  Куда мы не дошли?
[01:46:48.240 --> 01:46:49.240]  Все они не жесткие.
[01:46:54.240 --> 01:46:55.240]  Вот.
[01:46:56.240 --> 01:46:57.240]  Теперь.
[01:46:58.240 --> 01:46:59.240]  Магия такая.
[01:47:01.240 --> 01:47:04.240]  Значит, мы введем мистическое число Дельта.
[01:47:05.240 --> 01:47:08.240]  Почему они не могли быть красными из взятных просвещаний?
[01:47:09.240 --> 01:47:12.240]  Потому что, а как мы в эту?
[01:47:13.240 --> 01:47:14.240]  Потому что мы...
[01:47:14.240 --> 01:47:15.240]  Ну да.
[01:47:16.240 --> 01:47:17.240]  Дельта, так вот, идея такая.
[01:47:18.240 --> 01:47:19.240]  То есть они все не жесткие.
[01:47:20.240 --> 01:47:21.240]  А теперь давайте подумаем.
[01:47:22.240 --> 01:47:24.240]  А на сколько они не жесткие?
[01:47:25.240 --> 01:47:26.240]  Дельта это минимум по разности.
[01:47:27.240 --> 01:47:29.240]  Это будет просто минимум.
[01:47:30.240 --> 01:47:36.240]  Значит, по всем I лежащим будет плюс C, J лежащим в R минус 7.
[01:47:37.240 --> 01:47:46.240]  Такой замечательной величины, как AITJT минус UIT минус VJT.
[01:47:47.240 --> 01:47:50.240]  То есть, если рассматривать такую приведенную стоимость ребер,
[01:47:51.240 --> 01:47:53.240]  то у всех ребер, соединяющих L плюса минусом,
[01:47:54.240 --> 01:47:58.240]  то есть у всех таких ребер вес больше либо равен, чем DELT.
[01:47:59.240 --> 01:48:00.240]  Видите, да?
[01:48:01.240 --> 01:48:04.240]  А у кого-то ровно DELT.
[01:48:05.240 --> 01:48:07.240]  То есть тут везде больше либо равен, больше либо равен.
[01:48:09.240 --> 01:48:10.240]  Вот.
[01:48:14.240 --> 01:48:15.240]  Так вот.
[01:48:16.240 --> 01:48:23.240]  Так вот, там наша цель сделать так, чтобы по какому-то из этих ребер DFS в будущем мог пройти,
[01:48:24.240 --> 01:48:25.240]  но при этом, чтобы все было адекватно.
[01:48:26.240 --> 01:48:28.240]  Поэтому мы скажем, что...
[01:48:29.240 --> 01:48:31.240]  Значит, поэтому дальше механизм такой.
[01:48:31.240 --> 01:48:38.240]  Для всех вершин в L плюсе мы потенциал увеличим на DELT.
[01:48:44.240 --> 01:48:55.240]  И для всех вершин в R плюсе мы потенциал уже уменьшим внезапно.
[01:48:56.240 --> 01:48:58.240]  Вот заклинание предлагается так.
[01:49:02.240 --> 01:49:03.240]  Ну и бишно.
[01:49:04.240 --> 01:49:08.240]  Сейчас можно посмотреть, тут три ребра зеленых, верхний из них идет из L минусу L.
[01:49:09.240 --> 01:49:12.240]  Ой, ой, ой, ой, безобразие, безобразие.
[01:49:13.240 --> 01:49:15.240]  Давайте оно вот-вот сюда.
[01:49:22.240 --> 01:49:23.240]  Вот так еще можно.
[01:49:24.240 --> 01:49:27.240]  А вот это больше равно DELT? Это вес ребра больше равен?
[01:49:28.240 --> 01:49:29.240]  Приведеный.
[01:49:29.240 --> 01:49:37.240]  Ну то есть мы говорим, что у нас приведённый вес ребра это как бы вес ребра минус сумма потенциала в конце.
[01:49:37.240 --> 01:49:41.240]  Она всегда должна быть больше либо равно 0.
[01:49:41.240 --> 01:49:47.240]  Так вот, теперь давайте думать, осталась ли эта приведённая стоимость не отрицательна.
[01:49:47.240 --> 01:49:57.240]  Ну давайте подумаем, если ребро лежит целиком обойдено DFS, то у него приведённая стоимость не поменялась.
[01:49:57.240 --> 01:49:59.240]  Ну плюс дельта.
[01:49:59.240 --> 01:50:05.240]  Если оно целиком не было обойдено DFS, то тоже не интересно.
[01:50:09.240 --> 01:50:19.240]  То есть самое приятное, если оно соединяло L-R+, такие ребра тоже есть, то приведённая стоимость могла только увеличиться.
[01:50:19.240 --> 01:50:23.240]  Даже не просто могла, просто увеличилась на дельта.
[01:50:23.240 --> 01:50:29.240]  То есть получается мы какие-то жёсткие ребра могли даже потерять.
[01:50:29.240 --> 01:50:31.240]  Но это для нас не важно.
[01:50:31.240 --> 01:50:37.240]  Для нас важно, что в том, что мы обошли DFS, мы жёсткие ребра не потеряли, остались жёсткими.
[01:50:37.240 --> 01:50:45.240]  Но самое главное, что если рассматривать ребра от L-R+, то у них стоимости все строго уменьшились на дельта.
[01:50:45.240 --> 01:50:53.240]  И самое важное, что нашлось хотя бы одно ребро, которое стало жёстким.
[01:50:53.240 --> 01:51:01.240]  А это означает, что если мы теперь запустим новый DFS учётом новых потенциалов из этой вершины,
[01:51:01.240 --> 01:51:15.240]  то когда мы запустим DFS, то мы обойдём как те же вершины, плюс как минимум ещё вот эту.
[01:51:15.240 --> 01:51:23.240]  Понимаете, да?
[01:51:23.240 --> 01:51:33.240]  И тогда это означает, получается каждый следующий DFS будет увеличивать количество вершин, которые мы покрыли.
[01:51:33.240 --> 01:51:41.240]  А следовательно, рано или поздно, то есть раз мы их будем увеличить, то рано или поздно попадётся в правой доле вершины непокрытой простичитания.
[01:51:41.240 --> 01:51:51.240]  Мы всегда начинаем только из этой вершины.
[01:51:51.240 --> 01:51:57.240]  А дальше у нас два варианта, либо мы дошли до вершины правой доли непокрытой простичитания, либо не дошли.
[01:51:57.240 --> 01:52:03.240]  Ну и напоминаю, DFS ходит только по жёстким рёдам.
[01:52:03.240 --> 01:52:11.240]  Если мы не дошли, то мы подгоняем потенциал так, чтобы у нас по жёстким рёдам можно было дойти чуть дальше и ещё чуть дальше.
[01:52:11.240 --> 01:52:23.240]  То есть вот такой алгоритм. То есть мы доказали его правильность. Теперь осталось только выяснить, за сколько он работает.
[01:52:23.240 --> 01:52:31.240]  Ну давайте начнём с того, что у нас N вершины.
[01:52:31.240 --> 01:52:41.240]  Что у нас есть? У нас есть не более чем 2 NDFS.
[01:52:41.240 --> 01:52:43.240]  Ну не 2, а просто N.
[01:52:43.240 --> 01:52:47.240]  Ну N, потому что мы на каждом шаре покрываем новую правую вершину.
[01:52:47.240 --> 01:52:57.240]  То есть получается, на каждой итерации мы делаем. То есть у нас есть NDF, N раз мы делаем на DFS, плюс изменение потенциала.
[01:52:57.240 --> 01:53:07.240]  Ну давайте, если совсем в тупую, то как бы изменить потенциал можно тупо. То есть эту дельту можно найти тупо перебрав с серёбра.
[01:53:07.240 --> 01:53:11.240]  Ну потому что всё равно же на квадрат работает, правда?
[01:53:11.240 --> 01:53:15.240]  То есть давайте в тупую. Ну давайте за O от E так и напишем.
[01:53:15.240 --> 01:53:21.240]  Ну теоретически там можно думать в стиле, что...
[01:53:21.240 --> 01:53:25.240]  Ну тогда раз DFS тоже N квадрат, то получается O от F4.
[01:53:25.240 --> 01:53:33.240]  Ну кто-то обещал N-куб.
[01:53:33.240 --> 01:53:43.240]  Ну собственно, по-моему не помню, между статьями прошло 2 года.
[01:53:43.240 --> 01:53:51.240]  И теперь вот возникли технологии, как этот N-куб всё-таки соптимизировать Дэн в треть.
[01:53:51.240 --> 01:53:55.240]  Прям отдельная статья, все то, что вот этот алгоритм оптимизирует...
[01:53:55.240 --> 01:53:59.240]  Удивительный факт, каждый раз когда у нас проходит 60 секунд, в Китае проходит целая минута.
[01:53:59.240 --> 01:54:03.240]  Вопрос, как этот N-куб оптимизирует Дэн в треть?
[01:54:03.240 --> 01:54:11.240]  Да...
[01:54:11.240 --> 01:54:17.240]  Можно пытаться выисплыть дельту?
[01:54:17.240 --> 01:54:19.240]  Ну смотрите.
[01:54:19.240 --> 01:54:21.240]  Ну не совсем.
[01:54:21.240 --> 01:54:23.240]  У нас DFS.
[01:54:23.240 --> 01:54:25.240]  Но начнем.
[01:54:25.240 --> 01:54:27.240]  Ну смотрите.
[01:54:27.240 --> 01:54:29.240]  На самом деле начнем с простого.
[01:54:29.240 --> 01:54:37.240]  На самом деле вот этот N-квадрат действительно достаточно легко оптимизировать до N-ки.
[01:54:37.240 --> 01:54:39.240]  Следующим образом.
[01:54:39.240 --> 01:54:45.240]  Нам надо прибежаться по всем вершинам из R-.
[01:54:45.240 --> 01:54:53.240]  И у каждой из них найти минимальное ребро, которое соединяет эту вершину с множеством L+.
[01:54:53.240 --> 01:55:03.240]  Мы можем заметить, что L-плюс у нас тоже множество, которое разрастается экстенсивно.
[01:55:03.240 --> 01:55:07.240]  То есть что туда попало, оно уже попало до конца.
[01:55:07.240 --> 01:55:09.240]  Понимаете, да?
[01:55:09.240 --> 01:55:11.240]  Ну в смысле этого длиняющего цепи.
[01:55:11.240 --> 01:55:13.240]  Поэтому возникает такая идея.
[01:55:13.240 --> 01:55:19.240]  А давайте введем такое понятие, как Минже.
[01:55:19.240 --> 01:55:21.240]  То есть Минже.
[01:55:21.240 --> 01:55:23.240]  Житэ.
[01:55:23.240 --> 01:55:25.240]  Может ИТ?
[01:55:25.240 --> 01:55:27.240]  Житэ.
[01:55:27.240 --> 01:55:29.240]  Лучше вообще Минве.
[01:55:29.240 --> 01:55:31.240]  Минже.
[01:55:31.240 --> 01:55:33.240]  Все?
[01:55:33.240 --> 01:55:35.240]  Все нормально.
[01:55:35.240 --> 01:55:37.240]  Ну давайте назовем Минве.
[01:55:37.240 --> 01:55:39.240]  Я где-то видел это по значению Минже.
[01:55:39.240 --> 01:55:41.240]  Возможно даже на иМаксе.
[01:55:41.240 --> 01:55:43.240]  Ну вот.
[01:55:43.240 --> 01:55:45.240]  Вот.
[01:55:45.240 --> 01:55:47.240]  Как это говорят, да?
[01:55:47.240 --> 01:55:57.240]  Значит Минве Житэ это равно минимальное такое ВИТ Житэ, что И лежит в ЛП.
[01:55:57.240 --> 01:55:59.240]  Да, нас это интересует.
[01:55:59.240 --> 01:56:01.240]  А, ну мы это можем в принципе поддерживать для всех вершин.
[01:56:01.240 --> 01:56:03.240]  И нам в общем-то плевать.
[01:56:03.240 --> 01:56:05.240]  Разве ВИТ Житэ?
[01:56:05.240 --> 01:56:07.240]  Ну А.
[01:56:07.240 --> 01:56:09.240]  Возможно даже должно быть посоединение пенциала.
[01:56:09.240 --> 01:56:11.240]  Или нет.
[01:56:11.240 --> 01:56:13.240]  Мы искали минимальное.
[01:56:13.240 --> 01:56:15.240]  Ну что, побери.
[01:56:15.240 --> 01:56:17.240]  Да, да, да, да.
[01:56:19.240 --> 01:56:21.240]  Хорошо, хорошо, хорошо.
[01:56:25.240 --> 01:56:27.240]  Значит теперь поехали.
[01:56:29.240 --> 01:56:31.240]  Что происходит?
[01:56:37.240 --> 01:56:39.240]  Значит, то теперь заметим, как меняется.
[01:56:39.240 --> 01:56:41.240]  Теперь заметим, как это происходит.
[01:56:41.240 --> 01:56:43.240]  Ну когда у нас в процессе DFS
[01:56:43.240 --> 01:56:45.240]  новая вершина появляется в L+,
[01:56:45.240 --> 01:56:47.240]  то как бы вы можете прежде...
[01:56:47.240 --> 01:56:49.240]  Вам все равно нам придется пробирать по ребрам, да?
[01:56:49.240 --> 01:56:51.240]  Так давайте сначала пробежимся по ребрам
[01:56:51.240 --> 01:56:53.240]  и обновим вот это вот Минве.
[01:56:53.240 --> 01:56:55.240]  Ну никаких проблем с этим не будет, да?
[01:56:57.240 --> 01:56:59.240]  Это делается за ним.
[01:56:59.240 --> 01:57:01.240]  Но правда еще есть подлянка, что
[01:57:01.240 --> 01:57:03.240]  у нас в процессе DFS
[01:57:03.240 --> 01:57:05.240]  это делается за ним.
[01:57:05.240 --> 01:57:07.240]  Но правда еще есть подлянка, что
[01:57:07.240 --> 01:57:09.240]  возможно, что у вас еще
[01:57:09.240 --> 01:57:11.240]  потенциалы меняются.
[01:57:13.240 --> 01:57:15.240]  Как бы не мирно.
[01:57:15.240 --> 01:57:17.240]  И нам бы очень не хотелось это в тупую пересчитывать.
[01:57:19.240 --> 01:57:21.240]  Но на самом деле заметим следующее.
[01:57:21.240 --> 01:57:23.240]  Мы заметим, что потенциалы
[01:57:23.240 --> 01:57:25.240]  в R+, вообще-то нам все равно
[01:57:25.240 --> 01:57:27.240]  что-то происходит, да?
[01:57:27.240 --> 01:57:29.240]  Если вершина в R-,
[01:57:29.240 --> 01:57:31.240]  то здесь мы делаем следующее.
[01:57:31.240 --> 01:57:33.240]  Если в R-, то
[01:57:33.240 --> 01:57:35.240]  когда мы вот это делаем, да?
[01:57:37.240 --> 01:57:39.240]  Вычитаем тейту в R+.
[01:57:39.240 --> 01:57:41.240]  А, ну здесь вообще ничего не происходит в R+, да?
[01:57:43.240 --> 01:57:45.240]  Ну в вершинах R+,
[01:57:45.240 --> 01:57:47.240]  от того, что мы ко всем
[01:57:47.240 --> 01:57:49.240]  вершинам прибавили,
[01:57:49.240 --> 01:57:51.240]  это вычтет DEL, то ничего не поменялось.
[01:57:53.240 --> 01:57:55.240]  Ну да, мы могли, конечно,
[01:57:55.240 --> 01:57:57.240]  Минве поддерживать еще в R+, и там
[01:57:57.240 --> 01:57:59.240]  вычитать тейту.
[01:57:59.240 --> 01:58:01.240]  Но что делать с R+,
[01:58:01.240 --> 01:58:03.240]  ну с R+,
[01:58:03.240 --> 01:58:05.240]  делать все очень просто.
[01:58:05.240 --> 01:58:07.240]  Если ко всем вершинам R+,
[01:58:07.240 --> 01:58:09.240]  прибавилось DEL,
[01:58:09.240 --> 01:58:11.240]  это означает, что у всех вот этих вот вершин,
[01:58:11.240 --> 01:58:13.240]  там все
[01:58:13.240 --> 01:58:15.240]  вот эти вот веса,
[01:58:15.240 --> 01:58:17.240]  они все изменились тоже вот
[01:58:17.240 --> 01:58:19.240]  на одной и той же величине.
[01:58:19.240 --> 01:58:21.240]  А именно уменьшились на DEL.
[01:58:21.240 --> 01:58:23.240]  А значит и минимум уменьшился на DEL,
[01:58:23.240 --> 01:58:25.240]  то есть надо из этих Минвеш
[01:58:25.240 --> 01:58:27.240]  их все уменьшить на DEL.
[01:58:29.240 --> 01:58:31.240]  Понимаете, да?
[01:58:31.240 --> 01:58:33.240]  То есть нужно поддерживать...
[01:58:33.240 --> 01:58:35.240]  В смысле?
[01:58:35.240 --> 01:58:37.240]  Можно это сделать в текуе, наверное,
[01:58:37.240 --> 01:58:39.240]  а можно в форме поддерживать.
[01:58:39.240 --> 01:58:41.240]  Ну да, на самом деле, да.
[01:58:41.240 --> 01:58:43.240]  Надо ко всем R- делать минус DEL.
[01:58:43.240 --> 01:58:45.240]  Ко всем Минве отжимать.
[01:58:45.240 --> 01:58:47.240]  Ну R- сделать Минве.
[01:58:47.240 --> 01:58:49.240]  Ну то есть по факту, да,
[01:58:49.240 --> 01:58:51.240]  можно дальше задумываться
[01:58:51.240 --> 01:58:53.240]  на тему того, что не делать
[01:58:53.240 --> 01:58:55.240]  какой-нибудь дэкс без кучи.
[01:58:55.240 --> 01:58:57.240]  Ну это ж напрямо похоже, правда,
[01:58:57.240 --> 01:58:59.240]  можно найти какой-то минимум, да?
[01:58:59.240 --> 01:59:01.240]  И иногда какие-то вершины
[01:59:01.240 --> 01:59:03.240]  надо просто выпиливать.
[01:59:03.240 --> 01:59:05.240]  То есть когда DFS дошел до какой-то вершины
[01:59:05.240 --> 01:59:07.240]  новой R- ее надо исключительно выпиливать.
[01:59:07.240 --> 01:59:09.240]  Ну не то чтобы вам в данном случае
[01:59:09.240 --> 01:59:11.240]  на полном графе это сильно поможет,
[01:59:11.240 --> 01:59:13.240]  да, то есть как на полном графе
[01:59:13.240 --> 01:59:15.240]  мог шить честный для экстрима.
[01:59:15.240 --> 01:59:17.240]  Но, по крайней мере, мы добились того,
[01:59:17.240 --> 01:59:19.240]  что каждая фаза вот эта
[01:59:19.240 --> 01:59:21.240]  между DFS-ами, она,
[01:59:21.240 --> 01:59:23.240]  то есть кроме DFS-ов,
[01:59:23.240 --> 01:59:25.240]  работает за линейное время, правда?
[01:59:25.240 --> 01:59:27.240]  Понимаете, да?
[01:59:27.240 --> 01:59:29.240]  Да.
[01:59:29.240 --> 01:59:31.240]  А теперь остается только одно.
[01:59:31.240 --> 01:59:33.240]  Как же теперь
[01:59:33.240 --> 01:59:35.240]  после этого добиться того,
[01:59:35.240 --> 01:59:37.240]  чтобы у нас не было NTFS?
[01:59:37.240 --> 01:59:39.240]  Можно поддерживать
[01:59:39.240 --> 01:59:41.240]  множество плюсов.
[01:59:41.240 --> 01:59:43.240]  Да, и конечно,
[01:59:43.240 --> 01:59:45.240]  и мы обязательно будем это делать.
[01:59:45.240 --> 01:59:47.240]  Ну еще конечно, а также
[01:59:47.240 --> 01:59:49.240]  мы для MinV будем поддерживать
[01:59:49.240 --> 01:59:51.240]  не только минимум, но и то откуда мы его взяли.
[01:59:51.240 --> 01:59:53.240]  И тогда будет идея такая,
[01:59:53.240 --> 01:59:55.240]  что на самом деле,
[01:59:55.240 --> 01:59:57.240]  то есть просто будет идея, что если у вас
[01:59:57.240 --> 01:59:59.240]  дошлось вот это ребро, да, это нулевое,
[01:59:59.240 --> 02:00:01.240]  то вместо того, чтобы запускать DFS
[02:00:01.240 --> 02:00:03.240]  и эти вершины проходить заново,
[02:00:03.240 --> 02:00:05.240]  мы просто говорим, что поздравляем,
[02:00:05.240 --> 02:00:07.240]  DFS дошел аж до этой вершины,
[02:00:07.240 --> 02:00:09.240]  и мы просто из нее запускаем DFS заново.
[02:00:09.240 --> 02:00:11.240]  Ну не заново, просто запускаем DFS,
[02:00:11.240 --> 02:00:13.240]  но с учетом того, что эти вершины уже помечены.
[02:00:13.240 --> 02:00:15.240]  Ничего не понятно.
[02:00:17.240 --> 02:00:19.240]  DFS слева запускали.
[02:00:19.240 --> 02:00:21.240]  Да, мы запускали слева DFS.
[02:00:21.240 --> 02:00:23.240]  Вошли когда-то эти вершины, да?
[02:00:23.240 --> 02:00:25.240]  Теперь мы знаем, что
[02:00:25.240 --> 02:00:27.240]  остановились, не дошли ни до одной
[02:00:27.240 --> 02:00:29.240]  вершины в правой доле.
[02:00:29.240 --> 02:00:31.240]  Нет, даже надо было, ну там дошли до каких-то
[02:00:31.240 --> 02:00:33.240]  правых или... Да, не дошли ни до одной
[02:00:33.240 --> 02:00:35.240]  свободной правой доле.
[02:00:35.240 --> 02:00:37.240]  Уменьшили потенциал.
[02:00:37.240 --> 02:00:39.240]  Увидели, какое множество
[02:00:39.240 --> 02:00:41.240]  вершин добавилось справа. Ну, одну
[02:00:41.240 --> 02:00:43.240]  добавили справа. Ну, одну хотя бы.
[02:00:43.240 --> 02:00:45.240]  Ну, потому что одну не важно.
[02:00:45.240 --> 02:00:47.240]  Не важно.
[02:00:47.240 --> 02:00:49.240]  Значит, тогда идея такая, из этой вершины,
[02:00:49.240 --> 02:00:51.240]  если она в правой доле не покрыта
[02:00:51.240 --> 02:00:53.240]  по рассочетаниям, то мы победили.
[02:00:53.240 --> 02:00:55.240]  Теперь не покрыта, потому что мы как раз
[02:00:55.240 --> 02:00:57.240]  кинули. Нет, по рассочетаниям мы пока не меняем.
[02:00:57.240 --> 02:00:59.240]  Да, еще раз.
[02:00:59.240 --> 02:01:01.240]  Она могла быть покрыта по рассочетаниям.
[02:01:01.240 --> 02:01:03.240]  Но мы на нее могли не дойти.
[02:01:03.240 --> 02:01:05.240]  Да, вполне могли такое.
[02:01:05.240 --> 02:01:07.240]  Просто
[02:01:07.240 --> 02:01:09.240]  все ребра мягкие. Да.
[02:01:09.240 --> 02:01:11.240]  То есть вполне вероятно было, что
[02:01:11.240 --> 02:01:13.240]  ребром с дельтой было вот это.
[02:01:15.240 --> 02:01:17.240]  Ладно.
[02:01:17.240 --> 02:01:19.240]  Ровно из-за этого у нас
[02:01:19.240 --> 02:01:21.240]  N DFS, а не один.
[02:01:23.240 --> 02:01:25.240]  Да, вот подляночка.
[02:01:25.240 --> 02:01:27.240]  Тогда нам нужно пустить еще раз DFS.
[02:01:27.240 --> 02:01:29.240]  Ну, не еще раз, а просто
[02:01:29.240 --> 02:01:31.240]  сказать так. Старые пометки мы не стираем,
[02:01:31.240 --> 02:01:33.240]  просто запускаем DFS из этой вершины.
[02:01:33.240 --> 02:01:35.240]  Ну, из этой, в смысле
[02:01:35.240 --> 02:01:37.240]  помещаем ее, идем сюда, и там
[02:01:37.240 --> 02:01:39.240]  дальше идем тоже.
[02:01:39.240 --> 02:01:41.240]  Потому что там, конечно, пути будут по жестким
[02:01:41.240 --> 02:01:43.240]  ребрам. Ну, хотя нет, даже пути по жестким
[02:01:43.240 --> 02:01:45.240]  ребрам будут те же. Обратите
[02:01:45.240 --> 02:01:47.240]  внимание, потому что
[02:01:47.240 --> 02:01:49.240]  от того, что мы тут пошаманили с потенциалами,
[02:01:49.240 --> 02:01:51.240]  жесткие ребра внутри L+, R+,
[02:01:51.240 --> 02:01:53.240]  остались жесткими ребрами.
[02:01:53.240 --> 02:01:55.240]  Поэтому для каждой вершины
[02:01:55.240 --> 02:01:57.240]  можем аккуратненько поддерживать,
[02:01:57.240 --> 02:01:59.240]  из какой вершины мы в нее пришли, по какому ребру.
[02:01:59.240 --> 02:02:01.240]  Вот эта жесткая ребра
[02:02:01.240 --> 02:02:03.240]  уже останется жестким навсегда.
[02:02:03.240 --> 02:02:05.240]  Ну, по крайней мере, в наших рамках.
[02:02:05.240 --> 02:02:07.240]  И поэтому будем продолжать.
[02:02:07.240 --> 02:02:09.240]  И тогда получается, что эти N DFS
[02:02:09.240 --> 02:02:11.240]  будут работать экстенсивно,
[02:02:11.240 --> 02:02:13.240]  каждая вершина попадет в DFS ровно один раз.
[02:02:13.240 --> 02:02:15.240]  И тогда получается, что
[02:02:15.240 --> 02:02:17.240]  у нас не N DFS.
[02:02:19.240 --> 02:02:21.240]  А на самом деле у нас получается,
[02:02:21.240 --> 02:02:23.240]  это мы убираем, а на самом деле сюда
[02:02:23.240 --> 02:02:25.240]  вставляем плюс DFS
[02:02:25.240 --> 02:02:27.240]  И, которые суммарно работают
[02:02:27.240 --> 02:02:29.240]  за N квадрат.
[02:02:31.240 --> 02:02:33.240]  И тогда это получается
[02:02:33.240 --> 02:02:35.240]  N на N
[02:02:35.240 --> 02:02:37.240]  плюс DFS
[02:02:37.240 --> 02:02:39.240]  И того
[02:02:39.240 --> 02:02:41.240]  это N куб.
[02:02:43.240 --> 02:02:45.240]  Вот.
[02:02:57.240 --> 02:02:59.240]  Когда мы сделали
[02:02:59.240 --> 02:03:01.240]  один перечет потенциала,
[02:03:01.240 --> 02:03:03.240]  у нас не появляется сразу
[02:03:03.240 --> 02:03:05.240]  прочитание новое.
[02:03:05.240 --> 02:03:07.240]  Не можем сразу прочитание увеличить?
[02:03:07.240 --> 02:03:09.240]  Ведьм не.
[02:03:09.240 --> 02:03:11.240]  Потому что мы изменили и дошли.
[02:03:11.240 --> 02:03:13.240]  Нет, если дейта соединяла...
[02:03:13.240 --> 02:03:15.240]  Если эта дейта ведет
[02:03:15.240 --> 02:03:17.240]  в R минус, то вполне вероятно.
[02:03:19.240 --> 02:03:21.240]  Куда она еще может вести что?
[02:03:21.240 --> 02:03:23.240]  В вершину не покрытую про сочетание.
[02:03:23.240 --> 02:03:25.240]  Она может вести в вершину
[02:03:25.240 --> 02:03:27.240]  покрытую про сочетание.
[02:03:27.240 --> 02:03:29.240]  И тогда после следующей DFS покроет вот эту вершину,
[02:03:29.240 --> 02:03:31.240]  и эту вершину пойдет дальше.
[02:03:35.240 --> 02:03:37.240]  Вот. Ну дальше да.
[02:03:37.240 --> 02:03:39.240]  Дальше начинается отдельная песня
[02:03:39.240 --> 02:03:41.240]  и мы скажем, что делать, если у вас
[02:03:41.240 --> 02:03:43.240]  ребер не N квадрата, все-таки E
[02:03:43.240 --> 02:03:45.240]  каких-нибудь.
[02:03:47.240 --> 02:03:49.240]  Типа можно улучшить.
[02:03:49.240 --> 02:03:51.240]  Ну, типа.
[02:03:51.240 --> 02:03:53.240]  Вот.
[02:03:53.240 --> 02:03:55.240]  Нет, ну то есть это считать...
[02:03:55.240 --> 02:03:57.240]  Ну да, там это будет работать, действительно,
[02:03:57.240 --> 02:03:59.240]  что просто будем считать, что все остальные ребра есть,
[02:03:59.240 --> 02:04:01.240]  только они плют бесконечно.
[02:04:01.240 --> 02:04:03.240]  Ну это легко понять.
[02:04:03.240 --> 02:04:05.240]  Да. Но тогда суммарно DFS работают, во-первых,
[02:04:05.240 --> 02:04:07.240]  не за V квадрата, за O от E,
[02:04:07.240 --> 02:04:09.240]  а за N квадрат.
[02:04:09.240 --> 02:04:11.240]  Ну можно это сделать не за N квадрат,
[02:04:11.240 --> 02:04:13.240]  а на самом деле просто вот...
[02:04:13.240 --> 02:04:15.240]  За E лог. Ну как минимум за E лог.
[02:04:15.240 --> 02:04:17.240]  А на самом деле да.
[02:04:17.240 --> 02:04:19.240]  Ну давайте так.
[02:04:19.240 --> 02:04:21.240]  Ну во-первых, заметим, что вот эти все прибавления
[02:04:21.240 --> 02:04:23.240]  ну что у нас происходит,
[02:04:23.240 --> 02:04:25.240]  когда мы к L плюс что-то прибавляем,
[02:04:25.240 --> 02:04:27.240]  да, у нас все
[02:04:27.240 --> 02:04:29.240]  веса увеличиваются
[02:04:29.240 --> 02:04:31.240]  на одну и ту же константу, да?
[02:04:31.240 --> 02:04:33.240]  Да. Как правильно там Чифин заметил
[02:04:33.240 --> 02:04:35.240]  с самого начала, действительно, мы могли
[02:04:35.240 --> 02:04:37.240]  прибегаться, а просто хранить
[02:04:37.240 --> 02:04:39.240]  собственно этот двиг, правда?
[02:04:39.240 --> 02:04:41.240]  Сейчас, как там это...
[02:04:41.240 --> 02:04:43.240]  Как ты это назвал?
[02:04:43.240 --> 02:04:45.240]  Хранить шифт, хранить вот так?
[02:04:45.240 --> 02:04:47.240]  Шифт хранить. Чего хранить?
[02:04:47.240 --> 02:04:49.240]  Ну пуши, хорошо.
[02:04:49.240 --> 02:04:51.240]  Ну ладно, шифт можно назвать. Шифт.
[02:04:51.240 --> 02:04:53.240]  Вот хранить шифт.
[02:04:53.240 --> 02:04:55.240]  Но тогда у нас получится
[02:04:55.240 --> 02:04:57.240]  штука, тогда у нас получает
[02:04:57.240 --> 02:04:59.240]  нужна опять структура данных, которая умеет
[02:04:59.240 --> 02:05:01.240]  хранить себе сет каких-то элементов,
[02:05:01.240 --> 02:05:03.240]  надо уметь прибавлять одну и ту же константу
[02:05:03.240 --> 02:05:05.240]  ко всем, значит
[02:05:05.240 --> 02:05:07.240]  уменьшать
[02:05:07.240 --> 02:05:09.240]  какую-то штуку
[02:05:09.240 --> 02:05:11.240]  и доставать минимум.
[02:05:11.240 --> 02:05:13.240]  И доставать какие-то
[02:05:13.240 --> 02:05:15.240]  элементы.
[02:05:15.240 --> 02:05:17.240]  Ну, по-моему,
[02:05:17.240 --> 02:05:19.240]  структура данных, умеющая
[02:05:19.240 --> 02:05:21.240]  это делать, называется куча фибоначи.
[02:05:21.240 --> 02:05:23.240]  Ну есть просто куча за е лоб ве,
[02:05:23.240 --> 02:05:25.240]  а куча фибоначи будет это за
[02:05:25.240 --> 02:05:27.240]  е плюс ве лоб ве делать.
[02:05:27.240 --> 02:05:29.240]  Так что в принципе, то есть если
[02:05:29.240 --> 02:05:31.240]  вот очень-очень-очень аккуратно
[02:05:31.240 --> 02:05:33.240]  запилить, то получится
[02:05:33.240 --> 02:05:35.240]  ве на
[02:05:35.240 --> 02:05:37.240]  что-то типа е плюс ве лоб.
[02:05:41.240 --> 02:05:43.240]  Да, то есть надо, ну вот, и там
[02:05:43.240 --> 02:05:45.240]  дальше я сейчас, конечно, не буду
[02:05:45.240 --> 02:05:47.240]  так подробно прописывать, но действительно
[02:05:47.240 --> 02:05:49.240]  на самом деле это можно реализовывать.
[02:05:49.240 --> 02:05:51.240]  То есть, может быть, это тоже можно интерпретировать, как такой
[02:05:51.240 --> 02:05:53.240]  очень красивый мемпост
[02:05:53.240 --> 02:05:55.240]  с каким-нибудь красивым потенциалом.
[02:05:55.240 --> 02:05:57.240]  Знаешь, что-то в этом не уверен.
[02:05:57.240 --> 02:05:59.240]  Хотя всякая.
[02:05:59.240 --> 02:06:01.240]  Так, ну вот, с вингеткой в общем-то и все.
